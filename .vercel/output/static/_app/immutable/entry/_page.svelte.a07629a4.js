import{a0 as prevent_default,a1 as stop_propagation,G as listen,S as SvelteComponent,i as init$1,s as safe_not_equal,e as empty,b as insert_hydration,w as group_outros,d as transition_out,f as check_outros,g as transition_in,h as detach,O as compute_rest_props,a3 as compute_slots,E as assign,Q as exclude_internal_props,P as get_current_component,x as binding_callbacks,n as noop,k as element$1,l as claim_element,m as children,F as set_attributes,a4 as set_input_value,H as action_destroyer,L as get_spread_update,N as run_all,a2 as set_dynamic_element_data,D as create_slot,I as update_slot_base,J as get_all_dirty_from_scope,K as get_slot_changes,z as create_component,A as claim_component,B as mount_component,Z as get_spread_object,C as destroy_component,$ as bubble,r as text,u as claim_text,v as set_data,a as space,c as claim_space,T as setContext,_ as getContext,o as onMount,V as bind,X as add_flush_callback,p as attr,q as set_style,W as append_hydration,a5 as destroy_each,M as is_function,a6 as head_selector,a7 as get_store_value,a8 as createEventDispatcher,a9 as src_url_equal,aa as null_to_empty,y as construct_svelte_component}from"../chunks/index.17362ed5.js";import{B as Button$2}from"../chunks/Button.8759b718.js";import{_,A as Autowired,P as PreConstruct,B as Bean,a as BeanStub,b as PostConstruct,R as RefSelector,C as Component,M as ModuleNames,c as Constants,E as Events,d as ChangedPath,O as Optional,e as CsvExportModule,K as KeyCode,f as Column,g as ProvidedColumnGroup,h as AgMenuList,i as AgMenuItemComponent,j as AgCheckbox,k as CssClassApplier,D as DragSourceType,l as DragAndDropService,T as TouchListener,m as AutoScrollService,V as VirtualList,n as PreDestroy,N as NumberSequence,o as RowNode,p as ManagedFocusFeature,q as PositionableFeature,r as TabGuardComp,s as ModuleRegistry,t as ExcelFactoryMode,u as RowType,v as BaseGridSerializingSession,w as Downloader,x as BaseCreator,G as GridSerializer,y as CsvCreator,z as AgGroupComponent,F as CellRangeType,H as AgAbstractField,I as AgRadioButton,J as AgToggleButton,L as AgSelect,Q as AgSlider,S as TabbedLayout,U as AgPromise,W as CHART_TOOLBAR_ALLOW_LIST,X as CHART_TOOL_PANEL_MENU_OPTIONS,Y as AgPanel,Z as AgDialog,$ as SelectionHandleType,a0 as Grid,a1 as ProvidedFilter,a2 as PopupComponent,a3 as ServerSideTransactionResultStatus,a4 as RowNodeBlock,a5 as Qualifier,a6 as AllCommunityModules,a7 as XmlFactory,a8 as ZipContainer,a9 as AgAngleSelect,aa as DEFAULT_CHART_GROUPS,ab as CHART_TOOL_PANEL_ALLOW_LIST,ac as EventService,ad as Color$2,ae as TextFilter,af as Textfield,ag as Icon,ah as Select$1,ai as QuoteInfo,aj as Client,ak as Option}from"../chunks/ag-grid-community.auto.esm.e939c675.js";import{a as __assign$I,c as classMap,u as useActions,f as forwardEventsBuilder$1,b as classAdderBuilder}from"../chunks/Ripple.5389c5eb.js";import{_ as __vitePreload}from"../chunks/preload-helper.41c905a7.js";import"../chunks/Title.fa9e6f4a.js";import{C as CommonLabel}from"../chunks/CommonLabel.6e3fc271.js";import{w as writable}from"../chunks/index.f658b48a.js";function lowerCase(i){return i.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(i,t){t===void 0&&(t={});for(var e=t.splitRegexp,r=e===void 0?DEFAULT_SPLIT_REGEXP:e,n=t.stripRegexp,o=n===void 0?DEFAULT_STRIP_REGEXP:n,a=t.transform,s=a===void 0?lowerCase:a,l=t.delimiter,u=l===void 0?" ":l,c=replace(replace(i,r,"$1\0$2"),o,"\0"),f=0,d=c.length;c.charAt(f)==="\0";)f++;for(;c.charAt(d-1)==="\0";)d--;return c.slice(f,d).split("\0").map(s).join(u)}function replace(i,t,e){return t instanceof RegExp?i.replace(t,e):t.reduce(function(r,n){return r.replace(n,e)},i)}function dotCase(i,t){return t===void 0&&(t={}),noCase(i,__assign$I({delimiter:"."},t))}function paramCase(i,t){return t===void 0&&(t={}),dotCase(i,__assign$I({delimiter:"-"},t))}const prefix$1="u",classname=(i,t,e,r)=>{i=paramCase(i||""),t=[t].flat(),e=[e].flat();const n=parse(t,r).map(o=>i?`${prefix$1}-${i}-${o}`:`${prefix$1}-${o}`).concat(...parse(e)).filter(o=>o);return i&&n.unshift(`${prefix$1}-${i}`),n.join(" ")||void 0},parse=(i,t)=>{const e=[];for(const r of i)switch(Object.prototype.toString.call(r).replace(/\[|\]|object| /g,"").toLowerCase()){case"array":{console.log("TODO",r);break}case"object":{for(let o in r){const a=r[o];o=paramCase(o),!(typeof a>"u"||a===!1)&&(a===!0?o&&e.push(o):typeof a=="number"||t?o&&e.push(`${o}-${a}`):e.push(a))}break}case"string":{r.split(" ").forEach(o=>e.push(o));break}}return e},regex=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,handler=i=>{document.dispatchEvent(new CustomEvent("UBEAC:EVENTS",{detail:i}))},forwardEventsBuilder=i=>{const t={};return i.$on=(e,r)=>{var n,o;if(`on${e}`.split(":")[0].toLowerCase()in document)return(t[e]||(t[e]=[])).push(r),()=>{};const s=(n=(o=i.$$.callbacks)[e])!==null&&n!==void 0?n:o[e]=[],l=r;return r=u=>(handler(u),l(u)),s.push(r),()=>{const u=s.indexOf(r);u!=-1&&s.splice(u,1)}},e=>{const r=Object.keys(t),n=[];for(let a of r){const s=t[a];for(let l of s){let u=!1;if(a.match(regex)){const d=a.split(":");a=d[0];const h=Object.fromEntries(d.slice(1).map(p=>[p,!0]));h.passive&&(u=u||{},u.passive=!0),h.nonpassive&&(u=u||{},u.passive=!1),h.capture&&(u=u||{},u.capture=!0),h.once&&(u=u||{},u.once=!0),h.preventDefault&&(l=prevent_default(l)),h.stopPropagation&&(l=stop_propagation(l))}const c=listen(e,a,l,u),f=listen(e,a,handler,u);n.push(c,f)}}return{destroy:()=>n.forEach(a=>a())}}};function create_else_block$2(i){let t=i[3],e,r=i[3]&&create_dynamic_element_1(i);return{c(){r&&r.c(),e=empty()},l(n){r&&r.l(n),e=empty()},m(n,o){r&&r.m(n,o),insert_hydration(n,e,o)},p(n,o){n[3]?t?safe_not_equal(t,n[3])?(r.d(1),r=create_dynamic_element_1(n),t=n[3],r.c(),r.m(e.parentNode,e)):r.p(n,o):(r=create_dynamic_element_1(n),t=n[3],r.c(),r.m(e.parentNode,e)):t&&(r.d(1),r=null,t=n[3])},i:noop,o:noop,d(n){n&&detach(e),r&&r.d(n)}}}function create_if_block_2$2(i){let t,e,r,n=[i[6],i[4]],o={};for(let a=0;a<n.length;a+=1)o=assign(o,n[a]);return{c(){t=element$1("textarea"),this.h()},l(a){t=claim_element(a,"TEXTAREA",{}),children(t).forEach(detach),this.h()},h(){set_attributes(t,o)},m(a,s){insert_hydration(a,t,s),t.autofocus&&t.focus(),i[130](t),set_input_value(t,i[1]),e||(r=[action_destroyer(i[2].call(null,t)),listen(t,"input",i[131])],e=!0)},p(a,s){set_attributes(t,o=get_spread_update(n,[s[0]&64&&a[6],s[0]&16&&a[4]])),s[0]&2&&set_input_value(t,a[1])},i:noop,o:noop,d(a){a&&detach(t),i[130](null),e=!1,run_all(r)}}}function create_if_block_1$7(i){let t,e,r,n=[i[6],i[4]],o={};for(let a=0;a<n.length;a+=1)o=assign(o,n[a]);return{c(){t=element$1("input"),this.h()},l(a){t=claim_element(a,"INPUT",{}),this.h()},h(){set_attributes(t,o)},m(a,s){insert_hydration(a,t,s),t.autofocus&&t.focus(),i[128](t),set_input_value(t,i[1]),e||(r=[action_destroyer(i[2].call(null,t)),listen(t,"input",i[129])],e=!0)},p(a,s){set_attributes(t,o=get_spread_update(n,[s[0]&64&&a[6],s[0]&16&&a[4]])),s[0]&2&&t.value!==a[1]&&set_input_value(t,a[1])},i:noop,o:noop,d(a){a&&detach(t),i[128](null),e=!1,run_all(r)}}}function create_if_block$e(i){let t=i[3],e,r,n=i[3]&&create_dynamic_element$1(i);return{c(){n&&n.c(),e=empty()},l(o){n&&n.l(o),e=empty()},m(o,a){n&&n.m(o,a),insert_hydration(o,e,a),r=!0},p(o,a){o[3]?t?safe_not_equal(t,o[3])?(n.d(1),n=create_dynamic_element$1(o),t=o[3],n.c(),n.m(e.parentNode,e)):n.p(o,a):(n=create_dynamic_element$1(o),t=o[3],n.c(),n.m(e.parentNode,e)):t&&(n.d(1),n=null,t=o[3])},i(o){r||(transition_in(n),r=!0)},o(o){transition_out(n),r=!1},d(o){o&&detach(e),n&&n.d(o)}}}function create_dynamic_element_1(i){let t,e,r,n=[i[6],i[4]],o={};for(let a=0;a<n.length;a+=1)o=assign(o,n[a]);return{c(){t=element$1(i[3]),this.h()},l(a){t=claim_element(a,(i[3]||"null").toUpperCase(),{}),children(t).forEach(detach),this.h()},h(){set_dynamic_element_data(i[3])(t,o)},m(a,s){insert_hydration(a,t,s),i[132](t),e||(r=action_destroyer(i[2].call(null,t)),e=!0)},p(a,s){set_dynamic_element_data(a[3])(t,o=get_spread_update(n,[s[0]&64&&a[6],s[0]&16&&a[4]]))},d(a){a&&detach(t),i[132](null),e=!1,r()}}}function create_dynamic_element$1(i){let t,e,r,n;const o=i[126].default,a=create_slot(o,i,i[125],null);let s=[i[6],i[4]],l={};for(let u=0;u<s.length;u+=1)l=assign(l,s[u]);return{c(){t=element$1(i[3]),a&&a.c(),this.h()},l(u){t=claim_element(u,(i[3]||"null").toUpperCase(),{});var c=children(t);a&&a.l(c),c.forEach(detach),this.h()},h(){set_dynamic_element_data(i[3])(t,l)},m(u,c){insert_hydration(u,t,c),a&&a.m(t,null),i[127](t),e=!0,r||(n=action_destroyer(i[2].call(null,t)),r=!0)},p(u,c){a&&a.p&&(!e||c[4]&2)&&update_slot_base(a,o,u,u[125],e?get_slot_changes(o,u[125],c,null):get_all_dirty_from_scope(u[125]),null),set_dynamic_element_data(u[3])(t,l=get_spread_update(s,[c[0]&64&&u[6],c[0]&16&&u[4]]))},i(u){e||(transition_in(a,u),e=!0)},o(u){transition_out(a,u),e=!1},d(u){u&&detach(t),a&&a.d(u),i[127](null),r=!1,n()}}}function create_fragment$B(i){let t,e,r,n;const o=[create_if_block$e,create_if_block_1$7,create_if_block_2$2,create_else_block$2],a=[];function s(l,u){return l[5].default?0:l[3]==="input"?1:l[3]==="textarea"?2:3}return t=s(i),e=a[t]=o[t](i),{c(){e.c(),r=empty()},l(l){e.l(l),r=empty()},m(l,u){a[t].m(l,u),insert_hydration(l,r,u),n=!0},p(l,u){let c=t;t=s(l),t===c?a[t].p(l,u):(group_outros(),transition_out(a[c],1,1,()=>{a[c]=null}),check_outros(),e=a[t],e?e.p(l,u):(e=a[t]=o[t](l),e.c()),transition_in(e,1),e.m(r.parentNode,r))},i(l){n||(transition_in(e),n=!0)},o(l){transition_out(e),n=!1},d(l){a[t].d(l),l&&detach(r)}}}let globalCounter=0,defaultCssPrefix="el";function instance$B(i,t,e){const r=["element","cssPrefix","id","style","tag","cssProps","value","bgColor","bgGradient","bgOpacity","textOpacity","border","borderTop","borderStart","borderEnd","borderBottom","borderColor","borderRadius","borderRoundSize","borderOpacity","p","pt","pb","ps","pe","px","py","m","mt","mb","ms","me","mx","my","gap","clearfix","ratio","sticky","fixed","d","dSm","dMd","dLg","dXl","dXxl","dPrint","shadow","w","h","mw","mh","position","top","start","bottom","end","vAlign","textColor","textAlign","textAlignSm","textAlignMd","textAlignLg","textAlignXl","textWrap","textTransform","textDecoration","lineHeight","textMuted","textLead","textHeading","textTruncate","fontSize","fontWeight","fontStyle","hidden","float","floatSm","floatMd","floatLg","floatXl","floatXxl","container","col","colSm","colMd","colLg","colXl","colXxl","order","orderSm","orderMd","orderLg","orderXl","orderXxl","offset","offsetSm","offsetMd","offsetLg","offsetXl","offsetXxl","row","rowCols","rowColsSm","rowColsMd","rowColsLg","rowColsXl","rowColsXxl","g","gSm","gMd","gLg","gXl","gXxl","gx","gy","alignItems","alignSelf","justifyContent","tabindex","forwardEvents"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t;const s=compute_slots(o);let{element:l=void 0}=t,{cssPrefix:u="el"}=t,{id:c=u+"_"+globalCounter++}=t,{style:f=void 0}=t,{tag:d="div"}=t,{cssProps:h={}}=t,{value:p=void 0}=t,{bgColor:g=void 0}=t,{bgGradient:v=void 0}=t,{bgOpacity:m=void 0}=t,{textOpacity:y=void 0}=t,{border:b=void 0}=t,{borderTop:C=void 0}=t,{borderStart:x=void 0}=t,{borderEnd:w=void 0}=t,{borderBottom:P=void 0}=t,{borderColor:S=void 0}=t,{borderRadius:O=void 0}=t,{borderRoundSize:E=void 0}=t,{borderOpacity:D=void 0}=t,{p:R=void 0}=t,{pt:F=void 0}=t,{pb:I=void 0}=t,{ps:$=void 0}=t,{pe:B=void 0}=t,{px:V=void 0}=t,{py:G=void 0}=t,{m:U=void 0}=t,{mt:H=void 0}=t,{mb:N=void 0}=t,{ms:j=void 0}=t,{me:W=void 0}=t,{mx:z=void 0}=t,{my:K=void 0}=t,{gap:X=void 0}=t,{clearfix:q=void 0}=t,{ratio:Z=void 0}=t,{sticky:ee=void 0}=t,{fixed:ue=void 0}=t,{d:ne=void 0}=t,{dSm:Q=void 0}=t,{dMd:ie=void 0}=t,{dLg:se=void 0}=t,{dXl:ae=void 0}=t,{dXxl:oe=void 0}=t,{dPrint:fe=void 0}=t,{shadow:le=void 0}=t,{w:Y=void 0}=t,{h:re=void 0}=t,{mw:he=void 0}=t,{mh:de=void 0}=t,{position:ve=void 0}=t,{top:me=void 0}=t,{start:ye=void 0}=t,{bottom:xe=void 0}=t,{end:J=void 0}=t,{vAlign:ce=void 0}=t,{textColor:Ce=void 0}=t,{textAlign:pe=void 0}=t,{textAlignSm:Te=void 0}=t,{textAlignMd:Ae=void 0}=t,{textAlignLg:Oe=void 0}=t,{textAlignXl:we=void 0}=t,{textWrap:_e=void 0}=t,{textTransform:Pe=void 0}=t,{textDecoration:De=void 0}=t,{lineHeight:Me=void 0}=t,{textMuted:$e=void 0}=t,{textLead:Ie=void 0}=t,{textHeading:Fe=void 0}=t,{textTruncate:Le=void 0}=t,{fontSize:ke=void 0}=t,{fontWeight:Ne=void 0}=t,{fontStyle:Be=void 0}=t,{hidden:Ge=void 0}=t,{float:Ve=void 0}=t,{floatSm:je=void 0}=t,{floatMd:We=void 0}=t,{floatLg:He=void 0}=t,{floatXl:Ue=void 0}=t,{floatXxl:ze=void 0}=t,{container:Ke=void 0}=t,{col:Xe=void 0}=t,{colSm:Ye=void 0}=t,{colMd:qe=void 0}=t,{colLg:Ze=void 0}=t,{colXl:Je=void 0}=t,{colXxl:Qe=void 0}=t,{order:et=void 0}=t,{orderSm:tt=void 0}=t,{orderMd:rt=void 0}=t,{orderLg:T=void 0}=t,{orderXl:M=void 0}=t,{orderXxl:k=void 0}=t,{offset:A=void 0}=t,{offsetSm:Se=void 0}=t,{offsetMd:te=void 0}=t,{offsetLg:ge=void 0}=t,{offsetXl:be=void 0}=t,{offsetXxl:Ee=void 0}=t,{row:Re=void 0}=t,{rowCols:it=void 0}=t,{rowColsSm:ot=void 0}=t,{rowColsMd:at=void 0}=t,{rowColsLg:st=void 0}=t,{rowColsXl:lt=void 0}=t,{rowColsXxl:ut=void 0}=t,{g:ct=void 0}=t,{gSm:ft=void 0}=t,{gMd:dt=void 0}=t,{gLg:ht=void 0}=t,{gXl:pt=void 0}=t,{gXxl:gt=void 0}=t,{gx:vt=void 0}=t,{gy:mt=void 0}=t,{alignItems:yt=void 0}=t,{alignSelf:_t=void 0}=t,{justifyContent:bt=void 0}=t,{tabindex:Ct=void 0}=t,{forwardEvents:St=()=>({})}=t,nt,xt,wt={};function Ot(L){binding_callbacks[L?"unshift":"push"](()=>{l=L,e(0,l)})}function Pt(L){binding_callbacks[L?"unshift":"push"](()=>{l=L,e(0,l)})}function Tt(){p=this.value,e(1,p)}function Et(L){binding_callbacks[L?"unshift":"push"](()=>{l=L,e(0,l)})}function At(){p=this.value,e(1,p)}function Dt(L){binding_callbacks[L?"unshift":"push"](()=>{l=L,e(0,l)})}return i.$$set=L=>{e(133,t=assign(assign({},t),exclude_internal_props(L))),e(6,n=compute_rest_props(t,r)),"element"in L&&e(0,l=L.element),"cssPrefix"in L&&e(7,u=L.cssPrefix),"id"in L&&e(8,c=L.id),"style"in L&&e(9,f=L.style),"tag"in L&&e(3,d=L.tag),"cssProps"in L&&e(10,h=L.cssProps),"value"in L&&e(1,p=L.value),"bgColor"in L&&e(11,g=L.bgColor),"bgGradient"in L&&e(12,v=L.bgGradient),"bgOpacity"in L&&e(13,m=L.bgOpacity),"textOpacity"in L&&e(14,y=L.textOpacity),"border"in L&&e(15,b=L.border),"borderTop"in L&&e(16,C=L.borderTop),"borderStart"in L&&e(17,x=L.borderStart),"borderEnd"in L&&e(18,w=L.borderEnd),"borderBottom"in L&&e(19,P=L.borderBottom),"borderColor"in L&&e(20,S=L.borderColor),"borderRadius"in L&&e(21,O=L.borderRadius),"borderRoundSize"in L&&e(22,E=L.borderRoundSize),"borderOpacity"in L&&e(23,D=L.borderOpacity),"p"in L&&e(24,R=L.p),"pt"in L&&e(25,F=L.pt),"pb"in L&&e(26,I=L.pb),"ps"in L&&e(27,$=L.ps),"pe"in L&&e(28,B=L.pe),"px"in L&&e(29,V=L.px),"py"in L&&e(30,G=L.py),"m"in L&&e(31,U=L.m),"mt"in L&&e(32,H=L.mt),"mb"in L&&e(33,N=L.mb),"ms"in L&&e(34,j=L.ms),"me"in L&&e(35,W=L.me),"mx"in L&&e(36,z=L.mx),"my"in L&&e(37,K=L.my),"gap"in L&&e(38,X=L.gap),"clearfix"in L&&e(39,q=L.clearfix),"ratio"in L&&e(40,Z=L.ratio),"sticky"in L&&e(41,ee=L.sticky),"fixed"in L&&e(42,ue=L.fixed),"d"in L&&e(43,ne=L.d),"dSm"in L&&e(44,Q=L.dSm),"dMd"in L&&e(45,ie=L.dMd),"dLg"in L&&e(46,se=L.dLg),"dXl"in L&&e(47,ae=L.dXl),"dXxl"in L&&e(48,oe=L.dXxl),"dPrint"in L&&e(49,fe=L.dPrint),"shadow"in L&&e(50,le=L.shadow),"w"in L&&e(51,Y=L.w),"h"in L&&e(52,re=L.h),"mw"in L&&e(53,he=L.mw),"mh"in L&&e(54,de=L.mh),"position"in L&&e(55,ve=L.position),"top"in L&&e(56,me=L.top),"start"in L&&e(57,ye=L.start),"bottom"in L&&e(58,xe=L.bottom),"end"in L&&e(59,J=L.end),"vAlign"in L&&e(60,ce=L.vAlign),"textColor"in L&&e(61,Ce=L.textColor),"textAlign"in L&&e(62,pe=L.textAlign),"textAlignSm"in L&&e(63,Te=L.textAlignSm),"textAlignMd"in L&&e(64,Ae=L.textAlignMd),"textAlignLg"in L&&e(65,Oe=L.textAlignLg),"textAlignXl"in L&&e(66,we=L.textAlignXl),"textWrap"in L&&e(67,_e=L.textWrap),"textTransform"in L&&e(68,Pe=L.textTransform),"textDecoration"in L&&e(69,De=L.textDecoration),"lineHeight"in L&&e(70,Me=L.lineHeight),"textMuted"in L&&e(71,$e=L.textMuted),"textLead"in L&&e(72,Ie=L.textLead),"textHeading"in L&&e(73,Fe=L.textHeading),"textTruncate"in L&&e(74,Le=L.textTruncate),"fontSize"in L&&e(75,ke=L.fontSize),"fontWeight"in L&&e(76,Ne=L.fontWeight),"fontStyle"in L&&e(77,Be=L.fontStyle),"hidden"in L&&e(78,Ge=L.hidden),"float"in L&&e(79,Ve=L.float),"floatSm"in L&&e(80,je=L.floatSm),"floatMd"in L&&e(81,We=L.floatMd),"floatLg"in L&&e(82,He=L.floatLg),"floatXl"in L&&e(83,Ue=L.floatXl),"floatXxl"in L&&e(84,ze=L.floatXxl),"container"in L&&e(85,Ke=L.container),"col"in L&&e(86,Xe=L.col),"colSm"in L&&e(87,Ye=L.colSm),"colMd"in L&&e(88,qe=L.colMd),"colLg"in L&&e(89,Ze=L.colLg),"colXl"in L&&e(90,Je=L.colXl),"colXxl"in L&&e(91,Qe=L.colXxl),"order"in L&&e(92,et=L.order),"orderSm"in L&&e(93,tt=L.orderSm),"orderMd"in L&&e(94,rt=L.orderMd),"orderLg"in L&&e(95,T=L.orderLg),"orderXl"in L&&e(96,M=L.orderXl),"orderXxl"in L&&e(97,k=L.orderXxl),"offset"in L&&e(98,A=L.offset),"offsetSm"in L&&e(99,Se=L.offsetSm),"offsetMd"in L&&e(100,te=L.offsetMd),"offsetLg"in L&&e(101,ge=L.offsetLg),"offsetXl"in L&&e(102,be=L.offsetXl),"offsetXxl"in L&&e(103,Ee=L.offsetXxl),"row"in L&&e(104,Re=L.row),"rowCols"in L&&e(105,it=L.rowCols),"rowColsSm"in L&&e(106,ot=L.rowColsSm),"rowColsMd"in L&&e(107,at=L.rowColsMd),"rowColsLg"in L&&e(108,st=L.rowColsLg),"rowColsXl"in L&&e(109,lt=L.rowColsXl),"rowColsXxl"in L&&e(110,ut=L.rowColsXxl),"g"in L&&e(111,ct=L.g),"gSm"in L&&e(112,ft=L.gSm),"gMd"in L&&e(113,dt=L.gMd),"gLg"in L&&e(114,ht=L.gLg),"gXl"in L&&e(115,pt=L.gXl),"gXxl"in L&&e(116,gt=L.gXxl),"gx"in L&&e(117,vt=L.gx),"gy"in L&&e(118,mt=L.gy),"alignItems"in L&&e(119,yt=L.alignItems),"alignSelf"in L&&e(120,_t=L.alignSelf),"justifyContent"in L&&e(121,bt=L.justifyContent),"tabindex"in L&&e(122,Ct=L.tabindex),"forwardEvents"in L&&e(2,St=L.forwardEvents),"$$scope"in L&&e(125,a=L.$$scope)},i.$$.update=()=>{e(2,St=forwardEventsBuilder(get_current_component())),e(124,xt={bgColor:g,bgGradient:v,bgOpacity:m,border:b,borderTop:C,borderStart:x,borderEnd:w,borderBottom:P,borderColor:S,borderRadius:O,borderRoundSize:E,borderOpacity:D,p:R,pt:F,pb:I,ps:$,pe:B,px:V,py:G,m:U,mt:H,mb:N,ms:j,me:W,mx:z,my:K,gap:X,clearfix:q,ratio:Z,sticky:ee,fixed:ue,d:ne,dSm:Q,dMd:ie,dLg:se,dXl:ae,dXxl:oe,dPrint:fe,shadow:le,w:Y,h:re,mw:he,mh:de,position:ve,top:me,start:ye,bottom:xe,end:J,vAlign:ce,textColor:Ce,textAlign:pe,textAlignSm:Te,textAlignMd:Ae,textAlignLg:Oe,textAlignXl:we,textWrap:_e,textTransform:Pe,textDecoration:De,lineHeight:Me,textMuted:$e,textLead:Ie,textHeading:Fe,textTruncate:Le,textOpacity:y,fontSize:ke,fontWeight:Ne,fontStyle:Be,hidden:Ge,float:Ve,floatSm:je,floatMd:We,floatLg:He,floatXl:Ue,floatXxl:ze,container:Ke,col:Xe,colSm:Ye,colMd:qe,colLg:Ze,colXl:Je,colXxl:Qe,order:et,orderSm:tt,orderMd:rt,orderLg:T,orderXl:M,orderXxl:k,offset:A,offsetSm:Se,offsetMd:te,offsetLg:ge,offsetXl:be,offsetXxl:Ee,row:Re,rowCols:it,rowColsSm:ot,rowColsMd:at,rowColsLg:st,rowColsXl:lt,rowColsXxl:ut,g:ct,gSm:ft,gMd:dt,gLg:ht,gXl:pt,gXxl:gt,gx:vt,gy:mt,alignItems:yt,alignSelf:_t,justifyContent:bt}),e(123,nt=classname(defaultCssPrefix,xt,"",!0)),u&&e(123,nt+=" "+classname(u,h,t.class,!0)),e(4,wt={id:c,class:nt,style:f,tabindex:Ct})},t=exclude_internal_props(t),[l,p,St,d,wt,s,n,u,c,f,h,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U,H,N,j,W,z,K,X,q,Z,ee,ue,ne,Q,ie,se,ae,oe,fe,le,Y,re,he,de,ve,me,ye,xe,J,ce,Ce,pe,Te,Ae,Oe,we,_e,Pe,De,Me,$e,Ie,Fe,Le,ke,Ne,Be,Ge,Ve,je,We,He,Ue,ze,Ke,Xe,Ye,qe,Ze,Je,Qe,et,tt,rt,T,M,k,A,Se,te,ge,be,Ee,Re,it,ot,at,st,lt,ut,ct,ft,dt,ht,pt,gt,vt,mt,yt,_t,bt,Ct,nt,xt,a,o,Ot,Pt,Tt,Et,At,Dt]}class El extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$B,create_fragment$B,safe_not_equal,{element:0,cssPrefix:7,id:8,style:9,tag:3,cssProps:10,value:1,bgColor:11,bgGradient:12,bgOpacity:13,textOpacity:14,border:15,borderTop:16,borderStart:17,borderEnd:18,borderBottom:19,borderColor:20,borderRadius:21,borderRoundSize:22,borderOpacity:23,p:24,pt:25,pb:26,ps:27,pe:28,px:29,py:30,m:31,mt:32,mb:33,ms:34,me:35,mx:36,my:37,gap:38,clearfix:39,ratio:40,sticky:41,fixed:42,d:43,dSm:44,dMd:45,dLg:46,dXl:47,dXxl:48,dPrint:49,shadow:50,w:51,h:52,mw:53,mh:54,position:55,top:56,start:57,bottom:58,end:59,vAlign:60,textColor:61,textAlign:62,textAlignSm:63,textAlignMd:64,textAlignLg:65,textAlignXl:66,textWrap:67,textTransform:68,textDecoration:69,lineHeight:70,textMuted:71,textLead:72,textHeading:73,textTruncate:74,fontSize:75,fontWeight:76,fontStyle:77,hidden:78,float:79,floatSm:80,floatMd:81,floatLg:82,floatXl:83,floatXxl:84,container:85,col:86,colSm:87,colMd:88,colLg:89,colXl:90,colXxl:91,order:92,orderSm:93,orderMd:94,orderLg:95,orderXl:96,orderXxl:97,offset:98,offsetSm:99,offsetMd:100,offsetLg:101,offsetXl:102,offsetXxl:103,row:104,rowCols:105,rowColsSm:106,rowColsMd:107,rowColsLg:108,rowColsXl:109,rowColsXxl:110,g:111,gSm:112,gMd:113,gLg:114,gXl:115,gXxl:116,gx:117,gy:118,alignItems:119,alignSelf:120,justifyContent:121,tabindex:122,forwardEvents:2},null,[-1,-1,-1,-1,-1])}}const El$1=El;function create_if_block$d(i){let t;return{c(){t=text(i[0])},l(e){t=claim_text(e,i[0])},m(e,r){insert_hydration(e,t,r)},p(e,r){r&1&&set_data(t,e[0])},d(e){e&&detach(t)}}}function fallback_block$1(i){let t,e=i[0]&&create_if_block$d(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,n){r[0]?e?e.p(r,n):(e=create_if_block$d(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(r){e&&e.d(r),r&&detach(t)}}}function create_default_slot$k(i){let t;const e=i[18].default,r=create_slot(e,i,i[20],null),n=r||fallback_block$1(i);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,a){n&&n.m(o,a),t=!0},p(o,a){r?r.p&&(!t||a&1048576)&&update_slot_base(r,e,o,o[20],t?get_slot_changes(e,o[20],a,null):get_all_dirty_from_scope(o[20]),null):n&&n.p&&(!t||a&1)&&n.p(o,t?a:-1)},i(o){t||(transition_in(n,o),t=!0)},o(o){transition_out(n,o),t=!1},d(o){n&&n.d(o)}}}function create_fragment$A(i){let t,e;const r=[i[3],{cssProps:i[1]},i[2]];let n={$$slots:{default:[create_default_slot$k]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),t.$on("click",i[19]),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&14?get_spread_update(r,[a&8&&get_spread_object(o[3]),a&2&&{cssProps:o[1]},a&4&&get_spread_object(o[2])]):{};a&1048577&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$A(i,t,e){const r=["outline","href","cssPrefix","tag","type","value","size","toggle","color","ghost","loading","active","disabled","pill","tile"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{outline:s=void 0}=t,{href:l=void 0}=t,{cssPrefix:u="button"}=t,{tag:c="button"}=t,{type:f=void 0}=t,{value:d=void 0}=t,{size:h=void 0}=t,{toggle:p=void 0}=t,{color:g=void 0}=t,{ghost:v=void 0}=t,{loading:m=void 0}=t,{active:y=void 0}=t,{disabled:b=void 0}=t,{pill:C=void 0}=t,{tile:x=void 0}=t,w={},P={};function S(O){bubble.call(this,i,O)}return i.$$set=O=>{t=assign(assign({},t),exclude_internal_props(O)),e(3,n=compute_rest_props(t,r)),"outline"in O&&e(4,s=O.outline),"href"in O&&e(5,l=O.href),"cssPrefix"in O&&e(6,u=O.cssPrefix),"tag"in O&&e(7,c=O.tag),"type"in O&&e(8,f=O.type),"value"in O&&e(0,d=O.value),"size"in O&&e(9,h=O.size),"toggle"in O&&e(10,p=O.toggle),"color"in O&&e(11,g=O.color),"ghost"in O&&e(12,v=O.ghost),"loading"in O&&e(13,m=O.loading),"active"in O&&e(14,y=O.active),"disabled"in O&&e(15,b=O.disabled),"pill"in O&&e(16,C=O.pill),"tile"in O&&e(17,x=O.tile),"$$scope"in O&&e(20,a=O.$$scope)},i.$$.update=()=>{i.$$.dirty&262128&&(e(1,w={color:g,outline:s,size:h,toggle:p,ghost:v,loading:m,active:y,disabled:b,pill:C,tile:x}),e(2,P={tag:l?"a":c,cssPrefix:u,role:"button",type:f??"button",href:l}))},[d,w,P,n,s,l,u,c,f,h,p,g,v,m,y,b,C,x,o,S,a]}class Button extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$A,create_fragment$A,safe_not_equal,{outline:4,href:5,cssPrefix:6,tag:7,type:8,value:0,size:9,toggle:10,color:11,ghost:12,loading:13,active:14,disabled:15,pill:16,tile:17})}}const Button$1=Button;function create_if_block_1$6(i){let t,e;return t=new El$1({props:{cssPrefix:i[0],cssProps:i[5]}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&1&&(o.cssPrefix=r[0]),n&32&&(o.cssProps=r[5]),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_if_block$c(i){let t,e;return t=new CardHeader$1({props:{$$slots:{default:[create_default_slot_1$8]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&262146&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_2$5(i){let t;return{c(){t=text(i[1])},l(e){t=claim_text(e,i[1])},m(e,r){insert_hydration(e,t,r)},p(e,r){r&2&&set_data(t,e[1])},d(e){e&&detach(t)}}}function create_default_slot_1$8(i){let t,e;return t=new CardTitle$1({props:{$$slots:{default:[create_default_slot_2$5]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&262146&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot$j(i){let t,e,r,n=i[2]&&create_if_block_1$6(i),o=i[1]&&create_if_block$c(i);const a=i[17].default,s=create_slot(a,i,i[18],null);return{c(){n&&n.c(),t=space(),o&&o.c(),e=space(),s&&s.c()},l(l){n&&n.l(l),t=claim_space(l),o&&o.l(l),e=claim_space(l),s&&s.l(l)},m(l,u){n&&n.m(l,u),insert_hydration(l,t,u),o&&o.m(l,u),insert_hydration(l,e,u),s&&s.m(l,u),r=!0},p(l,u){l[2]?n?(n.p(l,u),u&4&&transition_in(n,1)):(n=create_if_block_1$6(l),n.c(),transition_in(n,1),n.m(t.parentNode,t)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()),l[1]?o?(o.p(l,u),u&2&&transition_in(o,1)):(o=create_if_block$c(l),o.c(),transition_in(o,1),o.m(e.parentNode,e)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),s&&s.p&&(!r||u&262144)&&update_slot_base(s,a,l,l[18],r?get_slot_changes(a,l[18],u,null):get_all_dirty_from_scope(l[18]),null)},i(l){r||(transition_in(n),transition_in(o),transition_in(s,l),r=!0)},o(l){transition_out(n),transition_out(o),transition_out(s,l),r=!1},d(l){n&&n.d(l),l&&detach(t),o&&o.d(l),l&&detach(e),s&&s.d(l)}}}function create_fragment$z(i){let t,e;const r=[i[6],{cssProps:i[3]},i[4]];let n={$$slots:{default:[create_default_slot$j]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&88?get_spread_update(r,[a&64&&get_spread_object(o[6]),a&8&&{cssProps:o[3]},a&16&&get_spread_object(o[4])]):{};a&262183&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$z(i,t,e){const r=["cssPrefix","statusCssPrefix","title","stacked","statusColor","statusPosition","statusSize","status","bgColor","borderless","rotate","state","size"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="card"}=t,{statusCssPrefix:l="card-status"}=t,{title:u=void 0}=t,{stacked:c=void 0}=t,{statusColor:f="primary"}=t,{statusPosition:d="top"}=t,{statusSize:h="md"}=t,{status:p=void 0}=t,{bgColor:g=void 0}=t,{borderless:v=void 0}=t,{rotate:m=void 0}=t,{state:y=void 0}=t,{size:b=void 0}=t,C={},x={},w={};return i.$$set=P=>{t=assign(assign({},t),exclude_internal_props(P)),e(6,n=compute_rest_props(t,r)),"cssPrefix"in P&&e(7,s=P.cssPrefix),"statusCssPrefix"in P&&e(0,l=P.statusCssPrefix),"title"in P&&e(1,u=P.title),"stacked"in P&&e(8,c=P.stacked),"statusColor"in P&&e(9,f=P.statusColor),"statusPosition"in P&&e(10,d=P.statusPosition),"statusSize"in P&&e(11,h=P.statusSize),"status"in P&&e(2,p=P.status),"bgColor"in P&&e(12,g=P.bgColor),"borderless"in P&&e(13,v=P.borderless),"rotate"in P&&e(14,m=P.rotate),"state"in P&&e(15,y=P.state),"size"in P&&e(16,b=P.size),"$$scope"in P&&e(18,a=P.$$scope)},i.$$.update=()=>{i.$$.dirty&130944&&(e(3,C={stacked:c,bgColor:g,borderless:v,rotate:m,state:y,size:b}),e(4,x={cssPrefix:s}),e(5,w={size:h,position:d,color:f}))},[l,u,p,C,x,w,n,s,c,f,d,h,g,v,m,y,b,o,a]}let Card$1=class extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$z,create_fragment$z,safe_not_equal,{cssPrefix:7,statusCssPrefix:0,title:1,stacked:8,statusColor:9,statusPosition:10,statusSize:11,status:2,bgColor:12,borderless:13,rotate:14,state:15,size:16})}};const Card$2=Card$1;function create_default_slot$i(i){let t;const e=i[4].default,r=create_slot(e,i,i[5],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&32)&&update_slot_base(r,e,n,n[5],t?get_slot_changes(e,n[5],o,null):get_all_dirty_from_scope(n[5]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$y(i){let t,e;const r=[i[2],{cssProps:i[1]},{cssPrefix:i[0]}];let n={$$slots:{default:[create_default_slot$i]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&2&&{cssProps:o[1]},a&1&&{cssPrefix:o[0]}]):{};a&32&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$y(i,t,e){const r=["cssPrefix","light"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="card-header"}=t,{light:l=void 0}=t,u={};return i.$$set=c=>{t=assign(assign({},t),exclude_internal_props(c)),e(2,n=compute_rest_props(t,r)),"cssPrefix"in c&&e(0,s=c.cssPrefix),"light"in c&&e(3,l=c.light),"$$scope"in c&&e(5,a=c.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&e(1,u={light:l})},[s,u,n,l,o,a]}class CardHeader extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$y,create_fragment$y,safe_not_equal,{cssPrefix:0,light:3})}}const CardHeader$1=CardHeader;function create_default_slot$h(i){let t;const e=i[2].default,r=create_slot(e,i,i[3],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&8)&&update_slot_base(r,e,n,n[3],t?get_slot_changes(e,n[3],o,null):get_all_dirty_from_scope(n[3]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$x(i){let t,e;const r=[i[1],{cssPrefix:i[0]}];let n={$$slots:{default:[create_default_slot$h]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&3?get_spread_update(r,[a&2&&get_spread_object(o[1]),a&1&&{cssPrefix:o[0]}]):{};a&8&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$x(i,t,e){const r=["cssPrefix"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="card-title"}=t;return i.$$set=l=>{t=assign(assign({},t),exclude_internal_props(l)),e(1,n=compute_rest_props(t,r)),"cssPrefix"in l&&e(0,s=l.cssPrefix),"$$scope"in l&&e(3,a=l.$$scope)},[s,n,o,a]}class CardTitle extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$x,create_fragment$x,safe_not_equal,{cssPrefix:0})}}const CardTitle$1=CardTitle;function create_default_slot_1$7(i){let t;const e=i[15].default,r=create_slot(e,i,i[17],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&131072)&&update_slot_base(r,e,n,n[17],t?get_slot_changes(e,n[17],o,null):get_all_dirty_from_scope(n[17]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_default_slot$g(i){let t,e;return t=new El$1({props:{cssPrefix:i[2]+"-container",$$slots:{default:[create_default_slot_1$7]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&4&&(o.cssPrefix=r[2]+"-container"),n&131072&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_if_block$b(i){let t,e;return t=new El$1({props:{cssPrefix:i[2]+"-backdrop",cssProps:{open:i[0],absolute:i[4]}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&4&&(o.cssPrefix=r[2]+"-backdrop"),n&17&&(o.cssProps={open:r[0],absolute:r[4]}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_fragment$w(i){let t,e,r,n;const o=[i[7],{tag:i[3]},{cssPrefix:i[2]},{cssProps:i[5]}];let a={$$slots:{default:[create_default_slot$g]},$$scope:{ctx:i}};for(let l=0;l<o.length;l+=1)a=assign(a,o[l]);t=new El$1({props:a}),t.$on("click",i[16]);let s=i[1]&&create_if_block$b(i);return{c(){create_component(t.$$.fragment),e=space(),s&&s.c(),r=empty()},l(l){claim_component(t.$$.fragment,l),e=claim_space(l),s&&s.l(l),r=empty()},m(l,u){mount_component(t,l,u),insert_hydration(l,e,u),s&&s.m(l,u),insert_hydration(l,r,u),n=!0},p(l,[u]){const c=u&172?get_spread_update(o,[u&128&&get_spread_object(l[7]),u&8&&{tag:l[3]},u&4&&{cssPrefix:l[2]},u&32&&{cssProps:l[5]}]):{};u&131076&&(c.$$scope={dirty:u,ctx:l}),t.$set(c),l[1]?s?(s.p(l,u),u&2&&transition_in(s,1)):(s=create_if_block$b(l),s.c(),transition_in(s,1),s.m(r.parentNode,r)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(l){n||(transition_in(t.$$.fragment,l),transition_in(s),n=!0)},o(l){transition_out(t.$$.fragment,l),transition_out(s),n=!1},d(l){destroy_component(t,l),l&&detach(e),s&&s.d(l),l&&detach(r)}}}function instance$w(i,t,e){let r;const n=["backdrop","cssPrefix","tag","absolute","open","persistent","placement","scrollable","size"];let o=compute_rest_props(t,n),{$$slots:a={},$$scope:s}=t;var l,u,c;let{backdrop:f=!0}=t,{cssPrefix:d="dialog"}=t,{tag:h="div"}=t,{absolute:p=void 0}=t,{open:g=void 0}=t,{persistent:v=void 0}=t,{placement:m="top"}=t,{scrollable:y=void 0}=t,{size:b="md"}=t;function C(w=!1){!w&&v||e(0,g=!1)}setContext("DIALOG",{hide:C});const x=()=>C();return i.$$set=w=>{t=assign(assign({},t),exclude_internal_props(w)),e(7,o=compute_rest_props(t,n)),"backdrop"in w&&e(1,f=w.backdrop),"cssPrefix"in w&&e(2,d=w.cssPrefix),"tag"in w&&e(3,h=w.tag),"absolute"in w&&e(4,p=w.absolute),"open"in w&&e(0,g=w.open),"persistent"in w&&e(8,v=w.persistent),"placement"in w&&e(9,m=w.placement),"scrollable"in w&&e(10,y=w.scrollable),"size"in w&&e(11,b=w.size),"$$scope"in w&&e(17,s=w.$$scope)},i.$$.update=()=>{i.$$.dirty&28673&&typeof window<"u"&&(g?document.body.classList.add(e(12,l=classname("body-dialog-open"))!==null&&l!==void 0?l:""):document.body.classList.contains(e(13,u=classname("body-dialog-open"))!==null&&u!==void 0?u:"")&&document.body.classList.remove(e(14,c=classname("body-dialog-open"))!==null&&c!==void 0?c:"")),i.$$.dirty&3601&&e(5,r={placement:m,scrollable:y,size:b,open:g,absolute:p})},[g,f,d,h,p,r,C,o,v,m,y,b,l,u,c,a,x,s]}class Dialog extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$w,create_fragment$w,safe_not_equal,{backdrop:1,cssPrefix:2,tag:3,absolute:4,open:0,persistent:8,placement:9,scrollable:10,size:11})}}const Dialog$1=Dialog;function create_if_block$a(i){let t,e;const r=[i[2],i[0]];let n={};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),t.$on("click",i[5]),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,a){const s=a&5?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&1&&get_spread_object(o[0])]):{};t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function create_fragment$v(i){let t,e,r=!!i[1]&&create_if_block$a(i);return{c(){r&&r.c(),t=empty()},l(n){r&&r.l(n),t=empty()},m(n,o){r&&r.m(n,o),insert_hydration(n,t,o),e=!0},p(n,[o]){n[1]&&r.p(n,o)},i(n){e||(transition_in(r),e=!0)},o(n){transition_out(r),e=!1},d(n){r&&r.d(n),n&&detach(t)}}}function instance$v(i,t,e){let r;const n=["tag","cssPrefix"];let o=compute_rest_props(t,n),{tag:a="button"}=t,{cssPrefix:s="dialog-close"}=t;const l=getContext("DIALOG"),u=()=>l.hide(!0);return i.$$set=c=>{t=assign(assign({},t),exclude_internal_props(c)),e(2,o=compute_rest_props(t,n)),"tag"in c&&e(3,a=c.tag),"cssPrefix"in c&&e(4,s=c.cssPrefix)},i.$$.update=()=>{i.$$.dirty&24&&e(0,r={type:"button",tag:a,cssPrefix:s,"aria-label":"Close"})},[r,l,o,a,s,u]}class DialogClose extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$v,create_fragment$v,safe_not_equal,{tag:3,cssPrefix:4})}}const DialogClose$1=DialogClose;function create_default_slot$f(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$u(i){let t,e;const r=[i[2],{cssPrefix:i[0]},{tag:i[1]}];let n={$$slots:{default:[create_default_slot$f]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),t.$on("click",onClick),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&1&&{cssPrefix:o[0]},a&2&&{tag:o[1]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function onClick(i){i.stopPropagation()}function instance$u(i,t,e){const r=["cssPrefix","tag"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="dialog-content"}=t,{tag:l="div"}=t;return i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"cssPrefix"in u&&e(0,s=u.cssPrefix),"tag"in u&&e(1,l=u.tag),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class DialogContent extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$u,create_fragment$u,safe_not_equal,{cssPrefix:0,tag:1})}}const DialogContent$1=DialogContent;function create_default_slot$e(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$t(i){let t,e;const r=[i[2],{cssPrefix:i[0]},{tag:i[1]}];let n={$$slots:{default:[create_default_slot$e]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&1&&{cssPrefix:o[0]},a&2&&{tag:o[1]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$t(i,t,e){const r=["cssPrefix","tag"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="dialog-footer"}=t,{tag:l="div"}=t;return i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"cssPrefix"in u&&e(0,s=u.cssPrefix),"tag"in u&&e(1,l=u.tag),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class DialogFooter extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$t,create_fragment$t,safe_not_equal,{cssPrefix:0,tag:1})}}const DialogFooter$1=DialogFooter;function create_default_slot$d(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$s(i){let t,e;const r=[i[2],{cssPrefix:i[0]},{tag:i[1]}];let n={$$slots:{default:[create_default_slot$d]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&1&&{cssPrefix:o[0]},a&2&&{tag:o[1]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$s(i,t,e){const r=["cssPrefix","tag"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="dialog-header"}=t,{tag:l="div"}=t;return i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"cssPrefix"in u&&e(0,s=u.cssPrefix),"tag"in u&&e(1,l=u.tag),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class DialogHeader extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$s,create_fragment$s,safe_not_equal,{cssPrefix:0,tag:1})}}const DialogHeader$1=DialogHeader;function create_default_slot$c(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$r(i){let t,e;const r=[i[2],{cssPrefix:i[0]},{tag:i[1]}];let n={$$slots:{default:[create_default_slot$c]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&1&&{cssPrefix:o[0]},a&2&&{tag:o[1]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$r(i,t,e){const r=["cssPrefix","tag"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{cssPrefix:s="dialog-title"}=t,{tag:l="div"}=t;return i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"cssPrefix"in u&&e(0,s=u.cssPrefix),"tag"in u&&e(1,l=u.tag),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class DialogTitle extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$r,create_fragment$r,safe_not_equal,{cssPrefix:0,tag:1})}}const DialogTitle$1=DialogTitle;function create_default_slot_1$6(i){let t;const e=i[15].default,r=create_slot(e,i,i[16],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&65536)&&update_slot_base(r,e,n,n[16],t?get_slot_changes(e,n[16],o,null):get_all_dirty_from_scope(n[16]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_default_slot$b(i){let t,e;const r=[i[4],{cssProps:i[3]},i[1]];let n={$$slots:{default:[create_default_slot_1$6]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,a){const s=a&26?get_spread_update(r,[a&16&&get_spread_object(o[4]),a&8&&{cssProps:o[3]},a&2&&get_spread_object(o[1])]):{};a&65536&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function create_fragment$q(i){let t,e;return t=new El$1({props:{cssPrefix:i[0],cssProps:i[2],tag:"div",$$slots:{default:[create_default_slot$b]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,[n]){const o={};n&1&&(o.cssPrefix=r[0]),n&4&&(o.cssProps=r[2]),n&65562&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function instance$q(i,t,e){let r,n,o;const a=["tag","cssPrefix","tableParentCssPrefix","color","border","hover","striped","wrap","responsive","size","sort"];let s=compute_rest_props(t,a),{$$slots:l={},$$scope:u}=t,{tag:c="table"}=t,{cssPrefix:f="table"}=t,{tableParentCssPrefix:d="table-parent"}=t,{color:h=void 0}=t,{border:p=void 0}=t,{hover:g=void 0}=t,{striped:v=void 0}=t,{wrap:m=void 0}=t,{responsive:y=void 0}=t,{size:b=void 0}=t,{sort:C=void 0}=t;return i.$$set=x=>{t=assign(assign({},t),exclude_internal_props(x)),e(4,s=compute_rest_props(t,a)),"tag"in x&&e(5,c=x.tag),"cssPrefix"in x&&e(6,f=x.cssPrefix),"tableParentCssPrefix"in x&&e(0,d=x.tableParentCssPrefix),"color"in x&&e(7,h=x.color),"border"in x&&e(8,p=x.border),"hover"in x&&e(9,g=x.hover),"striped"in x&&e(10,v=x.striped),"wrap"in x&&e(11,m=x.wrap),"responsive"in x&&e(12,y=x.responsive),"size"in x&&e(13,b=x.size),"sort"in x&&e(14,C=x.sort),"$$scope"in x&&e(16,u=x.$$scope)},i.$$.update=()=>{i.$$.dirty&28544&&e(3,r={color:h,border:p,hover:g,striped:v,wrap:m,size:b,sort:C}),i.$$.dirty&4096&&e(2,n={responsive:y}),i.$$.dirty&96&&e(1,o={tag:c,cssPrefix:f})},[d,o,n,r,s,c,f,h,p,g,v,m,y,b,C,l,u]}class Table extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$q,create_fragment$q,safe_not_equal,{tag:5,cssPrefix:6,tableParentCssPrefix:0,color:7,border:8,hover:9,striped:10,wrap:11,responsive:12,size:13,sort:14})}}const Table$1=Table;function create_default_slot$a(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$p(i){let t,e;const r=[i[2],{cssPrefix:i[1]},{tag:i[0]}];let n={$$slots:{default:[create_default_slot$a]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&2&&{cssPrefix:o[1]},a&1&&{tag:o[0]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$p(i,t,e){const r=["tag","cssPrefix"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{tag:s="tbody"}=t,{cssPrefix:l="table-body"}=t;return i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"tag"in u&&e(0,s=u.tag),"cssPrefix"in u&&e(1,l=u.cssPrefix),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class TableBody extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$p,create_fragment$p,safe_not_equal,{tag:0,cssPrefix:1})}}const TableBody$1=TableBody;function create_default_slot$9(i){let t;const e=i[8].default,r=create_slot(e,i,i[9],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&512)&&update_slot_base(r,e,n,n[9],t?get_slot_changes(e,n[9],o,null):get_all_dirty_from_scope(n[9]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$o(i){let t,e;const r=[i[4],{colspan:i[2]},{cssProps:i[3]},{cssPrefix:i[1]},{tag:i[0]}];let n={$$slots:{default:[create_default_slot$9]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&31?get_spread_update(r,[a&16&&get_spread_object(o[4]),a&4&&{colspan:o[2]},a&8&&{cssProps:o[3]},a&2&&{cssPrefix:o[1]},a&1&&{tag:o[0]}]):{};a&512&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$o(i,t,e){let r;const n=["tag","cssPrefix","color","truncate","active","colspan"];let o=compute_rest_props(t,n),{$$slots:a={},$$scope:s}=t;var l;let{tag:u="td"}=t,{cssPrefix:c="table-cell"}=t,{color:f=void 0}=t,{truncate:d=void 0}=t,{active:h=void 0}=t,{colspan:p=void 0}=t,g=(l=getContext("TABLE:HEAD"))!==null&&l!==void 0?l:!1;return i.$$set=v=>{t=assign(assign({},t),exclude_internal_props(v)),e(4,o=compute_rest_props(t,n)),"tag"in v&&e(0,u=v.tag),"cssPrefix"in v&&e(1,c=v.cssPrefix),"color"in v&&e(5,f=v.color),"truncate"in v&&e(6,d=v.truncate),"active"in v&&e(7,h=v.active),"colspan"in v&&e(2,p=v.colspan),"$$scope"in v&&e(9,s=v.$$scope)},i.$$.update=()=>{i.$$.dirty&224&&e(3,r={color:f,truncate:d,active:h})},e(0,u=g?"th":"td"),[u,c,p,r,o,f,d,h,a,s]}class TableCell extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$o,create_fragment$o,safe_not_equal,{tag:0,cssPrefix:1,color:5,truncate:6,active:7,colspan:2})}}const TableCell$1=TableCell;function create_default_slot$8(i){let t;const e=i[3].default,r=create_slot(e,i,i[4],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&16)&&update_slot_base(r,e,n,n[4],t?get_slot_changes(e,n[4],o,null):get_all_dirty_from_scope(n[4]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$n(i){let t,e;const r=[i[2],{cssPrefix:i[1]},{tag:i[0]}];let n={$$slots:{default:[create_default_slot$8]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&7?get_spread_update(r,[a&4&&get_spread_object(o[2]),a&2&&{cssPrefix:o[1]},a&1&&{tag:o[0]}]):{};a&16&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$n(i,t,e){const r=["tag","cssPrefix"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t,{tag:s="thead"}=t,{cssPrefix:l="table-head"}=t;return setContext("TABLE:HEAD",!0),i.$$set=u=>{t=assign(assign({},t),exclude_internal_props(u)),e(2,n=compute_rest_props(t,r)),"tag"in u&&e(0,s=u.tag),"cssPrefix"in u&&e(1,l=u.cssPrefix),"$$scope"in u&&e(4,a=u.$$scope)},[s,l,n,o,a]}class TableHead extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$n,create_fragment$n,safe_not_equal,{tag:0,cssPrefix:1})}}const TableHead$1=TableHead;function create_default_slot$7(i){let t;const e=i[6].default,r=create_slot(e,i,i[7],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&128)&&update_slot_base(r,e,n,n[7],t?get_slot_changes(e,n[7],o,null):get_all_dirty_from_scope(n[7]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_fragment$m(i){let t,e;const r=[i[3],{cssProps:i[2]},{cssPrefix:i[1]},{tag:i[0]}];let n={$$slots:{default:[create_default_slot$7]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&15?get_spread_update(r,[a&8&&get_spread_object(o[3]),a&4&&{cssProps:o[2]},a&2&&{cssPrefix:o[1]},a&1&&{tag:o[0]}]):{};a&128&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$m(i,t,e){let r;const n=["tag","cssPrefix","color","active"];let o=compute_rest_props(t,n),{$$slots:a={},$$scope:s}=t,{tag:l="tr"}=t,{cssPrefix:u="table-row"}=t,{color:c=void 0}=t,{active:f=void 0}=t;return i.$$set=d=>{t=assign(assign({},t),exclude_internal_props(d)),e(3,o=compute_rest_props(t,n)),"tag"in d&&e(0,l=d.tag),"cssPrefix"in d&&e(1,u=d.cssPrefix),"color"in d&&e(4,c=d.color),"active"in d&&e(5,f=d.active),"$$scope"in d&&e(7,s=d.$$scope)},i.$$.update=()=>{i.$$.dirty&48&&e(2,r={color:c,active:f})},[l,u,r,o,c,f,a,s]}class TableRow extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$m,create_fragment$m,safe_not_equal,{tag:0,cssPrefix:1,color:4,active:5})}}const TableRow$1=TableRow,get_end_slot_changes=i=>({}),get_end_slot_context=i=>({}),get_start_slot_changes=i=>({}),get_start_slot_context=i=>({});function create_if_block_1$5(i){let t;const e=i[17].start,r=create_slot(e,i,i[20],get_start_slot_context);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&1048576)&&update_slot_base(r,e,n,n[20],t?get_slot_changes(e,n[20],o,get_start_slot_changes):get_all_dirty_from_scope(n[20]),get_start_slot_context)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_if_block$9(i){let t;const e=i[17].end,r=create_slot(e,i,i[20],get_end_slot_context);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,o){r&&r.p&&(!t||o&1048576)&&update_slot_base(r,e,n,n[20],t?get_slot_changes(e,n[20],o,get_end_slot_changes):get_all_dirty_from_scope(n[20]),get_end_slot_context)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function create_default_slot$6(i){let t,e,r,n,o,a,s,l,u=i[6].start&&create_if_block_1$5(i);const c=i[17].default,f=create_slot(c,i,i[20],null),d=[{tag:"input"},i[7],i[4],{cssProps:i[5]}];function h(m){i[18](m)}function p(m){i[19](m)}let g={};for(let m=0;m<d.length;m+=1)g=assign(g,d[m]);i[0]!==void 0&&(g.value=i[0]),i[3]!==void 0&&(g.element=i[3]),r=new El$1({props:g}),binding_callbacks.push(()=>bind(r,"value",h)),binding_callbacks.push(()=>bind(r,"element",p));let v=i[6].end&&create_if_block$9(i);return{c(){u&&u.c(),t=space(),f&&f.c(),e=space(),create_component(r.$$.fragment),a=space(),v&&v.c(),s=empty()},l(m){u&&u.l(m),t=claim_space(m),f&&f.l(m),e=claim_space(m),claim_component(r.$$.fragment,m),a=claim_space(m),v&&v.l(m),s=empty()},m(m,y){u&&u.m(m,y),insert_hydration(m,t,y),f&&f.m(m,y),insert_hydration(m,e,y),mount_component(r,m,y),insert_hydration(m,a,y),v&&v.m(m,y),insert_hydration(m,s,y),l=!0},p(m,y){m[6].start?u?(u.p(m,y),y&64&&transition_in(u,1)):(u=create_if_block_1$5(m),u.c(),transition_in(u,1),u.m(t.parentNode,t)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),f&&f.p&&(!l||y&1048576)&&update_slot_base(f,c,m,m[20],l?get_slot_changes(c,m[20],y,null):get_all_dirty_from_scope(m[20]),null);const b=y&176?get_spread_update(d,[d[0],y&128&&get_spread_object(m[7]),y&16&&get_spread_object(m[4]),y&32&&{cssProps:m[5]}]):{};!n&&y&1&&(n=!0,b.value=m[0],add_flush_callback(()=>n=!1)),!o&&y&8&&(o=!0,b.element=m[3],add_flush_callback(()=>o=!1)),r.$set(b),m[6].end?v?(v.p(m,y),y&64&&transition_in(v,1)):(v=create_if_block$9(m),v.c(),transition_in(v,1),v.m(s.parentNode,s)):v&&(group_outros(),transition_out(v,1,1,()=>{v=null}),check_outros())},i(m){l||(transition_in(u),transition_in(f,m),transition_in(r.$$.fragment,m),transition_in(v),l=!0)},o(m){transition_out(u),transition_out(f,m),transition_out(r.$$.fragment,m),transition_out(v),l=!1},d(m){u&&u.d(m),m&&detach(t),f&&f.d(m),m&&detach(e),destroy_component(r,m),m&&detach(a),v&&v.d(m),m&&detach(s)}}}function create_fragment$l(i){let t,e;return t=new El$1({props:{cssPrefix:i[1]+"-wrapper",cssProps:{size:i[2]},$$slots:{default:[create_default_slot$6]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,[n]){const o={};n&2&&(o.cssPrefix=r[1]+"-wrapper"),n&4&&(o.cssProps={size:r[2]}),n&1048825&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function instance$l(i,t,e){let r,n;const o=["cssPrefix","disabled","borderRounded","borderFlush","mask","maskOptions","placeholder","readonly","size","state","type","value"];let a=compute_rest_props(t,o),{$$slots:s={},$$scope:l}=t;const u=compute_slots(s);let{cssPrefix:c="input"}=t,{disabled:f=void 0}=t,{borderRounded:d=void 0}=t,{borderFlush:h=void 0}=t,{mask:p=void 0}=t,{maskOptions:g=void 0}=t,{placeholder:v=void 0}=t,{readonly:m=void 0}=t,{size:y=void 0}=t,{state:b=void 0}=t,{type:C=void 0}=t,{value:x=void 0}=t,w;onMount(async()=>{const O=await __vitePreload(()=>import("../chunks/inputmask.cdd6ce57.js").then(D=>D.i),[],import.meta.url);if(w!==void 0&&p){var E=new O.default(p,g);E.mask(w)}return()=>{w!==void 0&&p&&O.remove(w)}});function P(O){x=O,e(0,x)}function S(O){w=O,e(3,w)}return i.$$set=O=>{t=assign(assign({},t),exclude_internal_props(O)),e(7,a=compute_rest_props(t,o)),"cssPrefix"in O&&e(1,c=O.cssPrefix),"disabled"in O&&e(8,f=O.disabled),"borderRounded"in O&&e(9,d=O.borderRounded),"borderFlush"in O&&e(10,h=O.borderFlush),"mask"in O&&e(11,p=O.mask),"maskOptions"in O&&e(12,g=O.maskOptions),"placeholder"in O&&e(13,v=O.placeholder),"readonly"in O&&e(14,m=O.readonly),"size"in O&&e(2,y=O.size),"state"in O&&e(15,b=O.state),"type"in O&&e(16,C=O.type),"value"in O&&e(0,x=O.value),"$$scope"in O&&e(20,l=O.$$scope)},i.$$.update=()=>{i.$$.dirty&34308&&e(5,r={size:y,state:b,borderRounded:d,borderFlush:h}),i.$$.dirty&90370&&e(4,n={cssPrefix:c,placeholder:v,disabled:f,readonly:m,type:C})},[x,c,y,w,n,r,u,a,f,d,h,p,g,v,m,b,C,s,P,S,l]}let Input$1=class extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$l,create_fragment$l,safe_not_equal,{cssPrefix:1,disabled:8,borderRounded:9,borderFlush:10,mask:11,maskOptions:12,placeholder:13,readonly:14,size:2,state:15,type:16,value:0})}};const Input$2=Input$1,get_description_slot_changes=i=>({}),get_description_slot_context=i=>({});function create_if_block_1$4(i){let t,e;const r=[i[4]];let n={$$slots:{default:[create_default_slot_2$4]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,a){const s=a&16?get_spread_update(r,[get_spread_object(o[4])]):{};a&4194306&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function fallback_block_1(i){let t;return{c(){t=text(i[1])},l(e){t=claim_text(e,i[1])},m(e,r){insert_hydration(e,t,r)},p(e,r){r&2&&set_data(t,e[1])},d(e){e&&detach(t)}}}function create_default_slot_2$4(i){let t;const e=i[19].default,r=create_slot(e,i,i[22],null),n=r||fallback_block_1(i);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,a){n&&n.m(o,a),t=!0},p(o,a){r?r.p&&(!t||a&4194304)&&update_slot_base(r,e,o,o[22],t?get_slot_changes(e,o[22],a,null):get_all_dirty_from_scope(o[22]),null):n&&n.p&&(!t||a&2)&&n.p(o,t?a:-1)},i(o){t||(transition_in(n,o),t=!0)},o(o){transition_out(n,o),t=!1},d(o){n&&n.d(o)}}}function create_if_block$8(i){let t,e;const r=[i[5]];let n={$$slots:{default:[create_default_slot_1$5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,a){const s=a&32?get_spread_update(r,[get_spread_object(o[5])]):{};a&4194305&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function fallback_block(i){let t;return{c(){t=text(i[0])},l(e){t=claim_text(e,i[0])},m(e,r){insert_hydration(e,t,r)},p(e,r){r&1&&set_data(t,e[0])},d(e){e&&detach(t)}}}function create_default_slot_1$5(i){let t;const e=i[19].description,r=create_slot(e,i,i[22],get_description_slot_context),n=r||fallback_block(i);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,a){n&&n.m(o,a),t=!0},p(o,a){r?r.p&&(!t||a&4194304)&&update_slot_base(r,e,o,o[22],t?get_slot_changes(e,o[22],a,get_description_slot_changes):get_all_dirty_from_scope(o[22]),get_description_slot_context):n&&n.p&&(!t||a&1)&&n.p(o,t?a:-1)},i(o){t||(transition_in(n,o),t=!0)},o(o){transition_out(n,o),t=!1},d(o){n&&n.d(o)}}}function create_default_slot$5(i){let t,e,r,n,o,a;const s=[i[3]];function l(d){i[20](d)}let u={};for(let d=0;d<s.length;d+=1)u=assign(u,s[d]);i[2]!==void 0&&(u.element=i[2]),t=new El$1({props:u}),binding_callbacks.push(()=>bind(t,"element",l)),t.$on("change",i[7]),t.$on("change",i[21]);let c=(i[1]||i[8].default)&&create_if_block_1$4(i),f=(i[0]||i[8].description)&&create_if_block$8(i);return{c(){create_component(t.$$.fragment),r=space(),c&&c.c(),n=space(),f&&f.c(),o=empty()},l(d){claim_component(t.$$.fragment,d),r=claim_space(d),c&&c.l(d),n=claim_space(d),f&&f.l(d),o=empty()},m(d,h){mount_component(t,d,h),insert_hydration(d,r,h),c&&c.m(d,h),insert_hydration(d,n,h),f&&f.m(d,h),insert_hydration(d,o,h),a=!0},p(d,h){const p=h&8?get_spread_update(s,[get_spread_object(d[3])]):{};!e&&h&4&&(e=!0,p.element=d[2],add_flush_callback(()=>e=!1)),t.$set(p),d[1]||d[8].default?c?(c.p(d,h),h&258&&transition_in(c,1)):(c=create_if_block_1$4(d),c.c(),transition_in(c,1),c.m(n.parentNode,n)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),d[0]||d[8].description?f?(f.p(d,h),h&257&&transition_in(f,1)):(f=create_if_block$8(d),f.c(),transition_in(f,1),f.m(o.parentNode,o)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(d){a||(transition_in(t.$$.fragment,d),transition_in(c),transition_in(f),a=!0)},o(d){transition_out(t.$$.fragment,d),transition_out(c),transition_out(f),a=!1},d(d){destroy_component(t,d),d&&detach(r),c&&c.d(d),d&&detach(n),f&&f.d(d),d&&detach(o)}}}function create_fragment$k(i){let t,e;const r=[i[6]];let n={$$slots:{default:[create_default_slot$5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=assign(n,r[o]);return t=new El$1({props:n}),{c(){create_component(t.$$.fragment)},l(o){claim_component(t.$$.fragment,o)},m(o,a){mount_component(t,o,a),e=!0},p(o,[a]){const s=a&64?get_spread_update(r,[get_spread_object(o[6])]):{};a&4194623&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){e||(transition_in(t.$$.fragment,o),e=!0)},o(o){transition_out(t.$$.fragment,o),e=!1},d(o){destroy_component(t,o)}}}function instance$k(i,t,e){let r,n,o;const a=["cssPrefix","color","checked","description","disabled","indeterminate","inline","label","name","reverse","value"];let s=compute_rest_props(t,a),{$$slots:l={},$$scope:u}=t;const c=compute_slots(l);let{cssPrefix:f="checkbox"}=t,{color:d=void 0}=t,{checked:h=!1}=t,{description:p=void 0}=t,{disabled:g=void 0}=t,{indeterminate:v=!1}=t,{inline:m=!1}=t,{label:y=void 0}=t,{name:b=void 0}=t,{reverse:C=void 0}=t,{value:x=void 0}=t,w,P,S;const O=R=>{e(9,h=R.target.checked)};function E(R){w=R,e(2,w)}function D(R){bubble.call(this,i,R)}return i.$$set=R=>{t=assign(assign({},t),exclude_internal_props(R)),e(23,s=compute_rest_props(t,a)),"cssPrefix"in R&&e(10,f=R.cssPrefix),"color"in R&&e(11,d=R.color),"checked"in R&&e(9,h=R.checked),"description"in R&&e(0,p=R.description),"disabled"in R&&e(12,g=R.disabled),"indeterminate"in R&&e(13,v=R.indeterminate),"inline"in R&&e(14,m=R.inline),"label"in R&&e(1,y=R.label),"name"in R&&e(15,b=R.name),"reverse"in R&&e(16,C=R.reverse),"value"in R&&e(17,x=R.value),"$$scope"in R&&e(22,u=R.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&e(18,r=w==null?void 0:w.id),i.$$.dirty&82944&&e(6,n={cssPrefix:f+"-wrapper",cssProps:{inline:m,reverse:C}}),e(3,P={...s,cssPrefix:f,disabled:g,checked:h,value:x,name:b,type:"checkbox",tag:"input",cssProps:{color:d,indeterminate:v}}),i.$$.dirty&263168&&e(4,S={cssPrefix:f+"-label",tag:"label",for:r}),i.$$.dirty&1024&&e(5,o={cssPrefix:f+"-description"})},[p,y,w,P,S,o,n,O,c,h,f,d,g,v,m,b,C,x,r,l,E,D,u]}let Checkbox$1=class extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$k,create_fragment$k,safe_not_equal,{cssPrefix:10,color:11,checked:9,description:0,disabled:12,indeterminate:13,inline:14,label:1,name:15,reverse:16,value:17})}};const Checkbox$2=Checkbox$1;function get_each_context$8(i,t,e){const r=i.slice();return r[12]=t[e],r[13]=t,r[14]=e,r}function create_default_slot_27(i){let t;return{c(){t=text("Show PB Records")},l(e){t=claim_text(e,"Show PB Records")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_26(i){let t;return{c(){t=text("Product Search")},l(e){t=claim_text(e,"Product Search")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_25(i){let t,e,r,n;return t=new DialogTitle$1({props:{$$slots:{default:[create_default_slot_26]},$$scope:{ctx:i}}}),r=new DialogClose$1({}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),e=claim_space(o),claim_component(r.$$.fragment,o)},m(o,a){mount_component(t,o,a),insert_hydration(o,e,a),mount_component(r,o,a),n=!0},p(o,a){const s={};a&32768&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){n||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),n=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),n=!1},d(o){destroy_component(t,o),o&&detach(e),destroy_component(r,o)}}}function create_default_slot_24(i){let t;return{c(){t=text("Select")},l(e){t=claim_text(e,"Select")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_23(i){let t;return{c(){t=text("Qty")},l(e){t=claim_text(e,"Qty")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_22(i){let t;return{c(){t=text("Mfg")},l(e){t=claim_text(e,"Mfg")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_21(i){let t;return{c(){t=text("Part Number")},l(e){t=claim_text(e,"Part Number")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_20(i){let t;return{c(){t=text("Description")},l(e){t=claim_text(e,"Description")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_19(i){let t;return{c(){t=text("Unit Cost")},l(e){t=claim_text(e,"Unit Cost")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_18(i){let t;return{c(){t=text("Unit Price")},l(e){t=claim_text(e,"Unit Price")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_17(i){let t,e,r,n,o,a,s,l,u,c,f,d,h,p;return t=new TableCell$1({props:{$$slots:{default:[create_default_slot_24]},$$scope:{ctx:i}}}),r=new TableCell$1({props:{$$slots:{default:[create_default_slot_23]},$$scope:{ctx:i}}}),o=new TableCell$1({props:{$$slots:{default:[create_default_slot_22]},$$scope:{ctx:i}}}),s=new TableCell$1({props:{$$slots:{default:[create_default_slot_21]},$$scope:{ctx:i}}}),u=new TableCell$1({props:{$$slots:{default:[create_default_slot_20]},$$scope:{ctx:i}}}),f=new TableCell$1({props:{$$slots:{default:[create_default_slot_19]},$$scope:{ctx:i}}}),h=new TableCell$1({props:{$$slots:{default:[create_default_slot_18]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),c=space(),create_component(f.$$.fragment),d=space(),create_component(h.$$.fragment)},l(g){claim_component(t.$$.fragment,g),e=claim_space(g),claim_component(r.$$.fragment,g),n=claim_space(g),claim_component(o.$$.fragment,g),a=claim_space(g),claim_component(s.$$.fragment,g),l=claim_space(g),claim_component(u.$$.fragment,g),c=claim_space(g),claim_component(f.$$.fragment,g),d=claim_space(g),claim_component(h.$$.fragment,g)},m(g,v){mount_component(t,g,v),insert_hydration(g,e,v),mount_component(r,g,v),insert_hydration(g,n,v),mount_component(o,g,v),insert_hydration(g,a,v),mount_component(s,g,v),insert_hydration(g,l,v),mount_component(u,g,v),insert_hydration(g,c,v),mount_component(f,g,v),insert_hydration(g,d,v),mount_component(h,g,v),p=!0},p(g,v){const m={};v&32768&&(m.$$scope={dirty:v,ctx:g}),t.$set(m);const y={};v&32768&&(y.$$scope={dirty:v,ctx:g}),r.$set(y);const b={};v&32768&&(b.$$scope={dirty:v,ctx:g}),o.$set(b);const C={};v&32768&&(C.$$scope={dirty:v,ctx:g}),s.$set(C);const x={};v&32768&&(x.$$scope={dirty:v,ctx:g}),u.$set(x);const w={};v&32768&&(w.$$scope={dirty:v,ctx:g}),f.$set(w);const P={};v&32768&&(P.$$scope={dirty:v,ctx:g}),h.$set(P)},i(g){p||(transition_in(t.$$.fragment,g),transition_in(r.$$.fragment,g),transition_in(o.$$.fragment,g),transition_in(s.$$.fragment,g),transition_in(u.$$.fragment,g),transition_in(f.$$.fragment,g),transition_in(h.$$.fragment,g),p=!0)},o(g){transition_out(t.$$.fragment,g),transition_out(r.$$.fragment,g),transition_out(o.$$.fragment,g),transition_out(s.$$.fragment,g),transition_out(u.$$.fragment,g),transition_out(f.$$.fragment,g),transition_out(h.$$.fragment,g),p=!1},d(g){destroy_component(t,g),g&&detach(e),destroy_component(r,g),g&&detach(n),destroy_component(o,g),g&&detach(a),destroy_component(s,g),g&&detach(l),destroy_component(u,g),g&&detach(c),destroy_component(f,g),g&&detach(d),destroy_component(h,g)}}}function create_default_slot_16(i){let t,e;return t=new TableRow$1({props:{$$slots:{default:[create_default_slot_17]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&32768&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_15(i){let t,e,r;function n(a){i[5](a,i[12])}let o={style:"border-color:blue;"};return i[12].selected!==void 0&&(o.checked=i[12].selected),t=new Checkbox$2({props:o}),binding_callbacks.push(()=>bind(t,"checked",n)),{c(){create_component(t.$$.fragment)},l(a){claim_component(t.$$.fragment,a)},m(a,s){mount_component(t,a,s),r=!0},p(a,s){i=a;const l={};!e&&s&4&&(e=!0,l.checked=i[12].selected,add_flush_callback(()=>e=!1)),t.$set(l)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_14(i){let t,e,r;function n(a){i[6](a,i[12])}let o={placeholder:"Qty",type:"number"};return i[12].qty!==void 0&&(o.value=i[12].qty),t=new Input$2({props:o}),binding_callbacks.push(()=>bind(t,"value",n)),{c(){create_component(t.$$.fragment)},l(a){claim_component(t.$$.fragment,a)},m(a,s){mount_component(t,a,s),r=!0},p(a,s){i=a;const l={};!e&&s&4&&(e=!0,l.value=i[12].qty,add_flush_callback(()=>e=!1)),t.$set(l)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_13(i){let t=i[12].mfg+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p(r,n){n&4&&t!==(t=r[12].mfg+"")&&set_data(e,t)},d(r){r&&detach(e)}}}function create_default_slot_12(i){let t=i[12].part_number+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p(r,n){n&4&&t!==(t=r[12].part_number+"")&&set_data(e,t)},d(r){r&&detach(e)}}}function create_default_slot_11(i){let t=i[12].desc+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p(r,n){n&4&&t!==(t=r[12].desc+"")&&set_data(e,t)},d(r){r&&detach(e)}}}function create_default_slot_10$1(i){let t=i[12].unit_cost+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p(r,n){n&4&&t!==(t=r[12].unit_cost+"")&&set_data(e,t)},d(r){r&&detach(e)}}}function create_default_slot_9$1(i){let t=i[12].unit_price+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p(r,n){n&4&&t!==(t=r[12].unit_price+"")&&set_data(e,t)},d(r){r&&detach(e)}}}function create_default_slot_8$1(i){let t,e,r,n,o,a,s,l,u,c,f,d,h,p,g;return t=new TableCell$1({props:{$$slots:{default:[create_default_slot_15]},$$scope:{ctx:i}}}),r=new TableCell$1({props:{$$slots:{default:[create_default_slot_14]},$$scope:{ctx:i}}}),o=new TableCell$1({props:{$$slots:{default:[create_default_slot_13]},$$scope:{ctx:i}}}),s=new TableCell$1({props:{$$slots:{default:[create_default_slot_12]},$$scope:{ctx:i}}}),u=new TableCell$1({props:{$$slots:{default:[create_default_slot_11]},$$scope:{ctx:i}}}),f=new TableCell$1({props:{$$slots:{default:[create_default_slot_10$1]},$$scope:{ctx:i}}}),h=new TableCell$1({props:{$$slots:{default:[create_default_slot_9$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),c=space(),create_component(f.$$.fragment),d=space(),create_component(h.$$.fragment),p=space()},l(v){claim_component(t.$$.fragment,v),e=claim_space(v),claim_component(r.$$.fragment,v),n=claim_space(v),claim_component(o.$$.fragment,v),a=claim_space(v),claim_component(s.$$.fragment,v),l=claim_space(v),claim_component(u.$$.fragment,v),c=claim_space(v),claim_component(f.$$.fragment,v),d=claim_space(v),claim_component(h.$$.fragment,v),p=claim_space(v)},m(v,m){mount_component(t,v,m),insert_hydration(v,e,m),mount_component(r,v,m),insert_hydration(v,n,m),mount_component(o,v,m),insert_hydration(v,a,m),mount_component(s,v,m),insert_hydration(v,l,m),mount_component(u,v,m),insert_hydration(v,c,m),mount_component(f,v,m),insert_hydration(v,d,m),mount_component(h,v,m),insert_hydration(v,p,m),g=!0},p(v,m){const y={};m&32772&&(y.$$scope={dirty:m,ctx:v}),t.$set(y);const b={};m&32772&&(b.$$scope={dirty:m,ctx:v}),r.$set(b);const C={};m&32772&&(C.$$scope={dirty:m,ctx:v}),o.$set(C);const x={};m&32772&&(x.$$scope={dirty:m,ctx:v}),s.$set(x);const w={};m&32772&&(w.$$scope={dirty:m,ctx:v}),u.$set(w);const P={};m&32772&&(P.$$scope={dirty:m,ctx:v}),f.$set(P);const S={};m&32772&&(S.$$scope={dirty:m,ctx:v}),h.$set(S)},i(v){g||(transition_in(t.$$.fragment,v),transition_in(r.$$.fragment,v),transition_in(o.$$.fragment,v),transition_in(s.$$.fragment,v),transition_in(u.$$.fragment,v),transition_in(f.$$.fragment,v),transition_in(h.$$.fragment,v),g=!0)},o(v){transition_out(t.$$.fragment,v),transition_out(r.$$.fragment,v),transition_out(o.$$.fragment,v),transition_out(s.$$.fragment,v),transition_out(u.$$.fragment,v),transition_out(f.$$.fragment,v),transition_out(h.$$.fragment,v),g=!1},d(v){destroy_component(t,v),v&&detach(e),destroy_component(r,v),v&&detach(n),destroy_component(o,v),v&&detach(a),destroy_component(s,v),v&&detach(l),destroy_component(u,v),v&&detach(c),destroy_component(f,v),v&&detach(d),destroy_component(h,v),v&&detach(p)}}}function create_each_block$8(i){let t,e;return t=new TableRow$1({props:{$$slots:{default:[create_default_slot_8$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&32772&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_7$3(i){let t,e,r=i[2],n=[];for(let a=0;a<r.length;a+=1)n[a]=create_each_block$8(get_each_context$8(i,r,a));const o=a=>transition_out(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=empty()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);t=empty()},m(a,s){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);insert_hydration(a,t,s),e=!0},p(a,s){if(s&4){r=a[2];let l;for(l=0;l<r.length;l+=1){const u=get_each_context$8(a,r,l);n[l]?(n[l].p(u,s),transition_in(n[l],1)):(n[l]=create_each_block$8(u),n[l].c(),transition_in(n[l],1),n[l].m(t.parentNode,t))}for(group_outros(),l=r.length;l<n.length;l+=1)o(l);check_outros()}},i(a){if(!e){for(let s=0;s<r.length;s+=1)transition_in(n[s]);e=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)transition_out(n[s]);e=!1},d(a){destroy_each(n,a),a&&detach(t)}}}function create_default_slot_6$3(i){let t,e,r,n;return t=new TableHead$1({props:{$$slots:{default:[create_default_slot_16]},$$scope:{ctx:i}}}),r=new TableBody$1({props:{style:"max-height: 300px; overflow-y: auto;",$$slots:{default:[create_default_slot_7$3]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),e=claim_space(o),claim_component(r.$$.fragment,o)},m(o,a){mount_component(t,o,a),insert_hydration(o,e,a),mount_component(r,o,a),n=!0},p(o,a){const s={};a&32768&&(s.$$scope={dirty:a,ctx:o}),t.$set(s);const l={};a&32772&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){n||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),n=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),n=!1},d(o){destroy_component(t,o),o&&detach(e),destroy_component(r,o)}}}function create_default_slot_5$3(i){let t;return{c(){t=text("Close")},l(e){t=claim_text(e,"Close")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_4$3(i){let t;return{c(){t=text("Add Items")},l(e){t=claim_text(e,"Add Items")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_3$3(i){let t,e,r,n;return t=new Button$1({props:{class:"me-auto",$$slots:{default:[create_default_slot_5$3]},$$scope:{ctx:i}}}),t.$on("click",i[8]),r=new Button$1({props:{color:"primary",$$slots:{default:[create_default_slot_4$3]},$$scope:{ctx:i}}}),r.$on("click",i[9]),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),e=claim_space(o),claim_component(r.$$.fragment,o)},m(o,a){mount_component(t,o,a),insert_hydration(o,e,a),mount_component(r,o,a),n=!0},p(o,a){const s={};a&32768&&(s.$$scope={dirty:a,ctx:o}),t.$set(s);const l={};a&32768&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){n||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),n=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),n=!1},d(o){destroy_component(t,o),o&&detach(e),destroy_component(r,o)}}}function create_default_slot_2$3(i){let t,e,r,n,o,a,s;t=new DialogHeader$1({props:{$$slots:{default:[create_default_slot_25]},$$scope:{ctx:i}}});function l(c){i[7](c)}let u={striped:!0,$$slots:{default:[create_default_slot_6$3]},$$scope:{ctx:i}};return i[1]!==void 0&&(u.selectedRow=i[1]),r=new Table$1({props:u}),binding_callbacks.push(()=>bind(r,"selectedRow",l)),r.$on("rowSelect",i[4]),a=new DialogFooter$1({props:{$$slots:{default:[create_default_slot_3$3]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment),o=space(),create_component(a.$$.fragment)},l(c){claim_component(t.$$.fragment,c),e=claim_space(c),claim_component(r.$$.fragment,c),o=claim_space(c),claim_component(a.$$.fragment,c)},m(c,f){mount_component(t,c,f),insert_hydration(c,e,f),mount_component(r,c,f),insert_hydration(c,o,f),mount_component(a,c,f),s=!0},p(c,f){const d={};f&32768&&(d.$$scope={dirty:f,ctx:c}),t.$set(d);const h={};f&32772&&(h.$$scope={dirty:f,ctx:c}),!n&&f&2&&(n=!0,h.selectedRow=c[1],add_flush_callback(()=>n=!1)),r.$set(h);const p={};f&32773&&(p.$$scope={dirty:f,ctx:c}),a.$set(p)},i(c){s||(transition_in(t.$$.fragment,c),transition_in(r.$$.fragment,c),transition_in(a.$$.fragment,c),s=!0)},o(c){transition_out(t.$$.fragment,c),transition_out(r.$$.fragment,c),transition_out(a.$$.fragment,c),s=!1},d(c){destroy_component(t,c),c&&detach(e),destroy_component(r,c),c&&detach(o),destroy_component(a,c)}}}function create_default_slot_1$4(i){let t,e;return t=new DialogContent$1({props:{$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&32775&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot$4(i){let t,e;return t=new Card$2({props:{style:"width: 800px; margin: 2em auto;",$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&32775&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_fragment$j(i){let t,e,r,n,o,a,s;r=new Button$1({props:{$$slots:{default:[create_default_slot_27]},$$scope:{ctx:i}}}),r.$on("click",i[3]);function l(c){i[10](c)}let u={size:"md",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:i}};return i[0]!==void 0&&(u.open=i[0]),o=new Dialog$1({props:u}),binding_callbacks.push(()=>bind(o,"open",l)),{c(){t=element$1("div"),e=element$1("div"),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),this.h()},l(c){t=claim_element(c,"DIV",{id:!0});var f=children(t);e=claim_element(f,"DIV",{});var d=children(e);claim_component(r.$$.fragment,d),n=claim_space(d),claim_component(o.$$.fragment,d),d.forEach(detach),f.forEach(detach),this.h()},h(){attr(t,"id","tests"),set_style(t,"display","none")},m(c,f){insert_hydration(c,t,f),append_hydration(t,e),mount_component(r,e,null),append_hydration(e,n),mount_component(o,e,null),s=!0},p(c,[f]){const d={};f&32768&&(d.$$scope={dirty:f,ctx:c}),r.$set(d);const h={};f&32775&&(h.$$scope={dirty:f,ctx:c}),!a&&f&1&&(a=!0,h.open=c[0],add_flush_callback(()=>a=!1)),o.$set(h)},i(c){s||(transition_in(r.$$.fragment,c),transition_in(o.$$.fragment,c),s=!0)},o(c){transition_out(r.$$.fragment,c),transition_out(o.$$.fragment,c),s=!1},d(c){c&&detach(t),destroy_component(r),destroy_component(o)}}}function instance$j(i,t,e){let r=!1,n=null,o=[{mfg:"Sony",part_number:"XBR-65X850E",desc:'65" BRAVIA 4K HDR Ultra HD TV with Android TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:1299,selected:!1,qty:1},{mfg:"LG",part_number:"OLED65C7P",desc:'65" OLED 4K HDR Smart TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:1499,selected:!1,qty:1},{mfg:"Panasonic",part_number:"TH-65EZ1000U",desc:'65" OLED 4K HDR Ultra HD TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:2999,selected:!1,qty:1},{mfg:"Samsung",part_number:"UN65MU8500FXZA",desc:'65" Curved 4K UHD Smart LED TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:1699,selected:!1,qty:1},{mfg:"Sharp",part_number:"PN-R903",desc:'90" Class (90-1/16" diagonal) Professional LCD Display',unit_cost:Math.floor(Math.random()*100)+1,unit_price:8499,selected:!1,qty:1},{mfg:"NEC",part_number:"E905",desc:'90" LED Backlit Commercial-Grade Display',unit_cost:Math.floor(Math.random()*100)+1,unit_price:7999,selected:!1,qty:1},{mfg:"Panasonic",part_number:"TH-98LQ70U",desc:'98" Class (97.5" diagonal) Professional 4K UHD LCD Display',unit_cost:Math.floor(Math.random()*100)+1,unit_price:24999,selected:!1,qty:1},{mfg:"Sony",part_number:"FW-85BZ35F",desc:'85" BRAVIA Professional Display with Android TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:4499,selected:!1,qty:1},{mfg:"LG",part_number:"98LS95A-5B",desc:'98" Ultra HD 4K Commercial Display with Smart Features',unit_cost:Math.floor(Math.random()*100)+1,unit_price:19999,selected:!1,qty:1},{mfg:"Samsung",part_number:"QH98H",desc:'98" QLED 8K UHD Signage',unit_cost:Math.floor(Math.random()*100)+1,unit_price:69999,selected:!1,qty:1},{mfg:"Epson",part_number:"V11H812020",desc:"PowerLite 2150 Wireless Full HD 1080p 3LCD Projector",unit_cost:Math.floor(Math.random()*100)+1,unit_price:899,selected:!1,qty:1},{mfg:"NEC",part_number:"P605UL",desc:"The P605UL entry level installation projector features advanced technologies at a competitive cost.",unit_cost:Math.floor(Math.random()*100)+1,unit_price:800,selected:!1,qty:1},{mfg:"Samsung",part_number:"QB65R",desc:'65" commercial display with Edge-Lit LED technology',unit_cost:Math.floor(Math.random()*100)+1,unit_price:1500,selected:!1,qty:1},{mfg:"Sony",part_number:"VPL-FHZ60L",desc:"The VPL-FHZ60 laser projector is ideal for a wide range of business, education and entertainment applications.",unit_cost:Math.floor(Math.random()*100)+1,unit_price:3e3,selected:!1,qty:1},{mfg:"NEC",part_number:"E506",desc:"Affordable 50-inch LCD display with full HD resolution",unit_cost:Math.floor(Math.random()*100)+1,unit_price:700,selected:!1,qty:1},{mfg:"LG",part_number:"65SM8600PUA",desc:'65" 4K UHD Smart LED NanoCell TV w/ AI ThinQ',unit_cost:Math.floor(Math.random()*100)+1,unit_price:1200,selected:!1,qty:1},{mfg:"Samsung",part_number:"ME95C",desc:"95-inch LED backlit LCD commercial display with ultra-narrow bezel",unit_cost:Math.floor(Math.random()*100)+1,unit_price:15e3,selected:!1,qty:1},{mfg:"Sony",part_number:"VPL-VZ1000ES",desc:"The VPL-VZ1000ES ultra-short throw laser projector offers stunning 4K HDR picture quality from just inches away from the screen.",unit_cost:Math.floor(Math.random()*100)+1,unit_price:25e3,selected:!1,qty:1},{mfg:"Sharp",part_number:"PN-LE601",desc:'60" Full HD Commercial LCD TV',unit_cost:Math.floor(Math.random()*100)+1,unit_price:800,selected:!1,qty:1},{mfg:"NEC",part_number:"E905",desc:'90" large-screen LCD display with full HD resolution',unit_cost:Math.floor(Math.random()*100)+1,unit_price:12e3,selected:!1,qty:1},{mfg:"Sony",part_number:"FW-85BZ35F",desc:'85" BRAVIA 4K HDR Professional Display',unit_cost:Math.floor(Math.random()*100)+1,unit_price:3e3,selected:!1,qty:1}];function a(){e(0,r=!0)}function s(p){e(1,n=p.detail.selectedRow),alert(n)}function l(p,g){i.$$.not_equal(g.selected,p)&&(g.selected=p,e(2,o))}function u(p,g){i.$$.not_equal(g.qty,p)&&(g.qty=p,e(2,o))}function c(p){n=p,e(1,n)}const f=()=>e(0,r=!1),d=()=>{console.log(o.filter(p=>p.selected===!0)),e(0,r=!1)};function h(p){r=p,e(0,r)}return[r,n,o,a,s,l,u,c,f,d,h]}class Tests extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$j,create_fragment$j,safe_not_equal,{})}}const consolePrefix="SweetAlert2:",uniqueArray=i=>{const t=[];for(let e=0;e<i.length;e++)t.indexOf(i[e])===-1&&t.push(i[e]);return t},capitalizeFirstLetter=i=>i.charAt(0).toUpperCase()+i.slice(1),toArray=i=>Array.prototype.slice.call(i),warn=i=>{console.warn(`${consolePrefix} ${typeof i=="object"?i.join(" "):i}`)},error=i=>{console.error(`${consolePrefix} ${i}`)},previousWarnOnceMessages=[],warnOnce=i=>{previousWarnOnceMessages.includes(i)||(previousWarnOnceMessages.push(i),warn(i))},warnAboutDeprecation=(i,t)=>{warnOnce(`"${i}" is deprecated and will be removed in the next major release. Please use "${t}" instead.`)},callIfFunction=i=>typeof i=="function"?i():i,hasToPromiseFn=i=>i&&typeof i.toPromise=="function",asPromise=i=>hasToPromiseFn(i)?i.toPromise():Promise.resolve(i),isPromise=i=>i&&Promise.resolve(i)===i,defaultParams={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},updatableParams=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],deprecatedParams={},toastIncompatibleParams=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],isValidParameter=i=>Object.prototype.hasOwnProperty.call(defaultParams,i),isUpdatableParameter=i=>updatableParams.indexOf(i)!==-1,isDeprecatedParameter=i=>deprecatedParams[i],checkIfParamIsValid=i=>{isValidParameter(i)||warn(`Unknown parameter "${i}"`)},checkIfToastParamIsValid=i=>{toastIncompatibleParams.includes(i)&&warn(`The parameter "${i}" is incompatible with toasts`)},checkIfParamIsDeprecated=i=>{isDeprecatedParameter(i)&&warnAboutDeprecation(i,isDeprecatedParameter(i))},showWarningsForParams=i=>{!i.backdrop&&i.allowOutsideClick&&warn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in i)checkIfParamIsValid(t),i.toast&&checkIfToastParamIsValid(t),checkIfParamIsDeprecated(t)},swalPrefix="swal2-",prefix=i=>{const t={};for(const e in i)t[i[e]]=swalPrefix+i[e];return t},swalClasses=prefix(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),iconTypes=prefix(["success","warning","info","question","error"]),getContainer=()=>document.body.querySelector(`.${swalClasses.container}`),elementBySelector=i=>{const t=getContainer();return t?t.querySelector(i):null},elementByClass=i=>elementBySelector(`.${i}`),getPopup=()=>elementByClass(swalClasses.popup),getIcon=()=>elementByClass(swalClasses.icon),getTitle=()=>elementByClass(swalClasses.title),getHtmlContainer=()=>elementByClass(swalClasses["html-container"]),getImage=()=>elementByClass(swalClasses.image),getProgressSteps$1=()=>elementByClass(swalClasses["progress-steps"]),getValidationMessage=()=>elementByClass(swalClasses["validation-message"]),getConfirmButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.confirm}`),getDenyButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.deny}`),getInputLabel=()=>elementByClass(swalClasses["input-label"]),getLoader=()=>elementBySelector(`.${swalClasses.loader}`),getCancelButton=()=>elementBySelector(`.${swalClasses.actions} .${swalClasses.cancel}`),getActions=()=>elementByClass(swalClasses.actions),getFooter=()=>elementByClass(swalClasses.footer),getTimerProgressBar=()=>elementByClass(swalClasses["timer-progress-bar"]),getCloseButton=()=>elementByClass(swalClasses.close),focusable=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,getFocusableElements=()=>{const i=toArray(getPopup().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((e,r)=>{const n=parseInt(e.getAttribute("tabindex")),o=parseInt(r.getAttribute("tabindex"));return n>o?1:n<o?-1:0}),t=toArray(getPopup().querySelectorAll(focusable)).filter(e=>e.getAttribute("tabindex")!=="-1");return uniqueArray(i.concat(t)).filter(e=>isVisible$1(e))},isModal=()=>hasClass(document.body,swalClasses.shown)&&!hasClass(document.body,swalClasses["toast-shown"])&&!hasClass(document.body,swalClasses["no-backdrop"]),isToast=()=>getPopup()&&hasClass(getPopup(),swalClasses.toast),isLoading=()=>getPopup().hasAttribute("data-loading"),states={previousBodyPadding:null},setInnerHtml=(i,t)=>{if(i.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html");toArray(r.querySelector("head").childNodes).forEach(n=>{i.appendChild(n)}),toArray(r.querySelector("body").childNodes).forEach(n=>{i.appendChild(n)})}},hasClass=(i,t)=>{if(!t)return!1;const e=t.split(/\s+/);for(let r=0;r<e.length;r++)if(!i.classList.contains(e[r]))return!1;return!0},removeCustomClasses=(i,t)=>{toArray(i.classList).forEach(e=>{!Object.values(swalClasses).includes(e)&&!Object.values(iconTypes).includes(e)&&!Object.values(t.showClass).includes(e)&&i.classList.remove(e)})},applyCustomClass=(i,t,e)=>{if(removeCustomClasses(i,t),t.customClass&&t.customClass[e]){if(typeof t.customClass[e]!="string"&&!t.customClass[e].forEach)return warn(`Invalid type of customClass.${e}! Expected string or iterable object, got "${typeof t.customClass[e]}"`);addClass(i,t.customClass[e])}},getInput$1=(i,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return i.querySelector(`.${swalClasses.popup} > .${swalClasses[t]}`);case"checkbox":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.checkbox} input`);case"radio":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:checked`)||i.querySelector(`.${swalClasses.popup} > .${swalClasses.radio} input:first-child`);case"range":return i.querySelector(`.${swalClasses.popup} > .${swalClasses.range} input`);default:return i.querySelector(`.${swalClasses.popup} > .${swalClasses.input}`)}},focusInput=i=>{if(i.focus(),i.type!=="file"){const t=i.value;i.value="",i.value=t}},toggleClass=(i,t,e)=>{!i||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(i)?i.forEach(n=>{e?n.classList.add(r):n.classList.remove(r)}):e?i.classList.add(r):i.classList.remove(r)}))},addClass=(i,t)=>{toggleClass(i,t,!0)},removeClass=(i,t)=>{toggleClass(i,t,!1)},getDirectChildByClass=(i,t)=>{const e=toArray(i.childNodes);for(let r=0;r<e.length;r++)if(hasClass(e[r],t))return e[r]},applyNumericalStyle=(i,t,e)=>{e===`${parseInt(e)}`&&(e=parseInt(e)),e||parseInt(e)===0?i.style[t]=typeof e=="number"?`${e}px`:e:i.style.removeProperty(t)},show=(i,t="flex")=>{i.style.display=t},hide=i=>{i.style.display="none"},setStyle=(i,t,e,r)=>{const n=i.querySelector(t);n&&(n.style[e]=r)},toggle=(i,t,e)=>{t?show(i,e):hide(i)},isVisible$1=i=>!!(i&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)),allButtonsAreHidden=()=>!isVisible$1(getConfirmButton())&&!isVisible$1(getDenyButton())&&!isVisible$1(getCancelButton()),isScrollable=i=>i.scrollHeight>i.clientHeight,hasCssAnimation=i=>{const t=window.getComputedStyle(i),e=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return e>0||r>0},animateTimerProgressBar=(i,t=!1)=>{const e=getTimerProgressBar();isVisible$1(e)&&(t&&(e.style.transition="none",e.style.width="100%"),setTimeout(()=>{e.style.transition=`width ${i/1e3}s linear`,e.style.width="0%"},10))},stopTimerProgressBar=()=>{const i=getTimerProgressBar(),t=parseInt(window.getComputedStyle(i).width);i.style.removeProperty("transition"),i.style.width="100%";const e=parseInt(window.getComputedStyle(i).width),r=t/e*100;i.style.removeProperty("transition"),i.style.width=`${r}%`},isNodeEnv=()=>typeof window>"u"||typeof document>"u",RESTORE_FOCUS_TIMEOUT=100,globalState={},focusPreviousActiveElement=()=>{globalState.previousActiveElement&&globalState.previousActiveElement.focus?(globalState.previousActiveElement.focus(),globalState.previousActiveElement=null):document.body&&document.body.focus()},restoreActiveElement=i=>new Promise(t=>{if(!i)return t();const e=window.scrollX,r=window.scrollY;globalState.restoreFocusTimeout=setTimeout(()=>{focusPreviousActiveElement(),t()},RESTORE_FOCUS_TIMEOUT),window.scrollTo(e,r)}),sweetHTML=`
 <div aria-labelledby="${swalClasses.title}" aria-describedby="${swalClasses["html-container"]}" class="${swalClasses.popup}" tabindex="-1">
   <button type="button" class="${swalClasses.close}"></button>
   <ul class="${swalClasses["progress-steps"]}"></ul>
   <div class="${swalClasses.icon}"></div>
   <img class="${swalClasses.image}" />
   <h2 class="${swalClasses.title}" id="${swalClasses.title}"></h2>
   <div class="${swalClasses["html-container"]}" id="${swalClasses["html-container"]}"></div>
   <input class="${swalClasses.input}" />
   <input type="file" class="${swalClasses.file}" />
   <div class="${swalClasses.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${swalClasses.select}"></select>
   <div class="${swalClasses.radio}"></div>
   <label for="${swalClasses.checkbox}" class="${swalClasses.checkbox}">
     <input type="checkbox" />
     <span class="${swalClasses.label}"></span>
   </label>
   <textarea class="${swalClasses.textarea}"></textarea>
   <div class="${swalClasses["validation-message"]}" id="${swalClasses["validation-message"]}"></div>
   <div class="${swalClasses.actions}">
     <div class="${swalClasses.loader}"></div>
     <button type="button" class="${swalClasses.confirm}"></button>
     <button type="button" class="${swalClasses.deny}"></button>
     <button type="button" class="${swalClasses.cancel}"></button>
   </div>
   <div class="${swalClasses.footer}"></div>
   <div class="${swalClasses["timer-progress-bar-container"]}">
     <div class="${swalClasses["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),resetOldContainer=()=>{const i=getContainer();return i?(i.remove(),removeClass([document.documentElement,document.body],[swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["has-column"]]),!0):!1},resetValidationMessage$1=()=>{globalState.currentInstance.resetValidationMessage()},addInputChangeListeners=()=>{const i=getPopup(),t=getDirectChildByClass(i,swalClasses.input),e=getDirectChildByClass(i,swalClasses.file),r=i.querySelector(`.${swalClasses.range} input`),n=i.querySelector(`.${swalClasses.range} output`),o=getDirectChildByClass(i,swalClasses.select),a=i.querySelector(`.${swalClasses.checkbox} input`),s=getDirectChildByClass(i,swalClasses.textarea);t.oninput=resetValidationMessage$1,e.onchange=resetValidationMessage$1,o.onchange=resetValidationMessage$1,a.onchange=resetValidationMessage$1,s.oninput=resetValidationMessage$1,r.oninput=()=>{resetValidationMessage$1(),n.value=r.value},r.onchange=()=>{resetValidationMessage$1(),r.nextSibling.value=r.value}},getTarget=i=>typeof i=="string"?document.querySelector(i):i,setupAccessibility=i=>{const t=getPopup();t.setAttribute("role",i.toast?"alert":"dialog"),t.setAttribute("aria-live",i.toast?"polite":"assertive"),i.toast||t.setAttribute("aria-modal","true")},setupRTL=i=>{window.getComputedStyle(i).direction==="rtl"&&addClass(getContainer(),swalClasses.rtl)},init=i=>{const t=resetOldContainer();if(isNodeEnv()){error("SweetAlert2 requires document to initialize");return}const e=document.createElement("div");e.className=swalClasses.container,t&&addClass(e,swalClasses["no-transition"]),setInnerHtml(e,sweetHTML);const r=getTarget(i.target);r.appendChild(e),setupAccessibility(i),setupRTL(r),addInputChangeListeners()},parseHtmlToContainer=(i,t)=>{i instanceof HTMLElement?t.appendChild(i):typeof i=="object"?handleObject(i,t):i&&setInnerHtml(t,i)},handleObject=(i,t)=>{i.jquery?handleJqueryElem(t,i):setInnerHtml(t,i.toString())},handleJqueryElem=(i,t)=>{if(i.textContent="",0 in t)for(let e=0;e in t;e++)i.appendChild(t[e].cloneNode(!0));else i.appendChild(t.cloneNode(!0))},animationEndEvent=(()=>{if(isNodeEnv())return!1;const i=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&typeof i.style[e]<"u")return t[e];return!1})(),measureScrollbar=()=>{const i=document.createElement("div");i.className=swalClasses["scrollbar-measure"],document.body.appendChild(i);const t=i.getBoundingClientRect().width-i.clientWidth;return document.body.removeChild(i),t},renderActions=(i,t)=>{const e=getActions(),r=getLoader();!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?hide(e):show(e),applyCustomClass(e,t,"actions"),renderButtons(e,r,t),setInnerHtml(r,t.loaderHtml),applyCustomClass(r,t,"loader")};function renderButtons(i,t,e){const r=getConfirmButton(),n=getDenyButton(),o=getCancelButton();renderButton(r,"confirm",e),renderButton(n,"deny",e),renderButton(o,"cancel",e),handleButtonsStyling(r,n,o,e),e.reverseButtons&&(e.toast?(i.insertBefore(o,r),i.insertBefore(n,r)):(i.insertBefore(o,t),i.insertBefore(n,t),i.insertBefore(r,t)))}function handleButtonsStyling(i,t,e,r){if(!r.buttonsStyling)return removeClass([i,t,e],swalClasses.styled);addClass([i,t,e],swalClasses.styled),r.confirmButtonColor&&(i.style.backgroundColor=r.confirmButtonColor,addClass(i,swalClasses["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,addClass(t,swalClasses["default-outline"])),r.cancelButtonColor&&(e.style.backgroundColor=r.cancelButtonColor,addClass(e,swalClasses["default-outline"]))}function renderButton(i,t,e){toggle(i,e[`show${capitalizeFirstLetter(t)}Button`],"inline-block"),setInnerHtml(i,e[`${t}ButtonText`]),i.setAttribute("aria-label",e[`${t}ButtonAriaLabel`]),i.className=swalClasses[t],applyCustomClass(i,e,`${t}Button`),addClass(i,e[`${t}ButtonClass`])}function handleBackdropParam(i,t){typeof t=="string"?i.style.background=t:t||addClass([document.documentElement,document.body],swalClasses["no-backdrop"])}function handlePositionParam(i,t){t in swalClasses?addClass(i,swalClasses[t]):(warn('The "position" parameter is not valid, defaulting to "center"'),addClass(i,swalClasses.center))}function handleGrowParam(i,t){if(t&&typeof t=="string"){const e=`grow-${t}`;e in swalClasses&&addClass(i,swalClasses[e])}}const renderContainer=(i,t)=>{const e=getContainer();e&&(handleBackdropParam(e,t.backdrop),handlePositionParam(e,t.position),handleGrowParam(e,t.grow),applyCustomClass(e,t,"container"))},privateProps={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap},inputTypes=["input","file","range","select","radio","checkbox","textarea"],renderInput=(i,t)=>{const e=getPopup(),r=privateProps.innerParams.get(i),n=!r||t.input!==r.input;inputTypes.forEach(o=>{const a=swalClasses[o],s=getDirectChildByClass(e,a);setAttributes(o,t.inputAttributes),s.className=a,n&&hide(s)}),t.input&&(n&&showInput(t),setCustomClass(t))},showInput=i=>{if(!renderInputType[i.input])return error(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${i.input}"`);const t=getInputContainer(i.input),e=renderInputType[i.input](t,i);show(e),setTimeout(()=>{focusInput(e)})},removeAttributes=i=>{for(let t=0;t<i.attributes.length;t++){const e=i.attributes[t].name;["type","value","style"].includes(e)||i.removeAttribute(e)}},setAttributes=(i,t)=>{const e=getInput$1(getPopup(),i);if(e){removeAttributes(e);for(const r in t)e.setAttribute(r,t[r])}},setCustomClass=i=>{const t=getInputContainer(i.input);i.customClass&&addClass(t,i.customClass.input)},setInputPlaceholder=(i,t)=>{(!i.placeholder||t.inputPlaceholder)&&(i.placeholder=t.inputPlaceholder)},setInputLabel=(i,t,e)=>{if(e.inputLabel){i.id=swalClasses.input;const r=document.createElement("label"),n=swalClasses["input-label"];r.setAttribute("for",i.id),r.className=n,addClass(r,e.customClass.inputLabel),r.innerText=e.inputLabel,t.insertAdjacentElement("beforebegin",r)}},getInputContainer=i=>{const t=swalClasses[i]?swalClasses[i]:swalClasses.input;return getDirectChildByClass(getPopup(),t)},renderInputType={};renderInputType.text=renderInputType.email=renderInputType.password=renderInputType.number=renderInputType.tel=renderInputType.url=(i,t)=>(typeof t.inputValue=="string"||typeof t.inputValue=="number"?i.value=t.inputValue:isPromise(t.inputValue)||warn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t.inputValue}"`),setInputLabel(i,i,t),setInputPlaceholder(i,t),i.type=t.input,i);renderInputType.file=(i,t)=>(setInputLabel(i,i,t),setInputPlaceholder(i,t),i);renderInputType.range=(i,t)=>{const e=i.querySelector("input"),r=i.querySelector("output");return e.value=t.inputValue,e.type=t.input,r.value=t.inputValue,setInputLabel(e,i,t),i};renderInputType.select=(i,t)=>{if(i.textContent="",t.inputPlaceholder){const e=document.createElement("option");setInnerHtml(e,t.inputPlaceholder),e.value="",e.disabled=!0,e.selected=!0,i.appendChild(e)}return setInputLabel(i,i,t),i};renderInputType.radio=i=>(i.textContent="",i);renderInputType.checkbox=(i,t)=>{const e=getInput$1(getPopup(),"checkbox");e.value="1",e.id=swalClasses.checkbox,e.checked=Boolean(t.inputValue);const r=i.querySelector("span");return setInnerHtml(r,t.inputPlaceholder),i};renderInputType.textarea=(i,t)=>{i.value=t.inputValue,setInputPlaceholder(i,t),setInputLabel(i,i,t);const e=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(getPopup()).width),n=()=>{const o=i.offsetWidth+e(i);o>r?getPopup().style.width=`${o}px`:getPopup().style.width=null};new MutationObserver(n).observe(i,{attributes:!0,attributeFilter:["style"]})}}),i};const renderContent=(i,t)=>{const e=getHtmlContainer();applyCustomClass(e,t,"htmlContainer"),t.html?(parseHtmlToContainer(t.html,e),show(e,"block")):t.text?(e.textContent=t.text,show(e,"block")):hide(e),renderInput(i,t)},renderFooter=(i,t)=>{const e=getFooter();toggle(e,t.footer),t.footer&&parseHtmlToContainer(t.footer,e),applyCustomClass(e,t,"footer")},renderCloseButton=(i,t)=>{const e=getCloseButton();setInnerHtml(e,t.closeButtonHtml),applyCustomClass(e,t,"closeButton"),toggle(e,t.showCloseButton),e.setAttribute("aria-label",t.closeButtonAriaLabel)},renderIcon=(i,t)=>{const e=privateProps.innerParams.get(i),r=getIcon();if(e&&t.icon===e.icon){setContent(r,t),applyStyles(r,t);return}if(!t.icon&&!t.iconHtml)return hide(r);if(t.icon&&Object.keys(iconTypes).indexOf(t.icon)===-1)return error(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),hide(r);show(r),setContent(r,t),applyStyles(r,t),addClass(r,t.showClass.icon)},applyStyles=(i,t)=>{for(const e in iconTypes)t.icon!==e&&removeClass(i,iconTypes[e]);addClass(i,iconTypes[t.icon]),setColor(i,t),adjustSuccessIconBackgroundColor(),applyCustomClass(i,t,"icon")},adjustSuccessIconBackgroundColor=()=>{const i=getPopup(),t=window.getComputedStyle(i).getPropertyValue("background-color"),e=i.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<e.length;r++)e[r].style.backgroundColor=t},successIconHtml=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,errorIconHtml=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,setContent=(i,t)=>{i.textContent="",t.iconHtml?setInnerHtml(i,iconContent(t.iconHtml)):t.icon==="success"?setInnerHtml(i,successIconHtml):t.icon==="error"?setInnerHtml(i,errorIconHtml):setInnerHtml(i,iconContent({question:"?",warning:"!",info:"i"}[t.icon]))},setColor=(i,t)=>{if(t.iconColor){i.style.color=t.iconColor,i.style.borderColor=t.iconColor;for(const e of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])setStyle(i,e,"backgroundColor",t.iconColor);setStyle(i,".swal2-success-ring","borderColor",t.iconColor)}},iconContent=i=>`<div class="${swalClasses["icon-content"]}">${i}</div>`,renderImage=(i,t)=>{const e=getImage();if(!t.imageUrl)return hide(e);show(e,""),e.setAttribute("src",t.imageUrl),e.setAttribute("alt",t.imageAlt),applyNumericalStyle(e,"width",t.imageWidth),applyNumericalStyle(e,"height",t.imageHeight),e.className=swalClasses.image,applyCustomClass(e,t,"image")},createStepElement=i=>{const t=document.createElement("li");return addClass(t,swalClasses["progress-step"]),setInnerHtml(t,i),t},createLineElement=i=>{const t=document.createElement("li");return addClass(t,swalClasses["progress-step-line"]),i.progressStepsDistance&&(t.style.width=i.progressStepsDistance),t},renderProgressSteps=(i,t)=>{const e=getProgressSteps$1();if(!t.progressSteps||t.progressSteps.length===0)return hide(e);show(e),e.textContent="",t.currentProgressStep>=t.progressSteps.length&&warn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach((r,n)=>{const o=createStepElement(r);if(e.appendChild(o),n===t.currentProgressStep&&addClass(o,swalClasses["active-progress-step"]),n!==t.progressSteps.length-1){const a=createLineElement(t);e.appendChild(a)}})},renderTitle=(i,t)=>{const e=getTitle();toggle(e,t.title||t.titleText,"block"),t.title&&parseHtmlToContainer(t.title,e),t.titleText&&(e.innerText=t.titleText),applyCustomClass(e,t,"title")},renderPopup=(i,t)=>{const e=getContainer(),r=getPopup();t.toast?(applyNumericalStyle(e,"width",t.width),r.style.width="100%",r.insertBefore(getLoader(),getIcon())):applyNumericalStyle(r,"width",t.width),applyNumericalStyle(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),hide(getValidationMessage()),addClasses$1(r,t)},addClasses$1=(i,t)=>{i.className=`${swalClasses.popup} ${isVisible$1(i)?t.showClass.popup:""}`,t.toast?(addClass([document.documentElement,document.body],swalClasses["toast-shown"]),addClass(i,swalClasses.toast)):addClass(i,swalClasses.modal),applyCustomClass(i,t,"popup"),typeof t.customClass=="string"&&addClass(i,t.customClass),t.icon&&addClass(i,swalClasses[`icon-${t.icon}`])},render=(i,t)=>{renderPopup(i,t),renderContainer(i,t),renderProgressSteps(i,t),renderIcon(i,t),renderImage(i,t),renderTitle(i,t),renderCloseButton(i,t),renderContent(i,t),renderActions(i,t),renderFooter(i,t),typeof t.didRender=="function"&&t.didRender(getPopup())},DismissReason=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),setAriaHidden=()=>{toArray(document.body.children).forEach(t=>{t===getContainer()||t.contains(getContainer())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})},unsetAriaHidden=()=>{toArray(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},swalStringParams=["swal-title","swal-html","swal-footer"],getTemplateParams=i=>{const t=typeof i.template=="string"?document.querySelector(i.template):i.template;if(!t)return{};const e=t.content;return showWarningsForElements(e),Object.assign(getSwalParams(e),getSwalButtons(e),getSwalImage(e),getSwalIcon(e),getSwalInput(e),getSwalStringParams(e,swalStringParams))},getSwalParams=i=>{const t={};return toArray(i.querySelectorAll("swal-param")).forEach(e=>{showWarningsForAttributes(e,["name","value"]);const r=e.getAttribute("name"),n=e.getAttribute("value");typeof defaultParams[r]=="boolean"&&n==="false"&&(t[r]=!1),typeof defaultParams[r]=="object"&&(t[r]=JSON.parse(n))}),t},getSwalButtons=i=>{const t={};return toArray(i.querySelectorAll("swal-button")).forEach(e=>{showWarningsForAttributes(e,["type","color","aria-label"]);const r=e.getAttribute("type");t[`${r}ButtonText`]=e.innerHTML,t[`show${capitalizeFirstLetter(r)}Button`]=!0,e.hasAttribute("color")&&(t[`${r}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${r}ButtonAriaLabel`]=e.getAttribute("aria-label"))}),t},getSwalImage=i=>{const t={},e=i.querySelector("swal-image");return e&&(showWarningsForAttributes(e,["src","width","height","alt"]),e.hasAttribute("src")&&(t.imageUrl=e.getAttribute("src")),e.hasAttribute("width")&&(t.imageWidth=e.getAttribute("width")),e.hasAttribute("height")&&(t.imageHeight=e.getAttribute("height")),e.hasAttribute("alt")&&(t.imageAlt=e.getAttribute("alt"))),t},getSwalIcon=i=>{const t={},e=i.querySelector("swal-icon");return e&&(showWarningsForAttributes(e,["type","color"]),e.hasAttribute("type")&&(t.icon=e.getAttribute("type")),e.hasAttribute("color")&&(t.iconColor=e.getAttribute("color")),t.iconHtml=e.innerHTML),t},getSwalInput=i=>{const t={},e=i.querySelector("swal-input");e&&(showWarningsForAttributes(e,["type","label","placeholder","value"]),t.input=e.getAttribute("type")||"text",e.hasAttribute("label")&&(t.inputLabel=e.getAttribute("label")),e.hasAttribute("placeholder")&&(t.inputPlaceholder=e.getAttribute("placeholder")),e.hasAttribute("value")&&(t.inputValue=e.getAttribute("value")));const r=i.querySelectorAll("swal-input-option");return r.length&&(t.inputOptions={},toArray(r).forEach(n=>{showWarningsForAttributes(n,["value"]);const o=n.getAttribute("value"),a=n.innerHTML;t.inputOptions[o]=a})),t},getSwalStringParams=(i,t)=>{const e={};for(const r in t){const n=t[r],o=i.querySelector(n);o&&(showWarningsForAttributes(o,[]),e[n.replace(/^swal-/,"")]=o.innerHTML.trim())}return e},showWarningsForElements=i=>{const t=swalStringParams.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);toArray(i.children).forEach(e=>{const r=e.tagName.toLowerCase();t.indexOf(r)===-1&&warn(`Unrecognized element <${r}>`)})},showWarningsForAttributes=(i,t)=>{toArray(i.attributes).forEach(e=>{t.indexOf(e.name)===-1&&warn([`Unrecognized attribute "${e.name}" on <${i.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},defaultInputValidators={email:(i,t)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(i)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(i,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(i)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function setDefaultInputValidators(i){i.inputValidator||Object.keys(defaultInputValidators).forEach(t=>{i.input===t&&(i.inputValidator=defaultInputValidators[t])})}function validateCustomTargetElement(i){(!i.target||typeof i.target=="string"&&!document.querySelector(i.target)||typeof i.target!="string"&&!i.target.appendChild)&&(warn('Target parameter is not valid, defaulting to "body"'),i.target="body")}function setParameters(i){setDefaultInputValidators(i),i.showLoaderOnConfirm&&!i.preConfirm&&warn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),validateCustomTargetElement(i),typeof i.title=="string"&&(i.title=i.title.split(`
`).join("<br />")),init(i)}class Timer{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const fixScrollbar=()=>{states.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(states.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${states.previousBodyPadding+measureScrollbar()}px`)},undoScrollbar=()=>{states.previousBodyPadding!==null&&(document.body.style.paddingRight=`${states.previousBodyPadding}px`,states.previousBodyPadding=null)},iOSfix=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!hasClass(document.body,swalClasses.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,addClass(document.body,swalClasses.iosfix),lockBodyScroll(),addBottomPaddingForTallPopups()}},addBottomPaddingForTallPopups=()=>{const i=navigator.userAgent,t=!!i.match(/iPad/i)||!!i.match(/iPhone/i),e=!!i.match(/WebKit/i);t&&e&&!i.match(/CriOS/i)&&getPopup().scrollHeight>window.innerHeight-44&&(getContainer().style.paddingBottom=`${44}px`)},lockBodyScroll=()=>{const i=getContainer();let t;i.ontouchstart=e=>{t=shouldPreventTouchMove(e)},i.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},shouldPreventTouchMove=i=>{const t=i.target,e=getContainer();return isStylus(i)||isZoom(i)?!1:t===e||!isScrollable(e)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(isScrollable(getHtmlContainer())&&getHtmlContainer().contains(t))},isStylus=i=>i.touches&&i.touches.length&&i.touches[0].touchType==="stylus",isZoom=i=>i.touches&&i.touches.length>1,undoIOSfix=()=>{if(hasClass(document.body,swalClasses.iosfix)){const i=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix),document.body.style.top="",document.body.scrollTop=i*-1}},SHOW_CLASS_TIMEOUT=10,openPopup=i=>{const t=getContainer(),e=getPopup();typeof i.willOpen=="function"&&i.willOpen(e);const n=window.getComputedStyle(document.body).overflowY;addClasses(t,e,i),setTimeout(()=>{setScrollingVisibility(t,e)},SHOW_CLASS_TIMEOUT),isModal()&&(fixScrollContainer(t,i.scrollbarPadding,n),setAriaHidden()),!isToast()&&!globalState.previousActiveElement&&(globalState.previousActiveElement=document.activeElement),typeof i.didOpen=="function"&&setTimeout(()=>i.didOpen(e)),removeClass(t,swalClasses["no-transition"])},swalOpenAnimationFinished=i=>{const t=getPopup();if(i.target!==t)return;const e=getContainer();t.removeEventListener(animationEndEvent,swalOpenAnimationFinished),e.style.overflowY="auto"},setScrollingVisibility=(i,t)=>{animationEndEvent&&hasCssAnimation(t)?(i.style.overflowY="hidden",t.addEventListener(animationEndEvent,swalOpenAnimationFinished)):i.style.overflowY="auto"},fixScrollContainer=(i,t,e)=>{iOSfix(),t&&e!=="hidden"&&fixScrollbar(),setTimeout(()=>{i.scrollTop=0})},addClasses=(i,t,e)=>{addClass(i,e.showClass.backdrop),t.style.setProperty("opacity","0","important"),show(t,"grid"),setTimeout(()=>{addClass(t,e.showClass.popup),t.style.removeProperty("opacity")},SHOW_CLASS_TIMEOUT),addClass([document.documentElement,document.body],swalClasses.shown),e.heightAuto&&e.backdrop&&!e.toast&&addClass([document.documentElement,document.body],swalClasses["height-auto"])},showLoading=i=>{let t=getPopup();t||new Swal,t=getPopup();const e=getLoader();isToast()?hide(getIcon()):replaceButton(t,i),show(e),t.setAttribute("data-loading",!0),t.setAttribute("aria-busy",!0),t.focus()},replaceButton=(i,t)=>{const e=getActions(),r=getLoader();!t&&isVisible$1(getConfirmButton())&&(t=getConfirmButton()),show(e),t&&(hide(t),r.setAttribute("data-button-to-replace",t.className)),r.parentNode.insertBefore(r,t),addClass([i,e],swalClasses.loading)},handleInputOptionsAndValue=(i,t)=>{t.input==="select"||t.input==="radio"?handleInputOptions(i,t):["text","email","number","tel","textarea"].includes(t.input)&&(hasToPromiseFn(t.inputValue)||isPromise(t.inputValue))&&(showLoading(getConfirmButton()),handleInputValue(i,t))},getInputValue=(i,t)=>{const e=i.getInput();if(!e)return null;switch(t.input){case"checkbox":return getCheckboxValue(e);case"radio":return getRadioValue(e);case"file":return getFileValue(e);default:return t.inputAutoTrim?e.value.trim():e.value}},getCheckboxValue=i=>i.checked?1:0,getRadioValue=i=>i.checked?i.value:null,getFileValue=i=>i.files.length?i.getAttribute("multiple")!==null?i.files:i.files[0]:null,handleInputOptions=(i,t)=>{const e=getPopup(),r=n=>populateInputOptions[t.input](e,formatInputOptions(n),t);hasToPromiseFn(t.inputOptions)||isPromise(t.inputOptions)?(showLoading(getConfirmButton()),asPromise(t.inputOptions).then(n=>{i.hideLoading(),r(n)})):typeof t.inputOptions=="object"?r(t.inputOptions):error(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},handleInputValue=(i,t)=>{const e=i.getInput();hide(e),asPromise(t.inputValue).then(r=>{e.value=t.input==="number"?parseFloat(r)||0:`${r}`,show(e),e.focus(),i.hideLoading()}).catch(r=>{error(`Error in inputValue promise: ${r}`),e.value="",show(e),e.focus(),i.hideLoading()})},populateInputOptions={select:(i,t,e)=>{const r=getDirectChildByClass(i,swalClasses.select),n=(o,a,s)=>{const l=document.createElement("option");l.value=s,setInnerHtml(l,a),l.selected=isSelected(s,e.inputValue),o.appendChild(l)};t.forEach(o=>{const a=o[0],s=o[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=a,l.disabled=!1,r.appendChild(l),s.forEach(u=>n(l,u[1],u[0]))}else n(r,s,a)}),r.focus()},radio:(i,t,e)=>{const r=getDirectChildByClass(i,swalClasses.radio);t.forEach(o=>{const a=o[0],s=o[1],l=document.createElement("input"),u=document.createElement("label");l.type="radio",l.name=swalClasses.radio,l.value=a,isSelected(a,e.inputValue)&&(l.checked=!0);const c=document.createElement("span");setInnerHtml(c,s),c.className=swalClasses.label,u.appendChild(l),u.appendChild(c),r.appendChild(u)});const n=r.querySelectorAll("input");n.length&&n[0].focus()}},formatInputOptions=i=>{const t=[];return typeof Map<"u"&&i instanceof Map?i.forEach((e,r)=>{let n=e;typeof n=="object"&&(n=formatInputOptions(n)),t.push([r,n])}):Object.keys(i).forEach(e=>{let r=i[e];typeof r=="object"&&(r=formatInputOptions(r)),t.push([e,r])}),t},isSelected=(i,t)=>t&&t.toString()===i.toString();function hideLoading(){const i=privateProps.innerParams.get(this);if(!i)return;const t=privateProps.domCache.get(this);hide(t.loader),isToast()?i.icon&&show(getIcon()):showRelatedButton(t),removeClass([t.popup,t.actions],swalClasses.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const showRelatedButton=i=>{const t=i.popup.getElementsByClassName(i.loader.getAttribute("data-button-to-replace"));t.length?show(t[0],"inline-block"):allButtonsAreHidden()&&hide(i.actions)};function getInput(i){const t=privateProps.innerParams.get(i||this),e=privateProps.domCache.get(i||this);return e?getInput$1(e.popup,t.input):null}const privateMethods={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},isVisible=()=>isVisible$1(getPopup()),clickConfirm=()=>getConfirmButton()&&getConfirmButton().click(),clickDeny=()=>getDenyButton()&&getDenyButton().click(),clickCancel=()=>getCancelButton()&&getCancelButton().click(),removeKeydownHandler=i=>{i.keydownTarget&&i.keydownHandlerAdded&&(i.keydownTarget.removeEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!1)},addKeydownHandler=(i,t,e,r)=>{removeKeydownHandler(t),e.toast||(t.keydownHandler=n=>keydownHandler(i,n,r),t.keydownTarget=e.keydownListenerCapture?window:getPopup(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},setFocus=(i,t,e)=>{const r=getFocusableElements();if(r.length)return t=t+e,t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();getPopup().focus()},arrowKeysNextButton=["ArrowRight","ArrowDown"],arrowKeysPreviousButton=["ArrowLeft","ArrowUp"],keydownHandler=(i,t,e)=>{const r=privateProps.innerParams.get(i);r&&(t.isComposing||t.keyCode===229||(r.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?handleEnter(i,t,r):t.key==="Tab"?handleTab(t,r):[...arrowKeysNextButton,...arrowKeysPreviousButton].includes(t.key)?handleArrows(t.key):t.key==="Escape"&&handleEsc(t,r,e)))},handleEnter=(i,t,e)=>{if(callIfFunction(e.allowEnterKey)&&t.target&&i.getInput()&&t.target.outerHTML===i.getInput().outerHTML){if(["textarea","file"].includes(e.input))return;clickConfirm(),t.preventDefault()}},handleTab=(i,t)=>{const e=i.target,r=getFocusableElements();let n=-1;for(let o=0;o<r.length;o++)if(e===r[o]){n=o;break}i.shiftKey?setFocus(t,n,-1):setFocus(t,n,1),i.stopPropagation(),i.preventDefault()},handleArrows=i=>{const t=getConfirmButton(),e=getDenyButton(),r=getCancelButton();if(![t,e,r].includes(document.activeElement))return;const n=arrowKeysNextButton.includes(i)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;for(let a=0;a<getActions().children.length;a++){if(o=o[n],!o)return;if(isVisible$1(o)&&o instanceof HTMLButtonElement)break}o instanceof HTMLButtonElement&&o.focus()},handleEsc=(i,t,e)=>{callIfFunction(t.allowEscapeKey)&&(i.preventDefault(),e(DismissReason.esc))};function removePopupAndResetState(i,t,e,r){isToast()?triggerDidCloseAndDispose(i,r):(restoreActiveElement(e).then(()=>triggerDidCloseAndDispose(i,r)),removeKeydownHandler(globalState)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),isModal()&&(undoScrollbar(),undoIOSfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"]])}function close(i){i=prepareResolveValue(i);const t=privateMethods.swalPromiseResolve.get(this),e=triggerClosePopup(this);this.isAwaitingPromise()?i.isDismissed||(handleAwaitingPromise(this),t(i)):e&&t(i)}function isAwaitingPromise(){return!!privateProps.awaitingPromise.get(this)}const triggerClosePopup=i=>{const t=getPopup();if(!t)return!1;const e=privateProps.innerParams.get(i);if(!e||hasClass(t,e.hideClass.popup))return!1;removeClass(t,e.showClass.popup),addClass(t,e.hideClass.popup);const r=getContainer();return removeClass(r,e.showClass.backdrop),addClass(r,e.hideClass.backdrop),handlePopupAnimation(i,t,e),!0};function rejectPromise(i){const t=privateMethods.swalPromiseReject.get(this);handleAwaitingPromise(this),t&&t(i)}const handleAwaitingPromise=i=>{i.isAwaitingPromise()&&(privateProps.awaitingPromise.delete(i),privateProps.innerParams.get(i)||i._destroy())},prepareResolveValue=i=>typeof i>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},i),handlePopupAnimation=(i,t,e)=>{const r=getContainer(),n=animationEndEvent&&hasCssAnimation(t);typeof e.willClose=="function"&&e.willClose(t),n?animatePopup(i,t,r,e.returnFocus,e.didClose):removePopupAndResetState(i,r,e.returnFocus,e.didClose)},animatePopup=(i,t,e,r,n)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,i,e,r,n),t.addEventListener(animationEndEvent,function(o){o.target===t&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback)})},triggerDidCloseAndDispose=(i,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(i.params)(),i._destroy()})};function setButtonsDisabled(i,t,e){const r=privateProps.domCache.get(i);t.forEach(n=>{r[n].disabled=e})}function setInputDisabled(i,t){if(!i)return!1;if(i.type==="radio"){const r=i.parentNode.parentNode.querySelectorAll("input");for(let n=0;n<r.length;n++)r[n].disabled=t}else i.disabled=t}function enableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!1)}function disableButtons(){setButtonsDisabled(this,["confirmButton","denyButton","cancelButton"],!0)}function enableInput(){return setInputDisabled(this.getInput(),!1)}function disableInput(){return setInputDisabled(this.getInput(),!0)}function showValidationMessage(i){const t=privateProps.domCache.get(this),e=privateProps.innerParams.get(this);setInnerHtml(t.validationMessage,i),t.validationMessage.className=swalClasses["validation-message"],e.customClass&&e.customClass.validationMessage&&addClass(t.validationMessage,e.customClass.validationMessage),show(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedby",swalClasses["validation-message"]),focusInput(r),addClass(r,swalClasses.inputerror))}function resetValidationMessage(){const i=privateProps.domCache.get(this);i.validationMessage&&hide(i.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),removeClass(t,swalClasses.inputerror))}function getProgressSteps(){return privateProps.domCache.get(this).progressSteps}function update(i){const t=getPopup(),e=privateProps.innerParams.get(this);if(!t||hasClass(t,e.hideClass.popup))return warn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=filterValidParams(i),n=Object.assign({},e,r);render(this,n),privateProps.innerParams.set(this,n),Object.defineProperties(this,{params:{value:Object.assign({},this.params,i),writable:!1,enumerable:!0}})}const filterValidParams=i=>{const t={};return Object.keys(i).forEach(e=>{isUpdatableParameter(e)?t[e]=i[e]:warn(`Invalid parameter to update: "${e}". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`)}),t};function _destroy(){const i=privateProps.domCache.get(this),t=privateProps.innerParams.get(this);if(!t){disposeWeakMaps(this);return}i.popup&&globalState.swalCloseEventFinishedCallback&&(globalState.swalCloseEventFinishedCallback(),delete globalState.swalCloseEventFinishedCallback),globalState.deferDisposalTimer&&(clearTimeout(globalState.deferDisposalTimer),delete globalState.deferDisposalTimer),typeof t.didDestroy=="function"&&t.didDestroy(),disposeSwal(this)}const disposeSwal=i=>{disposeWeakMaps(i),delete i.params,delete globalState.keydownHandler,delete globalState.keydownTarget,delete globalState.currentInstance},disposeWeakMaps=i=>{i.isAwaitingPromise()?(unsetWeakMaps(privateProps,i),privateProps.awaitingPromise.set(i,!0)):(unsetWeakMaps(privateMethods,i),unsetWeakMaps(privateProps,i))},unsetWeakMaps=(i,t)=>{for(const e in i)i[e].delete(t)},instanceMethods=Object.freeze(Object.defineProperty({__proto__:null,_destroy,close,closeModal:close,closePopup:close,closeToast:close,disableButtons,disableInput,disableLoading:hideLoading,enableButtons,enableInput,getInput,getProgressSteps,handleAwaitingPromise,hideLoading,isAwaitingPromise,rejectPromise,resetValidationMessage,showValidationMessage,update},Symbol.toStringTag,{value:"Module"})),handleConfirmButtonClick=i=>{const t=privateProps.innerParams.get(i);i.disableButtons(),t.input?handleConfirmOrDenyWithInput(i,"confirm"):confirm(i,!0)},handleDenyButtonClick=i=>{const t=privateProps.innerParams.get(i);i.disableButtons(),t.returnInputValueOnDeny?handleConfirmOrDenyWithInput(i,"deny"):deny(i,!1)},handleCancelButtonClick=(i,t)=>{i.disableButtons(),t(DismissReason.cancel)},handleConfirmOrDenyWithInput=(i,t)=>{const e=privateProps.innerParams.get(i);if(!e.input)return error(`The "input" parameter is needed to be set when using returnInputValueOn${capitalizeFirstLetter(t)}`);const r=getInputValue(i,e);e.inputValidator?handleInputValidator(i,r,t):i.getInput().checkValidity()?t==="deny"?deny(i,r):confirm(i,r):(i.enableButtons(),i.showValidationMessage(e.validationMessage))},handleInputValidator=(i,t,e)=>{const r=privateProps.innerParams.get(i);i.disableInput(),Promise.resolve().then(()=>asPromise(r.inputValidator(t,r.validationMessage))).then(o=>{i.enableButtons(),i.enableInput(),o?i.showValidationMessage(o):e==="deny"?deny(i,t):confirm(i,t)})},deny=(i,t)=>{const e=privateProps.innerParams.get(i||globalThis);e.showLoaderOnDeny&&showLoading(getDenyButton()),e.preDeny?(privateProps.awaitingPromise.set(i||globalThis,!0),Promise.resolve().then(()=>asPromise(e.preDeny(t,e.validationMessage))).then(n=>{n===!1?(i.hideLoading(),handleAwaitingPromise(i)):i.closePopup({isDenied:!0,value:typeof n>"u"?t:n})}).catch(n=>rejectWith(i||globalThis,n))):i.closePopup({isDenied:!0,value:t})},succeedWith=(i,t)=>{i.closePopup({isConfirmed:!0,value:t})},rejectWith=(i,t)=>{i.rejectPromise(t)},confirm=(i,t)=>{const e=privateProps.innerParams.get(i||globalThis);e.showLoaderOnConfirm&&showLoading(),e.preConfirm?(i.resetValidationMessage(),privateProps.awaitingPromise.set(i||globalThis,!0),Promise.resolve().then(()=>asPromise(e.preConfirm(t,e.validationMessage))).then(n=>{isVisible$1(getValidationMessage())||n===!1?(i.hideLoading(),handleAwaitingPromise(i)):succeedWith(i,typeof n>"u"?t:n)}).catch(n=>rejectWith(i||globalThis,n))):succeedWith(i,t)},handlePopupClick=(i,t,e)=>{privateProps.innerParams.get(i).toast?handleToastClick(i,t,e):(handleModalMousedown(t),handleContainerMousedown(t),handleModalClick(i,t,e))},handleToastClick=(i,t,e)=>{t.popup.onclick=()=>{const r=privateProps.innerParams.get(i);r&&(isAnyButtonShown(r)||r.timer||r.input)||e(DismissReason.close)}},isAnyButtonShown=i=>i.showConfirmButton||i.showDenyButton||i.showCancelButton||i.showCloseButton;let ignoreOutsideClick=!1;const handleModalMousedown=i=>{i.popup.onmousedown=()=>{i.container.onmouseup=function(t){i.container.onmouseup=void 0,t.target===i.container&&(ignoreOutsideClick=!0)}}},handleContainerMousedown=i=>{i.container.onmousedown=()=>{i.popup.onmouseup=function(t){i.popup.onmouseup=void 0,(t.target===i.popup||i.popup.contains(t.target))&&(ignoreOutsideClick=!0)}}},handleModalClick=(i,t,e)=>{t.container.onclick=r=>{const n=privateProps.innerParams.get(i);if(ignoreOutsideClick){ignoreOutsideClick=!1;return}r.target===t.container&&callIfFunction(n.allowOutsideClick)&&e(DismissReason.backdrop)}},isJqueryElement=i=>typeof i=="object"&&i.jquery,isElement=i=>i instanceof Element||isJqueryElement(i),argsToParams=i=>{const t={};return typeof i[0]=="object"&&!isElement(i[0])?Object.assign(t,i[0]):["title","html","icon"].forEach((e,r)=>{const n=i[r];typeof n=="string"||isElement(n)?t[e]=n:n!==void 0&&error(`Unexpected type of ${e}! Expected "string" or "Element", got ${typeof n}`)}),t};function fire(...i){const t=this;return new t(...i)}function mixin(i){class t extends this{_main(r,n){return super._main(r,Object.assign({},i,n))}}return t}const getTimerLeft=()=>globalState.timeout&&globalState.timeout.getTimerLeft(),stopTimer=()=>{if(globalState.timeout)return stopTimerProgressBar(),globalState.timeout.stop()},resumeTimer=()=>{if(globalState.timeout){const i=globalState.timeout.start();return animateTimerProgressBar(i),i}},toggleTimer=()=>{const i=globalState.timeout;return i&&(i.running?stopTimer():resumeTimer())},increaseTimer=i=>{if(globalState.timeout){const t=globalState.timeout.increase(i);return animateTimerProgressBar(t,!0),t}},isTimerRunning=()=>globalState.timeout&&globalState.timeout.isRunning();let bodyClickListenerAdded=!1;const clickHandlers={};function bindClickHandler(i="data-swal-template"){clickHandlers[i]=this,bodyClickListenerAdded||(document.body.addEventListener("click",bodyClickListener),bodyClickListenerAdded=!0)}const bodyClickListener=i=>{for(let t=i.target;t&&t!==document;t=t.parentNode)for(const e in clickHandlers){const r=t.getAttribute(e);if(r){clickHandlers[e].fire({template:r});return}}},staticMethods=Object.freeze(Object.defineProperty({__proto__:null,argsToParams,bindClickHandler,clickCancel,clickConfirm,clickDeny,enableLoading:showLoading,fire,getActions,getCancelButton,getCloseButton,getConfirmButton,getContainer,getDenyButton,getFocusableElements,getFooter,getHtmlContainer,getIcon,getImage,getInputLabel,getLoader,getPopup,getTimerLeft,getTimerProgressBar,getTitle,getValidationMessage,increaseTimer,isDeprecatedParameter,isLoading,isTimerRunning,isUpdatableParameter,isValidParameter,isVisible,mixin,resumeTimer,showLoading,stopTimer,toggleTimer},Symbol.toStringTag,{value:"Module"}));let currentInstance;class SweetAlert{constructor(...t){if(typeof window>"u")return;currentInstance=this;const e=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:e,writable:!1,enumerable:!0,configurable:!0}});const r=this._main(this.params);privateProps.promise.set(this,r)}_main(t,e={}){showWarningsForParams(Object.assign({},e,t)),globalState.currentInstance&&(globalState.currentInstance._destroy(),isModal()&&unsetAriaHidden()),globalState.currentInstance=this;const r=prepareParams(t,e);setParameters(r),Object.freeze(r),globalState.timeout&&(globalState.timeout.stop(),delete globalState.timeout),clearTimeout(globalState.restoreFocusTimeout);const n=populateDomCache(this);return render(this,r),privateProps.innerParams.set(this,r),swalPromise(this,n,r)}then(t){return privateProps.promise.get(this).then(t)}finally(t){return privateProps.promise.get(this).finally(t)}}const swalPromise=(i,t,e)=>new Promise((r,n)=>{const o=a=>{i.closePopup({isDismissed:!0,dismiss:a})};privateMethods.swalPromiseResolve.set(i,r),privateMethods.swalPromiseReject.set(i,n),t.confirmButton.onclick=()=>handleConfirmButtonClick(i),t.denyButton.onclick=()=>handleDenyButtonClick(i),t.cancelButton.onclick=()=>handleCancelButtonClick(i,o),t.closeButton.onclick=()=>o(DismissReason.close),handlePopupClick(i,t,o),addKeydownHandler(i,globalState,e,o),handleInputOptionsAndValue(i,e),openPopup(e),setupTimer(globalState,e,o),initFocus(t,e),setTimeout(()=>{t.container.scrollTop=0})}),prepareParams=(i,t)=>{const e=getTemplateParams(i),r=Object.assign({},defaultParams,t,e,i);return r.showClass=Object.assign({},defaultParams.showClass,r.showClass),r.hideClass=Object.assign({},defaultParams.hideClass,r.hideClass),r},populateDomCache=i=>{const t={popup:getPopup(),container:getContainer(),actions:getActions(),confirmButton:getConfirmButton(),denyButton:getDenyButton(),cancelButton:getCancelButton(),loader:getLoader(),closeButton:getCloseButton(),validationMessage:getValidationMessage(),progressSteps:getProgressSteps$1()};return privateProps.domCache.set(i,t),t},setupTimer=(i,t,e)=>{const r=getTimerProgressBar();hide(r),t.timer&&(i.timeout=new Timer(()=>{e("timer"),delete i.timeout},t.timer),t.timerProgressBar&&(show(r),applyCustomClass(r,t,"timerProgressBar"),setTimeout(()=>{i.timeout&&i.timeout.running&&animateTimerProgressBar(t.timer)})))},initFocus=(i,t)=>{if(!t.toast){if(!callIfFunction(t.allowEnterKey))return blurActiveElement();focusButton(i,t)||setFocus(t,-1,1)}},focusButton=(i,t)=>t.focusDeny&&isVisible$1(i.denyButton)?(i.denyButton.focus(),!0):t.focusCancel&&isVisible$1(i.cancelButton)?(i.cancelButton.focus(),!0):t.focusConfirm&&isVisible$1(i.confirmButton)?(i.confirmButton.focus(),!0):!1,blurActiveElement=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(SweetAlert.prototype,instanceMethods);Object.assign(SweetAlert,staticMethods);Object.keys(instanceMethods).forEach(i=>{SweetAlert[i]=function(...t){if(currentInstance)return currentInstance[i](...t)}});SweetAlert.DismissReason=DismissReason;SweetAlert.version="11.4.8";const Swal=SweetAlert;Swal.default=Swal;/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v28.2.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */var __extends$3t=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2l=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$Y=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},LicenseManager=function(i){__extends$3t(t,i);function t(){var r=i!==null&&i.apply(this,arguments)||this;return r.watermarkMessage=void 0,r}e=t,t.prototype.validateLicense=function(){if(_.missingOrEmpty(e.licenseKey))this.outputMissingLicenseKey();else if(e.licenseKey.length>32){var r=e.extractLicenseComponents(e.licenseKey),n=r.md5,o=r.license,a=r.version,s=r.isTrial;n===this.md5.md5(o)?_.exists(a)&&a?this.validateLicenseKeyForVersion(a,!!s,o):this.validateLegacyKey(o):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},t.extractExpiry=function(r){var n=r.substring(r.lastIndexOf("_")+1,r.length);return new Date(parseInt(e.decode(n),10))},t.extractLicenseComponents=function(r){var n=r.replace(/[\u200B-\u200D\uFEFF]/g,"");n=n.replace(/\r?\n|\r/g,"");var o=n.length-32,a=n.substring(o),s=n.substring(0,o),l=__read$Y(e.extractBracketedInformation(n),2),u=l[0],c=l[1];return{md5:a,license:s,version:u,isTrial:c}},t.prototype.getLicenseDetails=function(r){var n=e.extractLicenseComponents(r),o=n.md5,a=n.license,s=n.version,l=n.isTrial,u=o===this.md5.md5(a),c=null;return u&&(c=e.extractExpiry(a),u=!isNaN(c.getTime())),{licenseKey:r,valid:u,expiry:u?e.formatDate(c):null,version:s||"legacy",isTrial:l}},t.prototype.isDisplayWatermark=function(){return!_.missingOrEmpty(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.formatDate=function(r){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=r.getDate(),a=r.getMonth(),s=r.getFullYear();return o+" "+n[a]+" "+s},t.getGridReleaseDate=function(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))},t.decode=function(r){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="",a,s,l,u,c,f,d,h=0,p=r.replace(/[^A-Za-z0-9+/=]/g,"");h<p.length;)u=n.indexOf(p.charAt(h++)),c=n.indexOf(p.charAt(h++)),f=n.indexOf(p.charAt(h++)),d=n.indexOf(p.charAt(h++)),a=u<<2|c>>4,s=(c&15)<<4|f>>2,l=(f&3)<<6|d,o=o+String.fromCharCode(a),f!=64&&(o=o+String.fromCharCode(s)),d!=64&&(o=o+String.fromCharCode(l));return o=e.utf8_decode(o),o},t.utf8_decode=function(r){r=r.replace(/rn/g,"n");for(var n="",o=0;o<r.length;o++){var a=r.charCodeAt(o);a<128?n+=String.fromCharCode(a):a>127&&a<2048?(n+=String.fromCharCode(a>>6|192),n+=String.fromCharCode(a&63|128)):(n+=String.fromCharCode(a>>12|224),n+=String.fromCharCode(a>>6&63|128),n+=String.fromCharCode(a&63|128))}return n},t.setLicenseKey=function(r){e.licenseKey=r},t.extractBracketedInformation=function(r){var n=r.split("[").filter(function(s){return s.indexOf("]")>-1}).map(function(s){return s.split("]")[0]});if(!n||n.length===0)return[null,null];var o=n.filter(function(s){return s==="TRIAL"}).length===1,a=n.filter(function(s){return s.indexOf("v")===0}).map(function(s){return s.replace(/^v/,"")})[0];return[a,o]},t.prototype.validateLicenseKeyForVersion=function(r,n,o){r==="2"&&(n?this.validateForTrial(o):this.validateLegacyKey(o))},t.prototype.validateLegacyKey=function(r){var n=e.getGridReleaseDate(),o=e.extractExpiry(r),a=!1,s=!1;if(isNaN(o.getTime())||(a=!0,s=n<o),!a)this.outputInvalidLicenseKey();else if(!s){var l=e.formatDate(o),u=e.formatDate(n);this.outputIncompatibleVersion(l,u)}},t.prototype.validateForTrial=function(r){var n=e.extractExpiry(r),o=new Date,a=!1,s=!1;if(isNaN(n.getTime())||(a=!0,s=n>o),!a)this.outputInvalidLicenseKey();else if(!s){var l=e.formatDate(n);this.outputExpiredTrialKey(l)}},t.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(r){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+r+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(r,n){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+r+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+n+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"};var e;return t.RELEASE_INFORMATION="MTY2NzI0NjAxNTYyNw==",__decorate$2l([Autowired("md5")],t.prototype,"md5",void 0),__decorate$2l([PreConstruct],t.prototype,"validateLicense",null),t=e=__decorate$2l([Bean("licenseManager")],t),t}(BeanStub),__extends$3s=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2k=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MD5=function(i){__extends$3s(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.ieCompatibility=!1,e}return t.prototype.init=function(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"},t.prototype.md5cycle=function(e,r){var n=e[0],o=e[1],a=e[2],s=e[3];n=this.ff(n,o,a,s,r[0],7,-680876936),s=this.ff(s,n,o,a,r[1],12,-389564586),a=this.ff(a,s,n,o,r[2],17,606105819),o=this.ff(o,a,s,n,r[3],22,-1044525330),n=this.ff(n,o,a,s,r[4],7,-176418897),s=this.ff(s,n,o,a,r[5],12,1200080426),a=this.ff(a,s,n,o,r[6],17,-1473231341),o=this.ff(o,a,s,n,r[7],22,-45705983),n=this.ff(n,o,a,s,r[8],7,1770035416),s=this.ff(s,n,o,a,r[9],12,-1958414417),a=this.ff(a,s,n,o,r[10],17,-42063),o=this.ff(o,a,s,n,r[11],22,-1990404162),n=this.ff(n,o,a,s,r[12],7,1804603682),s=this.ff(s,n,o,a,r[13],12,-40341101),a=this.ff(a,s,n,o,r[14],17,-1502002290),o=this.ff(o,a,s,n,r[15],22,1236535329),n=this.gg(n,o,a,s,r[1],5,-165796510),s=this.gg(s,n,o,a,r[6],9,-1069501632),a=this.gg(a,s,n,o,r[11],14,643717713),o=this.gg(o,a,s,n,r[0],20,-373897302),n=this.gg(n,o,a,s,r[5],5,-701558691),s=this.gg(s,n,o,a,r[10],9,38016083),a=this.gg(a,s,n,o,r[15],14,-660478335),o=this.gg(o,a,s,n,r[4],20,-405537848),n=this.gg(n,o,a,s,r[9],5,568446438),s=this.gg(s,n,o,a,r[14],9,-1019803690),a=this.gg(a,s,n,o,r[3],14,-187363961),o=this.gg(o,a,s,n,r[8],20,1163531501),n=this.gg(n,o,a,s,r[13],5,-1444681467),s=this.gg(s,n,o,a,r[2],9,-51403784),a=this.gg(a,s,n,o,r[7],14,1735328473),o=this.gg(o,a,s,n,r[12],20,-1926607734),n=this.hh(n,o,a,s,r[5],4,-378558),s=this.hh(s,n,o,a,r[8],11,-2022574463),a=this.hh(a,s,n,o,r[11],16,1839030562),o=this.hh(o,a,s,n,r[14],23,-35309556),n=this.hh(n,o,a,s,r[1],4,-1530992060),s=this.hh(s,n,o,a,r[4],11,1272893353),a=this.hh(a,s,n,o,r[7],16,-155497632),o=this.hh(o,a,s,n,r[10],23,-1094730640),n=this.hh(n,o,a,s,r[13],4,681279174),s=this.hh(s,n,o,a,r[0],11,-358537222),a=this.hh(a,s,n,o,r[3],16,-722521979),o=this.hh(o,a,s,n,r[6],23,76029189),n=this.hh(n,o,a,s,r[9],4,-640364487),s=this.hh(s,n,o,a,r[12],11,-421815835),a=this.hh(a,s,n,o,r[15],16,530742520),o=this.hh(o,a,s,n,r[2],23,-995338651),n=this.ii(n,o,a,s,r[0],6,-198630844),s=this.ii(s,n,o,a,r[7],10,1126891415),a=this.ii(a,s,n,o,r[14],15,-1416354905),o=this.ii(o,a,s,n,r[5],21,-57434055),n=this.ii(n,o,a,s,r[12],6,1700485571),s=this.ii(s,n,o,a,r[3],10,-1894986606),a=this.ii(a,s,n,o,r[10],15,-1051523),o=this.ii(o,a,s,n,r[1],21,-2054922799),n=this.ii(n,o,a,s,r[8],6,1873313359),s=this.ii(s,n,o,a,r[15],10,-30611744),a=this.ii(a,s,n,o,r[6],15,-1560198380),o=this.ii(o,a,s,n,r[13],21,1309151649),n=this.ii(n,o,a,s,r[4],6,-145523070),s=this.ii(s,n,o,a,r[11],10,-1120210379),a=this.ii(a,s,n,o,r[2],15,718787259),o=this.ii(o,a,s,n,r[9],21,-343485551),e[0]=this.add32(n,e[0]),e[1]=this.add32(o,e[1]),e[2]=this.add32(a,e[2]),e[3]=this.add32(s,e[3])},t.prototype.cmn=function(e,r,n,o,a,s){return r=this.add32(this.add32(r,e),this.add32(o,s)),this.add32(r<<a|r>>>32-a,n)},t.prototype.ff=function(e,r,n,o,a,s,l){return this.cmn(r&n|~r&o,e,r,a,s,l)},t.prototype.gg=function(e,r,n,o,a,s,l){return this.cmn(r&o|n&~o,e,r,a,s,l)},t.prototype.hh=function(e,r,n,o,a,s,l){return this.cmn(r^n^o,e,r,a,s,l)},t.prototype.ii=function(e,r,n,o,a,s,l){return this.cmn(n^(r|~o),e,r,a,s,l)},t.prototype.md51=function(e){var r=e.length,n=[1732584193,-271733879,-1732584194,271733878],o;for(o=64;o<=e.length;o+=64)this.md5cycle(n,this.md5blk(e.substring(o-64,o)));e=e.substring(o-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<e.length;o++)a[o>>2]|=e.charCodeAt(o)<<(o%4<<3);if(a[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(n,a),o=0;o<16;o++)a[o]=0;return a[14]=r*8,this.md5cycle(n,a),n},t.prototype.md5blk=function(e){for(var r=[],n=0;n<64;n+=4)r[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return r},t.prototype.rhex=function(e){for(var r="0123456789abcdef".split(""),n="",o=0;o<4;o++)n+=r[e>>o*8+4&15]+r[e>>o*8&15];return n},t.prototype.hex=function(e){for(var r=0;r<e.length;r++)e[r]=this.rhex(e[r]);return e.join("")},t.prototype.md5=function(e){return this.hex(this.md51(e))},t.prototype.add32=function(e,r){return this.ieCompatibility?this.add32Compat(e,r):this.add32Std(e,r)},t.prototype.add32Std=function(e,r){return e+r&4294967295},t.prototype.add32Compat=function(e,r){var n=(e&65535)+(r&65535),o=(e>>16)+(r>>16)+(n>>16);return o<<16|n&65535},__decorate$2k([PostConstruct],t.prototype,"init",null),t=__decorate$2k([Bean("md5")],t),t}(BeanStub),__extends$3r=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2j=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},WatermarkComp=function(i){__extends$3r(t,i);function t(){return i.call(this,`<div class="ag-watermark">
                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
               </div>`)||this}return t.prototype.postConstruct=function(){var e=this,r=this.shouldDisplayWatermark();this.addOrRemoveCssClass("ag-hidden",!r),r&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(function(){return e.addCssClass("ag-opacity-zero")},0),window.setTimeout(function(){return e.addCssClass("ag-hidden")},5e3))},t.prototype.shouldDisplayWatermark=function(){var e=this.gridOptionsWrapper.getDocument(),r=e.defaultView||window,n=r.location,o=n.hostname,a=o===void 0?"":o,s=n.pathname,l=this.licenseManager.isDisplayWatermark(),u=a.match("^(?:127.0.0.1|localhost|(?:w+.)?ag-grid.com)$")!=null,c=s?s.indexOf("forceWatermark")!==-1:!1;return c||l&&!u},__decorate$2j([Autowired("licenseManager")],t.prototype,"licenseManager",void 0),__decorate$2j([RefSelector("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0),__decorate$2j([PostConstruct],t.prototype,"postConstruct",null),t}(Component),EnterpriseCoreModule={moduleName:ModuleNames.EnterpriseCoreModule,beans:[LicenseManager,MD5],agStackComponents:[{componentName:"AgWatermark",componentClass:WatermarkComp}]},__extends$3q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2i=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ClipboardService=function(i){__extends$3q(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.lastPasteOperationTime=0,e.navigatorApiFailed=!1,e}return t.prototype.init=function(){var e=this;this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(r){e.gridCtrl=r.gridCtrl})},t.prototype.pasteFromClipboard=function(){var e=this;this.logger.log("pasteFromClipboard");var r=!this.gridOptionsWrapper.isSuppressClipboardApi();r&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(function(n){_.doOnce(function(){console.warn(n),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")},"clipboardApiError"),e.navigatorApiFailed=!0,e.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()},t.prototype.pasteFromClipboardLegacy=function(){var e=this,r=!1,n=function(o){var a=new Date().getTime();a-e.lastPasteOperationTime<50&&(r=!0,o.preventDefault()),e.lastPasteOperationTime=a};this.executeOnTempElement(function(o){o.addEventListener("paste",n),o.focus({preventScroll:!0})},function(o){var a=o.value;r?e.refocusLastFocusedCell():e.processClipboardData(a),o.removeEventListener("paste",n)})},t.prototype.refocusLastFocusedCell=function(){var e=this.focusService.getFocusedCell();e&&this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0})},t.prototype.processClipboardData=function(e){var r=this;if(e!=null){var n=_.stringToArray(e,this.gridOptionsWrapper.getClipboardDelimiter()),o=this.gridOptionsWrapper.getProcessDataFromClipboardFunc();if(o&&(n=o({data:n})),n!=null){this.gridOptionsWrapper.isSuppressLastEmptyLineOnPaste()&&this.removeLastLineIfBlank(n);var a=function(s,l,u,c){var f=r.rangeService&&r.rangeService.isMoreThanOneCell(),d=f&&!r.hasOnlyOneValueToPaste(n);d?r.pasteIntoActiveRange(n,s,l,c):r.pasteStartingFromFocusedCell(n,s,l,u,c)};this.doPasteOperation(a)}}},t.prototype.doPasteOperation=function(e){var r=this.gridOptionsWrapper.getApi(),n=this.gridOptionsWrapper.getColumnApi(),o="clipboard";this.eventService.dispatchEvent({type:Events.EVENT_PASTE_START,api:r,columnApi:n,source:o});var a;if(this.clientSideRowModel){var s=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();a=new ChangedPath(s,this.clientSideRowModel.getRootNode())}var l={},u=[],c=this.focusService.getFocusedCell();e(l,u,c,a),a&&this.clientSideRowModel.doAggregate(a),this.rowRenderer.refreshCells(),this.dispatchFlashCells(l),this.fireRowChanged(u),this.refocusLastFocusedCell();var f={type:Events.EVENT_PASTE_END,source:o};this.eventService.dispatchEvent(f)},t.prototype.pasteIntoActiveRange=function(e,r,n,o){var a=this,s=this.getRangeSize()%e.length!=0,l=0,u=0,c=function(f,d,h,p){var g=p-l>=e.length;if(g){if(s)return;l+=u,u=0}var v=e[p-l];n.push(d);var m=a.gridOptionsWrapper.getProcessCellFromClipboardFunc();h.forEach(function(y,b){if(!(!y.isCellEditable(d)||y.isSuppressPaste(d))){b>=v.length&&(b=b%v.length);var C=a.processCell(d,y,v[b],Constants.EXPORT_TYPE_DRAG_COPY,m);d.setDataValue(y,C,Constants.SOURCE_PASTE),o&&o.addParentNode(d.parent,[y]);var x=a.cellPositionUtils.createIdFromValues(f.rowIndex,y,f.rowPinned);r[x]=!0}}),u++};this.iterateActiveRanges(!1,c)},t.prototype.pasteStartingFromFocusedCell=function(e,r,n,o,a){if(o){var s={rowIndex:o.rowIndex,rowPinned:o.rowPinned},l=this.columnModel.getDisplayedColumnsStartingAt(o.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,n,r,a):this.pasteMultipleValues(e,s,n,l,r,Constants.EXPORT_TYPE_CLIPBOARD,a)}},t.prototype.isPasteSingleValueIntoRange=function(e){return this.hasOnlyOneValueToPaste(e)&&this.rangeService!=null&&!this.rangeService.isEmpty()},t.prototype.pasteSingleValueIntoRange=function(e,r,n,o){var a=this,s=e[0][0],l=function(u,c,f){r.push(c),f.forEach(function(d){return a.updateCellValue(c,d,s,n,Constants.EXPORT_TYPE_CLIPBOARD,o)})};this.iterateActiveRanges(!1,l)},t.prototype.hasOnlyOneValueToPaste=function(e){return e.length===1&&e[0].length===1},t.prototype.copyRangeDown=function(){var e=this;if(!(!this.rangeService||this.rangeService.isEmpty())){var r=[],n=function(o,a,s,l){var u=e.gridOptionsWrapper.getProcessCellForClipboardFunc(),c=e.gridOptionsWrapper.getProcessCellFromClipboardFunc(),f=function(d,h,p){r.length?(a.push(h),p.forEach(function(g,v){if(!(!g.isCellEditable(h)||g.isSuppressPaste(h))){var m=e.processCell(h,g,r[v],Constants.EXPORT_TYPE_DRAG_COPY,c);h.setDataValue(g,m,Constants.SOURCE_PASTE),l&&l.addParentNode(h.parent,[g]);var y=e.cellPositionUtils.createIdFromValues(d.rowIndex,g,d.rowPinned);o[y]=!0}})):p.forEach(function(g){var v=e.processCell(h,g,e.valueService.getValue(g,h),Constants.EXPORT_TYPE_DRAG_COPY,u);r.push(v)})};e.iterateActiveRanges(!0,f)};this.doPasteOperation(n)}},t.prototype.removeLastLineIfBlank=function(e){var r=_.last(e),n=r&&r.length===1&&r[0]==="";if(n){if(e.length===1)return;_.removeFromArray(e,r)}},t.prototype.fireRowChanged=function(e){var r=this;this.gridOptionsWrapper.isFullRowEdit()&&e.forEach(function(n){var o={type:Events.EVENT_ROW_VALUE_CHANGED,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned};r.eventService.dispatchEvent(o)})},t.prototype.pasteMultipleValues=function(e,r,n,o,a,s,l){var u=this,c=r,f=this.clientSideRowModel!=null&&!this.gridOptionsWrapper.isTreeData(),d=function(){for(;;){if(!c)return null;var h=u.rowPositionUtils.getRowNode(c);if(c=u.cellNavigationService.getRowBelow({rowPinned:c.rowPinned,rowIndex:c.rowIndex}),h==null)return null;var p=h.detail||h.footer||f&&h.group;if(!p)return h}};e.forEach(function(h){var p=d();p&&(h.forEach(function(g,v){return u.updateCellValue(p,o[v],g,a,s,l)}),n.push(p))})},t.prototype.updateCellValue=function(e,r,n,o,a,s){if(!(!e||!r||!r.isCellEditable(e)||r.isSuppressPaste(e))){var l=this.processCell(e,r,n,a,this.gridOptionsWrapper.getProcessCellFromClipboardFunc());e.setDataValue(r,l,Constants.SOURCE_PASTE);var u=this.cellPositionUtils.createIdFromValues(e.rowIndex,r,e.rowPinned);o[u]=!0,s&&s.addParentNode(e.parent,[r])}},t.prototype.copyToClipboard=function(e){e===void 0&&(e={});var r=e.includeHeaders,n=e.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+r),r==null&&(r=this.gridOptionsWrapper.isCopyHeadersToClipboard()),n==null&&(n=this.gridOptionsWrapper.isCopyGroupHeadersToClipboard());var o={includeHeaders:r,includeGroupHeaders:n},a=!this.gridOptionsWrapper.isSuppressCopyRowsToClipboard();this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange()?this.copySelectedRangeToClipboard(o):a&&!this.selectionService.isEmpty()?this.copySelectedRowsToClipboard(o):this.focusService.isAnyCellFocused()&&this.copyFocusedCellToClipboard(o)},t.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsWrapper.isSuppressCopySingleCellRanges()&&!this.rangeService.isMoreThanOneCell()},t.prototype.iterateActiveRanges=function(e,r,n){var o=this;if(!(!this.rangeService||this.rangeService.isEmpty())){var a=this.rangeService.getCellRanges();e?this.iterateActiveRange(a[0],r,n,!0):a.forEach(function(s,l){return o.iterateActiveRange(s,r,n,l===a.length-1)})}},t.prototype.iterateActiveRange=function(e,r,n,o){if(this.rangeService){var a=this.rangeService.getRangeStartRow(e),s=this.rangeService.getRangeEndRow(e);n&&e.columns&&n(e.columns);for(var l=0,u=!1;!u&&a!=null;){var c=this.rowPositionUtils.getRowNode(a);u=this.rowPositionUtils.sameRow(a,s),r(a,c,e.columns,l++,u&&o),a=this.cellNavigationService.getRowBelow(a)}}},t.prototype.copySelectedRangeToClipboard=function(e){if(e===void 0&&(e={}),!(!this.rangeService||this.rangeService.isEmpty())){var r=this.rangeService.areAllRangesAbleToMerge(),n=r?this.buildDataFromMergedRanges(e):this.buildDataFromRanges(e),o=n.data,a=n.cellsToFlash;this.copyDataToClipboard(o),this.dispatchFlashCells(a)}},t.prototype.buildDataFromMergedRanges=function(e){var r=this,n=new Set,o=this.rangeService.getCellRanges(),a=new Map,s=[],l={};o.forEach(function(d){d.columns.forEach(function(v){return n.add(v)});var h=r.getRangeRowPositionsAndCellsToFlash(d),p=h.rowPositions,g=h.cellsToFlash;p.forEach(function(v){var m=v.rowIndex+"-"+(v.rowPinned||"null");a.get(m)||(a.set(m,!0),s.push(v))}),Object.assign(l,g)});var u=this.columnModel.getAllDisplayedColumns(),c=Array.from(n);c.sort(function(d,h){var p=u.indexOf(d),g=u.indexOf(h);return p-g});var f=this.buildExportParams({columns:c,rowPositions:s,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});return{data:f,cellsToFlash:l}},t.prototype.buildDataFromRanges=function(e){var r=this,n=this.rangeService.getCellRanges(),o=[],a={};return n.forEach(function(s){var l=r.getRangeRowPositionsAndCellsToFlash(s),u=l.rowPositions,c=l.cellsToFlash;Object.assign(a,c),o.push(r.buildExportParams({columns:s.columns,rowPositions:u,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:o.join(`
`),cellsToFlash:a}},t.prototype.getRangeRowPositionsAndCellsToFlash=function(e){for(var r=this,n=[],o={},a=this.rangeService.getRangeStartRow(e),s=this.rangeService.getRangeEndRow(e),l=a;l&&(n.push(l),e.columns.forEach(function(u){var c=r.cellPositionUtils.createIdFromValues(l.rowIndex,u,l.rowPinned);o[c]=!0}),!this.rowPositionUtils.sameRow(l,s));)l=this.cellNavigationService.getRowBelow(l);return{rowPositions:n,cellsToFlash:o}},t.prototype.copyFocusedCellToClipboard=function(e){var r;e===void 0&&(e={});var n=this.focusService.getFocusedCell();if(n!=null){var o=this.cellPositionUtils.createId(n),a={rowPinned:n.rowPinned,rowIndex:n.rowIndex},s=n.column,l=this.buildExportParams({columns:[s],rowPositions:[a],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(l),this.dispatchFlashCells((r={},r[o]=!0,r))}},t.prototype.copySelectedRowsToClipboard=function(e){e===void 0&&(e={});var r=e.columnKeys,n=e.includeHeaders,o=e.includeGroupHeaders,a=this.buildExportParams({columns:r,includeHeaders:n,includeGroupHeaders:o});this.copyDataToClipboard(a)},t.prototype.buildExportParams=function(e){var r=e.columns,n=e.rowPositions,o=e.includeHeaders,a=o===void 0?!1:o,s=e.includeGroupHeaders,l=s===void 0?!1:s,u={columnKeys:r,rowPositions:n,skipColumnHeaders:!a,skipColumnGroupHeaders:!l,suppressQuotes:!0,columnSeparator:this.gridOptionsWrapper.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsWrapper.getProcessCellForClipboardFunc(),processRowGroupCallback:function(c){return c.node.key},processHeaderCallback:this.gridOptionsWrapper.getProcessHeaderForClipboardFunc(),processGroupHeaderCallback:this.gridOptionsWrapper.getProcessGroupHeaderForClipboardFunc()};return this.csvCreator.getDataAsCsv(u,!0)},t.prototype.dispatchFlashCells=function(e){var r=this;window.setTimeout(function(){var n={type:Events.EVENT_FLASH_CELLS,cells:e};r.eventService.dispatchEvent(n)},0)},t.prototype.processCell=function(e,r,n,o,a){if(a){var s={column:r,node:e,value:n,type:o};return a(s)}return n},t.prototype.copyDataToClipboard=function(e){var r=this,n=this.gridOptionsWrapper.getSendToClipboardFunc();if(n){n({data:e});return}var o=!this.gridOptionsWrapper.isSuppressClipboardApi();if(o&&navigator.clipboard){navigator.clipboard.writeText(e).catch(function(a){_.doOnce(function(){console.warn(a),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")},"clipboardApiError"),r.copyDataToClipboardLegacy(e)});return}this.copyDataToClipboardLegacy(e)},t.prototype.copyDataToClipboardLegacy=function(e){var r=this;this.executeOnTempElement(function(n){var o=r.gridOptionsWrapper.getDocument(),a=o.activeElement;n.value=e||" ",n.select(),n.focus({preventScroll:!0});var s=o.execCommand("copy");s||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),a!=null&&a.focus!=null&&a.focus({preventScroll:!0})})},t.prototype.executeOnTempElement=function(e,r){var n=this.gridOptionsWrapper.getDocument(),o=n.createElement("textarea");o.style.width="1px",o.style.height="1px",o.style.top=n.documentElement.scrollTop+"px",o.style.left=n.documentElement.scrollLeft+"px",o.style.position="absolute",o.style.opacity="0";var a=this.gridCtrl.getGui();a.appendChild(o);try{e(o)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}r?window.setTimeout(function(){r(o),a.removeChild(o)},100):a.removeChild(o)},t.prototype.getRangeSize=function(){var e=this.rangeService.getCellRanges(),r=0,n=0;return e.length>0&&(r=this.rangeService.getRangeStartRow(e[0]).rowIndex,n=this.rangeService.getRangeEndRow(e[0]).rowIndex),r-n+1},__decorate$2i([Autowired("csvCreator")],t.prototype,"csvCreator",void 0),__decorate$2i([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),__decorate$2i([Autowired("selectionService")],t.prototype,"selectionService",void 0),__decorate$2i([Optional("rangeService")],t.prototype,"rangeService",void 0),__decorate$2i([Autowired("rowModel")],t.prototype,"rowModel",void 0),__decorate$2i([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),__decorate$2i([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$2i([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$2i([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$2i([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2i([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),__decorate$2i([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),__decorate$2i([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),__decorate$2i([PostConstruct],t.prototype,"init",null),t=__decorate$2i([Bean("clipboardService")],t),t}(BeanStub),ClipboardModule={moduleName:ModuleNames.ClipboardModule,beans:[ClipboardService],dependantModules:[EnterpriseCoreModule,CsvExportModule]},__extends$3p=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2h=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ExpandState;(function(i){i[i.EXPANDED=0]="EXPANDED",i[i.COLLAPSED=1]="COLLAPSED",i[i.INDETERMINATE=2]="INDETERMINATE"})(ExpandState||(ExpandState={}));var PrimaryColsHeaderPanel=function(i){__extends$3p(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",function(n){n.key===KeyCode.SPACE&&e.onExpandClicked()}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(function(){return e.onFilterTextChanged()}),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var r=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(r("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(r("ariaFilterColumnsInput","Filter Columns Input"))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=_.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(ExpandState.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,r=!this.params.suppressColumnSelectAll,n=!this.params.suppressColumnExpandAll,o=this.columnModel.isPrimaryColumnGroupsPresent(),a=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),_.setDisplayed(this.eFilterTextField.getGui(),e),_.setDisplayed(this.eSelect.getGui(),r),_.setDisplayed(this.eExpand,n&&o)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=_.debounce(function(){var r=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:r})},t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyPress=function(e){var r=this;e.key===KeyCode.ENTER&&setTimeout(function(){return r.onSelectClicked()},t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===ExpandState.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,_.setDisplayed(this.eExpandChecked,this.expandState===ExpandState.EXPANDED),_.setDisplayed(this.eExpandUnchecked,this.expandState===ExpandState.COLLAPSED),_.setDisplayed(this.eExpandIndeterminate,this.expandState===ExpandState.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE=`<div class="ag-column-select-header" role="presentation" tabindex="-1">
            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>
            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
        </div>`,__decorate$2h([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2h([RefSelector("eExpand")],t.prototype,"eExpand",void 0),__decorate$2h([RefSelector("eSelect")],t.prototype,"eSelect",void 0),__decorate$2h([RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0),__decorate$2h([PostConstruct],t.prototype,"postConstruct",null),t}(Component),ColumnModelItem=function(){function i(t,e,r,n,o){n===void 0&&(n=!1),this.eventService=new EventService,this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=o,this.children=[]):this.column=e}return i.prototype.isGroup=function(){return this.group},i.prototype.getDisplayName=function(){return this.displayName},i.prototype.getColumnGroup=function(){return this.columnGroup},i.prototype.getColumn=function(){return this.column},i.prototype.getDept=function(){return this.dept},i.prototype.isExpanded=function(){return!!this.expanded},i.prototype.getChildren=function(){return this.children},i.prototype.isPassesFilter=function(){return this.passesFilter},i.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:i.EVENT_EXPANDED_CHANGED}))},i.prototype.setPassesFilter=function(t){this.passesFilter=t},i.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},i.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},i.EVENT_EXPANDED_CHANGED="expandedChanged",i}(),__extends$3o=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2g=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$X=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$y=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$X(arguments[t]));return i},__values$x=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ToolPanelContextMenu=function(i){__extends$3o(t,i);function t(e,r,n){var o=i.call(this,'<div class="ag-menu"></div>')||this;return o.column=e,o.mouseEvent=r,o.parentEl=n,o.displayName=null,o}return t.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof Column?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},t.prototype.initializeProperties=function(e){e instanceof ProvidedColumnGroup?this.columns=e.getLeafColumns():this.columns=[e],this.allowGrouping=this.columns.some(function(r){return r.isPrimary()&&r.isAllowRowGroup()}),this.allowValues=this.columns.some(function(r){return r.isPrimary()&&r.isAllowValue()}),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(function(r){return r.isPrimary()&&r.isAllowPivot()})},t.prototype.buildMenuItemMap=function(){var e=this,r=this.gridOptionsWrapper.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowRowGroup()},activeFunction:function(n){return n.isRowGroupActive()},activateLabel:function(){return r("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return r("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowValue()},activeFunction:function(n){return n.isValueActive()},activateLabel:function(){return r("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return r("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(n){return e.columnModel.isPivotMode()&&n.isPrimary()&&n.isAllowPivot()},activeFunction:function(n){return n.isPivotActive()},activateLabel:function(){return r("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return r("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},t.prototype.addColumnsToList=function(e){return __spread$y(e).concat(this.columns.filter(function(r){return e.indexOf(r)===-1}))},t.prototype.removeColumnsFromList=function(e){var r=this;return e.filter(function(n){return r.columns.indexOf(n)===-1})},t.prototype.displayContextMenu=function(){var e=this,r=this.getGui(),n=this.createBean(new AgMenuList),o=this.getMappedMenuItems(),a=this.gridOptionsWrapper.getLocaleTextFunc(),s=function(){};r.appendChild(n.getGui()),n.addMenuItems(o),n.addManagedListener(n,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,function(){e.parentEl.focus(),s()});var l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:a("ariaLabelContextMenu","Context Menu"),closedCallback:function(u){u instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});l&&(s=l.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:r})},t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},t.prototype.getMappedMenuItems=function(){var e,r,n=[],o=function(c){var f=a.columns.some(function(h){return c.allowedFunction(h)&&!c.activeFunction(h)}),d=a.columns.some(function(h){return c.allowedFunction(h)&&c.activeFunction(h)});f&&n.push({name:c.activateLabel(a.displayName),icon:_.createIconNoSpan(c.addIcon,a.gridOptionsWrapper,null),action:function(){return c.activateFunction()}}),d&&n.push({name:c.deactivateLabel(a.displayName),icon:_.createIconNoSpan(c.removeIcon,a.gridOptionsWrapper,null),action:function(){return c.deActivateFunction()}})},a=this;try{for(var s=__values$x(this.menuItemMap.values()),l=s.next();!l.done;l=s.next()){var u=l.value;o(u)}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},__decorate$2g([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2g([Autowired("popupService")],t.prototype,"popupService",void 0),__decorate$2g([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$2g([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$3n=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2f=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelColumnGroupComp=function(i){__extends$3n(t,i);function t(e,r,n,o){var a=i.call(this)||this;return a.modelItem=e,a.allowDragging=r,a.eventType=n,a.focusWrapper=o,a.processingColumnStateChange=!1,a.modelItem=e,a.columnGroup=e.getColumnGroup(),a.columnDept=e.getDept(),a.allowDragging=r,a}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=_.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType),_.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,ColumnModelItem.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();var o=CssClassApplier.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup);o.forEach(function(a){return e.addOrRemoveCssClass(a,!0)})},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,r=this.columnGroup.getColGroupDef();if(r){var n=function(){var o=r.headerTooltip;e.setTooltip(o)};n(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,n)}},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},t.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case KeyCode.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case KeyCode.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}},t.prototype.onContextMenu=function(e){var r=this,n=this,o=n.columnGroup,a=n.gridOptionsWrapper;if(!a.isFunctionsReadOnly()){var s=this.createBean(new ToolPanelContextMenu(o,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach(function(r){e.addManagedListener(r,Column.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Column.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Column.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,Column.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))})},t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){_.setDisplayed(this.eDragHandle,!1);return}var r=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns(),n={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:r?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var o={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup};e.eventService.dispatchEvent(o)},onDragStopped:function(){var o={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(o)},onGridEnter:function(){r&&e.onChangeCommon(!0)},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})},t.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach(function(r){e[r.getId()]=r.isVisible()}),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(_.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(_.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new TouchListener(this.eColumnGroupIcons,!0);this.addManagedListener(e,TouchListener.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],r=function(n){n.forEach(function(o){o.isPassesFilter()&&(o.isGroup()?r(o.getChildren()):e.push(o.getColumn()))})};return r(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaColumnGroup","Column Group"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),o=e("ariaToggleVisibility","Press SPACE to toggle visibility");_.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(o+" ("+n+")"),_.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),r=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(r),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",r),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,r=this.columnModel.isPivotMode(),n=this.getVisibleLeafColumns(),o=0,a=0;if(n.forEach(function(s){!r&&s.getColDef().lockVisible||(e.isColumnChecked(s,r)?o++:a++)}),!(o>0&&a>0))return o>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),r=0;return this.columnGroup.getLeafColumns().forEach(function(n){e?n.isAnyFunctionAllowed()&&r++:n.getColDef().lockVisible||r++}),r===0},t.prototype.isColumnChecked=function(e,r){if(r){var n=e.isPivotActive(),o=e.isRowGroupActive(),a=e.isValueActive();return n||o||a}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();_.setDisplayed(this.eGroupClosedIcon,!e),_.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){_.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var r=this.cbSelect.getValue(),n=this.cbSelect.isReadOnly();!n&&(e&&!r||!e&&r)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
            </span>
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,__decorate$2f([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2f([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$2f([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),__decorate$2f([RefSelector("cbSelect")],t.prototype,"cbSelect",void 0),__decorate$2f([RefSelector("eLabel")],t.prototype,"eLabel",void 0),__decorate$2f([RefSelector("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),__decorate$2f([RefSelector("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),__decorate$2f([RefSelector("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),__decorate$2f([PostConstruct],t.prototype,"init",null),t}(Component),__extends$3m=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2e=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PRIMARY_COLS_LIST_ITEM_HOVERED="ag-list-item-hovered",PrimaryColsListPanelItemDragFeature=function(i){__extends$3m(t,i);function t(e,r){var n=i.call(this)||this;return n.comp=e,n.virtualList=r,n.currentDragColumn=null,n.lastHoveredColumnItem=null,n}return t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.columnPanelItemDragStart=function(e){var r=e.column;this.currentDragColumn=r;var n=this.getCurrentColumns(),o=n.find(function(a){var s=a.getColDef();return!!s.suppressMovable||!!s.lockPosition});o&&(this.moveBlocked=!0)},t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragColumn=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this,r={isInterestedIn:function(n){return n===DragSourceType.ToolPanel},getIconName:function(){return DragAndDropService[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(n){return e.onDragging(n)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(r)},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.onDragging=function(e){if(!(!this.currentDragColumn||this.moveBlocked)){var r=this.getDragColumnItem(e),n=this.virtualList.getComponentAt(r.rowIndex);if(n){var o=n.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===r.rowIndex&&this.lastHoveredColumnItem.position===r.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=r,_.radioCssClass(o,""+PRIMARY_COLS_LIST_ITEM_HOVERED),_.radioCssClass(o,"ag-item-highlight-"+r.position))}}},t.prototype.getDragColumnItem=function(e){var r=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(r).paddingTop),o=this.virtualList.getRowHeight(),a=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-n+a)/o),l=this.comp.getDisplayedColsList().length-1,u=Math.min(l,s)|0;return{rowIndex:u,position:Math.round(s)>s||s>l?"bottom":"top",component:this.virtualList.getComponentAt(u)}},t.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),r=this.getCurrentColumns();e!=null&&this.columnModel.moveColumns(r,e),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},t.prototype.getMoveDiff=function(e){var r=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(),o=n[0],a=n.length,s=r.indexOf(o);return s<e?a:0},t.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof ProvidedColumnGroup?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var e=this.lastHoveredColumnItem.component,r=this.lastHoveredColumnItem.position==="top",n;if(e instanceof ToolPanelColumnGroupComp){var o=e.getColumns();n=o[0],r=!0}else n=e.getColumn();var a=this.columnModel.getAllGridColumns().indexOf(n),s=r?a:a+1,l=this.getMoveDiff(s);return s-l},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){var e=this.virtualList.getGui();e.querySelectorAll("."+PRIMARY_COLS_LIST_ITEM_HOVERED).forEach(function(r){[PRIMARY_COLS_LIST_ITEM_HOVERED,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(n){r.classList.remove(n)})}),this.lastHoveredColumnItem=null},__decorate$2e([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2e([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$2e([PostConstruct],t.prototype,"postConstruct",null),t}(BeanStub),__extends$3l=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2d=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelColumnComp=function(i){__extends$3l(t,i);function t(e,r,n,o,a){var s=i.call(this)||this;return s.column=e,s.columnDept=r,s.allowDragging=n,s.groupsExist=o,s.focusWrapper=a,s.processingColumnStateChange=!1,s}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=_.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var o=_.escapeString(this.displayName);this.eLabel.innerHTML=o;var a=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+a),this.setupDragging(),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();var s=CssClassApplier.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null);s.forEach(function(l){return e.addOrRemoveCssClass(l,!0)})},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},t.prototype.onContextMenu=function(e){var r=this,n=this,o=n.column,a=n.gridOptionsWrapper;if(!a.isFunctionsReadOnly()){var s=this.createBean(new ToolPanelContextMenu(o,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.handleKeyDown=function(e){e.key===KeyCode.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaColumn","Column"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),o=e("ariaToggleVisibility","Press SPACE to toggle visibility");_.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(o+" ("+n+")"),_.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){_.setDisplayed(this.eDragHandle,!1);return}var r=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns(),n={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:r?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var o={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column};e.eventService.dispatchEvent(o)},onDragStopped:function(){var o={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(o)},onGridEnter:function(){r&&e.onChangeCommon(!0)},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e=this.columnModel.isPivotMode();if(e){var r=this.column.isAnyFunctionActive();this.cbSelect.setValue(r)}else this.cbSelect.setValue(this.column.isVisible());var n=!0,o=!0;if(e){var a=this.gridOptionsWrapper.isFunctionsReadOnly(),s=!this.column.isAnyFunctionAllowed();n=!a&&!s,o=n}else{var l=this.column.getColDef(),u=l.enableRowGroup,c=l.enableValue,f=l.lockPosition,d=l.suppressMovable,h=l.lockVisible,p=!!u||!!c,g=!!f||!!d;n=!h,o=p||!g}this.cbSelect.setReadOnly(!n),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!o),this.addOrRemoveCssClass("ag-column-select-column-readonly",!o&&!n);var v=e&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(v),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
            <span class="ag-column-select-column-label" ref="eLabel"></span>
        </div>`,__decorate$2d([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2d([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$2d([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),__decorate$2d([RefSelector("eLabel")],t.prototype,"eLabel",void 0),__decorate$2d([RefSelector("cbSelect")],t.prototype,"cbSelect",void 0),__decorate$2d([PostConstruct],t.prototype,"init",null),t}(Component),__extends$3k=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2c=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},UIColumnModel=function(){function i(t){this.items=t}return i.prototype.getRowCount=function(){return this.items.length},i.prototype.getRow=function(t){return this.items[t]},i}(),PRIMARY_COLS_LIST_PANEL_CLASS="ag-column-select-list",PrimaryColsListPanel=function(i){__extends$3k(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.destroyColumnItemFuncs=[],e}return t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(function(e){return e()}),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,r,n){var o=this;this.params=e,this.allowDragging=r,this.eventType=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this));var a=[Events.EVENT_COLUMN_PIVOT_CHANGED,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,Events.EVENT_COLUMN_VALUE_CHANGED,Events.EVENT_COLUMN_VISIBLE,Events.EVENT_NEW_COLUMNS_LOADED];a.forEach(function(u){o.addManagedListener(o.eventService,u,o.fireSelectionChangedEvent.bind(o))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;var s=this.gridOptionsWrapper.getLocaleTextFunc(),l=s("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new VirtualList("column-select","tree",l)),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(function(u,c){return _.setAriaLevel(c,u.getDept()+1),o.createComponentFromItem(u,c)}),this.columnModel.isReady()&&this.onColumnsChanged(),!e.suppressColumnMove&&!this.gridOptionsWrapper.isSuppressMovableColumns()&&this.createManagedBean(new PrimaryColsListPanelItemDragFeature(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,r){if(e.isGroup()){var n=new ToolPanelColumnGroupComp(e,this.allowDragging,this.eventType,r);return this.getContext().createBean(n),n}var o=new ToolPanelColumnComp(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,r);return this.getContext().createBean(o),o},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),r=this.columnModel.isPivotMode(),n=!this.params.suppressSyncLayoutWithGrid&&!r;n?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();n&&(e[n.getId()]=r.isExpanded())}}),e},t.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();if(n){var o=e[n.getId()],a=o!=null;a&&r.setExpanded(o)}}})},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var r=this.colDefService.createColumnTree(e);this.buildListModel(r),this.groupsExist=e.some(function(n){return n&&typeof n.children<"u"}),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var r=this,n=this.onColumnExpanded.bind(this),o=function(u){u.addEventListener(ColumnModelItem.EVENT_EXPANDED_CHANGED,n);var c=u.removeEventListener.bind(u,ColumnModelItem.EVENT_EXPANDED_CHANGED,n);r.destroyColumnItemFuncs.push(c)},a=function(u,c,f){u.forEach(function(d){d instanceof ProvidedColumnGroup?s(d,c,f):l(d,c,f)})},s=function(u,c,f){var d=u.getColGroupDef(),h=d&&d.suppressColumnsToolPanel;if(!h){if(u.isPadding()){a(u.getChildren(),c,f);return}var p=r.columnModel.getDisplayNameForProvidedColumnGroup(null,u,r.eventType),g=new ColumnModelItem(p,u,c,!0,r.expandGroupsByDefault);f.push(g),o(g),a(u.getChildren(),c+1,g.getChildren())}},l=function(u,c,f){var d=u.getColDef()&&u.getColDef().suppressColumnsToolPanel;if(!d){var h=r.columnModel.getDisplayNameForColumn(u,"columnToolPanel");f.push(new ColumnModelItem(h,u,c))}};this.destroyColumnTree(),a(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var r=function(o){o.isPassesFilter()&&(e.displayedColsList.push(o),o.isGroup()&&o.isExpanded()&&o.getChildren().forEach(r))};this.allColsTree.forEach(r),this.virtualList.setModel(new UIColumnModel(this.displayedColsList));var n=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),n!=null&&this.focusRowIfAlive(n),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var r=this;window.setTimeout(function(){r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.forEachItem=function(e){var r=function(n){n.forEach(function(o){e(o),o.isGroup()&&r(o.getChildren())})};r(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem(function(r){r.isGroup()&&r.setExpanded(e)})},t.prototype.setGroupsExpanded=function(e,r){if(!r){this.doSetExpandedAll(e);return}var n=[];this.forEachItem(function(a){if(a.isGroup()){var s=a.getColumnGroup().getId();r.indexOf(s)>=0&&(a.setExpanded(e),n.push(s))}});var o=r.filter(function(a){return!_.includes(n,a)});o.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",o)},t.prototype.getExpandState=function(){var e=0,r=0;return this.forEachItem(function(n){n.isGroup()&&(n.isExpanded()?e++:r++)}),e>0&&r>0?ExpandState.INDETERMINATE:r>0?ExpandState.COLLAPSED:ExpandState.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,r=0,n=this.columnModel.isPivotMode();if(this.forEachItem(function(o){if(!o.isGroup()&&o.isPassesFilter()){var a=o.getColumn(),s=a.getColDef(),l;if(n){var u=!a.isAllowPivot()&&!a.isAllowRowGroup()&&!a.isAllowValue();if(u)return;l=a.isValueActive()||a.isPivotActive()||a.isRowGroupActive()}else{if(s.lockVisible)return;l=a.isVisible()}l?e++:r++}}),!(e>0&&r>0))return!(e===0||r>0)},t.prototype.setFilterText=function(e){this.filterText=_.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,r=function(o){if(!_.exists(e.filterText))return!0;var a=o.getDisplayName();return a==null||a.toLowerCase().indexOf(e.filterText)!==-1},n=function(o,a){var s=!1;if(o.isGroup()){var l=r(o);o.getChildren().forEach(function(c){var f=n(c,l||a);f&&(s=f)})}var u=a||s?!0:r(o);return o.setPassesFilter(u),u};this.allColsTree.forEach(function(o){return n(o,!1)})},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="'+PRIMARY_COLS_LIST_PANEL_CLASS+'" role="presentation"></div>',__decorate$2c([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2c([Autowired("toolPanelColDefService")],t.prototype,"colDefService",void 0),__decorate$2c([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),__decorate$2c([PreDestroy],t.prototype,"destroyColumnTree",null),t}(Component),__extends$3j=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2b=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PivotModePanel=function(i){__extends$3j(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createTemplate=function(){return`<div class="ag-pivot-mode-panel">
                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
            </div>`},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,AgCheckbox.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var r=this.gridOptionsWrapper.getApi();r&&r.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},__decorate$2b([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2b([RefSelector("cbPivotMode")],t.prototype,"cbPivotMode",void 0),__decorate$2b([PreConstruct],t.prototype,"init",null),t}(Component),__extends$3i=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2a=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AggregationStage=function(i){__extends$3i(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.execute=function(e){var r=_.missingOrEmpty(this.columnModel.getValueColumns()),n=!this.gridOptionsWrapper.getGroupRowAggFunc(),o=e.changedPath&&e.changedPath.isActive();if(!(r&&n&&o)){var a=this.createAggDetails(e);this.recursivelyCreateAggData(a)}},t.prototype.createAggDetails=function(e){var r=this.columnModel.isPivotActive(),n=this.columnModel.getValueColumns(),o=r?this.columnModel.getPivotColumns():[],a={changedPath:e.changedPath,valueColumns:n,pivotColumns:o};return a},t.prototype.recursivelyCreateAggData=function(e){var r=this;this.filteredOnly=!this.gridOptionsWrapper.isSuppressAggFilteredOnly();var n=function(o){var a=!o.hasChildren();if(a){o.aggData&&o.setAggData(null);return}var s=o.level===-1;if(s){var l=!r.columnModel.isPivotMode(),u=r.gridOptionsWrapper.isSuppressAggAtRootLevel();if(u&&l)return}r.aggregateRowNode(o,e)};e.changedPath.forEachChangedNodeDepthFirst(n,!0)},t.prototype.aggregateRowNode=function(e,r){var n=r.valueColumns.length===0,o=r.pivotColumns.length===0,a=this.gridOptionsWrapper.getGroupRowAggFunc(),s;if(a){var l={nodes:e.childrenAfterFilter};s=a(l)}else n?s=null:o?s=this.aggregateRowNodeUsingValuesOnly(e,r):s=this.aggregateRowNodeUsingValuesAndPivot(e);e.setAggData(s),e.sibling&&e.sibling.setAggData(s)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var r=this,n={},o=this.pivotStage.getPivotColumnDefs();return o.filter(function(a){return!_.exists(a.pivotTotalColumnIds)}).forEach(function(a){var s=a.pivotKeys||[],l,u=a.pivotValueColumn,c=a.colId;e.leafGroup?l=r.getValuesFromMappedSet(e.childrenMapped,s,u):l=r.getValuesPivotNonLeaf(e,c),n[c]=r.aggregateValues(l,u.getAggFunc(),u,e)}),o.filter(function(a){return _.exists(a.pivotTotalColumnIds)}).forEach(function(a){var s=[],l=a.pivotValueColumn,u=a.pivotTotalColumnIds,c=a.colId;!u||!u.length||(u.forEach(function(f){s.push(n[f])}),n[c]=r.aggregateValues(s,l.getAggFunc(),l,e))}),n},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,r){var n=this,o={},a=r.changedPath.isActive()?r.changedPath.getValueColumnsForNode(e,r.valueColumns):r.valueColumns,s=r.changedPath.isActive()?r.changedPath.getNotValueColumnsForNode(e,r.valueColumns):null,l=this.getValuesNormal(e,a),u=e.aggData;return a.forEach(function(c,f){o[c.getId()]=n.aggregateValues(l[f],c.getAggFunc(),c,e)}),s&&u&&s.forEach(function(c){o[c.getId()]=u[c.getId()]}),o},t.prototype.getValuesPivotNonLeaf=function(e,r){var n=[];return e.childrenAfterFilter.forEach(function(o){var a=o.aggData[r];n.push(a)}),n},t.prototype.getValuesFromMappedSet=function(e,r,n){var o=this,a=e;if(r.forEach(function(l){return a=a?a[l]:null}),!a)return[];var s=[];return a.forEach(function(l){var u=o.valueService.getValue(n,l);s.push(u)}),s},t.prototype.getValuesNormal=function(e,r){var n=[];r.forEach(function(){return n.push([])});for(var o=r.length,a=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,s=a.length,l=0;l<s;l++)for(var u=a[l],c=0;c<o;c++){var f=r[c],d=this.valueService.getValue(f,u);n[c].push(d)}return n},t.prototype.aggregateValues=function(e,r,n,o){var a=typeof r=="string"?this.aggFuncService.getAggFunc(r):r;if(typeof a!="function")return console.error("AG Grid: unrecognised aggregation function "+r),null;var s=a,l={values:e,column:n,colDef:n?n.getColDef():void 0,rowNode:o,data:o?o.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};return s(l)},__decorate$2a([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$2a([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$2a([Autowired("pivotStage")],t.prototype,"pivotStage",void 0),__decorate$2a([Autowired("aggFuncService")],t.prototype,"aggFuncService",void 0),__decorate$2a([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$2a([Autowired("columnApi")],t.prototype,"columnApi",void 0),t=__decorate$2a([Bean("aggregationStage")],t),t}(BeanStub),BatchRemover=function(){function i(){this.allSets={},this.allParents=[]}return i.prototype.removeFromChildrenAfterGroup=function(t,e){var r=this.getSet(t);r.removeFromChildrenAfterGroup[e.id]=!0},i.prototype.removeFromAllLeafChildren=function(t,e){var r=this.getSet(t);r.removeFromAllLeafChildren[e.id]=!0},i.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},i.prototype.getAllParents=function(){return this.allParents},i.prototype.flush=function(){var t=this;this.allParents.forEach(function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(function(n){return!r.removeFromChildrenAfterGroup[n.id]}),e.allLeafChildren=e.allLeafChildren.filter(function(n){return!r.removeFromAllLeafChildren[n.id]}),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0},i}(),__extends$3h=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$29=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$W=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$x=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$W(arguments[t]));return i},GroupStage=function(i){__extends$3h(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.groupIdSequence=new NumberSequence,e}return t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsWrapper.getDataPathFunc())},t.prototype.execute=function(e){var r=this.createGroupingDetails(e);if(r.transactions)this.handleTransaction(r);else{var n=e.afterColumnsChanged===!0;this.shotgunResetEverything(r,n)}this.positionLeafsAboveGroups(e.changedPath),this.orderGroups(r.rootNode),this.selectableService.updateSelectableAfterGrouping(r.rootNode)},t.prototype.positionLeafsAboveGroups=function(e){this.usingTreeData||e.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var n=[],o=[];r.childrenAfterGroup.forEach(function(a){var s;!((s=a.childrenAfterGroup)===null||s===void 0)&&s.length?o.push(a):n.push(a)}),r.childrenAfterGroup=__spread$x(n,o)}},!1)},t.prototype.createGroupingDetails=function(e){var r=e.rowNode,n=e.changedPath,o=e.rowNodeTransactions,a=e.rowNodeOrder,s=this.usingTreeData?null:this.columnModel.getRowGroupColumns(),l={includeParents:!this.gridOptionsWrapper.isSuppressParentsInRowNodes(),expandByDefault:this.gridOptionsWrapper.getGroupDefaultExpanded(),groupedCols:s,rootNode:r,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!s?0:s.length,rowNodeOrder:a,transactions:o,changedPath:n};return l},t.prototype.handleTransaction=function(e){var r=this;e.transactions.forEach(function(n){var o=r.usingTreeData?void 0:new BatchRemover;if(_.existsAndNotEmpty(n.remove)&&r.removeNodes(n.remove,e,o),_.existsAndNotEmpty(n.update)&&r.moveNodesInWrongPath(n.update,e,o),_.existsAndNotEmpty(n.add)&&r.insertNodes(n.add,e,!1),o){var a=o.getAllParents().slice();o.flush(),r.removeEmptyGroups(a,e)}}),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var n=_.sortRowNodesByOrder(r.childrenAfterGroup,e.rowNodeOrder);n&&e.changedPath.addParentNode(r)}},!1,!0)},t.prototype.orderGroups=function(e){if(this.usingTreeData)return;var r=this.gridOptionsWrapper.getInitialGroupOrderComparator();_.exists(r)&&n(e);function n(o){var a=_.exists(o.childrenAfterGroup)&&!o.leafGroup;a&&(o.childrenAfterGroup.sort(function(s,l){return r({nodeA:s,nodeB:l})}),o.childrenAfterGroup.forEach(function(s){return n(s)}))}},t.prototype.getExistingPathForNode=function(e,r){for(var n=[],o=this.usingTreeData?e:e.parent;o&&o!==r.rootNode;)n.push({key:o.key,rowGroupColumn:o.rowGroupColumn,field:o.field}),o=o.parent;return n.reverse(),n},t.prototype.moveNodesInWrongPath=function(e,r,n){var o=this;e.forEach(function(a){r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent);var s=function(f){return f.key},l=o.getExistingPathForNode(a,r).map(s),u=o.getGroupInfo(a,r).map(s),c=_.areEqual(l,u);c||o.moveNode(a,r,n)})},t.prototype.moveNode=function(e,r,n){if(this.removeNodesInStages([e],r,n),this.insertOneNode(e,r,!0),e.setData(e.data),r.changedPath.isActive()){var o=e.parent;r.changedPath.addParentNode(o)}},t.prototype.removeNodes=function(e,r,n){this.removeNodesInStages(e,r,n),r.changedPath.isActive()&&e.forEach(function(o){return r.changedPath.addParentNode(o.parent)})},t.prototype.removeNodesInStages=function(e,r,n){if(this.removeNodesFromParents(e,r,n),this.usingTreeData){this.postRemoveCreateFillerNodes(e,r);var o=e.map(function(a){return a.parent});this.removeEmptyGroups(o,r)}},t.prototype.forEachParentGroup=function(e,r,n){for(var o=r;o&&o!==e.rootNode;)n(o),o=o.parent},t.prototype.removeNodesFromParents=function(e,r,n){var o=this,a=n==null,s=n||new BatchRemover;e.forEach(function(l){o.removeFromParent(l,s),o.forEachParentGroup(r,l.parent,function(u){s.removeFromAllLeafChildren(u,l)})}),a&&s.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,r){var n=this;e.forEach(function(o){var a=o.hasChildren();if(a){var s=n.getExistingPathForNode(o,r),l=n.findParentForNode(o,s,r);l.expanded=o.expanded,l.allLeafChildren=o.allLeafChildren,l.childrenAfterGroup=o.childrenAfterGroup,l.childrenMapped=o.childrenMapped,l.updateHasChildren(),l.childrenAfterGroup.forEach(function(u){return u.parent=l})}})},t.prototype.removeEmptyGroups=function(e,r){for(var n=this,o=!0,a=function(l){var u=n.getChildrenMappedKey(l.key,l.rowGroupColumn),c=l.parent,f=c&&c.childrenMapped?!c.childrenMapped[u]:!0;return f?!1:!!l.isEmptyRowGroupNode()},s=function(){o=!1;var l=new BatchRemover;e.forEach(function(u){n.forEachParentGroup(r,u,function(c){a(c)&&(o=!0,n.removeFromParent(c,l),c.setSelected(!1))})}),l.flush()};o;)s()},t.prototype.removeFromParent=function(e,r){e.parent&&(r?r.removeFromChildrenAfterGroup(e.parent,e):(_.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[n]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,r){var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(r){var o=r.childrenMapped!=null;o&&(r.childrenMapped[n]=e),r.childrenAfterGroup.push(e),r.updateHasChildren()}},t.prototype.areGroupColsEqual=function(e,r){return e==null||r==null||e.pivotMode!==r.pivotMode?!1:_.areEqual(e.groupedCols,r.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var r=this,n=function(o){o&&o.forEach(function(a){var s=!r.usingTreeData&&!a.group;if(!s){var l={field:a.field,key:a.key,rowGroupColumn:a.rowGroupColumn};r.setGroupData(a,l),n(a.childrenAfterGroup)}})};n(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,r){if(!this.noChangeInGroupingColumns(e,r)){this.selectionService.removeGroupsFromSelection();var n=e.rootNode,o=e.groupedCols;n.leafGroup=this.usingTreeData?!1:o.length===0,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren();var a=n.sibling;a&&(a.childrenAfterGroup=n.childrenAfterGroup,a.childrenMapped=n.childrenMapped),this.insertNodes(n.allLeafChildren,e,!1)}},t.prototype.noChangeInGroupingColumns=function(e,r){var n=!1,o=this.columnModel.getGroupDisplayColumns(),a=o?o.map(function(s){return s.getId()}).join("-"):"";return r&&(n=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==a&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=a,n},t.prototype.insertNodes=function(e,r,n){var o=this;e.forEach(function(a){o.insertOneNode(a,r,n),r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent)})},t.prototype.insertOneNode=function(e,r,n){var o=this.getGroupInfo(e,r),a=this.findParentForNode(e,o,r);a.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[a.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(a,e,n):(e.parent=a,e.level=o.length,a.childrenAfterGroup.push(e),a.updateHasChildren())},t.prototype.findParentForNode=function(e,r,n){var o=this,a=n.rootNode;return r.forEach(function(s,l){a=o.getOrCreateNextNode(a,s,l,n),a.allLeafChildren.push(e)}),a},t.prototype.swapGroupWithUserNode=function(e,r,n){r.parent=e.parent,r.key=e.key,r.field=e.field,r.groupData=e.groupData,r.level=e.level,n||(r.expanded=e.expanded),r.leafGroup=e.leafGroup,r.rowGroupIndex=e.rowGroupIndex,r.allLeafChildren=e.allLeafChildren,r.childrenAfterGroup=e.childrenAfterGroup,r.childrenMapped=e.childrenMapped,r.updateHasChildren(),this.removeFromParent(e),r.childrenAfterGroup.forEach(function(o){return o.parent=r}),this.addToParent(r,e.parent)},t.prototype.getOrCreateNextNode=function(e,r,n,o){var a=this.getChildrenMappedKey(r.key,r.rowGroupColumn),s=e.childrenMapped?e.childrenMapped[a]:void 0;return s||(s=this.createGroup(r,e,n,o),this.addToParent(s,e)),s},t.prototype.createGroup=function(e,r,n,o){var a=new RowNode(this.beans);return a.group=!0,a.field=e.field,a.rowGroupColumn=e.rowGroupColumn,this.setGroupData(a,e),a.id=RowNode.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),a.key=e.key,a.level=n,a.leafGroup=this.usingTreeData?!1:n===o.groupedColCount-1,a.allLeafChildren=[],a.setAllChildrenCount(0),a.rowGroupIndex=this.usingTreeData?null:n,a.childrenAfterGroup=[],a.childrenMapped={},a.updateHasChildren(),a.parent=o.includeParents?r:null,this.setExpandedInitialValue(o,a),a},t.prototype.setGroupData=function(e,r){var n=this;e.groupData={};var o=this.columnModel.getGroupDisplayColumns();o.forEach(function(a){var s=n.usingTreeData||(e.rowGroupColumn?a.isRowGroupDisplayed(e.rowGroupColumn.getId()):!1);s&&(e.groupData[a.getColId()]=r.key)})},t.prototype.getChildrenMappedKey=function(e,r){return r?r.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,r){if(e.pivotMode&&r.leafGroup){r.expanded=!1;return}var n=this.gridOptionsWrapper.getIsGroupOpenByDefaultFunc();if(n){var o={rowNode:r,field:r.field,key:r.key,level:r.level,rowGroupColumn:r.rowGroupColumn};r.expanded=n(o)==!0;return}var a=e.expandByDefault;if(e.expandByDefault===-1){r.expanded=!0;return}r.expanded=r.level<a},t.prototype.getGroupInfo=function(e,r){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,r)},t.prototype.getGroupInfoFromCallback=function(e){var r=this.getDataPath?this.getDataPath(e.data):null;(r==null||r.length===0)&&_.doOnce(function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)},"groupStage.getGroupInfoFromCallback");var n=function(o){return{key:o,field:null,rowGroupColumn:null}};return r?r.map(n):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,r){var n=this,o=[];return r.groupedCols.forEach(function(a){var s=n.valueService.getKeyForNode(a,e),l=s!=null;if(r.pivotMode&&!l&&(s=" ",l=!0),l){var u={key:s,field:a.getColDef().field,rowGroupColumn:a};o.push(u)}}),o},__decorate$29([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$29([Autowired("selectableService")],t.prototype,"selectableService",void 0),__decorate$29([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$29([Autowired("beans")],t.prototype,"beans",void 0),__decorate$29([Autowired("selectionService")],t.prototype,"selectionService",void 0),__decorate$29([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$29([Bean("groupStage")],t),t}(BeanStub),__extends$3g=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$H=function(){return __assign$H=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$H.apply(this,arguments)},__decorate$28=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$V=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$w=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$V(arguments[t]));return i},PivotColDefService=function(i){__extends$3g(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}e=t,t.prototype.createPivotColumnDefs=function(r){var n=this.columnModel.getPivotColumns(),o=this.columnModel.getValueColumns(),a=n.length,s=this.recursiveBuildGroup(0,r,[],a,n);function l(f,d){return d===void 0&&(d=[]),f.forEach(function(h){h.children!==void 0?l(h.children,d):d.push(h)}),d}var u=l(s);this.addRowGroupTotals(s,u,o),this.addExpandablePivotGroups(s,u),this.addPivotTotalsToGroups(s,u);var c=u.map(function(f){return _.cloneObject(f)});return{pivotColumnGroupDefs:s,pivotColumnDefs:c}},t.prototype.recursiveBuildGroup=function(r,n,o,a,s){var l=this,u=this.columnModel.getValueColumns();if(r>=a)return this.buildMeasureCols(o);var c=s[r].getColDef(),f=this.headerNameComparator.bind(this,c.pivotComparator);if(u.length===1&&this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&r===a-1){var d=[];return _.iterateObject(n,function(p){var g=__spread$w(o,[p]);d.push(__assign$H(__assign$H({},l.createColDef(u[0],p,g)),{columnGroupShow:"open"}))}),d.sort(f),d}var h=[];return _.iterateObject(n,function(p,g){var v=__spread$w(o,[p]);h.push({children:l.recursiveBuildGroup(r+1,g,v,a,s),headerName:p,pivotKeys:v,columnGroupShow:"open",groupId:l.generateColumnGroupId(v)})}),h.sort(f),h},t.prototype.buildMeasureCols=function(r){var n=this,o=this.columnModel.getValueColumns();return o.length===0?[this.createColDef(null,"-",r)]:o.map(function(a){var s=n.columnModel.getDisplayNameForColumn(a,"header");return __assign$H(__assign$H({},n.createColDef(a,s,r)),{columnGroupShow:"open"})})},t.prototype.addExpandablePivotGroups=function(r,n){var o=this;if(!(this.gridOptionsWrapper.isSuppressExpandablePivotGroups()||this.gridOptionsWrapper.getPivotColumnGroupTotals())){var a=function(s,l,u){var c=s;if(c.children){var f=new Map;c.children.forEach(function(v){a(v,l,f)});var d=!c.children.some(function(v){return v.children});o.columnModel.getValueColumns().forEach(function(v){var m=o.columnModel.getDisplayNameForColumn(v,"header"),y=o.createColDef(v,m,s.pivotKeys);if(y.pivotTotalColumnIds=f.get(v.getColId()),y.columnGroupShow="closed",y.aggFunc=v.getAggFunc(),!d){var b=s.children;b.push(y),l.push(y)}}),o.merge(u,f)}else{var h=s;if(!h.pivotValueColumn)return;var p=h.pivotValueColumn.getColId(),g=u.has(p)?u.get(p):[];g.push(h.colId),u.set(p,g)}};r.forEach(function(s){a(s,n,new Map)})}},t.prototype.addPivotTotalsToGroups=function(r,n){var o=this;if(this.gridOptionsWrapper.getPivotColumnGroupTotals()){var a=this.gridOptionsWrapper.getPivotColumnGroupTotals()==="after",s=this.columnModel.getValueColumns(),l=s.map(function(c){return c.getAggFunc()});if(!(!l||l.length<1||!this.sameAggFuncs(l))){var u=s[0];r.forEach(function(c){o.recursivelyAddPivotTotal(c,n,u,a)})}}},t.prototype.recursivelyAddPivotTotal=function(r,n,o,a){var s=this,l=r;if(!l.children){var u=r;return u.colId?[u.colId]:null}var c=[];if(l.children.forEach(function(g){var v=s.recursivelyAddPivotTotal(g,n,o,a);v&&(c=c.concat(v))}),l.children.length>1){var f=this.gridOptionsWrapper.getLocaleTextFunc(),d=f("pivotColumnGroupTotals","Total"),h=this.createColDef(o,d,r.pivotKeys,!0);h.pivotTotalColumnIds=c,h.aggFunc=o.getAggFunc();var p=r.children;a?p.push(h):p.unshift(h),n.push(h)}return c},t.prototype.addRowGroupTotals=function(r,n,o){var a=this;if(this.gridOptionsWrapper.getPivotRowTotals())for(var s=this.gridOptionsWrapper.getPivotRowTotals()==="after",l=s?o.slice():o.slice().reverse(),u=function(d){var h=l[d],p=[];r.forEach(function(v){p=p.concat(a.extractColIdsForValueColumn(v,h))});var g=l.length>1||!c.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn();c.createRowGroupTotal(r,n,h,p,s,g)},c=this,f=0;f<l.length;f++)u(f)},t.prototype.extractColIdsForValueColumn=function(r,n){var o=this,a=r;if(!a.children){var s=a;return s.pivotValueColumn===n&&s.colId?[s.colId]:[]}var l=[];return a.children.forEach(function(u){o.extractColIdsForValueColumn(u,n);var c=o.extractColIdsForValueColumn(u,n);l=l.concat(c)}),l},t.prototype.createRowGroupTotal=function(r,n,o,a,s,l){var u=this.columnModel.getValueColumns(),c;if(u.length===0)c=this.createColDef(null,"-",[]);else{var f=this.columnModel.getDisplayNameForColumn(o,"header");c=this.createColDef(o,f,[]),c.pivotTotalColumnIds=a}c.colId=e.PIVOT_ROW_TOTAL_PREFIX+c.colId,n.push(c);var d=l?{children:[c],pivotKeys:[],groupId:e.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+o.getColId()}:c;s?r.push(d):r.unshift(d)},t.prototype.createColDef=function(r,n,o,a){a===void 0&&(a=!1);var s={};if(r){var l=r.getColDef();Object.assign(s,l),s.hide=!1}return s.headerName=n,s.colId=this.generateColumnId(o||[],r&&!a?r.getColId():""),s.field=s.colId,s.valueGetter=function(u){var c;return(c=u.data)===null||c===void 0?void 0:c[u.colDef.field]},s.pivotKeys=o,s.pivotValueColumn=r,s.filter===!0&&(s.filter="agNumberColumnFilter"),s},t.prototype.sameAggFuncs=function(r){if(r.length==1)return!0;for(var n=1;n<r.length;n++)if(r[n]!==r[0])return!1;return!0},t.prototype.headerNameComparator=function(r,n,o){return r?r(n.headerName,o.headerName):n.headerName&&!o.headerName?1:!n.headerName&&o.headerName?-1:!n.headerName||!o.headerName?0:n.headerName<o.headerName?-1:n.headerName>o.headerName?1:0},t.prototype.merge=function(r,n){n.forEach(function(o,a,s){var l=r.has(a)?r.get(a):[],u=__spread$w(l,o);r.set(a,u)})},t.prototype.generateColumnGroupId=function(r){var n=this.columnModel.getPivotColumns().map(function(o){return o.getColId()});return"pivotGroup_"+n.join("-")+"_"+r.join("-")},t.prototype.generateColumnId=function(r,n){var o=this.columnModel.getPivotColumns().map(function(a){return a.getColId()});return"pivot_"+o.join("-")+"_"+r.join("-")+"_"+n};var e;return t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",__decorate$28([Autowired("columnModel")],t.prototype,"columnModel",void 0),t=e=__decorate$28([Bean("pivotColDefService")],t),t}(BeanStub),__extends$3f=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$27=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PivotStage=function(i){__extends$3f(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.uniqueValues={},e}return t.prototype.execute=function(e){var r=e.rowNode,n=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(r,n):this.executePivotOff(n)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e,r){var n=this.bucketUpRowNodes(e),o=this.setUniqueValues(n),a=this.columnModel.getValueColumns(),s=a.map(function(v){return v.getId()+"-"+v.getColDef().headerName}).join("#"),l=a.map(function(v){return v.getAggFunc().toString()}).join("#"),u=this.aggregationColumnsHashLastTime!==s,c=this.aggregationFuncsHashLastTime!==l;this.aggregationColumnsHashLastTime=s,this.aggregationFuncsHashLastTime=l;var f=this.columnModel.getRowGroupColumns().map(function(v){return v.getId()}).join("#"),d=f!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=f,o||u||d||c){var h=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),p=h.pivotColumnGroupDefs,g=h.pivotColumnDefs;this.pivotColumnDefs=g,this.columnModel.setSecondaryColumns(p,"rowModelUpdated"),r&&r.setInactive()}},t.prototype.setUniqueValues=function(e){var r=JSON.stringify(e),n=JSON.stringify(this.uniqueValues),o=r!==n;return o?(this.uniqueValues=e,!0):!1},t.prototype.bucketUpRowNodes=function(e){var r=this,n={},o=function(a){a.leafGroup?r.bucketRowNode(a,n):a.childrenAfterFilter.forEach(function(s){o(s)})};return o(e),n},t.prototype.bucketRowNode=function(e,r){var n=this.columnModel.getPivotColumns();n.length===0?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,n,0,r),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)},t.prototype.bucketChildren=function(e,r,n,o){var a=this,s={},l=r[n];if(e.forEach(function(c){var f=a.valueService.getKeyForNode(l,c);_.missing(f)&&(f=""),o[f]||(o[f]={}),s[f]||(s[f]=[]),s[f].push(c)}),n===r.length-1)return s;var u={};return _.iterateObject(s,function(c,f){u[c]=a.bucketChildren(f,r,n+1,o[c])}),u},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},__decorate$27([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$27([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$27([Autowired("pivotColDefService")],t.prototype,"pivotColDefService",void 0),t=__decorate$27([Bean("pivotStage")],t),t}(BeanStub),__extends$3e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$26=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AGBigInt=typeof BigInt>"u"?null:BigInt,AggFuncService=function(i){__extends$3e(t,i);function t(){var r=i!==null&&i.apply(this,arguments)||this;return r.aggFuncsMap={},r.initialised=!1,r}e=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs()))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[e.AGG_SUM]=aggSum,this.aggFuncsMap[e.AGG_FIRST]=aggFirst,this.aggFuncsMap[e.AGG_LAST]=aggLast,this.aggFuncsMap[e.AGG_MIN]=aggMin,this.aggFuncsMap[e.AGG_MAX]=aggMax,this.aggFuncsMap[e.AGG_COUNT]=aggCount,this.aggFuncsMap[e.AGG_AVG]=aggAvg,this.initialised=!0},t.prototype.isAggFuncPossible=function(r,n){var o=this.getFuncNames(r),a=_.includes(o,n),s=_.exists(this.aggFuncsMap[n]);return a&&s},t.prototype.getDefaultAggFunc=function(r){var n=r.getColDef().defaultAggFunc;if(_.exists(n)&&this.isAggFuncPossible(r,n))return n;if(this.isAggFuncPossible(r,e.AGG_SUM))return e.AGG_SUM;var o=this.getFuncNames(r);return _.existsAndNotEmpty(o)?o[0]:null},t.prototype.addAggFuncs=function(r){_.iterateObject(r,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(r,n){this.init(),this.aggFuncsMap[r]=n},t.prototype.getAggFunc=function(r){return this.init(),this.aggFuncsMap[r]},t.prototype.getFuncNames=function(r){var n=r.getColDef().allowedAggFuncs;return n??Object.keys(this.aggFuncsMap).sort()},t.prototype.clear=function(){this.aggFuncsMap={}};var e;return t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",__decorate$26([PostConstruct],t.prototype,"init",null),t=e=__decorate$26([Bean("aggFuncService")],t),t}(BeanStub);function aggSum(i){for(var t=i.values,e=null,r=0;r<t.length;r++){var n=t[r];typeof n=="number"?e===null?e=n:AGBigInt?e+=typeof e=="number"?n:AGBigInt(n):e+=n:typeof n=="bigint"&&(e===null?e=n:e=(typeof e=="bigint"?e:AGBigInt(e))+n)}return e}function aggFirst(i){return i.values.length>0?i.values[0]:null}function aggLast(i){return i.values.length>0?_.last(i.values):null}function aggMin(i){for(var t=i.values,e=null,r=0;r<t.length;r++){var n=t[r];(typeof n=="number"||typeof n=="bigint")&&(e===null||e>n)&&(e=n)}return e}function aggMax(i){for(var t=i.values,e=null,r=0;r<t.length;r++){var n=t[r];(typeof n=="number"||typeof n=="bigint")&&(e===null||e<n)&&(e=n)}return e}function aggCount(i){for(var t=i.values,e=0,r=0;r<t.length;r++){var n=t[r];e+=n!=null&&typeof n.value=="number"?n.value:1}return e}function aggAvg(i){for(var t,e,r,n=i.values,o=0,a=0,s=0;s<n.length;s++){var l=n[s],u=null;typeof l=="number"||typeof l=="bigint"?(u=l,a++):l!=null&&(typeof l.value=="number"||typeof l.value=="bigint")&&typeof l.count=="number"&&(AGBigInt?u=l.value*(typeof l.value=="number"?l.count:AGBigInt(l.count)):u=l.value*l.count,a+=l.count),typeof u=="number"?AGBigInt?o+=typeof o=="number"?u:AGBigInt(u):o+=u:typeof u=="bigint"&&(o=(typeof o=="bigint"?o:AGBigInt(o))+u)}var c=null;a>0&&(AGBigInt?c=o/(typeof o=="number"?a:AGBigInt(a)):c=o/a);var f=(e=(t=i.rowNode)===null||t===void 0?void 0:t.aggData)===null||e===void 0?void 0:e[(r=i.column)===null||r===void 0?void 0:r.getColId()];return f&&f.count===a&&f.value===c?f:{count:a,value:c,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var __extends$3d=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$25=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DropZoneColumnComp=function(i){__extends$3d(t,i);function t(e,r,n,o,a){var s=i.call(this)||this;return s.column=e,s.dragSourceDropTarget=r,s.ghost=n,s.dropZonePurpose=o,s.horizontal=a,s.popupShowing=!1,s}return t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);var r=this.getGui(),n=this.gridOptionsWrapper.isFunctionsReadOnly();this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(_.createIconNoSpan("columnDrag",this.gridOptionsWrapper)),this.eButton.appendChild(_.createIconNoSpan("cancel",this.gridOptionsWrapper)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!n&&this.addDragSource(),this.setupAria(),this.addManagedListener(this.column,Column.EVENT_SORT_CHANGED,function(){e.setupAria()}),this.setupTooltip()},t.prototype.setupAria=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=this.getColumnAndAggFuncName(),n=r.name,o=r.aggFuncName,a=e("ariaDropZoneColumnComponentAggFuncSeperator"," of "),s={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},l=this.column.getSort(),u=this.gridOptionsWrapper.isRowGroupPanelSuppressSort(),c=[[o&&""+o+a,n,this.isGroupingZone()&&!u&&l&&", "+s[l]].filter(function(g){return!!g}).join("")],f=this.gridOptionsWrapper.isFunctionsReadOnly();if(this.isAggregationZone()&&!f){var d=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");c.push(d)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!u){var h=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");c.push(h)}var p=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");c.push(p),_.setAriaLabel(this.getGui(),c.join(". "))},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.setupSort=function(){var e=this,r=this.column.getColDef().sortable,n=this.isGroupingZone();if(!(!r||!n)&&!this.gridOptionsWrapper.isRowGroupPanelSuppressSort()){this.eSortIndicator.setupSort(this.column,!0);var o=function(a){a.preventDefault();var s=e.gridOptionsWrapper.isMultiSortKeyCtrl(),l=s?a.ctrlKey||a.metaKey:a.shiftKey;e.sortController.progressSort(e.column,l,"uiColumnSorted")};this.addGuiEventListener("click",o),this.addGuiEventListener("keydown",function(a){var s=a.key===KeyCode.ENTER;s&&e.isGroupingZone()&&o(a)})}},t.prototype.addDragSource=function(){var e=this,r={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,defaultIconName:DragAndDropService.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsWrapper.isFunctionsReadOnly()&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;_.setDisplayed(this.eButton,!this.gridOptionsWrapper.isFunctionsReadOnly());var r={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",function(o){var a=o.key===KeyCode.ENTER,s=o.key===KeyCode.DELETE;s&&(o.preventDefault(),e.dispatchEvent(r)),a&&e.isAggregationZone()&&!e.gridOptionsWrapper.isFunctionsReadOnly()&&(o.preventDefault(),e.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",function(o){e.dispatchEvent(r),o.stopPropagation()});var n=new TouchListener(this.eButton);this.addManagedListener(n,TouchListener.EVENT_TAP,function(){e.dispatchEvent(r)}),this.addDestroyFunc(n.destroy.bind(n))},t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName,r="";if(this.isAggregationZone()){var n=this.column.getAggFunc(),o=typeof n=="string"?n:"agg",a=this.gridOptionsWrapper.getLocaleTextFunc();r=a(o,o)}return{name:e,aggFuncName:r}},t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),r=e.name,n=e.aggFuncName,o=this.isAggregationZone()?n+"("+r+")":r,a=_.escapeString(o);this.eText.innerHTML=a},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var r=new VirtualList("select-agg-func"),n=this.aggFuncService.getFuncNames(this.column),o=this.getGui(),a=r.getGui();r.setModel({getRow:function(d){return n[d]},getRowCount:function(){return n.length}}),this.getContext().createBean(r);var s=_.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(a),s.style.width=o.clientWidth+"px";var l=function(){e.destroyBean(r),e.popupShowing=!1,o.focus()},u=this.gridOptionsWrapper.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:l,ariaLabel:u("ariaLabelAggregationFunction","Aggregation Function")});c&&r.setComponentCreator(this.createAggSelect.bind(this,c.hideFunc)),r.addGuiEventListener("keydown",function(d){if(d.key===KeyCode.ENTER||d.key===KeyCode.SPACE){var h=r.getLastFocusedRow();if(h==null)return;var p=r.getComponentAt(h);p&&p.selectItem()}}),this.popupService.positionPopupUnderComponent({type:"aggFuncSelect",eventSource:o,ePopup:s,keepWithinBounds:!0,column:this.column}),r.refresh();var f=n.findIndex(function(d){return d===e.column.getAggFunc()});f===-1&&(f=0),r.focusRow(f)}},t.prototype.createAggSelect=function(e,r){var n=this,o=function(){if(e(),n.gridOptionsWrapper.isFunctionsPassive()){var c={type:Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[n.column],aggFunc:r};n.eventService.dispatchEvent(c)}else n.columnModel.setColumnAggFunc(n.column,r,"toolPanelDragAndDrop")},a=this.gridOptionsWrapper.getLocaleTextFunc(),s=r.toString(),l=a(s,s),u=new AggItemComp(o,l);return u},t.prototype.addElementClasses=function(e,r){r=r?"-"+r:"";var n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell"+r,"ag-column-drop-"+n+"-cell"+r)},t.prototype.isAggregationZone=function(){return this.dropZonePurpose==="aggregation"},t.prototype.isGroupingZone=function(){return this.dropZonePurpose==="rowGroup"},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE=`<span role="option" tabindex="0">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`,__decorate$25([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$25([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$25([Autowired("popupService")],t.prototype,"popupService",void 0),__decorate$25([Optional("aggFuncService")],t.prototype,"aggFuncService",void 0),__decorate$25([Autowired("sortController")],t.prototype,"sortController",void 0),__decorate$25([RefSelector("eText")],t.prototype,"eText",void 0),__decorate$25([RefSelector("eDragHandle")],t.prototype,"eDragHandle",void 0),__decorate$25([RefSelector("eButton")],t.prototype,"eButton",void 0),__decorate$25([RefSelector("eSortIndicator")],t.prototype,"eSortIndicator",void 0),__decorate$25([PostConstruct],t.prototype,"init",null),t}(Component),AggItemComp=function(i){__extends$3d(t,i);function t(e,r){var n=i.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return t}(Component),__extends$3c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$24=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$U=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$v=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$U(arguments[t]));return i},BaseDropZonePanel=function(i){__extends$3c(t,i);function t(e,r){var n=i.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return n.horizontal=e,n.dropZonePurpose=r,n.state=t.STATE_NOT_DRAGGING,n.guiDestroyFunctions=[],n.childColumnComponents=[],n.resizeEnabled=!1,n.addElementClasses(n.getGui()),n.eColumnDropList=document.createElement("div"),n.addElementClasses(n.eColumnDropList,"list"),_.setAriaRole(n.eColumnDropList,"listbox"),n}return t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),i.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach(function(e){return e()}),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,_.clearElement(this.getGui()),_.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),_.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},t.prototype.handleKeyDown=function(e){var r=!this.horizontal,n=e.key===KeyCode.DOWN,o=e.key===KeyCode.UP;if(!r){var a=this.gridOptionsWrapper.isEnableRtl();n=!a&&e.key===KeyCode.RIGHT||a&&e.key===KeyCode.LEFT,o=!a&&e.key===KeyCode.LEFT||a&&e.key===KeyCode.RIGHT}if(!(!n&&!o)){var s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,o);s&&(e.preventDefault(),s.focus())}},t.prototype.addElementClasses=function(e,r){r=r?"-"+r:"";var n=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop"+r,"ag-column-drop-"+n+r)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===DragSourceType.HeaderCell||e===DragSourceType.ToolPanel},t.prototype.checkInsertIndex=function(e){var r=this.getNewInsertIndex(e);if(r<0)return!1;var n=r!==this.insertIndex;return n&&(this.insertIndex=r),n},t.prototype.getNewInsertIndex=function(e){var r=this,n=e.event,o=this.horizontal?n.clientX:n.clientY,a=this.childColumnComponents.map(function(f){return f.getGui().getBoundingClientRect()}),s=a.findIndex(function(f){return r.horizontal?f.right>o&&f.left<o:f.top<o&&f.bottom>o});if(s===-1){var l=this.beans.gridOptionsWrapper.isEnableRtl(),u=a.every(function(f){return o>(r.horizontal?f.right:f.bottom)});if(u)return l&&this.horizontal?0:this.childColumnComponents.length;var c=a.every(function(f){return o<(r.horizontal?f.left:f.top)});return c?l&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var r=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){var o=this.isRowGroupPanel()&&!this.gridOptionsWrapper.isSuppressRowGroupHidesColumns()&&!e.fromNudge;if(o){var a=e.dragSource.getDragItem(),s=a.columns;this.setColumnsVisible(s,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(e),this.refreshGui()}},t.prototype.setColumnsVisible=function(e,r,n){if(n===void 0&&(n="api"),e){var o=e.filter(function(a){return!a.getColDef().lockVisible});this.colModel.setColumnsVisible(o,r,n)}},t.prototype.isPotentialDndColumns=function(){return _.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.isRowGroupPanel=function(){return this.dropZonePurpose==="rowGroup"},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var r=e.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){var n=this.isRowGroupPanel()&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&!e.fromNudge;if(n){var o=e.dragSource.getDragItem();this.setColumnsVisible(o.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsWrapper.isFunctionsPassive()||!e)&&this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var r=this.getExistingColumns().filter(function(n){return!_.includes(e,n)});this.updateColumns(r)},t.prototype.addColumns=function(e){if(e){var r=this.getExistingColumns().slice(),n=e.filter(function(o){return r.indexOf(o)<0});_.insertArrayIntoArray(r,n,this.insertIndex),this.updateColumns(r)}},t.prototype.rearrangeColumns=function(e){var r=this.getNonGhostColumns().slice();return _.insertArrayIntoArray(r,e,this.insertIndex),_.areEqual(r,this.getExistingColumns())?!1:(this.updateColumns(r),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,r=this.resizeEnabled,n=this.getFocusedItem(),o=this.focusService.findNextFocusableElement();o||(o=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),r&&this.toggleResizable(r),this.restoreFocus(n,o)},t.prototype.getFocusedItem=function(){var e=this.getGui(),r=this.gridOptionsWrapper.getDocument().activeElement;if(!e.contains(r))return-1;var n=Array.from(e.querySelectorAll(".ag-column-drop-cell"));return n.indexOf(r)},t.prototype.restoreFocus=function(e,r){var n=this.getGui(),o=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(e!==-1){o.length===0&&r.focus();var a=Math.min(o.length-1,e),s=o[a];s&&s.focus()}},t.prototype.getNonGhostColumns=function(){var e=this,r=this.getExistingColumns();return this.isPotentialDndColumns()?r.filter(function(n){return!_.includes(e.potentialDndColumns,n)}):r},t.prototype.addColumnsToGui=function(){var e=this,r=this.getNonGhostColumns(),n=r.map(function(a){return e.createColumnComponent(a,!1)});if(this.isPotentialDndColumns()){var o=this.potentialDndColumns.map(function(a){return e.createColumnComponent(a,!0)});this.insertIndex>=n.length?n.push.apply(n,__spread$v(o)):n.splice.apply(n,__spread$v([this.insertIndex,0],o))}this.appendChild(this.eColumnDropList),n.forEach(function(a,s){s>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(a.getGui())}),this.addAriaLabelsToComponents()},t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach(function(r,n){var o=r.getGui();_.setAriaPosInSet(o,n+1),_.setAriaSetSize(o,e.childColumnComponents.length)})},t.prototype.createColumnComponent=function(e,r){var n=this,o=new DropZoneColumnComp(e,this.dropTarget,r,this.dropZonePurpose,this.horizontal);return o.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(o),this.guiDestroyFunctions.push(function(){return n.destroyBean(o)}),r||this.childColumnComponents.push(o),o},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,r=document.createElement("div");if(r.setAttribute("aria-hidden","true"),this.addElementClasses(r,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),r.appendChild(e),!this.horizontal){var n=document.createElement("span");this.addElementClasses(n,"title"),n.innerHTML=this.params.title,r.appendChild(n)}this.appendChild(r)},t.prototype.isExistingColumnsEmpty=function(){return this.getExistingColumns().length===0},t.prototype.addEmptyMessageToGui=function(){if(!(!this.isExistingColumnsEmpty()||this.isPotentialDndColumns())){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var r=this.beans.gridOptionsWrapper.isEnableRtl(),n=_.createIconNoSpan(r?"smallLeft":"smallRight",this.beans.gridOptionsWrapper);this.addElementClasses(n,"cell-separator"),e.appendChild(n)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",__decorate$24([Autowired("columnModel")],t.prototype,"colModel",void 0),__decorate$24([Autowired("focusService")],t.prototype,"focusService",void 0),t}(Component),__extends$3b=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$23=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RowGroupDropZonePanel=function(i){__extends$3b(t,i);function t(e){return i.call(this,e,"rowGroup")||this}return t.prototype.passBeansUp=function(){i.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");i.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_GROUP,icon:_.createIconNoSpan("rowGroupPanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaRowGroupDropZonePanelLabel","Row Groups");return r},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},t.prototype.isColumnDroppable=function(e){return this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary()?!1:e.isAllowRowGroup()&&!e.isRowGroupActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var r={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_GROUP:DragAndDropService.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},__decorate$23([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$23([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),__decorate$23([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$23([PostConstruct],t.prototype,"passBeansUp",null),t}(BaseDropZonePanel),__extends$3a=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$22=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PivotDropZonePanel=function(i){__extends$3a(t,i);function t(e){return i.call(this,e,"pivot")||this}return t.prototype.passBeansUp=function(){i.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");i.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_GROUP,icon:_.createIconNoSpan("pivotPanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaPivotDropZonePanelLabel","Column Labels");return r},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsWrapper.getPivotPanelShow()){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var r=this.columnModel.isPivotActive();this.setDisplayed(e&&r);break;default:this.setDisplayed(!1);break}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary()?!1:e.isAllowPivot()&&!e.isPivotActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var r={type:Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_PIVOT:DragAndDropService.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},__decorate$22([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$22([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),__decorate$22([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$22([PostConstruct],t.prototype,"passBeansUp",null),t}(BaseDropZonePanel),__extends$39=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$21=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},GridHeaderDropZones=function(i){__extends$39(t,i);function t(){return i.call(this)||this}return t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),r=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),_.setAriaRole(e,"presentation"),this.rowGroupComp=new RowGroupDropZonePanel(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new PivotDropZonePanel(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,Component.EVENT_DISPLAYED_CHANGED,r),this.addManagedListener(this.pivotComp,Component.EVENT_DISPLAYED_CHANGED,r),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsWrapper.getRowGroupPanelShow();if(e===Constants.ALWAYS)this.rowGroupComp.setDisplayed(!0);else if(e===Constants.ONLY_WHEN_GROUPING){var r=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(r)}else this.rowGroupComp.setDisplayed(!1)}},__decorate$21([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$21([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$38=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$20=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FilterAggregatesStage=function(i){__extends$38(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.execute=function(e){var r=this,n=this.columnModel.isPivotMode(),o=this.filterManager.isAggregateFilterPresent(),a=function(d){return!d.node.group},s=function(d){return d.node.leafGroup},l=this.gridOptionsWrapper.getGroupAggFiltering()||(n?s:a),u=e.changedPath,c=function(d,h){h===void 0&&(h=!1),d.childrenAfterFilter&&(d.childrenAfterAggFilter=d.childrenAfterFilter,h&&d.childrenAfterAggFilter.forEach(function(p){return c(p,h)}),r.setAllChildrenCount(d)),d.sibling&&(d.sibling.childrenAfterAggFilter=d.childrenAfterAggFilter)},f=function(d){var h;d.childrenAfterAggFilter=((h=d.childrenAfterFilter)===null||h===void 0?void 0:h.filter(function(p){var g,v=l({node:p});if(v){var m=r.filterManager.doesRowPassAggregateFilters({rowNode:p});if(m)return c(p,!0),!0}var y=(g=p.childrenAfterAggFilter)===null||g===void 0?void 0:g.length;return y}))||null,r.setAllChildrenCount(d),d.sibling&&(d.sibling.childrenAfterAggFilter=d.childrenAfterAggFilter)};u.forEachChangedNodeDepthFirst(o?f:c,!0)},t.prototype.setAllChildrenCountTreeData=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){r++,r+=n.allChildrenCount}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCountGridGrouping=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){n.group?r+=n.allChildrenCount:r++}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCount=function(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gridOptionsWrapper.isTreeData()?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)},__decorate$20([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$20([Autowired("columnModel")],t.prototype,"columnModel",void 0),t=__decorate$20([Bean("filterAggregatesStage")],t),t}(BeanStub),RowGroupingModule={moduleName:ModuleNames.RowGroupingModule,beans:[AggregationStage,FilterAggregatesStage,GroupStage,PivotColDefService,PivotStage,AggFuncService],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:GridHeaderDropZones}],dependantModules:[EnterpriseCoreModule]},__extends$37=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1$=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ValuesDropZonePanel=function(i){__extends$37(t,i);function t(e){return i.call(this,e,"aggregation")||this}return t.prototype.passBeansUp=function(){i.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");i.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_AGGREGATE,icon:_.createIconNoSpan("valuePanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaValuesDropZonePanelLabel","Values");return r},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_AGGREGATE:DragAndDropService.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary()?!1:e.isAllowValue()&&!e.isValueActive()},t.prototype.updateColumns=function(e){if(this.gridOptionsWrapper.isFunctionsPassive()){var r={type:Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(r)}else this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},__decorate$1$([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1$([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),__decorate$1$([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$1$([PostConstruct],t.prototype,"passBeansUp",null),t}(BaseDropZonePanel),__extends$36=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1_=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PrimaryColsPanel=function(i){__extends$36(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,r,n){this.allowDragging=e,this.params=r,this.eventType=n,this.primaryColsHeaderPanel.init(this.params);var o=this.params.suppressColumnFilter,a=this.params.suppressColumnSelectAll,s=this.params.suppressColumnExpandAll;s&&o&&a&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE=`<div class="ag-column-select">
            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
        </div>`,__decorate$1_([RefSelector("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),__decorate$1_([RefSelector("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),__decorate$1_([PostConstruct],t.prototype,"postConstruct",null),t}(TabGuardComp),__extends$35=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$G=function(){return __assign$G=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$G.apply(this,arguments)},__decorate$1Z=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ColumnToolPanel=function(i){__extends$35(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.childDestroyFuncs=[],e}return t.prototype.setVisible=function(e){i.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var r=this,n={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=__assign$G(__assign$G(__assign$G({},n),e),{context:this.gridOptionsWrapper.getContext()}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)}),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new PrimaryColsPanel),this.childDestroyFuncs.push(function(){return r.destroyBean(r.primaryColsPanel)}),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new RowGroupDropZonePanel(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.rowGroupDropZonePanel)}),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new ValuesDropZonePanel(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.valuesDropZonePanel)}),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new PivotDropZonePanel(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotDropZonePanel)}),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var o=this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){r.resetChildrenHeight(),r.setLastVisible()});this.childDestroyFuncs.push(function(){return o()})}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var r=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)})),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new RowGroupDropZonePanel(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new ValuesDropZonePanel(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new PivotDropZonePanel(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(function(e){if(e){var r=e.getGui();e.toggleResizable(!r.classList.contains("ag-last-column-drop")&&!r.classList.contains("ag-hidden"))}})},t.prototype.setLastVisible=function(){var e=this.getGui(),r=Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop"));r.forEach(function(a){return a.classList.remove("ag-last-column-drop")});var n=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),o=_.last(n);o&&o.classList.add("ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var e=this.getGui(),r=e.children,n=0;n<r.length;n++){var o=r[n];o.style.removeProperty("height"),o.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Row Grouping")},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach(function(e){return e()}),this.childDestroyFuncs.length=0,_.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),i.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',__decorate$1Z([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$1Z([Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(Component),__extends$34=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1Y=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},HorizontalResizeComp=function(i){__extends$34(t,i);function t(){var e=i.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsWrapper.isEnableRtl())},t.prototype.dispatchResizeEvent=function(e,r,n){var o={type:Events.EVENT_TOOL_PANEL_SIZE_CHANGED,width:n,started:e,ended:r};this.eventService.dispatchEvent(o)},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},t.prototype.onResizeEnd=function(e){return this.onResizing(e,!0)},t.prototype.onResizing=function(e,r){r===void 0&&(r=!1);var n=this.inverted?-1:1,o=Math.max(this.minWidth,Math.floor(this.startingWidth-e*n));this.maxWidth!=null&&(o=Math.min(this.maxWidth,o)),this.elementToResize.style.width=o+"px",this.dispatchResizeEvent(!1,r,o)},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){e!=null?this.minWidth=e:this.minWidth=100},__decorate$1Y([Autowired("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),__decorate$1Y([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$33=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1X=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SideBarButtonComp=function(i){__extends$33(t,i);function t(e){var r=i.call(this)||this;return r.toolPanelDef=e,r}return t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))},t.prototype.createTemplate=function(){var e=`<div class="ag-side-button" role="presentation">
                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">
                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
                    <span ref ="eLabel" class="ag-side-button-label"></span>
                </button>
            </div>`;return e},t.prototype.setLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=this.toolPanelDef,n=e(r.labelKey,r.labelDefault);this.eLabel.innerText=n},t.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",_.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsWrapper))},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e)},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",__decorate$1X([RefSelector("eToggleButton")],t.prototype,"eToggleButton",void 0),__decorate$1X([RefSelector("eIconWrapper")],t.prototype,"eIconWrapper",void 0),__decorate$1X([RefSelector("eLabel")],t.prototype,"eLabel",void 0),__decorate$1X([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$32=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1W=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SideBarButtonsComp=function(i){__extends$32(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.buttonComps=[],e}return t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(!(e.key!==KeyCode.TAB||!e.shiftKey)){var r=_.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(r,!0)&&e.preventDefault()}},t.prototype.setToolPanelDefs=function(e){e.forEach(this.addButtonComp.bind(this))},t.prototype.setActiveButton=function(e){this.buttonComps.forEach(function(r){r.setSelected(e===r.getToolPanelId())})},t.prototype.addButtonComp=function(e){var r=this,n=this.createBean(new SideBarButtonComp(e));this.buttonComps.push(n),this.appendChild(n),n.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED,function(){r.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})})},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),_.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',__decorate$1W([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$1W([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1W([PostConstruct],t.prototype,"postConstruct",null),__decorate$1W([PreDestroy],t.prototype,"clearButtons",null),t}(Component),__extends$31=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1V=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelWrapper=function(i){__extends$31(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.setupResize=function(){var e=this.getGui(),r=this.resizeBar=this.createManagedBean(new HorizontalResizeComp);r.setElementToResize(e),this.appendChild(r)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var r=e.id,n=e.minWidth,o=e.maxWidth,a=e.width;this.toolPanelId=r,this.width=a;var s={},l=this.userComponentFactory.getToolPanelCompDetails(e,s),u=l.newAgStackInstance();if(u==null){console.warn("AG Grid: error processing tool panel component "+r+". You need to specify either 'toolPanel' or 'toolPanelFramework'");return}u.then(this.setToolPanelComponent.bind(this)),n!=null&&this.resizeBar.setMinWidth(n),o!=null&&this.resizeBar.setMaxWidth(o)},t.prototype.setToolPanelComponent=function(e){var r=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(function(){r.destroyBean(e)}),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var r=this.gridOptionsWrapper.isEnableRtl(),n=e==="left",o=r?n:!n;this.resizeBar.setInverted(o)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper"/>',__decorate$1V([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),__decorate$1V([PostConstruct],t.prototype,"setupResize",null),t}(Component),__extends$30=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1U=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SideBarComp=function(i){__extends$30(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.toolPanelWrappers=[],e}return t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.gridOptionsWrapper.addEventListener("sideBar",function(){e.clearDownUi(),e.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var r=this,n=r.focusService,o=r.sideBarButtonsComp,a=this.getGui(),s=o.getGui(),l=this.gridOptionsWrapper.getDocument(),u=l.activeElement,c=a.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");if(c){if(s.contains(u))n.focusInto(c,e.shiftKey)&&e.preventDefault();else if(!n.isFocusUnderManagedComponent(c)&&e.shiftKey){var f=n.findFocusableElements(c)[0],d=this.gridOptionsWrapper.getDocument();if(d.activeElement===f){var h=s.querySelector(".ag-selected button");h&&(e.preventDefault(),h.focus())}}}}},t.prototype.handleKeyDown=function(e){var r=this.gridOptionsWrapper.getDocument();if(this.sideBarButtonsComp.getGui().contains(r.activeElement)){var n=this.sideBarButtonsComp.getGui(),o=Array.prototype.slice.call(n.querySelectorAll(".ag-side-button")),a=r.activeElement,s=o.findIndex(function(c){return c.contains(a)}),l=null;switch(e.key){case KeyCode.LEFT:case KeyCode.UP:l=Math.max(0,s-1);break;case KeyCode.RIGHT:case KeyCode.DOWN:l=Math.min(s+1,o.length-1);break}if(l!==null){var u=o[l].querySelector("button");u&&(u.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var r=e.toolPanelId,n=this.openedItem();n===r?this.openToolPanel(void 0):this.openToolPanel(r)},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsWrapper.getSideBar(),r=!!e&&!!e.toolPanels;if(r){var n=r&&!e.hiddenByDefault;this.setDisplayed(n);var o=e.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(o),this.setupToolPanels(o),this.setSideBarPosition(e.position),e.hiddenByDefault||this.openToolPanel(e.defaultToolPanel)}},t.prototype.setSideBarPosition=function(e){e||(e="right");var r=e==="left",n=r?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",r),this.addOrRemoveCssClass("ag-side-bar-right",!r),this.toolPanelWrappers.forEach(function(o){o.setResizerSizerSide(n)}),this},t.prototype.setupToolPanels=function(e){var r=this;e.forEach(function(n){if(n.id==null){console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id");return}if(n.toolPanel==="agColumnsToolPanel"){var o=!ModuleRegistry.assertRegistered(ModuleNames.ColumnToolPanelModule,"Column Tool Panel");if(o)return}if(n.toolPanel==="agFiltersToolPanel"){var o=!ModuleRegistry.assertRegistered(ModuleNames.FiltersToolPanelModule,"Filters Tool Panel");if(o)return}var a=new ToolPanelWrapper;r.getContext().createBean(a),a.setToolPanelDef(n),a.setDisplayed(!1),r.getGui().appendChild(a.getGui()),r.toolPanelWrappers.push(a)})},t.prototype.refresh=function(){this.toolPanelWrappers.forEach(function(e){return e.refresh()})},t.prototype.openToolPanel=function(e){var r=this.openedItem();if(r!==e){this.toolPanelWrappers.forEach(function(a){var s=e===a.getToolPanelId();a.setDisplayed(s)});var n=this.openedItem(),o=r!==n;o&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e))}},t.prototype.getToolPanelInstance=function(e){var r=this.toolPanelWrappers.filter(function(n){return n.getToolPanelId()===e})[0];if(!r){console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e);return}return r.getToolPanelInstance()},t.prototype.raiseToolPanelVisibleEvent=function(e){var r={type:Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:e};this.eventService.dispatchEvent(r)},t.prototype.close=function(){this.openToolPanel(void 0)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach(function(r){r.isDisplayed()&&(e=r.getToolPanelId())}),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)}),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
        </div>`,__decorate$1U([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$1U([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$1U([RefSelector("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),__decorate$1U([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$2$=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1T=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelColDefService=function(i){__extends$2$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isColGroupDef=function(r){return r&&typeof r.children<"u"},e.getId=function(r){return e.isColGroupDef(r)?r.groupId:r.colId},e}return t.prototype.createColumnTree=function(e){var r=this,n=[],o=function(s,l){if(r.isColGroupDef(s)){var u=s,c=typeof u.groupId<"u"?u.groupId:u.headerName,f=new ProvidedColumnGroup(u,c,!1,l),d=[];return u.children.forEach(function(v){var m=o(v,l+1);m&&d.push(m)}),f.setChildren(d),f}else{var h=s,p=h.colId?h.colId:h.field,g=r.columnModel.getPrimaryColumn(p);return g||n.push(h),g}},a=[];return e.forEach(function(s){var l=o(s,0);l&&a.push(l)}),n.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",n),a},t.prototype.syncLayoutWithGrid=function(e){var r=this.getLeafPathTrees(),n=this.mergeLeafPathTrees(r);e(n)},t.prototype.getLeafPathTrees=function(){var e=function(o,a){var s;if(o instanceof ProvidedColumnGroup)if(o.isPadding())s=a;else{var l=Object.assign({},o.getColGroupDef());l.groupId=o.getGroupId(),l.children=[a],s=l}else{var u=Object.assign({},o.getColDef());u.colId=o.getColId(),s=u}var c=o.getOriginalParent();return c?e(c,s):s},r=this.columnModel.getAllGridColumns(),n=r.filter(function(o){var a=o.getColDef();return o.isPrimary()&&!a.showRowGroup});return n.map(function(o){return e(o,o.getColDef())})},t.prototype.mergeLeafPathTrees=function(e){for(var r=this,n=function(c,f){var d=r.isColGroupDef(c)&&r.isColGroupDef(f);return d&&r.getId(c)===r.getId(f)},o=function(c,f){if(!r.isColGroupDef(f))return c;var d=c,h=f;if(h.children&&h.groupId){var p=r.addChildrenToGroup(d,h.groupId,h.children[0]);if(p)return d}return h.children.forEach(function(g){return o(d,g)}),d},a=[],s=1;s<=e.length;s++){var l=e[s-1],u=e[s];n(l,u)?e[s]=o(l,u):a.push(l)}return a},t.prototype.addChildrenToGroup=function(e,r,n){var o=this,a=function(f,d){var h=f.children.map(o.getId),p=_.includes(h,o.getId(d)),g=_.last(f.children),v=g&&o.getId(g)!==o.getId(d);return p&&v};if(!this.isColGroupDef(e))return!0;var s=e,l=n;if(a(s,l))return s.children.push(l),!0;if(s.groupId===r){var u=s.children.map(this.getId),c=_.includes(u,this.getId(l));if(!c)return s.children.push(l),!0}return s.children.forEach(function(f){return o.addChildrenToGroup(f,r,n)}),!1},__decorate$1T([Autowired("columnModel")],t.prototype,"columnModel",void 0),t=__decorate$1T([Bean("toolPanelColDefService")],t),t}(BeanStub),SideBarModule={moduleName:ModuleNames.SideBarModule,beans:[ToolPanelColDefService],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:HorizontalResizeComp},{componentName:"AgSideBar",componentClass:SideBarComp},{componentName:"AgSideBarButtons",componentClass:SideBarButtonsComp}],dependantModules:[EnterpriseCoreModule]},__decorate$1S=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ModelItemUtils=function(){function i(){}return i.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},i.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},i.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},i.prototype.extractAllLeafColumns=function(t){var e=[],r=function(n){n.forEach(function(o){o.isPassesFilter()&&(o.isGroup()?r(o.getChildren()):e.push(o.getColumn()))})};return r(t),e},i.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach(function(o){o.getColDef().lockVisible||o.isVisible()!=e&&n.push({colId:o.getId(),hide:!e})}),n.length>0&&this.columnModel.applyColumnState({state:n},r)},i.prototype.setAllPivot=function(t,e,r){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},i.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),o=this.columnModel.getRowGroupColumns().slice(),a=!1,s=!1,l=!1,u=function(g){g.isAnyFunctionActive()||(g.isAllowValue()?(n.push(g),s=!0):g.isAllowRowGroup()?(o.push(g),a=!0):g.isAllowPivot()&&(r.push(g),l=!0))},c=function(g){g.isAnyFunctionActive()&&(r.indexOf(g)>=0&&(_.removeFromArray(r,g),a=!0),n.indexOf(g)>=0&&(_.removeFromArray(n,g),s=!0),o.indexOf(g)>=0&&(_.removeFromArray(o,g),l=!0))},f=e?u:c;if(t.forEach(f),a){var d={type:Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}if(l){var h={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(h)}if(s){var p={type:Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(p)}},i.prototype.setAllPivotActive=function(t,e,r){var n=this,o=[],a=function(u){if(!u.isAnyFunctionActive())if(u.isAllowValue()){var c=typeof u.getAggFunc()=="string"?u.getAggFunc():n.aggFuncService.getDefaultAggFunc(u);o.push({colId:u.getId(),aggFunc:c})}else u.isAllowRowGroup()?o.push({colId:u.getId(),rowGroup:!0}):u.isAllowPivot()&&o.push({colId:u.getId(),pivot:!0})},s=function(u){var c=u.isPivotActive()||u.isRowGroupActive()||u.isValueActive();c&&o.push({colId:u.getId(),pivot:!1,rowGroup:!1,aggFunc:null})},l=e?a:s;t.forEach(l),o.length>0&&this.columnModel.applyColumnState({state:o},r)},__decorate$1S([Autowired("aggFuncService")],i.prototype,"aggFuncService",void 0),__decorate$1S([Autowired("columnModel")],i.prototype,"columnModel",void 0),__decorate$1S([Autowired("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),__decorate$1S([Autowired("eventService")],i.prototype,"eventService",void 0),i=__decorate$1S([Bean("modelItemUtils")],i),i}(),ColumnsToolPanelModule={moduleName:ModuleNames.ColumnToolPanelModule,beans:[ModelItemUtils],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:PrimaryColsHeaderPanel},{componentName:"AgPrimaryColsList",componentClass:PrimaryColsListPanel},{componentName:"AgPrimaryCols",componentClass:PrimaryColsPanel}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:ColumnToolPanel}],dependantModules:[EnterpriseCoreModule,RowGroupingModule,SideBarModule]},workbook={getTemplate:function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}}},excelWorkbook={getTemplate:function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}}},column={getTemplate:function(i){var t=i.width;return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:t}}]}}}},cell={getTemplate:function(i){var t,e,r=i.mergeAcross,n=i.styleId,o=i.data,a={};return r&&(a.MergeAcross=r),n&&(a.StyleID=n),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:a}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:(t=o)===null||t===void 0?void 0:t.type}}]},textNode:(e=o)===null||e===void 0?void 0:e.value}]}}},row={getTemplate:function(i){var t=i.cells;return{name:"Row",children:t.map(function(e){return cell.getTemplate(e)})}}},worksheet={getTemplate:function(i){var t=i.table,e=i.name,r=t.columns,n=t.rows,o=r.map(function(s){return column.getTemplate(s)}),a=n.map(function(s){return row.getTemplate(s)});return{name:"Worksheet",children:[{name:"Table",children:o.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:e}}]}}}},documentProperties={getTemplate:function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}}},alignment={getTemplate:function(i){var t=i.alignment,e=t.vertical,r=t.horizontal,n=t.indent,o=t.readingOrder,a=t.rotate,s=t.shrinkToFit,l=t.verticalText,u=t.wrapText;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:e,Horizontal:r,Indent:n,ReadingOrder:o,Rotate:a,ShrinkToFit:s,VerticalText:l,WrapText:u}}]}}}},borders={getTemplate:function(i){var t=i.borders,e=t.borderBottom,r=t.borderLeft,n=t.borderRight,o=t.borderTop;return{name:"Borders",children:[e,r,n,o].map(function(a,s){var l=s==0?"Bottom":s==1?"Left":s==2?"Right":"Top";return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:l,LineStyle:a.lineStyle,Weight:a.weight,Color:a.color}}]}}})}}},font={getTemplate:function(i){var t=i.font,e=t.bold,r=t.fontName,n=t.italic,o=t.color,a=t.outline,s=t.shadow,l=t.size,u=t.strikeThrough,c=t.underline,f=t.verticalAlign,d=t.charSet,h=t.family;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:e,FontName:r,Italic:n,Color:o,Outline:a,Shadow:s,Size:l,StrikeThrough:u,Underline:c,VerticalAlign:f}},{prefix:"x:",map:{CharSet:d,Family:h}}]}}}},interior={getTemplate:function(i){var t=i.interior,e=t.color,r=t.pattern,n=t.patternColor;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:e,Pattern:r,PatternColor:n}}]}}}},protection={getTemplate:function(i){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:i.protection.protected,HideFormula:i.protection.hideFormula}}]}}}},numberFormat={getTemplate:function(i){var t=i.numberFormat.format;return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:t}}]}}}},style={getTemplate:function(i){var t=i.id,e=i.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:e||t}}]}}}},ExcelXmlFactory=function(){function i(){}return i.createExcel=function(t,e){var r=this.excelXmlHeader(),n=documentProperties.getTemplate(),o=excelWorkbook.getTemplate(),a=this.workbook(n,o,t,e);return""+r+XmlFactory.createXml(a,function(s){return s?"1":"0"})},i.workbook=function(t,e,r,n){var o=[t,e,this.stylesXmlElement(r)].concat(worksheet.getTemplate(n));return Object.assign({},workbook.getTemplate(),{children:o})},i.excelXmlHeader=function(){return`<?xml version="1.0" ?>
        <?mso-application progid="Excel.Sheet" ?>
        `},i.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map(function(r){return e.styleXmlElement(r)}):[]}},i.styleXmlElement=function(t){var e=_.compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},style.getTemplate(t),{children:e})},i.addProperty=function(t,e){return function(r){if(!e[t])return r;var n={alignment,borders,font,interior,numberFormat,protection};return r.concat(n[t].getTemplate(e))}},i.factoryMode=ExcelFactoryMode.SINGLE_SHEET,i}(),INCH_TO_EMU=9525,numberFormatMap={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},pixelsToPoint=function(i){return Math.round(i*72/96)},pointsToPixel=function(i){return Math.round(i*96/72)},pixelsToEMU=function(i){return Math.ceil(i*INCH_TO_EMU)},getFontFamilyId=function(i){if(i!==void 0){var t=["Automatic","Roman","Swiss","Modern","Script","Decorative"],e=t.indexOf(i||"Automatic");return Math.max(e,0)}},getHeightFromProperty=function(i,t){if(t){var e;if(typeof t=="number")e=t;else{var r=t;e=r({rowIndex:i})}return pixelsToPoint(e)}},setExcelImageTotalWidth=function(i,t){var e=i.position,r=e.colSpan,n=e.column;if(i.width)if(r)for(var o=t.slice(n-1,n+r-1),a=0,s=0;s<o.length;s++){var l=o[s].getActualWidth();if(i.width<a+l){i.position.colSpan=s+1,i.totalWidth=i.width,i.width=i.totalWidth-a;break}a+=l}else i.totalWidth=i.width},setExcelImageTotalHeight=function(i,t){var e=i.position,r=e.rowSpan,n=e.row;if(i.height)if(r)for(var o=0,a=0,s=n;s<n+r;s++){var l=pointsToPixel(getHeightFromProperty(s,t)||20);if(i.height<o+l){i.position.rowSpan=a+1,i.totalHeight=i.height,i.height=i.totalHeight-o;break}o+=l,a++}else i.totalHeight=i.height},createXmlPart=function(i){var t=XmlFactory.createHeader({encoding:"UTF-8",standalone:"yes"}),e=XmlFactory.createXml(i);return""+t+e},getExcelColumnName=function(i){var t=65,e=26,r=String.fromCharCode,n=Math.floor(i/e),o=i%e;return!n||i===e?r(t+i-1):o?n<e?r(t+n-1)+r(t+o-1):getExcelColumnName(n)+r(t+o-1):getExcelColumnName(n-1)+"Z"},__extends$2_=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$F=function(){return __assign$F=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$F.apply(this,arguments)},__read$T=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$u=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$T(arguments[t]));return i},BaseExcelSerializingSession=function(i){__extends$2_(t,i);function t(e){var r=i.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach(function(n){r.stylesByIds[n.id]=n}),r.excelStyles=__spread$u(r.config.baseExcelStyles),r}return t.prototype.addCustomContent=function(e){var r=this;e.forEach(function(n){var o=r.rows.length+1,a={height:getHeightFromProperty(o,n.height||r.config.rowHeight),cells:(n.cells||[]).map(function(s,l){var u,c=r.addImage(o,r.columnsToExport[l],(u=s.data)===null||u===void 0?void 0:u.value),f=__assign$F({},s);return c&&(f.data={},c.value!=null?f.data.value=c.value:(f.data.type="e",f.data.value=null)),f}),outlineLevel:n.outlineLevel||void 0};n.collapsed!=null&&(a.collapsed=n.collapsed),n.hidden!=null&&(a.hidden=n.hidden),r.rows.push(a)})},t.prototype.onNewHeaderGroupingRow=function(){var e=this,r=[];return this.rows.push({cells:r,height:getHeightFromProperty(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(n,o,a,s,l){var u=e.config.styleLinker({rowType:RowType.HEADER_GROUPING,rowIndex:1,value:"grouping-"+o,columnGroup:n});r.push(__assign$F(__assign$F({},e.createMergedCell(e.getStyleId(u),e.getDataTypeForValue("string"),o,s)),{collapsibleRanges:l}))}}},t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},t.prototype.onNewBodyRow=function(){return this.onNewRow(this.onNewBodyColumn,this.config.rowHeight)},t.prototype.prepare=function(e){var r=this;i.prototype.prepare.call(this,e),this.columnsToExport=__spread$u(e),this.cols=e.map(function(n,o){return r.convertColumnToExcel(n,o)})},t.prototype.parse=function(){for(var e=this.rows.reduce(function(n,o){return Math.max(n,o.cells.length)},0);this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var r={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(r)},t.prototype.isFormula=function(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")},t.prototype.getStyleById=function(e){return e==null?null:this.stylesByIds[e]||null},t.prototype.convertColumnToExcel=function(e,r){var n=this.config.columnWidth;if(n)return typeof n=="number"?{width:n}:{width:n({column:e,index:r})};if(e){var o=75;return{width:Math.max(e.getActualWidth(),o)}}return{}},t.prototype.onNewHeaderColumn=function(e,r){var n=this;return function(o,a){var s=n.extractHeaderValue(o),l=n.config.styleLinker({rowType:RowType.HEADER,rowIndex:e,value:s,column:o});r.push(n.createCell(n.getStyleId(l),n.getDataTypeForValue("string"),s))}},t.prototype.onNewRow=function(e,r){var n=[];return this.rows.push({cells:n,height:getHeightFromProperty(this.rows.length+1,r)}),{onColumn:e.bind(this,this.rows.length,n)()}},t.prototype.onNewBodyColumn=function(e,r){var n=this,o=0;return function(a,s,l){if(o>0){o-=1;return}!n.config.gridOptionsWrapper.isGroupHideOpenParents()&&l.level&&(_.last(n.rows).outlineLevel=l.level);var u=n.extractRowCellValue(a,s,e,Constants.EXPORT_TYPE_EXCEL,l),c=n.config.styleLinker({rowType:RowType.BODY,rowIndex:e,value:u,column:a,node:l}),f=n.getStyleId(c),d=a.getColSpan(l),h=n.addImage(e,a,u);h?r.push(n.createCell(f,n.getDataTypeForValue(h.value),h.value==null?"":h.value)):d>1?(o=d-1,r.push(n.createMergedCell(f,n.getDataTypeForValue(u),u,d-1))):r.push(n.createCell(f,n.getDataTypeForValue(u),u))}},t.prototype.getStyleId=function(e){if(!e||!e.length)return null;if(e.length===1)return e[0];var r=e.join("-");return this.mixedStyles[r]||this.addNewMixedStyle(e),this.mixedStyles[r].excelID},t.prototype.addNewMixedStyle=function(e){var r=this;this.mixedStyleCounter+=1;var n="mixedStyle"+this.mixedStyleCounter,o={};e.forEach(function(s){r.excelStyles.forEach(function(l){l.id===s&&_.mergeDeep(o,_.deepCloneObject(l))})}),o.id=n,o.name=n;var a=e.join("-");this.mixedStyles[a]={excelID:n,key:a,result:o},this.excelStyles.push(o),this.stylesByIds[n]=o},t}(BaseGridSerializingSession),__extends$2Z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ExcelXmlSerializingSession=function(i){__extends$2Z(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createExcel=function(e){return ExcelXmlFactory.createExcel(this.excelStyles,e)},t.prototype.getDataTypeForValue=function(e){return _.isNumeric(e)?"Number":"String"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"Formula";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(){},t.prototype.createCell=function(e,r,n){var o=this.getStyleById(e),a=this.getType(r,o,n)||r;return{styleId:o?e:void 0,data:{type:a,value:this.getValueTransformed(a,n)}}},t.prototype.getValueTransformed=function(e,r){var n=this,o=function(s){if(n.config.suppressTextAsCDATA)return _.escapeString(s);var l="<![CDATA[",u="]]>",c=new RegExp(u,"g");return l+String(s).replace(c,"]]"+u+l+">")+u},a=function(s){return!s||s==="0"||s==="false"?"0":"1"};switch(e){case"String":return o(r);case"Number":return Number(r).valueOf()+"";case"Boolean":return a(r);default:return r}},t.prototype.createMergedCell=function(e,r,n,o){return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:n},mergeAcross:o}},t}(BaseExcelSerializingSession),coreFactory={getTemplate:function(i){var t=new Date,e=t.toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:i},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}}},contentTypeFactory={getTemplate:function(i){var t=i.name,e=i.ContentType,r=i.Extension,n=i.PartName;return{name:t,properties:{rawMap:{Extension:r,PartName:n,ContentType:e}}}}},__read$S=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$t=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$S(arguments[t]));return i},contentTypesFactory={getTemplate:function(i){var t=new Array(i).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(l+1)+".xml"}}),e=ExcelXlsxFactory.worksheetImages.size,r={};ExcelXlsxFactory.workbookImageIds.forEach(function(s){r[s.type]=!0});var n=new Array(e).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(l+1)+".xml"}}),o=Object.keys(r).map(function(s){return{name:"Default",ContentType:"image/"+s,Extension:s}}),a=__spread$t(o,[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],t,[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],n,[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map(function(s){return contentTypeFactory.getTemplate(s)});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:a}}},getAnchor=function(i,t){return{name:"xdr:"+i,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}},getExt=function(i){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}],e=i.recolor&&i.recolor.toLowerCase();switch(e){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},getNvPicPr=function(i,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:i.id,descr:i.altText!=null?i.altText:void 0}},children:[getExt(i)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},getColorDetails=function(i){if(!(!i.saturation&&!i.tint)){var t=[];return i.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:i.saturation*1e3}}}),i.tint&&t.push({name:"a:tint",properties:{rawMap:{val:i.tint*1e3}}}),t}},getDuoTone=function(i,t){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:i.color}},children:getColorDetails(i)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:getColorDetails(t)}]}},getBlipFill=function(i,t){var e;if(i.transparency){var r=Math.min(Math.max(i.transparency,0),100);e=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(r*1e3)}}}]}if(i.recolor)switch(e||(e=[]),i.recolor.toLocaleLowerCase()){case"grayscale":e.push({name:"a:grayscl"});break;case"sepia":e.push(getDuoTone({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":e.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:e},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},getSpPr=function(i,t){var e={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(i.rotation){var r=i.rotation;e.properties={rawMap:{rot:Math.min(Math.max(r,0),360)*6e4}}}var n={name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]},o={name:"xdr:spPr",children:[e,n]};return o},getImageBoxSize=function(i){i.fitCell=!!i.fitCell||!i.width||!i.height;var t=i.position,e=t===void 0?{}:t,r=i.fitCell,n=i.width,o=n===void 0?0:n,a=i.height,s=a===void 0?0:a,l=i.totalHeight,u=i.totalWidth,c=e.offsetX,f=c===void 0?0:c,d=e.offsetY,h=d===void 0?0:d,p=e.row,g=p===void 0?1:p,v=e.rowSpan,m=v===void 0?1:v,y=e.column,b=y===void 0?1:y,C=e.colSpan,x=C===void 0?1:C;return{from:{row:g-1,col:b-1,offsetX:pixelsToEMU(f),offsetY:pixelsToEMU(h)},to:{row:g-1+(r?1:m-1),col:b-1+(r?1:x-1),offsetX:pixelsToEMU(o+f),offsetY:pixelsToEMU(s+h)},height:pixelsToEMU(l||s),width:pixelsToEMU(u||o)}},getPicture=function(i,t,e,r){return{name:"xdr:pic",children:[getNvPicPr(i,t+1),getBlipFill(i,e+1),getSpPr(i,r)]}},drawingFactory={getTemplate:function(i){var t=i.sheetIndex,e=ExcelXlsxFactory.worksheetImages.get(t),r=ExcelXlsxFactory.worksheetImageIds.get(t),n=e.map(function(o,a){var s=getImageBoxSize(o);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[getAnchor("from",s.from),getAnchor("to",s.to),getPicture(o,a,r.get(o.id).index,s),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:n}}},__read$R=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},getColorChildren=function(i){var t=__read$R(i,4),e=t[0],r=t[1],n=t[2],o=t[3];return{name:"a:"+e,children:[{name:"a:"+r,properties:{rawMap:{val:n,lastClr:o}}}]}},colorScheme={getTemplate:function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[getColorChildren(["dk1","sysClr","windowText","000000"]),getColorChildren(["lt1","sysClr","window","FFFFFF"]),getColorChildren(["dk2","srgbClr","44546A"]),getColorChildren(["lt2","srgbClr","E7E6E6"]),getColorChildren(["accent1","srgbClr","4472C4"]),getColorChildren(["accent2","srgbClr","ED7D31"]),getColorChildren(["accent3","srgbClr","A5A5A5"]),getColorChildren(["accent4","srgbClr","FFC000"]),getColorChildren(["accent5","srgbClr","5B9BD5"]),getColorChildren(["accent6","srgbClr","70AD47"]),getColorChildren(["hlink","srgbClr","0563C1"]),getColorChildren(["folHlink","srgbClr","954F72"])]}}},__read$Q=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},getFont$3=function(i){var t=__read$Q(i,4),e=t[0],r=t[1],n=t[2],o=t[3];return{name:"a:"+e,properties:{rawMap:{script:n,typeface:r,panose:o}}}},fontScheme={getTemplate:function(){var i=_.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[getFont$3(["latin","Calibri Light",void 0,"020F0302020204030204"]),getFont$3(["ea",""]),getFont$3(["cs",""]),getFont$3(["font",i(" Light"),"Jpan"]),getFont$3(["font",i(" "),"Hang"]),getFont$3(["font",i(" Light"),"Hans"]),getFont$3(["font",i(""),"Hant"]),getFont$3(["font","Times New Roman","Arab"]),getFont$3(["font","Times New Roman","Hebr"]),getFont$3(["font","Tahoma","Thai"]),getFont$3(["font","Nyala","Ethi"]),getFont$3(["font","Vrinda","Beng"]),getFont$3(["font","Shruti","Gujr"]),getFont$3(["font","MoolBoran","Khmr"]),getFont$3(["font","Tunga","Knda"]),getFont$3(["font","Raavi","Guru"]),getFont$3(["font","Euphemia","Cans"]),getFont$3(["font","Plantagenet Cherokee","Cher"]),getFont$3(["font","Microsoft Yi Baiti","Yiii"]),getFont$3(["font","Microsoft Himalaya","Tibt"]),getFont$3(["font","MV Boli","Thaa"]),getFont$3(["font","Mangal","Deva"]),getFont$3(["font","Gautami","Telu"]),getFont$3(["font","Latha","Taml"]),getFont$3(["font","Estrangelo Edessa","Syrc"]),getFont$3(["font","Kalinga","Orya"]),getFont$3(["font","Kartika","Mlym"]),getFont$3(["font","DokChampa","Laoo"]),getFont$3(["font","Iskoola Pota","Sinh"]),getFont$3(["font","Mongolian Baiti","Mong"]),getFont$3(["font","Times New Roman","Viet"]),getFont$3(["font","Microsoft Uighur","Uigh"]),getFont$3(["font","Sylfaen","Geor"]),getFont$3(["font","Arial","Armn"]),getFont$3(["font","Leelawadee UI","Bugi"]),getFont$3(["font","Microsoft JhengHei","Bopo"]),getFont$3(["font","Javanese Text","Java"]),getFont$3(["font","Segoe UI","Lisu"]),getFont$3(["font","Myanmar Text","Mymr"]),getFont$3(["font","Ebrima","Nkoo"]),getFont$3(["font","Nirmala UI","Olck"]),getFont$3(["font","Ebrima","Osma"]),getFont$3(["font","Phagspa","Phag"]),getFont$3(["font","Estrangelo Edessa","Syrn"]),getFont$3(["font","Estrangelo Edessa","Syrj"]),getFont$3(["font","Estrangelo Edessa","Syre"]),getFont$3(["font","Nirmala UI","Sora"]),getFont$3(["font","Microsoft Tai Le","Tale"]),getFont$3(["font","Microsoft New Tai Lue","Talu"]),getFont$3(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[getFont$3(["latin","Calibri",void 0,"020F0502020204030204"]),getFont$3(["ea",""]),getFont$3(["cs",""]),getFont$3(["font",i(""),"Jpan"]),getFont$3(["font",i(" "),"Hang"]),getFont$3(["font",i(""),"Hans"]),getFont$3(["font",i(""),"Hant"]),getFont$3(["font","Arial","Arab"]),getFont$3(["font","Arial","Hebr"]),getFont$3(["font","Tahoma","Thai"]),getFont$3(["font","Nyala","Ethi"]),getFont$3(["font","Vrinda","Beng"]),getFont$3(["font","Shruti","Gujr"]),getFont$3(["font","DaunPenh","Khmr"]),getFont$3(["font","Tunga","Knda"]),getFont$3(["font","Raavi","Guru"]),getFont$3(["font","Euphemia","Cans"]),getFont$3(["font","Plantagenet Cherokee","Cher"]),getFont$3(["font","Microsoft Yi Baiti","Yiii"]),getFont$3(["font","Microsoft Himalaya","Tibt"]),getFont$3(["font","MV Boli","Thaa"]),getFont$3(["font","Mangal","Deva"]),getFont$3(["font","Gautami","Telu"]),getFont$3(["font","Latha","Taml"]),getFont$3(["font","Estrangelo Edessa","Syrc"]),getFont$3(["font","Kalinga","Orya"]),getFont$3(["font","Kartika","Mlym"]),getFont$3(["font","DokChampa","Laoo"]),getFont$3(["font","Iskoola Pota","Sinh"]),getFont$3(["font","Mongolian Baiti","Mong"]),getFont$3(["font","Arial","Viet"]),getFont$3(["font","Microsoft Uighur","Uigh"]),getFont$3(["font","Sylfaen","Geor"]),getFont$3(["font","Arial","Armn"]),getFont$3(["font","Leelawadee UI","Bugi"]),getFont$3(["font","Microsoft JhengHei","Bopo"]),getFont$3(["font","Javanese Text","Java"]),getFont$3(["font","Segoe UI","Lisu"]),getFont$3(["font","Myanmar Text","Mymr"]),getFont$3(["font","Ebrima","Nkoo"]),getFont$3(["font","Nirmala UI","Olck"]),getFont$3(["font","Ebrima","Osma"]),getFont$3(["font","Phagspa","Phag"]),getFont$3(["font","Estrangelo Edessa","Syrn"]),getFont$3(["font","Estrangelo Edessa","Syrj"]),getFont$3(["font","Estrangelo Edessa","Syre"]),getFont$3(["font","Nirmala UI","Sora"]),getFont$3(["font","Microsoft Tai Le","Tale"]),getFont$3(["font","Microsoft New Tai Lue","Talu"]),getFont$3(["font","Ebrima","Tfng"])]}]}}},__read$P=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},getPropertyVal=function(i,t,e){return{name:"a:"+i,properties:{rawMap:{val:t}},children:e}},getGs=function(i){var t=__read$P(i,6),e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=[];return l.push(getPropertyVal("satMod",n)),o&&l.push(getPropertyVal("lumMod",o)),a&&l.push(getPropertyVal("tint",a)),s&&l.push(getPropertyVal("shade",s)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:l}]}},getSolidFill=function(i,t){return{name:"a:solidFill",children:[getPropertyVal("schemeClr",i,t)]}},getGradFill=function(i){var t=__read$P(i,5),e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=__read$P(a,2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[getGs(r),getGs(n),getGs(o)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}},getLine=function(i){var t=__read$P(i,4),e=t[0],r=t[1],n=t[2],o=t[3];return{name:"a:ln",properties:{rawMap:{w:e,cap:r,cmpd:n,algn:o}},children:[getSolidFill("phClr"),getPropertyVal("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},getEffectStyle=function(i){var t=[];if(i){var e=__read$P(i,5),r=e[0],n=e[1],o=e[2],a=e[3],s=e[4];t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:r,dist:n,dir:o,algn:a,rotWithShape:s}},children:[getPropertyVal("srgbClr","000000",[getPropertyVal("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},getFillStyleList=function(){return{name:"a:fillStyleLst",children:[getSolidFill("phClr"),getGradFill(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),getGradFill(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}},getLineStyleList=function(){return{name:"a:lnStyleLst",children:[getLine(["6350","flat","sng","ctr"]),getLine(["12700","flat","sng","ctr"]),getLine(["19050","flat","sng","ctr"])]}},getEffectStyleList=function(){return{name:"a:effectStyleLst",children:[getEffectStyle(),getEffectStyle(),getEffectStyle(["57150","19050","5400000","ctr","0"])]}},getBgFillStyleList=function(){return{name:"a:bgFillStyleLst",children:[getSolidFill("phClr"),getSolidFill("phClr",[getPropertyVal("tint","95000"),getPropertyVal("satMod","170000")]),getGradFill(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}},formatScheme={getTemplate:function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[getFillStyleList(),getLineStyleList(),getEffectStyleList(),getBgFillStyleList()]}}},themeElements={getTemplate:function(){return{name:"a:themeElements",children:[colorScheme.getTemplate(),fontScheme.getTemplate(),formatScheme.getTemplate()]}}},officeTheme={getTemplate:function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[themeElements.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},buildSharedString=function(i){var t=[];return i.forEach(function(e,r){var n=r.toString(),o={name:"t",textNode:_.utf8_encode(_.escapeString(n))},a=n.trim().length!==n.length;a&&(o.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[o]})}),t},sharedStrings={getTemplate:function(i){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:i.size,uniqueCount:i.size}},children:buildSharedString(i)}}},numberFormatFactory={getTemplate:function(i){var t=i.formatCode,e=i.numFmtId;return{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:e}}}}},numberFormatsFactory={getTemplate:function(i){return{name:"numFmts",properties:{rawMap:{count:i.length}},children:i.map(function(t){return numberFormatFactory.getTemplate(t)})}}},fontFactory={getTemplate:function(i){var t=i.size,e=i.colorTheme,r=i.color,n=r===void 0?"FF000000":r,o=i.fontName,a=o===void 0?"Calibri":o,s=i.family,l=i.scheme,u=i.italic,c=i.bold,f=i.strikeThrough,d=i.outline,h=i.shadow,p=i.underline,g=i.verticalAlign,v=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:e,rgb:n}}},{name:"name",properties:{rawMap:{val:a}}}];return s&&v.push({name:"family",properties:{rawMap:{val:s}}}),l&&v.push({name:"scheme",properties:{rawMap:{val:l}}}),u&&v.push({name:"i"}),c&&v.push({name:"b"}),f&&v.push({name:"strike"}),d&&v.push({name:"outline"}),h&&v.push({name:"shadow"}),p&&v.push({name:"u",properties:{rawMap:{val:p}}}),g&&v.push({name:"vertAlign",properties:{rawMap:{val:g}}}),{name:"font",children:v}}},fontsFactory={getTemplate:function(i){return{name:"fonts",properties:{rawMap:{count:i.length}},children:i.map(function(t){return fontFactory.getTemplate(t)})}}},fillFactory={getTemplate:function(i){var t=i.patternType,e=i.fgTheme,r=i.fgTint,n=i.fgRgb,o=i.bgRgb,a=i.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:t}}};return(e||r||n)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:e,tint:r,rgb:n}}}]),(a||o)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:o}}})),{name:"fill",children:[s]}}},fillsFactory={getTemplate:function(i){return{name:"fills",properties:{rawMap:{count:i.length}},children:i.map(function(t){return fillFactory.getTemplate(t)})}}},getWeightName=function(i){switch(i){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},mappedBorderNames={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},mediumBorders=["Dashed","DashDot","DashDotDot"],colorMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},horizontalAlignmentMap={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},verticalAlignmentMap={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},convertLegacyPattern=function(i){return i?colorMap[i]||i:"none"},convertLegacyColor=function(i){return i==null?i:(i.charAt(0)==="#"&&(i=i.substr(1)),i.length===6?"FF"+i:i)},convertLegacyBorder=function(i,t){if(!i)return"thin";var e=getWeightName(t),r=mappedBorderNames[i];return i==="Continuous"?e:e==="medium"&&mediumBorders.indexOf(r)!==-1?"medium"+r:r.charAt(0).toLowerCase()+r.substr(1)},convertLegacyHorizontalAlignment=function(i){return horizontalAlignmentMap[i]||"general"},convertLegacyVerticalAlignment=function(i){return verticalAlignmentMap[i]||void 0},getBorderColor=function(i){return{name:"color",properties:{rawMap:{rgb:convertLegacyColor(i||"#000000")}}}},borderFactory$1={getTemplate:function(i){var t=i.left,e=i.right,r=i.top,n=i.bottom,o=i.diagonal,a=t?[getBorderColor(t.color)]:void 0,s=e?[getBorderColor(e.color)]:void 0,l=r?[getBorderColor(r.color)]:void 0,u=n?[getBorderColor(n.color)]:void 0,c=o?[getBorderColor(o.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:e&&e.style}},children:s},{name:"top",properties:{rawMap:{style:r&&r.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:u},{name:"diagonal",properties:{rawMap:{style:o&&o.style}},children:c}]}}},bordersFactory={getTemplate:function(i){return{name:"borders",properties:{rawMap:{count:i.length}},children:i.map(function(t){return borderFactory$1.getTemplate(t)})}}},getReadingOrderId=function(i){var t=["Context","LeftToRight","RightToLeft"],e=t.indexOf(i);return Math.max(e,0)},alignmentFactory={getTemplate:function(i){var t=i.horizontal,e=i.indent,r=i.readingOrder,n=i.rotate,o=i.shrinkToFit,a=i.vertical,s=i.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&convertLegacyHorizontalAlignment(t),indent:e,readingOrder:r&&getReadingOrderId(r),textRotation:n,shrinkToFit:o,vertical:a&&convertLegacyVerticalAlignment(a),wrapText:s}}}}},protectionFactory={getTemplate:function(i){var t=i.protected===!1?0:1,e=i.hideFormula===!0?1:0;return{name:"protection",properties:{rawMap:{hidden:e,locked:t}}}}},xfFactory={getTemplate:function(i){var t=i.alignment,e=i.borderId,r=i.fillId,n=i.fontId,o=i.numFmtId,a=i.protection,s=i.xfId,l=[];return t&&l.push(alignmentFactory.getTemplate(t)),a&&l.push(protectionFactory.getTemplate(a)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:a?1:void 0,applyBorder:e?1:void 0,applyFill:r?1:void 0,borderId:e,fillId:r,applyFont:n?1:void 0,fontId:n,applyNumberFormat:o?1:void 0,numFmtId:o,xfId:s}},children:l.length?l:void 0}}},cellStylesXfsFactory={getTemplate:function(i){return{name:"cellStyleXfs",properties:{rawMap:{count:i.length}},children:i.map(function(t){return xfFactory.getTemplate(t)})}}},cellXfsFactory={getTemplate:function(i){return{name:"cellXfs",properties:{rawMap:{count:i.length}},children:i.map(function(t){return xfFactory.getTemplate(t)})}}},borderFactory={getTemplate:function(i){var t=i.builtinId,e=i.name,r=i.xfId;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:e,xfId:r}}}}},cellStylesFactory={getTemplate:function(i){return{name:"cellStyles",properties:{rawMap:{count:i.length}},children:i.map(function(t){return borderFactory.getTemplate(t)})}}},__assign$E=function(){return __assign$E=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$E.apply(this,arguments)},stylesMap,registeredNumberFmts,registeredFonts,registeredFills,registeredBorders,registeredCellStyleXfs,registeredCellXfs,registeredCellStyles,currentSheet,getStyleName=function(i,t){return i.indexOf("mixedStyle")!==-1&&t>1&&(i+="_"+t),i},resetStylesheetValues=function(){stylesMap={base:0},registeredNumberFmts=[],registeredFonts=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],registeredFills=[{patternType:"none"},{patternType:"gray125"}],registeredBorders=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],registeredCellStyleXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],registeredCellXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],registeredCellStyles=[{builtinId:0,name:"Normal",xfId:0}]},registerFill=function(i){var t=convertLegacyPattern(i.pattern),e=convertLegacyColor(i.color),r=convertLegacyColor(i.patternColor),n=registeredFills.findIndex(function(o){var a=o.patternType,s=o.fgRgb,l=o.bgRgb;return!(a!=t||s!=e||l!=r)});return n===-1&&(n=registeredFills.length,registeredFills.push({patternType:t,fgRgb:e,bgRgb:r})),n},registerNumberFmt=function(i){if(i=_.utf8_encode(i),numberFormatMap[i])return numberFormatMap[i];var t=registeredNumberFmts.findIndex(function(e){return e.formatCode===i});return t===-1?(t=registeredNumberFmts.length+164,registeredNumberFmts.push({formatCode:i,numFmtId:t})):t=registeredNumberFmts[t].numFmtId,t},registerBorders=function(i){var t=i.borderBottom,e=i.borderTop,r=i.borderLeft,n=i.borderRight,o,a,s,l,u,c,f,d;r&&(s=convertLegacyBorder(r.lineStyle,r.weight),f=convertLegacyColor(r.color)),n&&(l=convertLegacyBorder(n.lineStyle,n.weight),d=convertLegacyColor(n.color)),t&&(o=convertLegacyBorder(t.lineStyle,t.weight),u=convertLegacyColor(t.color)),e&&(a=convertLegacyBorder(e.lineStyle,e.weight),c=convertLegacyColor(e.color));var h=registeredBorders.findIndex(function(p){var g=p.left,v=p.right,m=p.top,y=p.bottom;if(!g&&(s||f)||!v&&(l||d)||!m&&(a||c)||!y&&(o||u))return!1;var b=g||{},C=b.style,x=b.color,w=v||{},P=w.style,S=w.color,O=m||{},E=O.style,D=O.color,R=y||{},F=R.style,I=R.color;return!(C!=s||x!=f||P!=l||S!=d||E!=a||D!=c||F!=o||I!=u)});return h===-1&&(h=registeredBorders.length,registeredBorders.push({left:{style:s,color:f},right:{style:l,color:d},top:{style:a,color:c},bottom:{style:o,color:u},diagonal:{style:void 0,color:void 0}})),h},registerFont=function(i){var t=i.fontName,e=t===void 0?"Calibri":t,r=i.color,n=i.size,o=i.bold,a=i.italic,s=i.outline,l=i.shadow,u=i.strikeThrough,c=i.underline,f=i.family,d=i.verticalAlign,h=e&&_.utf8_encode(e),p=convertLegacyColor(r),g=getFontFamilyId(f),v=c?c.toLocaleLowerCase():void 0,m=d?d.toLocaleLowerCase():void 0,y=registeredFonts.findIndex(function(b){return!(b.fontName!=h||b.color!=p||b.size!=n||b.bold!=o||b.italic!=a||b.outline!=s||b.shadow!=l||b.strikeThrough!=u||b.underline!=v||b.verticalAlign!=m||b.family!=g)});return y===-1&&(y=registeredFonts.length,registeredFonts.push({fontName:h,color:p,size:n,bold:o,italic:a,outline:s,shadow:l,strikeThrough:u,underline:v,verticalAlign:m,family:g!=null?g.toString():void 0})),y},registerStyle=function(i){var t=i.alignment,e=i.borders,r=i.font,n=i.interior,o=i.numberFormat,a=i.protection,s=i.id,l=0,u=0,c=0,f=0;s&&(s=getStyleName(s,currentSheet),stylesMap[s]==null&&(n&&(l=registerFill(n)),e&&(u=registerBorders(e)),r&&(c=registerFont(r)),o&&(f=registerNumberFmt(o.format)),stylesMap[s]=registeredCellXfs.length,registeredCellXfs.push({alignment:t,borderId:u||0,fillId:l||0,fontId:c||0,numFmtId:f||0,protection:a,xfId:0})))},stylesheetFactory={getTemplate:function(i){var t=numberFormatsFactory.getTemplate(registeredNumberFmts),e=fontsFactory.getTemplate(registeredFonts.map(function(l){return __assign$E(__assign$E({},l),{size:l.size!=null?l.size:i})})),r=fillsFactory.getTemplate(registeredFills),n=bordersFactory.getTemplate(registeredBorders),o=cellStylesXfsFactory.getTemplate(registeredCellStyleXfs),a=cellXfsFactory.getTemplate(registeredCellXfs),s=cellStylesFactory.getTemplate(registeredCellStyles);return resetStylesheetValues(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,e,r,n,o,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},getStyleId=function(i,t){return stylesMap[getStyleName(i,t)]||0},registerStyles=function(i,t){currentSheet=t,currentSheet===1&&resetStylesheetValues(),i.forEach(registerStyle)},sheetFactory={getTemplate:function(i,t){var e=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:i,sheetId:e,"r:id":"rId"+e}}}}},sheetsFactory={getTemplate:function(i){return{name:"sheets",children:i.map(function(t,e){return sheetFactory.getTemplate(t,e)})}}},workbookFactory={getTemplate:function(i){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[sheetsFactory.getTemplate(i)]}}},getExcelCellWidth=function(i){return Math.ceil((i-12)/7+1)},columnFactory={getTemplate:function(i){var t=i.min,e=i.max,r=i.outlineLevel,n=i.s,o=i.width,a=i.hidden,s=i.bestFit,l=1,u="0";return o>1&&(l=getExcelCellWidth(o),u="1"),{name:"col",properties:{rawMap:{min:t,max:e,outlineLevel:r??void 0,width:l,style:n,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}}},convertLegacyType=function(i){var t=i.charAt(0).toLowerCase();return t==="s"?"inlineStr":t},cellFactory={getTemplate:function(i,t,e){var r=i.ref,n=i.data,o=i.styleId,a=n||{type:"empty",value:null},s=a.type,l=a.value,u=s;s==="f"?u="str":s.charAt(0)===s.charAt(0).toUpperCase()&&(u=convertLegacyType(s));var c={name:"c",properties:{rawMap:{r,t:u==="empty"?void 0:u,s:o?getStyleId(o,e):void 0}}};if(u==="empty")return c;var f;return u==="str"&&s==="f"?f=[{name:"f",textNode:_.escapeString(_.utf8_encode(l))}]:u==="inlineStr"?f=[{name:"is",children:[{name:"t",textNode:_.escapeString(_.utf8_encode(l))}]}]:f=[{name:"v",textNode:l}],Object.assign({},c,{children:f})}},__read$O=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$s=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$O(arguments[t]));return i},addEmptyCells=function(i,t){for(var e=[],r=0,n=0;n<i.length;n++){var o=i[n];o.mergeAcross&&(e.push({pos:n,excelPos:r}),r+=o.mergeAcross),r++}if(e.length)for(var n=e.length-1;n>=0;n--){for(var a=[],o=i[e[n].pos],s=1;s<=o.mergeAcross;s++)a.push({ref:""+getExcelColumnName(e[n].excelPos+1+s)+(t+1),styleId:o.styleId,data:{type:"empty",value:null}});a.length&&i.splice.apply(i,__spread$s([e[n].pos+1,0],a))}},shouldDisplayCell=function(i){var t;return((t=i.data)===null||t===void 0?void 0:t.value)!==""||i.styleId!==void 0},rowFactory={getTemplate:function(i,t,e){var r=i.collapsed,n=i.hidden,o=i.height,a=i.outlineLevel,s=i.cells,l=s===void 0?[]:s;addEmptyCells(l,t);var u=l.filter(shouldDisplayCell).map(function(c,f){return cellFactory.getTemplate(c,f,e)});return{name:"row",properties:{rawMap:{r:t+1,collapsed:r,hidden:n?"1":"0",ht:o,customHeight:o!=null?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:u}}},mergeCellFactory={getTemplate:function(i){return{name:"mergeCell",properties:{rawMap:{ref:i}}}}},getMergedCellsAndAddColumnGroups=function(i,t){var e=[],r=[];i.forEach(function(a,s){var l=a.cells,u=0,c;l.forEach(function(f,d){var h=d+u+1,p=getExcelColumnName(h),g=s+1;if(f.mergeAcross){u+=f.mergeAcross;var v=getExcelColumnName(d+u+1);e.push(""+p+g+":"+v+g)}t[h-1]||(t[h-1]={});var m=f.collapsibleRanges;m&&m.forEach(function(y){r.push([h+y[0],h+y[1]])}),c=t[h-1],c.min=h,c.max=h,f.ref=""+p+g})}),r.sort(function(a,s){return a[0]!==s[0]?a[0]-s[0]:s[1]-a[1]});var n=new Map,o=new Map;return r.filter(function(a){var s=a.toString(),l=n.get(s);return l?!1:(n.set(s,!0),!0)}).forEach(function(a){var s=t.find(function(u){return u.min==a[0]&&u.max==a[1]}),l=o.get(a[0]);t.push({min:a[0],max:a[1],outlineLevel:l||1,width:(s||{width:100}).width}),o.set(a[0],(l||0)+1)}),e},getPageOrientation=function(i){return!i||i!=="Portrait"&&i!=="Landscape"?"portrait":i.toLocaleLowerCase()},getPageSize=function(i){if(i==null)return 1;var t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"],e=t.indexOf(i);return e===-1?1:e+1},addColumns=function(i){return function(t){return i.length&&t.push({name:"cols",children:i.map(function(e){return columnFactory.getTemplate(e)})}),t}},addSheetData=function(i,t){return function(e){return i.length&&e.push({name:"sheetData",children:i.map(function(r,n){return rowFactory.getTemplate(r,n,t)})}),e}},addMergeCells=function(i){return function(t){return i.length&&t.push({name:"mergeCells",properties:{rawMap:{count:i.length}},children:i.map(function(e){return mergeCellFactory.getTemplate(e)})}),t}},addPageMargins=function(i){return function(t){var e=i.top,r=e===void 0?.75:e,n=i.right,o=n===void 0?.7:n,a=i.bottom,s=a===void 0?.75:a,l=i.left,u=l===void 0?.7:l,c=i.header,f=c===void 0?.3:c,d=i.footer,h=d===void 0?.3:d;return t.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:h,header:f,left:u,right:o,top:r}}}),t}},addPageSetup=function(i){return function(t){return i&&t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:getPageOrientation(i.orientation),paperSize:getPageSize(i.pageSize)}}}),t}},replaceHeaderFooterTokens=function(i){var t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"};return _.iterateObject(t,function(e,r){i=i.replace(e,r)}),i},getHeaderPosition=function(i){return i==="Center"?"C":i==="Right"?"R":"L"},applyHeaderFontStyle=function(i,t){return t&&(i+="&amp;&quot;",i+=t.fontName||"Calibri",t.bold!==t.italic?i+=t.bold?",Bold":",Italic":t.bold?i+=",Bold Italic":i+=",Regular",i+="&quot;",t.size&&(i+="&amp;"+t.size),t.strikeThrough&&(i+="&amp;S"),t.underline&&(i+="&amp;"+(t.underline==="Double"?"E":"U")),t.color&&(i+="&amp;K"+t.color.replace("#","").toUpperCase())),i},processHeaderFooterContent=function(i){return i.reduce(function(t,e){var r=getHeaderPosition(e.position),n=applyHeaderFontStyle(t+"&amp;"+r,e.font);return""+n+_.escapeString(replaceHeaderFooterTokens(e.value))},"")},buildHeaderFooter=function(i){var t=["all","first","even"],e=[];return t.forEach(function(r){var n=i[r],o=r==="all"?"odd":r;!n||!n.header&&!n.footer||_.iterateObject(n,function(a,s){var l=""+a.charAt(0).toUpperCase()+a.slice(1);s&&e.push({name:""+o+l,properties:{rawMap:{"xml:space":"preserve"}},textNode:processHeaderFooterContent(s)})})}),e},addHeaderFooter=function(i){return function(t){if(!i)return t;var e=i.first!=null?1:0,r=i.even!=null?1:0;return t.push({name:"headerFooter",properties:{rawMap:{differentFirst:e,differentOddEven:r}},children:buildHeaderFooter(i)}),t}},addDrawingRel=function(i){return function(t){return ExcelXlsxFactory.worksheetImages.get(i)&&t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),t}},addSheetPr=function(){return function(i){return i.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),i}},addSheetFormatPr=function(i){return function(t){var e=i.reduce(function(r,n){return n.outlineLevel&&n.outlineLevel>r?n.outlineLevel:r},0);return t.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:e||void 0}}}),t}},worksheetFactory={getTemplate:function(i){var t=i.worksheet,e=i.currentSheet,r=i.margins,n=r===void 0?{}:r,o=i.pageSetup,a=i.headerFooterConfig,s=t.table,l=s.rows,u=s.columns,c=u&&u.length?getMergedCellsAndAddColumnGroups(l,u):[],f=_.compose(addSheetPr(),addSheetFormatPr(l),addColumns(u),addSheetData(l,e+1),addMergeCells(c),addPageMargins(n),addPageSetup(o),addHeaderFooter(a),addDrawingRel(e)),d=f([]);return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:d}}},relationshipFactory={getTemplate:function(i){var t=i.Id,e=i.Type,r=i.Target;return{name:"Relationship",properties:{rawMap:{Id:t,Type:e,Target:r}}}}},relationshipsFactory={getTemplate:function(i){var t=i.map(function(e){return relationshipFactory.getTemplate(e)});return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}},__read$N=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$r=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$N(arguments[t]));return i},ExcelXlsxFactory=function(){function i(){}return i.createExcel=function(t,e,r,n,o){return this.addSheetName(e),registerStyles(t,this.sheetNames.length),this.createWorksheet(e,r,n,o)},i.buildImageMap=function(t,e,r,n,o){var a=this.sheetNames.length,s=this.images.get(t.id);(!t.position||!t.position.row||!t.position.column)&&(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var l=t;if(setExcelImageTotalWidth(l,n),setExcelImageTotalHeight(l,o),s){var u=s.find(function(c){return c.sheetId===a});u?u.image.push(l):s.push({sheetId:a,image:[l]})}else this.images.set(l.id,[{sheetId:a,image:[l]}]),this.workbookImageIds.set(l.id,{type:l.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(a,l)},i.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||(r=new Map,this.worksheetImageIds.set(t,r));var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},i.addSheetName=function(t){for(var e=_.escapeString(t.name)||"",r="";this.sheetNames.indexOf(""+e+r)!==-1;)if(r==="")r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},i.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},i.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=ExcelFactoryMode.SINGLE_SHEET},i.createWorkbook=function(){return createXmlPart(workbookFactory.getTemplate(this.sheetNames))},i.createStylesheet=function(t){return createXmlPart(stylesheetFactory.getTemplate(t))},i.createSharedStrings=function(){return createXmlPart(sharedStrings.getTemplate(this.sharedStrings))},i.createCore=function(t){return createXmlPart(coreFactory.getTemplate(t))},i.createContentTypes=function(t){return createXmlPart(contentTypesFactory.getTemplate(t))},i.createRels=function(){var t=relationshipsFactory.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return createXmlPart(t)},i.createTheme=function(){return createXmlPart(officeTheme.getTemplate())},i.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map(function(n,o){return{Id:"rId"+(o+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(o+1)+".xml"}}),r=relationshipsFactory.getTemplate(__spread$r(e,[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return createXmlPart(r)},i.createDrawing=function(t){return createXmlPart(drawingFactory.getTemplate({sheetIndex:t}))},i.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach(function(o,a){n.push({Id:"rId"+(o.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(a).index+1)+"."+o.type})}),createXmlPart(relationshipsFactory.getTemplate(n))},i.createWorksheetDrawingRel=function(t){var e=relationshipsFactory.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return createXmlPart(e)},i.createWorksheet=function(t,e,r,n){return createXmlPart(worksheetFactory.getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,margins:e,pageSetup:r,headerFooterConfig:n}))},i.sharedStrings=new Map,i.sheetNames=[],i.images=new Map,i.worksheetImages=new Map,i.workbookImageIds=new Map,i.worksheetImageIds=new Map,i.factoryMode=ExcelFactoryMode.SINGLE_SHEET,i}(),__extends$2Y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ExcelXlsxSerializingSession=function(i){__extends$2Y(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createExcel=function(e){var r=this,n=r.excelStyles,o=r.config,a=o.margins,s=o.pageSetup,l=o.headerFooterConfig;return ExcelXlsxFactory.createExcel(n,e,a,s,l)},t.prototype.getDataTypeForValue=function(e){return e===void 0?"empty":_.isNumeric(e)?"n":"s"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"f";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(e,r,n){if(this.config.addImageToCell){var o=this.config.addImageToCell(e,r,n);if(o)return ExcelXlsxFactory.buildImageMap(o.image,e,r,this.columnsToExport,this.config.rowHeight),o}},t.prototype.createCell=function(e,r,n){var o=this.getStyleById(e),a=this.getType(r,o,n)||r;return{styleId:o?e:void 0,data:{type:a,value:this.getCellValue(a,n)}}},t.prototype.createMergedCell=function(e,r,n,o){var a=n??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:r==="s"?ExcelXlsxFactory.getStringPosition(a).toString():n},mergeAcross:o}},t.prototype.getCellValue=function(e,r){if(r==null)return ExcelXlsxFactory.getStringPosition("").toString();switch(e){case"s":return r===""?"":ExcelXlsxFactory.getStringPosition(r).toString();case"f":return r.slice(1);case"n":return Number(r).toString();default:return r}},t}(BaseExcelSerializingSession),__extends$2X=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$D=function(){return __assign$D=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$D.apply(this,arguments)},__decorate$1R=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},getMultipleSheetsAsExcel=function(i){var t=i.data,e=i.fontSize,r=e===void 0?11:e,n=i.author,o=n===void 0?"AG Grid":n,a=ExcelXlsxFactory.images.size>0;if(ZipContainer.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){ZipContainer.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;ExcelXlsxFactory.images.forEach(function(f){var d=f[0].image[0],h=d.imageType;ZipContainer.addFile("xl/media/image"+ ++s+"."+h,d.base64,!0)})}if(!t||t.length===0){console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),ExcelXlsxFactory.resetFactory();return}var l=t.length,u=0;t.forEach(function(f,d){ZipContainer.addFile("xl/worksheets/sheet"+(d+1)+".xml",f),a&&ExcelXlsxFactory.worksheetImages.get(d)&&createImageRelationsForSheet(d,u++)}),ZipContainer.addFile("xl/workbook.xml",ExcelXlsxFactory.createWorkbook()),ZipContainer.addFile("xl/styles.xml",ExcelXlsxFactory.createStylesheet(r)),ZipContainer.addFile("xl/sharedStrings.xml",ExcelXlsxFactory.createSharedStrings()),ZipContainer.addFile("xl/theme/theme1.xml",ExcelXlsxFactory.createTheme()),ZipContainer.addFile("xl/_rels/workbook.xml.rels",ExcelXlsxFactory.createWorkbookRels(l)),ZipContainer.addFile("docProps/core.xml",ExcelXlsxFactory.createCore(o)),ZipContainer.addFile("[Content_Types].xml",ExcelXlsxFactory.createContentTypes(l)),ZipContainer.addFile("_rels/.rels",ExcelXlsxFactory.createRels()),ExcelXlsxFactory.resetFactory();var c=i.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return ZipContainer.getContent(c)},exportMultipleSheetsAsExcel=function(i){var t=i.fileName,e=t===void 0?"export.xlsx":t,r=getMultipleSheetsAsExcel(i);r&&Downloader.download(e,r)},createImageRelationsForSheet=function(i,t){var e="xl/drawings",r=e+"/drawing"+(t+1)+".xml",n=e+"/_rels/drawing"+(t+1)+".xml.rels",o="xl/worksheets/_rels/sheet"+(i+1)+".xml.rels";ZipContainer.addFile(n,ExcelXlsxFactory.createDrawingRel(i)),ZipContainer.addFile(r,ExcelXlsxFactory.createDrawing(i)),ZipContainer.addFile(o,ExcelXlsxFactory.createWorksheetDrawingRel(t))},ExcelCreator=function(i){__extends$2X(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.exportMode="xlsx",e}return t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var r=this.gridOptionsWrapper.getDefaultExportParams("excel");return Object.assign({},r,e)},t.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),i.prototype.getData.call(this,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var r=this.getMergedParams(e),n=this.getData(r),o={data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType},a=this.packageFile(o);return a&&Downloader.download(this.getFileName(r.fileName),a),n},t.prototype.exportDataAsExcel=function(e){return this.export(e)},t.prototype.getDataAsExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);if(e&&e.exportMode==="xml")return n;var o={data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType};return this.packageFile(o)},t.prototype.setFactoryMode=function(e,r){r===void 0&&(r="xlsx");var n=r==="xlsx"?ExcelXlsxFactory:ExcelXmlFactory;n.factoryMode=e},t.prototype.getFactoryMode=function(e){var r=e==="xlsx"?ExcelXlsxFactory:ExcelXmlFactory;return r.factoryMode},t.prototype.getSheetDataForExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);return n},t.prototype.getMultipleSheetsAsExcel=function(e){return getMultipleSheetsAsExcel(e)},t.prototype.exportMultipleSheetsAsExcel=function(e){return exportMultipleSheetsAsExcel(e)},t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},t.prototype.getDefaultFileExtension=function(){return this.getExportMode()},t.prototype.createSerializingSession=function(e){var r=this,n=r.columnModel,o=r.valueService,a=r.gridOptionsWrapper,s=this.getExportMode()==="xlsx",l="ag-grid";e.sheetName!=null&&(l=_.utf8_encode(e.sheetName.toString().substr(0,31)));var u=__assign$D(__assign$D({},e),{sheetName:l,columnModel:n,valueService:o,gridOptionsWrapper:a,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptions.excelStyles||[],styleLinker:this.styleLinker.bind(this)});return new(s?ExcelXlsxSerializingSession:ExcelXmlSerializingSession)(u)},t.prototype.styleLinker=function(e){var r=e.rowType,n=e.rowIndex,o=e.value,a=e.column,s=e.columnGroup,l=e.node,u=r===RowType.HEADER,c=r===RowType.HEADER_GROUPING,f=u?a:s,d=[];if(u||c)return d.push("header"),c&&d.push("headerGroup"),f&&(d=d.concat(CssClassApplier.getHeaderClassesFromColDef(f.getDefinition(),this.gridOptionsWrapper,a||null,s||null))),d;var h=this.gridOptions.excelStyles,p=["cell"];if(!h||!h.length)return p;var g=h.map(function(v){return v.id});return this.stylingService.processAllCellClasses(a.getDefinition(),{value:o,data:l.data,node:l,colDef:a.getDefinition(),column:a,rowIndex:n,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},function(v){g.indexOf(v)>-1&&p.push(v)}),p.sort(function(v,m){return g.indexOf(v)<g.indexOf(m)?-1:1})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressExcelExport()},t.prototype.setExportMode=function(e){this.exportMode=e},t.prototype.getExportMode=function(){return this.exportMode},t.prototype.packageFile=function(e){if(this.getExportMode()==="xml"){var r=e.mimeType||"application/vnd.ms-excel";return new Blob(["\uFEFF",e.data[0]],{type:r})}return getMultipleSheetsAsExcel(e)},__decorate$1R([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1R([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$1R([Autowired("gridOptions")],t.prototype,"gridOptions",void 0),__decorate$1R([Autowired("stylingService")],t.prototype,"stylingService",void 0),__decorate$1R([Autowired("gridSerializer")],t.prototype,"gridSerializer",void 0),__decorate$1R([Autowired("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),__decorate$1R([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$1R([Bean("excelCreator")],t),t}(BaseCreator),ExcelExportModule={moduleName:ModuleNames.ExcelExportModule,beans:[ExcelCreator,GridSerializer,CsvCreator],dependantModules:[CsvExportModule,EnterpriseCoreModule]},__extends$2W=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1Q=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EXPAND_STATE;(function(i){i[i.EXPANDED=0]="EXPANDED",i[i.COLLAPSED=1]="COLLAPSED",i[i.INDETERMINATE=2]="INDETERMINATE"})(EXPAND_STATE||(EXPAND_STATE={}));var FiltersToolPanelHeaderPanel=function(i){__extends$2W(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.preConstruct=function(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
            </div>`)},t.prototype.postConstruct=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(EXPAND_STATE.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=_.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper))},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch,r=!this.params.suppressExpandAll,n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search..."));var o=function(s){return s.getOriginalParent()&&s.isFilterAllowed()},a=this.columnModel.getAllGridColumns().some(o);_.setDisplayed(this.eFilterTextField.getGui(),e),_.setDisplayed(this.eExpand,r&&a)},t.prototype.onSearchTextChanged=function(){var e=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=_.debounce(function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()},t.prototype.onExpandClicked=function(){var e=this.currentExpandState===EXPAND_STATE.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(e)},t.prototype.setExpandState=function(e){this.currentExpandState=e,_.setDisplayed(this.eExpandChecked,this.currentExpandState===EXPAND_STATE.EXPANDED),_.setDisplayed(this.eExpandUnchecked,this.currentExpandState===EXPAND_STATE.COLLAPSED),_.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===EXPAND_STATE.INDETERMINATE)},__decorate$1Q([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1Q([RefSelector("eExpand")],t.prototype,"eExpand",void 0),__decorate$1Q([RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0),__decorate$1Q([PreConstruct],t.prototype,"preConstruct",null),__decorate$1Q([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$2V=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1P=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelFilterComp=function(i){__extends$2V(t,i);function t(e){e===void 0&&(e=!1);var r=i.call(this,t.TEMPLATE)||this;return r.expanded=!1,r.hideHeader=e,r}return t.prototype.postConstruct=function(){this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper),this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},t.prototype.setColumn=function(e){var r=this;this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",function(n){n.key===KeyCode.ENTER&&r.toggleExpanded()}),this.addManagedListener(this.eventService,Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.eExpandChecked.classList.add("ag-hidden"),this.hideHeader?(this.eFilterToolPanelHeader.classList.toggle("ag-hidden",!0),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.getColumn=function(){return this.column},t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)},t.prototype.addInIcon=function(e,r,n){if(r!=null){var o=_.createIconNoSpan(e,this.gridOptionsWrapper,n);r.appendChild(o)}},t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},t.prototype.onFilterChanged=function(){this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.dispatchEvent({type:Column.EVENT_FILTER_CHANGED})},t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},t.prototype.expand=function(){var e=this,r;if(!this.expanded){this.expanded=!0,_.setAriaExpanded(this.eFilterToolPanelHeader,!0);var n=_.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),o=(r=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR"))===null||r===void 0?void 0:r.filterPromise;o&&o.then(function(a){e.underlyingFilter=a,a&&(n.appendChild(a.getGui()),e.agFilterToolPanelBody.appendChild(n),a.afterGuiAttached&&a.afterGuiAttached({container:"toolPanel"}))}),_.setDisplayed(this.eExpandChecked,!0),_.setDisplayed(this.eExpandUnchecked,!1)}},t.prototype.collapse=function(){this.expanded&&(this.expanded=!1,_.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.agFilterToolPanelBody.removeChild(this.agFilterToolPanelBody.children[0]),_.setDisplayed(this.eExpandChecked,!1),_.setDisplayed(this.eExpandUnchecked,!0))},t.prototype.refreshFilter=function(){if(this.expanded){var e=this.underlyingFilter;e&&typeof e.refreshVirtualList=="function"&&e.refreshVirtualList()}},t.prototype.onFilterOpened=function(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()},t.TEMPLATE=`
        <div class="ag-filter-toolpanel-instance">
            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
                <span ref="eFilterName" class="ag-header-cell-text"></span>
                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
            </div>
            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
        </div>`,__decorate$1P([RefSelector("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0),__decorate$1P([RefSelector("eFilterName")],t.prototype,"eFilterName",void 0),__decorate$1P([RefSelector("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0),__decorate$1P([RefSelector("eFilterIcon")],t.prototype,"eFilterIcon",void 0),__decorate$1P([RefSelector("eExpand")],t.prototype,"eExpand",void 0),__decorate$1P([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$1P([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1P([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$2U=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1O=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ToolPanelFilterGroupComp=function(i){__extends$2U(t,i);function t(e,r,n,o,a){var s=i.call(this)||this;return s.columnGroup=e,s.childFilterComps=r,s.depth=o,s.expandedCallback=n,s.showingColumn=a,s}return t.prototype.preConstruct=function(){var e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(t.TEMPLATE,{filterGroupComp:e})},t.prototype.init=function(){var e=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach(function(r){e.filterGroupComp.addItem(r),r.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(e.depth+1)+"-header")}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this;if(this.showingColumn){var r=function(){var n=e.columnGroup.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,r)}},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)},t.prototype.refreshFilters=function(){this.childFilterComps.forEach(function(e){e instanceof t?e.refreshFilters():e.refreshFilter()})},t.prototype.isColumnGroup=function(){return this.columnGroup instanceof ProvidedColumnGroup},t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},t.prototype.getChildren=function(){return this.childFilterComps},t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},t.prototype.hideGroupItem=function(e,r){this.filterGroupComp.hideItem(e,r)},t.prototype.hideGroup=function(e){this.addOrRemoveCssClass("ag-hidden",e)},t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach(function(r){r instanceof ToolPanelFilterComp&&e(r)})},t.prototype.addExpandCollapseListeners=function(){var e=this,r=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(o){return o.expand()})},n=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(o){return o.collapse()})};this.addManagedListener(this.filterGroupComp,AgGroupComponent.EVENT_EXPANDED,r),this.addManagedListener(this.filterGroupComp,AgGroupComponent.EVENT_COLLAPSED,n)},t.prototype.getColumns=function(){return this.columnGroup instanceof ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]},t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach(function(r){e.addManagedListener(r,Column.EVENT_FILTER_CHANGED,function(){return e.refreshFilterClass()})}),this.columnGroup instanceof ProvidedColumnGroup||this.addManagedListener(this.eventService,Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},t.prototype.refreshFilterClass=function(){var e=this.getColumns(),r=function(){return e.some(function(n){return n.isFilterActive()})};this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",r())},t.prototype.onFilterOpened=function(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()},t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")},t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)},t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),_.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
            <ag-group-component ref="filterGroupComp"></ag-group-component>
        </div>`,__decorate$1O([RefSelector("filterGroupComp")],t.prototype,"filterGroupComp",void 0),__decorate$1O([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1O([PreConstruct],t.prototype,"preConstruct",null),__decorate$1O([PostConstruct],t.prototype,"init",null),t}(Component),__extends$2T=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1N=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FiltersToolPanelListPanel=function(i){__extends$2T(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.filterGroupComps=[],e}return t.prototype.init=function(e){var r=this;this.initialised=!0;var n={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};_.mergeDeep(n,e),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(o){o.source==="filters"&&r.refreshFilters()}),this.columnModel.isReady()&&this.onColumnsChanged()},t.prototype.onColumnsChanged=function(){var e=this.columnModel.isPivotMode(),r=!this.params.suppressSyncLayoutWithGrid&&!e;r?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()},t.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},t.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this;this.destroyFilters();var r=this.columnModel.getPrimaryColumnTree();this.filterGroupComps=this.recursivelyAddComps(r,0);var n=this.filterGroupComps.length;n&&(this.filterGroupComps.forEach(function(o){return e.appendChild(o)}),this.setFirstAndLastVisible(0,n-1)),_.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},t.prototype.setFiltersLayout=function(e){var r=this;this.destroyFilters();var n=this.toolPanelColDefService.createColumnTree(e);this.filterGroupComps=this.recursivelyAddComps(n,0);var o=this.filterGroupComps.length;o&&(this.filterGroupComps.forEach(function(a){return r.appendChild(a)}),this.setFirstAndLastVisible(0,o-1)),_.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},t.prototype.recursivelyAddComps=function(e,r){var n=this;return _.flatten(e.map(function(o){if(o instanceof ProvidedColumnGroup)return _.flatten(n.recursivelyAddFilterGroupComps(o,r));var a=o;if(!n.shouldDisplayFilter(a))return[];var s=r===0,l=new ToolPanelFilterComp(s);if(n.createBean(l),l.setColumn(a),r>0)return l;var u=n.createBean(new ToolPanelFilterGroupComp(a,[l],n.onGroupExpanded.bind(n),r,!0));return u.addCssClassToTitleBar("ag-filter-toolpanel-header"),u.collapse(),u}))},t.prototype.recursivelyAddFilterGroupComps=function(e,r){if(this.filtersExistInChildren(e.getChildren())){var n=e.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var o=e.isPadding()?r:r+1,a=_.flatten(this.recursivelyAddComps(e.getChildren(),o));if(e.isPadding())return a;var s=new ToolPanelFilterGroupComp(e,a,this.onGroupExpanded.bind(this),r,!1);return this.createBean(s),s.addCssClassToTitleBar("ag-filter-toolpanel-header"),[s]}},t.prototype.filtersExistInChildren=function(e){var r=this;return e.some(function(n){return n instanceof ProvidedColumnGroup?r.filtersExistInChildren(n.getChildren()):r.shouldDisplayFilter(n)})},t.prototype.shouldDisplayFilter=function(e){var r=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!r},t.prototype.refresh=function(){},t.prototype.setVisible=function(e){i.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.expandFilterGroups=function(e,r){var n=[],o=function(s){var l=s.getFilterGroupId(),u=!r||_.includes(r,l);u&&(e&&s.isColumnGroup()?s.expand():s.collapse(),n.push(l)),s.getChildren().forEach(function(c){c instanceof ToolPanelFilterGroupComp&&o(c)})};if(this.filterGroupComps.forEach(o),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",a)}},t.prototype.expandFilters=function(e,r){var n=[],o=function(s){if(s instanceof ToolPanelFilterGroupComp){var l=!1;return s.getChildren().forEach(function(f){var d=o(f);d&&(e?(s.expand(),l=!0):s.isColumnGroup()||s.collapse())}),l}var u=s.getColumn().getColId(),c=!r||_.includes(r,u);return c&&(e?s.expand():s.collapse(),n.push(u)),c};if(this.filterGroupComps.forEach(o),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",a)}},t.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},t.prototype.fireExpandedEvent=function(){var e=0,r=0,n=function(a){a.isColumnGroup()&&(a.isExpanded()?e++:r++,a.getChildren().forEach(function(s){s instanceof ToolPanelFilterGroupComp&&n(s)}))};this.filterGroupComps.forEach(n);var o;e>0&&r>0?o=EXPAND_STATE.INDETERMINATE:r>0?o=EXPAND_STATE.COLLAPSED:o=EXPAND_STATE.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:o})},t.prototype.performFilterSearch=function(e){this.searchFilterText=_.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)},t.prototype.searchFilters=function(e){var r=function(s){return!_.exists(e)||s.toLowerCase().indexOf(e)!==-1},n=function(s,l){if(!(s instanceof ToolPanelFilterGroupComp))return r(s.getColumnFilterName()||"");var u=s.getChildren(),c=r(s.getFilterGroupName()),f=l||c;if(f){s.hideGroup(!1);for(var d=0;d<u.length;d++)n(u[d],f),s.hideGroupItem(!1,d);return!0}var h=!1;return u.forEach(function(p,g){var v=n(p,l);s.hideGroupItem(!v,g),v&&(h=!0)}),s.hideGroup(!h),h},o,a;this.filterGroupComps.forEach(function(s,l){n(s,!1),o===void 0?s.containsCssClass("ag-hidden")||(o=l,a=l):!s.containsCssClass("ag-hidden")&&a!==l&&(a=l)}),this.setFirstAndLastVisible(o,a)},t.prototype.setFirstAndLastVisible=function(e,r){this.filterGroupComps.forEach(function(n,o){n.removeCssClass("ag-first-group-visible"),n.removeCssClass("ag-last-group-visible"),o===e&&n.addCssClass("ag-first-group-visible"),o===r&&n.addCssClass("ag-last-group-visible")})},t.prototype.refreshFilters=function(){this.filterGroupComps.forEach(function(e){return e.refreshFilters()})},t.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),_.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),i.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-list-panel"></div>',__decorate$1N([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$1N([Autowired("columnApi")],t.prototype,"columnApi",void 0),__decorate$1N([Autowired("toolPanelColDefService")],t.prototype,"toolPanelColDefService",void 0),__decorate$1N([Autowired("columnModel")],t.prototype,"columnModel",void 0),t}(Component),__extends$2S=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$C=function(){return __assign$C=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$C.apply(this,arguments)},__decorate$1M=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FiltersToolPanel=function(i){__extends$2S(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.listenerDestroyFuncs=[],e}return t.prototype.init=function(e){this.initialised&&(this.listenerDestroyFuncs.forEach(function(a){return a()}),this.listenerDestroyFuncs=[]),this.initialised=!0;var r={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};this.params=__assign$C(__assign$C(__assign$C({},r),this.params),{context:this.gridOptionsWrapper.getContext()}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var n=this.params.suppressExpandAll,o=this.params.suppressFilterSearch;n&&o&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},t.prototype.setVisible=function(e){i.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)},t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)},t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)},t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)},t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)},t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!0,e)},t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!1,e)},t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},t.prototype.refresh=function(){this.init(this.params)},t.prototype.destroy=function(){i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-filter-toolpanel">
            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
         </div>`,__decorate$1M([RefSelector("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0),__decorate$1M([RefSelector("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0),__decorate$1M([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$1M([Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(Component),FiltersToolPanelModule={moduleName:ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:FiltersToolPanelHeaderPanel},{componentName:"AgFiltersToolPanelList",componentClass:FiltersToolPanelListPanel}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:FiltersToolPanel}],dependantModules:[SideBarModule,EnterpriseCoreModule]},__extends$2R=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1L=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartDatasource=function(i){__extends$2R(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getData=function(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsWrapper.isRowModelDefault())return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}var r=this.gridOptionsWrapper.isRowModelServerSide();r&&e.pivoting&&this.updatePivotKeysForSSRM();var n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n},t.prototype.extractRowsFromGridRowModel=function(e){var r=this,n=[],o={},a={},s={},l={},u=[],c;if(e.crossFiltering)l=this.getFilteredRowNodes(),u=this.getAllRowNodes(),c=u.length;else{var f=this.gridRowModel.getRowCount()-1,d=e.endRow>=0?Math.min(e.endRow,f):f;c=d-e.startRow+1}for(var h=function(y){var b={},C=e.crossFiltering?u[y]:p.gridRowModel.getRow(y+e.startRow);e.dimensionCols.forEach(function(x){var w=x.colId,P=r.columnModel.getGridColumn(w);if(P){var S=r.valueService.getValue(P,C);if(e.grouping){var O=S&&S.toString?String(S.toString()):"",E=t.getGroupLabels(C,O);b[w]={labels:E,toString:function(){return this.labels.filter(function(R){return!!R}).reverse().join(" - ")}},C.group&&(a[E.toString()]=y);var D=E.slice(1,E.length).toString();D&&(s[D]=a[D])}else b[w]=S}else b[ChartDataModel.DEFAULT_CATEGORY]=y+1}),e.valueCols.forEach(function(x){var w=[],P=x.getColDef().pivotKeys;P&&(w=P.slice());var S=x.getColDef().headerName;S&&w.push(S),w.length>0&&(o[x.getId()]=w);var O=x.getColId();if(e.crossFiltering){var E=O+"-filtered-out",D=r.valueService.getValue(x,C),R=D!=null&&typeof D.toNumber=="function"?D.toNumber():D;l[C.id]?(b[O]=R,b[E]=e.aggFunc||e.isScatter?void 0:0):(b[O]=e.aggFunc||e.isScatter?void 0:0,b[E]=R)}else{var D=r.valueService.getValue(x,C);D&&D.hasOwnProperty("toString")&&(D=parseFloat(D.toString())),b[O]=D!=null&&typeof D.toNumber=="function"?D.toNumber():D}}),C.footer&&(b.footer=!0),n.push(b)},p=this,g=0;g<c;g++)h(g);if(e.grouping){var v=_.values(s),m=function(y,b){return!y.footer&&!_.includes(v,b)};n=n.filter(m)}return{chartData:n,columnNames:o}},t.prototype.aggregateRowsByDimension=function(e,r){var n=this,o=e.dimensionCols;if(!e.aggFunc||o.length===0)return r;var a=_.last(o),s=a&&a.colId,l={},u=[];return r.forEach(function(c){var f=l;o.forEach(function(d){var h=d.colId,p=c[h];if(h===s){var g=f[p];g||(g={__children:[]},o.forEach(function(v){var m=v.colId;g[m]=c[m]}),f[p]=g,u.push(g)),g.__children.push(c)}else f[p]||(f[p]={}),f=f[p]})}),ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Charting Aggregation")&&u.forEach(function(c){return e.valueCols.forEach(function(f){if(e.crossFiltering)e.valueCols.forEach(function(p){var g=p.getColId(),v=c.__children.filter(function(x){return typeof x[g]<"u"}).map(function(x){return x[g]}),m=n.aggregationStage.aggregateValues(v,e.aggFunc);c[p.getId()]=m&&typeof m.value<"u"?m.value:m;var y=g+"-filtered-out",b=c.__children.filter(function(x){return typeof x[y]<"u"}).map(function(x){return x[y]}),C=n.aggregationStage.aggregateValues(b,e.aggFunc);c[y]=C&&typeof C.value<"u"?C.value:C});else{var d=c.__children.map(function(p){return p[f.getId()]}),h=0;ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Charting Aggregation")&&(h=n.aggregationStage.aggregateValues(d,e.aggFunc)),c[f.getId()]=h&&typeof h.value<"u"?h.value:h}})}),u},t.prototype.updatePivotKeysForSSRM=function(){var e=this.columnModel.getSecondaryColumns();if(e){var r=this.extractPivotKeySeparator(e);e.forEach(function(n){if(r==="")n.getColDef().pivotKeys=[];else{var o=n.getColId().split(r);n.getColDef().pivotKeys=o.slice(0,o.length-1)}})}},t.prototype.extractPivotKeySeparator=function(e){if(e.length===0)return"";var r=function(o,a){var s=o.getGroupId();return o.getParent()?r(o.getParent(),s):a.split(s)[1][0]},n=e[0];return n.getParent()==null?"":r(n.getParent(),n.getColId())},t.getGroupLabels=function(e,r){for(var n=[r];e&&e.level!==0;)e=e.parent,e&&n.push(e.key);return n},t.prototype.getFilteredRowNodes=function(){var e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(function(r){e[r.id]=r}),e},t.prototype.getAllRowNodes=function(){var e=[];return this.gridRowModel.forEachNode(function(r){e.push(r)}),this.sortRowNodes(e)},t.prototype.sortRowNodes=function(e){var r=this.sortController.getSortOptions(),n=!r||r.length==0;return n?e:this.rowNodeSorter.doFullSort(e,r)},__decorate$1L([Autowired("rowModel")],t.prototype,"gridRowModel",void 0),__decorate$1L([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$1L([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1L([Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),__decorate$1L([Autowired("sortController")],t.prototype,"sortController",void 0),__decorate$1L([Optional("aggregationStage")],t.prototype,"aggregationStage",void 0),t}(BeanStub),__extends$2Q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1K=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$M=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$q=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$M(arguments[t]));return i},ChartDataModel=function(i){__extends$2Q(t,i);function t(e){var r=i.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.grouping=!1,r.crossFiltering=!1,r.suppressComboChartWarnings=!1,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r.seriesChartTypes=e.seriesChartTypes||[],r.initComboCharts(e),r}return t.prototype.initComboCharts=function(e){var r=this.seriesChartTypes&&this.seriesChartTypes.length>0,n=e.chartType==="customCombo"||r;n&&(this.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},t.prototype.init=function(){this.datasource=this.createManagedBean(new ChartDatasource),this.updateCellRanges()},t.prototype.updateCellRanges=function(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var r=this.getAllChartColumns(),n=r.dimensionCols,o=r.valueCols,a=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(n,a,e),this.setValueCellRange(o,a,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.updateSeriesChartTypes(),this.updateData()},t.prototype.updateSeriesChartTypes=function(){if(this.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(function(e){var r=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=r?!1:e.secondaryAxis,e}),this.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()}},t.prototype.updateSeriesChartTypesForCustomCombo=function(){var e=this,r=this.seriesChartTypes&&this.seriesChartTypes.length>0;!r&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(function(a){return t.SUPPORTED_COMBO_CHART_TYPES.includes(a.chartType)||(console.warn("AG Grid: invalid chartType '"+a.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),a.chartType="line"),a});var n=function(a){(!e.savedCustomSeriesChartTypes||e.savedCustomSeriesChartTypes.length===0)&&(e.savedCustomSeriesChartTypes=e.seriesChartTypes);var s=e.savedCustomSeriesChartTypes.find(function(l){return l.colId===a.colId});return s||(a.selected&&!e.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+a.colId+"', defaulting to 'line'."),{colId:a.colId,chartType:"line",secondaryAxis:!1})},o=this.valueColState.map(n);this.seriesChartTypes=o,this.savedCustomSeriesChartTypes=o,this.suppressComboChartWarnings=!0},t.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var e=this.chartType==="columnLineCombo"?"groupedColumn":"stackedArea",r=this.chartType==="columnLineCombo"?"line":"groupedColumn",n=this.valueColState.filter(function(a){return a.selected}),o=Math.ceil(n.length/2);this.seriesChartTypes=n.map(function(a,s){var l=s>=o?r:e;return{colId:a.colId,chartType:l,secondaryAxis:!1}})},t.prototype.updateData=function(){var e=this.getRowIndexes(),r=e.startRow,n=e.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var o={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:r,endRow:n,isScatter:_.includes(["scatter","bubble"],this.chartType)},a=this.datasource.getData(o),s=a.chartData,l=a.columnNames;this.chartData=s,this.columnNames=l},t.prototype.isGrouping=function(){var e=this.gridOptionsWrapper.isTreeData(),r=e?null:this.columnModel.getRowGroupColumns(),n=e||r&&r.length>0,o=this.getSelectedDimension().colId,a=this.columnModel.getGroupDisplayColumns(),s=a.map(function(l){return l.getColId()}).some(function(l){return l===o});return!!n&&s},t.prototype.getSelectedValueCols=function(){return this.valueColState.filter(function(e){return e.selected}).map(function(e){return e.column})},t.prototype.getSelectedDimension=function(){return this.dimensionColState.filter(function(e){return e.selected})[0]},t.prototype.getColDisplayName=function(e){return this.columnModel.getDisplayNameForColumn(e,"chart")},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.getChartDataType=function(e){var r=this.columnModel.getPrimaryColumn(e);return r?r.getColDef().chartDataType:void 0},t.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},t.prototype.createCellRange=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:r,startColumn:e===CellRangeType.DIMENSION?r[0]:this.referenceCellRange.startColumn,type:e}},t.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return _.convertToSet(this.columnModel.getAllDisplayedColumns());var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push.apply(e,__spread$q(this.dimensionCellRange.columns)),this.valueCellRange&&e.push.apply(e,__spread$q(this.valueCellRange.columns)),_.convertToSet(e)},t.prototype.getRowIndexes=function(){var e=0,r=0,n=this.rangeService,o=this.valueCellRange;if(n&&o){e=n.getRangeStartRow(o).rowIndex;var a=n.getRangeEndRow(o);r=a.rowPinned===Constants.PINNED_BOTTOM?-1:a.rowIndex}return{startRow:e,endRow:r}},t.prototype.getAllChartColumns=function(){var e=this,r=this.columnModel.getAllDisplayedColumns(),n=new Set,o=new Set;return r.forEach(function(a){var s=a.getColDef(),l=s.chartDataType;if(l)switch(l){case"category":case"time":n.add(a);return;case"series":o.add(a);return;case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+l+"' supplied, instead use 'category', 'series' or 'excluded'");break}if(s.colId==="ag-Grid-AutoColumn"){n.add(a);return}if(!a.isPrimary()){o.add(a);return}(e.isNumberCol(a)?o:n).add(a)}),{dimensionCols:n,valueCols:o}},t.prototype.isNumberCol=function(e){if(e.getColId()==="ag-Grid-AutoColumn")return!1;var r=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!r)return!1;var n=this.valueService.getValue(e,r);return n==null&&(n=this.extractLeafData(r,e)),n!=null&&typeof n.toNumber=="function"&&(n=n.toNumber()),typeof n=="number"},t.prototype.extractLeafData=function(e,r){if(!e.allLeafChildren)return null;for(var n=0;n<e.allLeafChildren.length;n++){var o=e.allLeafChildren[n],a=this.valueService.getValue(r,o);if(a!=null)return a}return null},t.prototype.resetColumnState=function(){var e=this,r=this.getAllChartColumns(),n=r.dimensionCols,o=r.valueCols,a=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,u=1,c=this.suppliedCellRange.columns[0];n.forEach(function(h){var p=h.getColId()==="ag-Grid-AutoColumn",g=!1;e.crossFiltering&&e.aggFunc?c.getColId()===h.getColId()&&(g=!0):g=p?!0:!l&&a.has(h),e.dimensionColState.push({column:h,colId:h.getColId(),displayName:e.getColDisplayName(h),selected:g,order:u++}),g&&(l=!0)});var f={colId:t.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(f);var d=this.referenceCellRange.columns.filter(function(h){return o.has(h)});o.forEach(function(h){s&&_.includes(e.referenceCellRange.columns,h)&&(h=d.shift()),e.valueColState.push({column:h,colId:h.getColId(),displayName:e.getColDisplayName(h),selected:a.has(h),order:u++})})},t.prototype.updateColumnState=function(e){var r=function(u){return u.colId===e.colId},n=this,o=n.dimensionColState,a=n.valueColState;o.filter(r).length>0?o.forEach(function(u){return u.selected=r(u)}):a.filter(r).forEach(function(u){return u.selected=e.selected});var s=__spread$q(o,a),l=[];s.forEach(function(u,c){c===e.order&&l.push(e.colId),u.colId!==e.colId&&l.push(u.colId)}),s.forEach(function(u){var c=l.indexOf(u.colId);u.order=c>=0?l.indexOf(u.colId):s.length-1}),this.reorderColState()},t.prototype.reorderColState=function(){var e=function(r,n){return r.order-n.order};this.dimensionColState.sort(e),this.valueColState.sort(e)},t.prototype.setDimensionCellRange=function(e,r,n){var o=this;if(this.dimensionCellRange=void 0,!n&&!this.dimensionColState.length){e.forEach(function(l){o.dimensionCellRange||!r.has(l)||(o.dimensionCellRange=o.createCellRange(CellRangeType.DIMENSION,l))});return}var a=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];a=this.dimensionColState.filter(function(l){return l.colId===s.getColId()})[0]}else(!a||!e.has(a.column))&&(a=this.dimensionColState.filter(function(l){return l.selected})[0]);a&&a.colId!==t.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(CellRangeType.DIMENSION,a.column))},t.prototype.setValueCellRange=function(e,r,n){this.valueCellRange=void 0;var o=[];if(e.forEach(function(s){n&&n.colId===s.getColId()?n.selected&&o.push(n.column):r.has(s)&&o.push(s)}),o.length>0){var a=[];this.valueColState.length>0?a=this.valueColState.map(function(s){return s.colId}):r.forEach(function(s){return a.push(s.getColId())}),o.sort(function(s,l){return a.indexOf(s.getColId())-a.indexOf(l.getColId())}),this.valueCellRange=this.createCellRange.apply(this,__spread$q([CellRangeType.VALUE],o))}},t.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(CellRangeType.DIMENSION,e.column))},t.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},t.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",t.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],__decorate$1K([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$1K([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$1K([Autowired("rangeService")],t.prototype,"rangeService",void 0),__decorate$1K([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$1K([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$1K([PostConstruct],t.prototype,"init",null),t}(BeanStub),BBox$1=function(){function i(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return i.prototype.clone=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height;return new i(e,r,n,o)},i.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},i.prototype.dilate=function(t){this.x-=t,this.y-=t,this.width+=t*2,this.height+=t*2},i.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},i.prototype.render=function(t,e){e===void 0&&(e=i.noParams),t.save(),e.resetTransform&&t.setTransform(1,0,0,1,0,0),t.strokeStyle=e.strokeStyle||"cyan",t.lineWidth=e.lineWidth||1,t.strokeRect(this.x,this.y,this.width,this.height),e.label&&(t.fillStyle=e.fillStyle||"black",t.textBaseline="bottom",t.fillText(e.label,this.x,this.y)),t.restore()},i.noParams={},i}(),__read$L=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Matrix$1=function(){function i(t){t===void 0&&(t=[1,0,0,1,0,0]),this.elements=t}return i.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},i.prototype.setIdentityElements=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},Object.defineProperty(i.prototype,"identity",{get:function(){var t=this.elements;return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"a",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"b",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"d",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"e",{get:function(){return this.elements[4]},set:function(t){this.elements[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"f",{get:function(){return this.elements[5]},set:function(t){this.elements[5]=t},enumerable:!0,configurable:!0}),i.prototype.AxB=function(t,e,r){var n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],u=t[1]*e[4]+t[3]*e[5]+t[5];r=r||t,r[0]=n,r[1]=o,r[2]=a,r[3]=s,r[4]=l,r[5]=u},i.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},i.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new i(e)},i.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},i.prototype.inverse=function(){var t=__read$L(this.elements,6),e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=1/(e*o-r*n);return e*=l,r*=l,n*=l,o*=l,new i([o,-r,-n,e,n*s-o*a,r*a-e*s])},i.prototype.inverseTo=function(t){var e=__read$L(this.elements,6),r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=1/(r*a-n*o);return r*=u,n*=u,o*=u,a*=u,t.setElements([a,-n,-o,r,o*l-a*s,n*s-r*l]),this},i.prototype.invertSelf=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=1/(e*o-r*n);return e*=l,r*=l,n*=l,o*=l,t[0]=o,t[1]=-r,t[2]=-n,t[3]=e,t[4]=n*s-o*a,t[5]=r*a-e*s,this},i.prototype.clone=function(){return new i(this.elements.slice())},i.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},i.prototype.transformBBox=function(t,e,r){e===void 0&&(e=0);var n=this.elements,o=n[0],a=n[1],s=n[2],l=n[3],u=t.width*.5,c=t.height*.5,f=t.x+u,d=t.y+c,h,p;if(e){u-=e,c-=e;var g=Math.sqrt(o*o+s*s),v=Math.sqrt(a*a+l*l);h=Math.abs(u*o)+Math.abs(c*s)+Math.abs(g*e),p=Math.abs(u*a)+Math.abs(c*l)+Math.abs(v*e)}else h=Math.abs(u*o)+Math.abs(c*s),p=Math.abs(u*a)+Math.abs(c*l);return r||(r=new BBox$1(0,0,0,0)),r.x=f*o+d*s+n[4]-h,r.y=f*a+d*l+n[5]-p,r.width=h+h,r.height=p+p,r},i.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},i.flyweight=function(t){return t?t instanceof i?i.matrix.setElements(t.elements):i.matrix.setElements(t):i.matrix.setIdentityElements(),i.matrix},i.updateTransformMatrix=function(t,e,r,n,o,a,s){var l,u,c,f,d,h,p,g,v=__read$L([0,0],2),m=v[0],y=v[1],b=e,C=r,x,w;b===1&&C===1?(x=0,w=0):(x=((l=s)===null||l===void 0?void 0:l.scalingCenterX)==null?m:(u=s)===null||u===void 0?void 0:u.scalingCenterX,w=((c=s)===null||c===void 0?void 0:c.scalingCenterY)==null?y:(f=s)===null||f===void 0?void 0:f.scalingCenterY);var P=n,S=Math.cos(P),O=Math.sin(P),E,D;P===0?(E=0,D=0):(E=((d=s)===null||d===void 0?void 0:d.rotationCenterX)==null?m:(h=s)===null||h===void 0?void 0:h.rotationCenterX,D=((p=s)===null||p===void 0?void 0:p.rotationCenterY)==null?y:(g=s)===null||g===void 0?void 0:g.rotationCenterY);var R=o,F=a,I=x*(1-b)-E,$=w*(1-C)-D;return t.setElements([S*b,O*b,-O*C,S*C,S*I-O*$+E+R,O*I+S*$+D+F]),t},i.matrix=new i,i}(),ID_MAP={};function createId$1(i){var t,e=i.constructor,r=e.hasOwnProperty("className")?e.className:e.name;if(!r)throw new Error("The "+e+" is missing the 'className' property.");var n=(t=ID_MAP[r],(t??0)+1);return ID_MAP[r]=n,r+"-"+n}function windowValue(i){var t,e=typeof window<"u"?window:void 0;return(t=e)===null||t===void 0?void 0:t[i]}var RedrawType;(function(i){i[i.NONE=0]="NONE",i[i.TRIVIAL=1]="TRIVIAL",i[i.MINOR=2]="MINOR",i[i.MAJOR=3]="MAJOR"})(RedrawType||(RedrawType={}));function evalAvailable(){try{return eval(""),!0}catch(i){return!1}}var EVAL_USEABLE=evalAvailable();function SceneChangeDetection(opts){var _a=opts||{},_b=_a.redraw,redraw=_b===void 0?RedrawType.TRIVIAL:_b,_c=_a.type,type=_c===void 0?"normal":_c,changeCb=_a.changeCb,convertor=_a.convertor,_d=_a.checkDirtyOnAssignment,checkDirtyOnAssignment=_d===void 0?!1:_d,debug=windowValue("agChartsSceneChangeDetectionDebug")!=null;return function(target,key){var privateKey="__"+key;if(!target[key])if(EVAL_USEABLE){var setterJs=`
                `+(debug?"var setCount = 0;":"")+`
                function set_`+key+`(value) {
                    const oldValue = this.`+privateKey+`;
                    `+(convertor?"value = convertor(value);":"")+`
                    if (value !== oldValue) {
                        this.`+privateKey+` = value;
                        `+(debug?"console.log({ t: this, property: '"+key+"', oldValue, value, stack: new Error().stack });":"")+`
                        `+(type==="normal"?"this.markDirty(this, "+redraw+");":"")+`
                        `+(type==="transform"?"this.markDirtyTransform("+redraw+");":"")+`
                        `+(type==="path"?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+redraw+"); }":"")+`
                        `+(type==="font"?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+redraw+"); }":"")+`
                        `+(changeCb?"changeCb(this);":"")+`
                    }
                    `+(checkDirtyOnAssignment?"if (value != null && value._dirty > "+RedrawType.NONE+") { this.markDirty(value, value._dirty); }":"")+`
                };
                set_`+key+`;
            `,getterJs=`
                function get_`+key+`() {
                    return this.`+privateKey+`;
                };
                get_`+key+`;
            `;Object.defineProperty(target,key,{set:eval(setterJs),get:eval(getterJs),enumerable:!0,configurable:!0})}else{var setter=function(i){var t=this[privateKey];i=convertor?convertor(i):i,i!==t&&(this[privateKey]=i,type==="normal"&&this.markDirty(this,redraw),type==="transform"&&this.markDirtyTransform(redraw),type==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,redraw)),type==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,redraw)),changeCb&&changeCb(this)),checkDirtyOnAssignment&&i!=null&&i._dirty>RedrawType.NONE&&this.markDirty(i,i._dirty)},getter=function(){return this[privateKey]};Object.defineProperty(target,key,{set:setter,get:getter,enumerable:!0,configurable:!0})}}}var ChangeDetectable=function(){function i(){this._dirty=RedrawType.MAJOR}return i.prototype.markDirty=function(t,e){e===void 0&&(e=RedrawType.TRIVIAL),!(this._dirty>e)&&(this._dirty=e)},i.prototype.markClean=function(t){this._dirty=RedrawType.NONE},i.prototype.isDirty=function(){return this._dirty>RedrawType.NONE},i}(),__extends$2P=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1J=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__values$w=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PointerEvents$1;(function(i){i[i.All=0]="All",i[i.None=1]="None"})(PointerEvents$1||(PointerEvents$1={}));var zIndexChangedCallback=function(i){i.parent&&(i.parent.dirtyZIndex=!0),i.zIndexChanged()},Node$1=function(i){__extends$2P(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.serialNumber=t._nextSerialNumber++,e.id=createId$1(e),e.tag=NaN,e.isContainerNode=!1,e._children=[],e.childSet={},e.matrix=new Matrix$1,e.inverseMatrix=new Matrix$1,e._dirtyTransform=!1,e.scalingX=1,e.scalingY=1,e.scalingCenterX=null,e.scalingCenterY=null,e.rotationCenterX=null,e.rotationCenterY=null,e.rotation=0,e.translationX=0,e.translationY=0,e.visible=!0,e.dirtyZIndex=!1,e.zIndex=0,e.zIndexSubOrder=void 0,e.pointerEvents=PointerEvents$1.All,e}return t.isNode=function(e){return e?e.matrix!==void 0:!1},t.prototype._setScene=function(e){var r,n,o;this._scene=e,this._debug=(o=e)===null||o===void 0?void 0:o.debug;try{for(var a=__values$w(this.children),s=a.next();!s.done;s=a.next()){var l=s.value;l._setScene(e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),t.prototype.countChildren=function(e){if(e===void 0&&(e=t.MAX_SAFE_INTEGER),e<=0)return 0;for(var r=this.children,n=r.length,o=n,a=0;a<n;a++)o+=r[a].countChildren(e-1);return o},t.prototype.append=function(e){var r,n;t.isNode(e)&&(e=[e]);try{for(var o=__values$w(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.parent)throw new Error(s+" already belongs to another parent: "+s.parent+".");if(s.scene)throw new Error(s+" already belongs to a scene: "+s.scene+".");if(this.childSet[s.id])throw new Error("Duplicate "+s.constructor.name+" node: "+s);this._children.push(s),this.childSet[s.id]=!0,s._parent=this,s._setScene(this.scene)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.dirtyZIndex=!0,this.markDirty(this,RedrawType.MAJOR)},t.prototype.appendChild=function(e){return this.append(e),e},t.prototype.removeChild=function(e){if(e.parent===this){var r=this.children.indexOf(e);if(r>=0)return this._children.splice(r,1),delete this.childSet[e.id],e._parent=void 0,e._setScene(),this.dirtyZIndex=!0,this.markDirty(e,RedrawType.MAJOR),e}throw new Error("The node to be removed is not a child of this node.")},t.prototype.insertBefore=function(e,r){var n=e.parent;if(e.parent&&e.parent.removeChild(e),r&&r.parent===this){var o=this.children.indexOf(r);if(o>=0)this._children.splice(o,0,e),this.childSet[e.id]=!0,e._parent=this,e._setScene(this.scene);else throw new Error(r+" has "+n+" as the parent, but is not in its list of children.");this.dirtyZIndex=!0,this.markDirty(e,RedrawType.MAJOR)}else this.append(e);return e},Object.defineProperty(t.prototype,"nextSibling",{get:function(){var e=this.parent;if(e){var r=e.children,n=r.indexOf(this);if(n>=0&&n<=r.length-1)return r[n+1]}},enumerable:!0,configurable:!0}),t.prototype.transformPoint=function(e,r){for(var n=Matrix$1.flyweight(this.matrix),o=this.parent;o;)n.preMultiplySelf(o.matrix),o=o.parent;return n.invertSelf().transformPoint(e,r)},t.prototype.inverseTransformPoint=function(e,r){for(var n=Matrix$1.flyweight(this.matrix),o=this.parent;o;)n.preMultiplySelf(o.matrix),o=o.parent;return n.transformPoint(e,r)},t.prototype.markDirtyTransform=function(){this._dirtyTransform=!0,this.markDirty(this,RedrawType.MAJOR)},Object.defineProperty(t.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(e){this.rotation=e/180*Math.PI},enumerable:!0,configurable:!0}),t.prototype.containsPoint=function(e,r){return!1},t.prototype.pickNode=function(e,r){var n;if(!(!this.visible||this.pointerEvents===PointerEvents$1.None||!this.containsPoint(e,r))){var o=this.children;if(o.length>1e3)for(var a=o.length-1;a>=0;a--){var s=!((n=o[a].computeBBox())===null||n===void 0)&&n.containsPoint(e,r)?o[a].pickNode(e,r):void 0;if(s)return s}else if(o.length)for(var a=o.length-1;a>=0;a--){var s=o[a].pickNode(e,r);if(s)return s}else if(!this.isContainerNode)return this}},t.prototype.computeBBox=function(){},t.prototype.computeTransformedBBox=function(){var e=this.computeBBox();if(e){this.computeTransformMatrix();for(var r=Matrix$1.flyweight(this.matrix),n=this.parent;n;)n.computeTransformMatrix(),r.preMultiplySelf(n.matrix),n=n.parent;return r.transformBBox(e,0,e),e}},t.prototype.computeBBoxCenter=function(){var e=this.computeBBox&&this.computeBBox();return e?[e.x+e.width*.5,e.y+e.height*.5]:[0,0]},t.prototype.computeTransformMatrix=function(){if(this._dirtyTransform){var e=this,r=e.matrix,n=e.scalingX,o=e.scalingY,a=e.rotation,s=e.translationX,l=e.translationY,u=e.scalingCenterX,c=e.scalingCenterY,f=e.rotationCenterX,d=e.rotationCenterY;Matrix$1.updateTransformMatrix(r,n,o,a,s,l,{scalingCenterX:u,scalingCenterY:c,rotationCenterX:f,rotationCenterY:d}),r.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}},t.prototype.render=function(e){var r=e.stats;this._dirty=RedrawType.NONE,r&&r.nodesRendered++},t.prototype.clearBBox=function(e){var r=this.computeBBox();if(r!=null){var n=r.x,o=r.y,a=r.width,s=r.height,l=this.transformPoint(n,o),u=this.transformPoint(n+a,o+s);e.clearRect(l.x,l.y,u.x-l.x,u.y-l.y)}},t.prototype.markDirty=function(e,r,n){r===void 0&&(r=RedrawType.TRIVIAL),n===void 0&&(n=r),!(this._dirty>r)&&(this._dirty===r&&r===n||(this._dirty=r,this.parent?this.parent.markDirty(this,n):this.scene&&this.scene.markDirty()))},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),t.prototype.markClean=function(e){var r,n,o=e||{},a=o.force,s=a===void 0?!1:a,l=o.recursive,u=l===void 0?!0:l;if(!(this._dirty===RedrawType.NONE&&!s)&&(this._dirty=RedrawType.NONE,u))try{for(var c=__values$w(this.children),f=c.next();!f.done;f=c.next()){var d=f.value;d.markClean()}}catch(h){r={error:h}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}},t.prototype.visibilityChanged=function(){},Object.defineProperty(t.prototype,"nodeCount",{get:function(){var e,r,n=1,o=this._dirty>=RedrawType.NONE||this._dirtyTransform?1:0,a=this.visible?1:0;try{for(var s=__values$w(this._children),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.nodeCount,f=c.count,d=c.visibleCount,h=c.dirtyCount;n+=f,a+=d,o+=h}}catch(p){e={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return{count:n,visibleCount:a,dirtyCount:o}},enumerable:!0,configurable:!0}),t.prototype.zIndexChanged=function(){},t._nextSerialNumber=0,t.MAX_SAFE_INTEGER=Math.pow(2,53)-1,__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"scalingX",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"scalingY",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"scalingCenterX",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"scalingCenterY",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"rotationCenterX",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"rotationCenterY",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"rotation",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"translationX",void 0),__decorate$1J([SceneChangeDetection({type:"transform"})],t.prototype,"translationY",void 0),__decorate$1J([SceneChangeDetection({redraw:RedrawType.MAJOR,changeCb:function(e){return e.visibilityChanged()}})],t.prototype,"visible",void 0),__decorate$1J([SceneChangeDetection({redraw:RedrawType.TRIVIAL,changeCb:zIndexChangedCallback})],t.prototype,"zIndex",void 0),__decorate$1J([SceneChangeDetection({redraw:RedrawType.TRIVIAL,changeCb:zIndexChangedCallback})],t.prototype,"zIndexSubOrder",void 0),t}(ChangeDetectable);function chainObjects$1(i,t){var e=Object.create(i);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function getValue(i,t,e){var r=Array.isArray(t)?t:t.split("."),n=i;try{r.forEach(function(o){n=n[o]})}catch(o){if(arguments.length===3)n=e;else throw o}return n}function emptyTarget$1(i){return Array.isArray(i)?[]:{}}function cloneUnlessOtherwiseSpecified$1(i,t){return t.clone!==!1&&t.isMergeableObject(i)?deepMerge$1(emptyTarget$1(i),i,t):i}function defaultArrayMerge$1(i,t,e){return i.concat(t).map(function(r){return cloneUnlessOtherwiseSpecified$1(r,e)})}function getMergeFunction$1(i,t){if(!t.customMerge)return deepMerge$1;var e=t.customMerge(i);return typeof e=="function"?e:deepMerge$1}function getEnumerableOwnPropertySymbols$1(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(t){return i.propertyIsEnumerable(t)}):[]}function getKeys$1(i){return Object.keys(i).concat(getEnumerableOwnPropertySymbols$1(i))}function propertyIsOnObject$1(i,t){try{return t in i}catch{return!1}}function propertyIsUnsafe$1(i,t){return propertyIsOnObject$1(i,t)&&!(Object.hasOwnProperty.call(i,t)&&Object.propertyIsEnumerable.call(i,t))}function mergeObject$1(i,t,e){var r={};return e.isMergeableObject(i)&&getKeys$1(i).forEach(function(n){r[n]=cloneUnlessOtherwiseSpecified$1(i[n],e)}),getKeys$1(t).forEach(function(n){propertyIsUnsafe$1(i,n)||(propertyIsOnObject$1(i,n)&&e.isMergeableObject(t[n])?r[n]=getMergeFunction$1(n,e)(i[n],t[n],e):r[n]=cloneUnlessOtherwiseSpecified$1(t[n],e))}),r}function defaultIsMergeableObject$1(i){return isNonNullObject$1(i)&&!isSpecial$1(i)}function isNonNullObject$1(i){return!!i&&typeof i=="object"}function isSpecial$1(i){var t=Object.prototype.toString.call(i);return t==="[object RegExp]"||t==="[object Date]"}function deepMerge$1(i,t,e){e=e||{},e.arrayMerge=e.arrayMerge||defaultArrayMerge$1,e.isMergeableObject=e.isMergeableObject||defaultIsMergeableObject$1,e.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified$1;var r=Array.isArray(t),n=Array.isArray(i),o=r===n;return o?r?e.arrayMerge(i,t,e):mergeObject$1(i,t,e):cloneUnlessOtherwiseSpecified$1(t,e)}function isObject(i){return i&&typeof i=="object"}var __extends$2O=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1I=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Shape$1=function(i){__extends$2O(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.lastInstanceId=0,e.fillOpacity=1,e.strokeOpacity=1,e.fill=t.defaultStyles.fill,e.stroke=t.defaultStyles.stroke,e.strokeWidth=t.defaultStyles.strokeWidth,e.lineDash=t.defaultStyles.lineDash,e.lineDashOffset=t.defaultStyles.lineDashOffset,e.lineCap=t.defaultStyles.lineCap,e.lineJoin=t.defaultStyles.lineJoin,e.opacity=t.defaultStyles.opacity,e.fillShadow=t.defaultStyles.fillShadow,e}return t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,o=r.length;n<o;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)e.hasOwnProperty(n)&&r.hasOwnProperty(n)&&(this[n]=e[n])},t.prototype.align=function(e,r){var n,o,a,s=(a=(o=(n=this.scene)===null||n===void 0?void 0:n.canvas)===null||o===void 0?void 0:o.pixelRatio,a??1),l=Math.round(e*s)/s;return r==null?l:r===0?0:r<1?Math.ceil(r*s)/s:Math.round((r+e)*s)/s-l},t.prototype.fillStroke=function(e){if(this.scene){var r=this.scene.canvas.pixelRatio||1,n=e.globalAlpha;if(this.fill){e.fillStyle=this.fill,e.globalAlpha=n*this.opacity*this.fillOpacity;var o=this.fillShadow;o&&o.enabled&&(e.shadowColor=o.color,e.shadowOffsetX=o.xOffset*r,e.shadowOffsetY=o.yOffset*r,e.shadowBlur=o.blur*r),e.fill()}e.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth&&(e.strokeStyle=this.stroke,e.globalAlpha=n*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke())}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=chainObjects$1({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"fillOpacity",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"strokeOpacity",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"fill",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"stroke",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"strokeWidth",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineDash",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineDashOffset",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineCap",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineJoin",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0),__decorate$1I([SceneChangeDetection({redraw:RedrawType.MINOR,checkDirtyOnAssignment:!0})],t.prototype,"fillShadow",void 0),t}(Node$1),HdpiCanvas$1=function(){function i(t){var e=t.document,r=e===void 0?window.document:e,n=t.width,o=n===void 0?600:n,a=t.height,s=a===void 0?300:a,l=t.domLayer,u=l===void 0?!1:l,c=t.zIndex,f=c===void 0?0:c,d=t.name,h=d===void 0?void 0:d,p=t.overrideDevicePixelRatio,g=p===void 0?void 0:p;this._container=void 0,this._enabled=!0,this._opacity=1,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=r,this.element=r.createElement("canvas"),this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;var v=this.element.style;v.userSelect="none",v.display="block",u&&(v.position="absolute",v.zIndex=String(f),v.top="0",v.left="0",v.pointerEvents="none",v.opacity="1",h&&(this.element.id=h)),this.setPixelRatio(g),this.resize(o,s)}return Object.defineProperty(i.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.element.style.display=t?"block":"none",this._enabled=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this.element.style.opacity=""+t,this._opacity=t},enumerable:!0,configurable:!0}),i.prototype.remove=function(){var t=this.element.parentNode;t!=null&&t.removeChild(this.element)},i.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},i.prototype.snapshot=function(){},i.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},i.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},i.prototype.getDataURL=function(t){return this.element.toDataURL(t)},i.prototype.download=function(t,e){e===void 0&&(e="image/png"),t=(t||"").trim()||"image";var r=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=r,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),i.prototype.setPixelRatio=function(t){var e=t||window.devicePixelRatio;e!==this.pixelRatio&&(i.overrideScale(this.context,e),this._pixelRatio=e,this.resize(this.width,this.height))},Object.defineProperty(i.prototype,"pixelated",{get:function(){return this.element.style.imageRendering==="pixelated"},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),i.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,o=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",o.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(i,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!0,configurable:!0}),Object.defineProperty(i,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!0,configurable:!0}),Object.defineProperty(i,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!e&&!r,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has},enumerable:!0,configurable:!0}),i.measureText=function(t,e,r,n){var o=this.textMeasuringContext;return o.font=e,o.textBaseline=r,o.textAlign=n,o.measureText(t)},i.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else return this.measureSvgText(t,e)},i.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var o=n[t];if(o)return o}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},i.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){if(r>0)this.$restore(),r--;else throw new Error("Unable to restore() past depth 0")},setTransform:function(a,s,l,u,c,f){typeof a=="object"?this.$setTransform(a):this.$setTransform(a*e,s*e,l*e,u*e,c*e,f*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0)}};for(var o in n)n.hasOwnProperty(o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o])},i.textSizeCache={},i}(),__extends$2N=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1H=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function SceneFontChangeDetection(i){var t=i||{},e=t.redraw,r=e===void 0?RedrawType.MAJOR:e,n=t.changeCb;return SceneChangeDetection({redraw:r,type:"font",changeCb:n})}var Text$1=function(i){__extends$2N(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.x=0,e.y=0,e.lines=[],e.text="",e._dirtyFont=!0,e.fontSize=10,e.fontFamily="sans-serif",e.textAlign=t.defaultStyles.textAlign,e.textBaseline=t.defaultStyles.textBaseline,e.lineHeight=14,e}return t.prototype._splitText=function(){this.lines=typeof this.text=="string"?this.text.split(/\r?\n/g):[]},Object.defineProperty(t.prototype,"font",{get:function(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=getFont$2(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return HdpiCanvas$1.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=HdpiCanvas$1.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox$1(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=HdpiCanvas$1.getTextSize(this.text,this.font),r=this,n=r.x,o=r.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":o-=e.height*.7;break;case"middle":o-=e.height*.45;break;case"ideographic":o-=e.height;break;case"hanging":o-=e.height*.2;break;case"bottom":o-=e.height;break}return new BBox$1(n,o,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return o?o.containsPoint(n.x,n.y):!1},t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty===RedrawType.NONE&&!n){o&&(o.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.scene){o&&(o.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(r);var a=this,s=a.fill,l=a.stroke,u=a.strokeWidth;r.font=this.font,r.textAlign=this.textAlign,r.textBaseline=this.textBaseline;var c=this.scene.canvas.pixelRatio||1,f=r.globalAlpha;if(s){r.fillStyle=s,r.globalAlpha=f*this.opacity*this.fillOpacity;var d=this,h=d.fillShadow,p=d.text,g=d.x,v=d.y;h&&h.enabled&&(r.shadowColor=h.color,r.shadowOffsetX=h.xOffset*c,r.shadowOffsetY=h.yOffset*c,r.shadowBlur=h.blur*c),r.fillText(p,g,v)}if(l&&u){r.strokeStyle=l,r.lineWidth=u,r.globalAlpha=f*this.opacity*this.strokeOpacity;var m=this,y=m.lineDash,b=m.lineDashOffset,C=m.lineCap,x=m.lineJoin,p=m.text,g=m.x,v=m.y;y&&r.setLineDash(y),b&&(r.lineDashOffset=b),C&&(r.lineCap=C),x&&(r.lineJoin=x),r.strokeText(p,g,v)}i.prototype.render.call(this,e)},t.className="Text",t.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x",void 0),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y",void 0),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR,changeCb:function(e){return e._splitText()}})],t.prototype,"text",void 0),__decorate$1H([SceneFontChangeDetection()],t.prototype,"fontStyle",void 0),__decorate$1H([SceneFontChangeDetection()],t.prototype,"fontWeight",void 0),__decorate$1H([SceneFontChangeDetection()],t.prototype,"fontSize",void 0),__decorate$1H([SceneFontChangeDetection()],t.prototype,"fontFamily",void 0),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"textAlign",void 0),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"textBaseline",void 0),__decorate$1H([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"lineHeight",void 0),t}(Shape$1);function getFont$2(i,t,e,r){return[e||"",r||"",i+"px",t].join(" ").trim()}var Observable$1=function(){function i(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return i.prototype.addPropertyListener=function(t,e,r){r===void 0&&(r=this);var n=this.allPropertyListeners,o=n.get(t);if(o||(o=new Map,n.set(t,o)),!o.has(e)){var a=new Set;o.set(e,a)}var s=o.get(e);s&&s.add(r)},i.prototype.removePropertyListener=function(t,e,r){r===void 0&&(r=this);var n=this.allPropertyListeners,o=n.get(t);if(o)if(e){var a=o.get(e);a&&(a.delete(r),a.size||o.delete(e))}else o.clear()},i.prototype.notifyPropertyListeners=function(t,e,r){var n=this,o=this.allPropertyListeners,a=o.get(t);a&&a.forEach(function(s,l){s.forEach(function(u){return l.call(u,{type:t,source:n,value:r,oldValue:e})})})},i.prototype.addEventListener=function(t,e,r){r===void 0&&(r=this);var n=this.allEventListeners,o=n.get(t);if(o||(o=new Map,n.set(t,o)),!o.has(e)){var a=new Set;o.set(e,a)}var s=o.get(e);s&&s.add(r)},i.prototype.removeEventListener=function(t,e,r){r===void 0&&(r=this);var n=this.allEventListeners,o=n.get(t);if(o)if(e){var a=o.get(e);a&&(a.delete(r),a.size||o.delete(e))}else o.clear()},i.prototype.clearEventListeners=function(){this.allEventListeners=new Map},i.prototype.notifyEventListeners=function(t){var e=this,r=this.allEventListeners;t.forEach(function(n){var o=r.get(n);o&&o.forEach(function(a,s){a.forEach(function(l){return s.call(l,{type:n,source:e})})})})},i.prototype.fireEvent=function(t){var e=this.allEventListeners.get(t.type);if(e){var r=Object.assign(t,{source:this});e.forEach(function(n,o){n.forEach(function(a){return o.call(a,r)})})}},i.privateKeyPrefix="_",i}(),__read$K=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Color$1=function(){function i(t,e,r,n){n===void 0&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return i.validColorString=function(t){return t.indexOf("#")>=0?!!i.parseHex(t):t.indexOf("rgb")>=0?!!i.stringToRgba(t):!!i.nameToHex[t.toLowerCase()]},i.fromString=function(t){if(t.indexOf("#")>=0)return i.fromHexString(t);var e=i.nameToHex[t.toLowerCase()];if(e)return i.fromHexString(e);if(t.indexOf("rgb")>=0)return i.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},i.parseHex=function(t){var e;t=t.replace(/ /g,"").slice(1);var r;switch(t.length){case 6:case 8:r=[];for(var n=0;n<t.length;n+=2)r.push(parseInt(""+t[n]+t[n+1],16));break;case 3:case 4:r=t.split("").map(function(o){return parseInt(o,16)}).map(function(o){return o+o*16});break}if(((e=r)===null||e===void 0?void 0:e.length)>=3&&r.every(function(o){return o>=0}))return r.length===3&&r.push(255),r},i.fromHexString=function(t){var e=i.parseHex(t);if(e){var r=__read$K(e,4),n=r[0],o=r[1],a=r[2],s=r[3];return new i(n/255,o/255,a/255,s/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},i.stringToRgba=function(t){for(var e=__read$K([NaN,NaN],2),r=e[0],n=e[1],o=0;o<t.length;o++){var a=t[o];if(!r&&a==="(")r=o;else if(a===")"){n=o;break}}var s=r&&n&&t.substring(r+1,n);if(s){for(var l=s.split(","),u=[],o=0;o<l.length;o++){var c=l[o],f=parseFloat(c);if(isNaN(f))return;c.indexOf("%")>=0?(f=Math.max(0,Math.min(100,f)),f/=100):o===3?f=Math.max(0,Math.min(1,f)):(f=Math.max(0,Math.min(255,f)),f/=255),u.push(f)}return u}},i.fromRgbaString=function(t){var e=i.stringToRgba(t);if(e){if(e.length===3)return new i(e[0],e[1],e[2]);if(e.length===4)return new i(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},i.fromArray=function(t){if(t.length===4)return new i(t[0],t[1],t[2],t[3]);if(t.length===3)return new i(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},i.fromHSB=function(t,e,r,n){n===void 0&&(n=1);var o=i.HSBtoRGB(t,e,r);return new i(o[0],o[1],o[2],n)},i.padHex=function(t){return t.length===1?"0"+t:t},i.prototype.toHexString=function(){var t="#"+i.padHex(Math.round(this.r*255).toString(16))+i.padHex(Math.round(this.g*255).toString(16))+i.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=i.padHex(Math.round(this.a*255).toString(16))),t},i.prototype.toRgbaString=function(t){t===void 0&&(t=3);var e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],r=Math.pow(10,t);return this.a!==1?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},i.prototype.toString=function(){return this.a===1?this.toHexString():this.toRgbaString()},i.prototype.toHSB=function(){return i.RGBtoHSB(this.r,this.g,this.b)},i.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),o=Math.max(t,e,r),a=o!==0?(o-n)/o:0,s=NaN;if(n!==o){var l=o-n,u=(o-t)/l,c=(o-e)/l,f=(o-r)/l;t===o?s=f-c:e===o?s=2+u-f:s=4+c-u,s/=6,s<0&&(s=s+1)}return[s*360,a,o]},i.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,o=0,a=0;if(e===0)n=o=a=r;else{var s=(t-Math.floor(t))*6,l=s-Math.floor(s),u=r*(1-e),c=r*(1-e*l),f=r*(1-e*(1-l));switch(s>>0){case 0:n=r,o=f,a=u;break;case 1:n=c,o=r,a=u;break;case 2:n=u,o=r,a=f;break;case 3:n=u,o=c,a=r;break;case 4:n=f,o=u,a=r;break;case 5:n=r,o=u,a=c;break}}return[n,o,a]},i.prototype.derive=function(t,e,r,n){var o=i.RGBtoHSB(this.r,this.g,this.b),a=o[2];a==0&&r>1&&(a=.05);var s=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var u=Math.max(Math.min(this.a*n,1),0),c=i.HSBtoRGB(s,l,a);return c.push(u),i.fromArray(c)},i.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},i.prototype.darker=function(){return this.derive(0,1,.7,1)},i.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),i}();function Validate(i){return function(t,e){var r,n="__"+e,o,a=Object.getOwnPropertyDescriptor(t,e);o=(r=a)===null||r===void 0?void 0:r.set;var s=function(u){var c,f,d,h;if(i(u,{target:this})){o?o.call(this,u):this[n]=u;return}var p=e.replace(/^_*/,""),g=(f=(c=t.constructor)===null||c===void 0?void 0:c.className,f??((d=t.constructor)===null||d===void 0?void 0:d.name));((h=g)===null||h===void 0?void 0:h.length)<3&&(g=null),i.message?console.warn("AG Charts - Property ["+p+"] "+(g?"of ["+g+"] ":"")+"cannot be set to ["+JSON.stringify(u)+"]; "+i.message+", ignoring."):console.warn("AG Charts - Property ["+p+"] "+(g?"of ["+g+"] ":"")+"cannot be set to ["+JSON.stringify(u)+"], ignoring.")},l=function(){return this[n]};Object.defineProperty(t,e,{set:s,get:l,enumerable:!0,configurable:!1})}}function predicateWithMessage(i,t){return i.message=t,i}var OPTIONAL=function(i,t,e){return i===void 0||e(i,t)},ARRAY=function(i,t){return predicateWithMessage(function(e,r){return Array.isArray(e)&&(i?e.length===i:!0)&&(t?e.every(function(n){return t(n,r)}):!0)},"expecting an Array")},OPT_ARRAY=function(i){return predicateWithMessage(function(t,e){return OPTIONAL(t,e,ARRAY(i))},"expecting an optional Array")},AND=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return predicateWithMessage(function(e,r){return i.every(function(n){return n(e,r)})},i.map(function(e){return e.message}).filter(function(e){return e!=null}).join(" AND "))},OR=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return predicateWithMessage(function(e,r){return i.some(function(n){return n(e,r)})},i.map(function(e){return e.message}).filter(function(e){return e!=null}).join(" OR "))},isComparable=function(i){return i!=null&&!isNaN(i)},LESS_THAN=function(i){return predicateWithMessage(function(t,e){return!isComparable(t)||!isComparable(e.target[i])||t<e.target[i]},"expected to be less than "+i)},GREATER_THAN=function(i){return predicateWithMessage(function(t,e){return!isComparable(t)||!isComparable(e.target[i])||t>e.target[i]},"expected to be greater than "+i)},FUNCTION=predicateWithMessage(function(i){return typeof i=="function"},"expecting a Function"),OPT_FUNCTION=predicateWithMessage(function(i,t){return OPTIONAL(i,t,FUNCTION)},"expecting an optional Function"),BOOLEAN=predicateWithMessage(function(i){return i===!0||i===!1},"expecting a Boolean"),OPT_BOOLEAN=predicateWithMessage(function(i,t){return OPTIONAL(i,t,BOOLEAN)},"expecting an optional Boolean"),STRING=predicateWithMessage(function(i){return typeof i=="string"},"expecting a String"),OPT_STRING=predicateWithMessage(function(i,t){return OPTIONAL(i,t,STRING)},"expecting an optional String"),DATE=predicateWithMessage(function(i){return i instanceof Date&&!isNaN(+i)},"expecting a Date object"),OPT_DATE=predicateWithMessage(function(i,t){return OPTIONAL(i,t,DATE)},"expecting an optional Date");predicateWithMessage(ARRAY(void 0,DATE),"expecting an Array of Date objects");var DATETIME_MS=NUMBER(0),OPT_DATETIME_MS=predicateWithMessage(function(i,t){return OPTIONAL(i,t,DATETIME_MS)},"expecting an optional number"),OPT_DATE_OR_DATETIME_MS=OR(OPT_DATE,OPT_DATETIME_MS),colorMessage="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",COLOR_STRING=predicateWithMessage(function(i){return typeof i!="string"?!1:Color$1.validColorString(i)},"expecting a color String. "+colorMessage),OPT_COLOR_STRING=predicateWithMessage(function(i,t){return OPTIONAL(i,t,COLOR_STRING)},"expecting an optional color String. "+colorMessage),COLOR_STRING_ARRAY=predicateWithMessage(ARRAY(void 0,COLOR_STRING),"expecting an Array of color strings. "+colorMessage);predicateWithMessage(function(i,t){return OPTIONAL(i,t,COLOR_STRING_ARRAY)},"expecting an optional Array of color strings. "+colorMessage);function NUMBER(i,t){var e="expecting a finite Number"+((i!==void 0?", more than or equal to "+i:"")+(t!==void 0?", less than or equal to "+t:""));return predicateWithMessage(function(r){return typeof r=="number"&&Number.isFinite(r)&&(i!==void 0?r>=i:!0)&&(t!==void 0?r<=t:!0)},e)}function OPT_NUMBER(i,t){var e="expecting an optional finite Number"+((i!==void 0?", more than or equal to "+i:"")+(t!==void 0?", less than or equal to "+t:""));return predicateWithMessage(function(r,n){return OPTIONAL(r,n,NUMBER(i,t))},e)}var NUMBER_ARRAY=predicateWithMessage(ARRAY(void 0,NUMBER()),"expecting an Array of numbers"),OPT_NUMBER_ARRAY=predicateWithMessage(function(i,t){return OPTIONAL(i,t,NUMBER_ARRAY)},"expecting an optional Array of numbers"),STRING_ARRAY=predicateWithMessage(ARRAY(void 0,STRING),"expecting an Array of strings");predicateWithMessage(function(i,t){return OPTIONAL(i,t,STRING_ARRAY)},"expecting an optional Array of strings");var BOOLEAN_ARRAY=predicateWithMessage(ARRAY(void 0,BOOLEAN),"expecting an Array of boolean values");predicateWithMessage(function(i,t){return OPTIONAL(i,t,BOOLEAN_ARRAY)},"expecting an optional Array of boolean values");var FONT_WEIGHTS=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],FONT_STYLE=predicateWithMessage(function(i){return i==="normal"||i==="italic"||i==="oblique"},"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),OPT_FONT_STYLE=predicateWithMessage(function(i,t){return OPTIONAL(i,t,FONT_STYLE)},"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),FONT_WEIGHT=predicateWithMessage(function(i){return FONT_WEIGHTS.includes(i)},"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),OPT_FONT_WEIGHT=predicateWithMessage(function(i,t){return OPTIONAL(i,t,FONT_WEIGHT)},"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),LINE_DASH=predicateWithMessage(ARRAY(void 0,NUMBER(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),OPT_LINE_DASH=predicateWithMessage(function(i,t){return OPTIONAL(i,t,LINE_DASH)},"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),LINE_CAPS=["butt","round","square"],LINE_CAP=predicateWithMessage(function(i){return LINE_CAPS.includes(i)},"expecting a line cap keyword such as 'butt', 'round' or 'square'");predicateWithMessage(function(i,t){return OPTIONAL(i,t,LINE_CAP)},"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var LINE_JOINS=["round","bevel","miter"],LINE_JOIN=predicateWithMessage(function(i){return LINE_JOINS.includes(i)},"expecting a line join keyword such as 'round', 'bevel' or 'miter'");predicateWithMessage(function(i,t){return OPTIONAL(i,t,LINE_JOIN)},"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var POSITIONS=["top","right","bottom","left"],POSITION=predicateWithMessage(function(i){return POSITIONS.includes(i)},"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),ValidateAndChangeDetection=function(i){var t=i.sceneChangeDetectionOpts,e=i.validatePredicate,r=SceneChangeDetection(t),n=Validate(e);return function(o,a){r(o,a),n(o,a)}},__extends$2M=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1G=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Caption=function(i){__extends$2M(t,i);function t(){var e=i.call(this)||this;e.node=new Text$1,e.enabled=!1,e._text="",e._fontSize=10,e._fontFamily="sans-serif";var r=e.node;return r.textAlign="center",r.textBaseline="top",r.pointerEvents=PointerEvents$1.None,e}return Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this.node.text=this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle=e,this.node.fontStyle=this._fontStyle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight=e,this.node.fontWeight=this._fontWeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize=e,this.node.fontSize=this._fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily=e,this.node.fontFamily=this._fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.node.fill=this._color},enumerable:!0,configurable:!0}),t.PADDING=10,__decorate$1G([Validate(BOOLEAN)],t.prototype,"enabled",void 0),__decorate$1G([Validate(STRING)],t.prototype,"_text",void 0),__decorate$1G([Validate(OPT_FONT_STYLE)],t.prototype,"_fontStyle",void 0),__decorate$1G([Validate(OPT_FONT_WEIGHT)],t.prototype,"_fontWeight",void 0),__decorate$1G([Validate(NUMBER(0))],t.prototype,"_fontSize",void 0),__decorate$1G([Validate(STRING)],t.prototype,"_fontFamily",void 0),__decorate$1G([Validate(OPT_COLOR_STRING)],t.prototype,"_color",void 0),t}(Observable$1),constant$3=function(i){return function(){return i}};function interpolateNumber$1(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function date$1(i,t){var e=new Date,r=+i,n=+t;return function(o){return e.setTime(r*(1-o)+n*o),e}}function array$1(i,t){var e=t?t.length:0,r=i?Math.min(e,i.length):0,n=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)n[a]=interpolateValue$1(i[a],t[a]);for(;a<e;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=n[a](s);return o}}function object$1(i,t){var e={},r={},n;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in i?e[n]=interpolateValue$1(i[n],t[n]):r[n]=t[n];return function(o){for(n in e)r[n]=e[n](o);return r}}function color$1(i,t){if(typeof i=="string")try{i=Color$1.fromString(i)}catch{i=Color$1.fromArray([0,0,0])}if(typeof t=="string")try{t=Color$1.fromString(t)}catch{t=Color$1.fromArray([0,0,0])}var e=interpolateNumber$1(i.r,t.r),r=interpolateNumber$1(i.g,t.g),n=interpolateNumber$1(i.b,t.b),o=interpolateNumber$1(i.a,t.a);return function(a){return Color$1.fromArray([e(a),r(a),n(a),o(a)]).toRgbaString()}}function interpolateValue$1(i,t){var e=typeof t,r;if(t==null||e==="boolean")return constant$3(t);if(e==="number")return interpolateNumber$1(i,t);if(e==="string")try{return r=Color$1.fromString(t),t=r,color$1(i,t)}catch{}return t instanceof Color$1?color$1(i,t):t instanceof Date?date$1(i,t):Array.isArray(t)?array$1(i,t):typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object$1(i,t):interpolateNumber$1(i,t)}function ascending$1(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function ascendingStringNumberUndefined(i,t){var e=0;return typeof i=="number"&&typeof t=="number"?e=i-t:typeof i=="string"&&typeof t=="string"?e=i.localeCompare(t):i==null&&t==null||(i==null?e=-1:t==null?e=1:e=String(i).localeCompare(String(t))),e}function compoundAscending(i,t,e){for(var r in i){var n=e(i[r],t[r]);if(n!==0)return n}return 0}function bisectRight(i,t,e,r,n){for(r===void 0&&(r=0),n===void 0&&(n=i.length);r<n;){var o=r+n>>>1;e(i[o],t)>0?n=o:r=o+1}return r}function complexBisectRight$1(i,t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=i.length);for(var o=ascendingComparator$1(e);r<n;){var a=r+n>>>1;o(i[a],t)<0?r=a+1:n=a}return r}function ascendingComparator$1(i){return function(t,e){return ascending$1(i(t),e)}}var __read$J=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},constant$2=function(i){return function(){return i}},identity$6=function(i){return i};function clamper$1(i){var t,e=i[0],r=i[i.length-1];return e>r&&(t=__read$J([r,e],2),e=t[0],r=t[1]),function(n){return Math.max(e,Math.min(r,n))}}function filter(i){var t,e=i[0],r=i[i.length-1];return e>r&&(t=__read$J([r,e],2),e=t[0],r=t[1]),function(n){return n>=e&&n<=r?n:NaN}}var ContinuousScale$1=function(){function i(){this.unknown=void 0,this.clamper=clamper$1,this._clamp=identity$6,this._domain=[0,1],this._range=[0,1],this.transform=identity$6,this.untransform=identity$6,this._interpolate=interpolateValue$1,this.rescale()}return Object.defineProperty(i.prototype,"clamp",{get:function(){return this._clamp!==identity$6},set:function(t){this._clamp=t?this.clamper(this.domain):identity$6},enumerable:!0,configurable:!0}),i.prototype.setDomain=function(t){this._domain=t.map(function(e){return+e}),this._clamp!==identity$6&&(this._clamp=this.clamper(this.domain)),this.rescale()},i.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(i.prototype,"domain",{get:function(){return this.getDomain()},set:function(t){this.setDomain(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return this._range.slice()},set:function(t){this._range=t.slice(),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interpolate",{get:function(){return this._interpolate},set:function(t){this._interpolate=t,this.rescale()},enumerable:!0,configurable:!0}),i.prototype.rescale=function(){Math.min(this.domain.length,this.range.length)>2?this.piecewise=this.polymap:this.piecewise=this.bimap,this.output=void 0,this.input=void 0},i.prototype.normalize=function(t,e){return t=+t,e-=t,e?function(r){return(r-t)/e}:constant$2(isNaN(e)?NaN:.5)},i.prototype.bimap=function(t,e,r){var n=t[0],o=t[1],a=e[0],s=e[1],l,u;return o<n?(l=this.normalize(o,n),u=r(s,a)):(l=this.normalize(n,o),u=r(a,s)),function(c){return u(l(c))}},i.prototype.polymap=function(t,e,r){var n=this,o=Math.min(t.length,e.length)-1;t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());var a=Array.from({length:o},function(l,u){return n.normalize(t[u],t[u+1])}),s=Array.from({length:o},function(l,u){return r(e[u],e[u+1])});return function(l){var u=bisectRight(t,l,ascending$1,1,o)-1;return s[u](a[u](l))}},i.prototype.convert=function(t,e){if(t=+t,isNaN(t))return this.unknown;this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate));var r=e?e(this.domain):this._clamp;return this.output(this.transform(r(t)))},i.prototype.invert=function(t){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),interpolateNumber$1)),this._clamp(this.untransform(this.input(t)))},i}(),__extends$2L=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function ticks$1(i,t,e){var r=tickStep$1(i,t,e);return i=Math.ceil(i/r)*r,t=Math.floor(t/r)*r+r/2,range$1(i,t,r)}var e10$1=Math.sqrt(50),e5$1=Math.sqrt(10),e2$1=Math.sqrt(2);function tickStep$1(i,t,e){var r=Math.abs(t-i)/Math.max(0,e),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/n;return o>=e10$1?n*=10:o>=e5$1?n*=5:o>=e2$1&&(n*=2),t<i?-n:n}function tickIncrement$1(i,t,e){var r=(t-i)/Math.max(0,e),n=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,n);return n>=0?(o>=e10$1?10:o>=e5$1?5:o>=e2$1?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(o>=e10$1?10:o>=e5$1?5:o>=e2$1?2:1)}var NumericTicks$1=function(i){__extends$2L(t,i);function t(e,r){var n=i.call(this)||this;if(r)for(var o=0,a=r.length;o<a;o++)n[o]=r[o];return n.fractionDigits=e,n}return t}(Array);function range$1(i,t,e){e===void 0&&(e=1);for(var r=Math.abs(e),n=r>0&&r<1?Math.abs(Math.floor(Math.log(r)/Math.LN10)):0,o=Math.pow(10,n),a=Math.max(0,Math.ceil((t-i)/e))||0,s=new NumericTicks$1(n),l=0;l<a;l++){var u=i+e*l;s[l]=Math.round(u*o)/o}return s}function formatDefault$1(i,t){for(var e=i.toPrecision(t),r=-1,n=0,o=!1,a=e.length,s=1;!o&&s<a;++s)switch(e[s]){case".":r=n=s;break;case"0":r===0&&(r=s),n=s;break;case"e":o=!0;break;default:r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(n+1):e}var formatTypes$1={"":formatDefault$1,"%":function(i,t){return(i*100).toFixed(t)},b:function(i){return Math.round(i).toString(2)},c:function(i){return String(i)},d:formatDecimal$1,e:function(i,t){return i.toExponential(t)},f:function(i,t){return i.toFixed(t)},g:function(i,t){return i.toPrecision(t)},o:function(i){return Math.round(i).toString(8)},p:function(i,t){return formatRounded$1(i*100,t)},r:formatRounded$1,s:formatPrefixAuto$1,X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}},prefixes$1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],FormatSpecifier$1=function(){function i(t){t instanceof i?(this.fill=t.fill,this.align=t.align,this.sign=t.sign,this.symbol=t.symbol,this.zero=t.zero,this.width=t.width,this.comma=t.comma,this.precision=t.precision,this.trim=t.trim,this.type=t.type,this.string=t.string):(this.fill=t.fill===void 0?" ":String(t.fill),this.align=t.align===void 0?">":String(t.align),this.sign=t.sign===void 0?"-":String(t.sign),this.symbol=t.symbol===void 0?"":String(t.symbol),this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":String(t.type),this.string=t.string)}return i}(),formatRegEx$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,interpolateRegEx$1=/(#\{(.*?)\})/g;function makeFormatSpecifier$1(i){if(i instanceof FormatSpecifier$1)return new FormatSpecifier$1(i);var t=!1,e=i.replace(interpolateRegEx$1,function(){return t||(i=arguments[2],t=!0),"#{}"}),r=formatRegEx$1.exec(i);if(!r)throw new Error("Invalid format: "+i);return new FormatSpecifier$1({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10],string:t?e:void 0})}function tickFormat$1(i,t,e,r){var n=tickStep$1(i,t,e),o=makeFormatSpecifier$1(r??",f"),a;switch(o.type){case"s":{var s=Math.max(Math.abs(i),Math.abs(t));return o.precision==null&&(a=precisionPrefix$1(n,s),isNaN(a)||(o.precision=a)),formatPrefix$1(o,s)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&(a=precisionRound$1(n,Math.max(Math.abs(i),Math.abs(t))),isNaN(a)||(o.precision=a-+(o.type==="e")));break}case"f":case"%":{o.precision==null&&(a=precisionFixed$1(n),isNaN(a)||(o.precision=a-+(o.type==="%")*2));break}}return format$1(o)}var prefixExponent$1;function formatPrefixAuto$1(i,t){t===void 0&&(t=0);var e=formatDecimalParts$1(i,t);if(!e)return String(i);var r=e[0],n=e[1];prefixExponent$1=Math.max(-8,Math.min(8,Math.floor(n/3)))*3;var o=n-prefixExponent$1+1,a=r.length;if(o===a)return r;if(o>a)return r+new Array(o-a+1).join("0");if(o>0)return r.slice(0,o)+"."+r.slice(o);var s=formatDecimalParts$1(i,Math.max(0,t+o-1));return"0."+new Array(1-o).join("0")+s[0]}function formatDecimal$1(i){return i=Math.round(i),Math.abs(i)>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function formatGroup$1(i,t){return function(e,r){for(var n=[],o=e.length,a=0,s=i[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o-=s,n.push(e.substring(o,o+s)),!((l+=s+1)>r));)a=(a+1)%i.length,s=i[a];return n.reverse(),n.join(t)}}function formatNumerals$1(i){return function(t){return t.replace(/\d/g,function(e){return i[+e]})}}function formatTrim$1(i){for(var t=-1,e=0,r=!1,n=i.length,o=1;!r&&o<n;++o)switch(i[o]){case".":t=e=o;break;case"0":t===0&&(t=o),e=o;break;default:if(!+i[o]){r=!0;break}t>0&&(t=0);break}return t>0?i.slice(0,t)+i.slice(e+1):i}function formatRounded$1(i,t){var e=formatDecimalParts$1(i,t);if(!e)return String(i);var r=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}function formatDecimalParts$1(i,t){var e=t?i.toExponential(t-1):i.toExponential(),r=e.indexOf("e");if(!(r<0)){var n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}}function identity$5(i){return i}var formatDefaultLocale$1,format$1,formatPrefix$1;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(i){formatDefaultLocale$1=formatLocale$3(i),format$1=formatDefaultLocale$1.format,formatPrefix$1=formatDefaultLocale$1.formatPrefix}function exponent$1(i){var t=formatDecimalParts$1(Math.abs(i));return t?t[1]:NaN}function precisionFixed$1(i){return Math.max(0,-exponent$1(Math.abs(i)))}function precisionPrefix$1(i,t){var e=Math.floor(exponent$1(t)/3);return e=Math.min(8,e),e=Math.max(-8,e),Math.max(0,e*3-exponent$1(Math.abs(i)))}function precisionRound$1(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,exponent$1(t)-exponent$1(i))+1}function formatLocale$3(i){var t=i.grouping===void 0||i.thousands===void 0?identity$5:formatGroup$1(i.grouping.map(Number),String(i.thousands)),e=i.currency===void 0?"":String(i.currency[0]),r=i.currency===void 0?"":String(i.currency[1]),n=i.decimal===void 0?".":String(i.decimal),o=i.numerals===void 0?identity$5:formatNumerals$1(i.numerals.map(String)),a=i.percent===void 0?"%":String(i.percent),s=i.minus===void 0?"":String(i.minus),l=i.nan===void 0?"NaN":String(i.nan);function u(f){var d=makeFormatSpecifier$1(f),h=d.fill,p=d.align,g=d.sign,v=d.symbol,m=d.zero,y=d.width,b=d.comma,C=d.precision,x=d.trim,w=d.type;w==="n"?(b=!0,w="g"):formatTypes$1[w]||(C===void 0&&(C=12),x=!0,w="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var P=v==="$"?e:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=v==="$"?r:/[%p]/.test(w)?a:"",O=formatTypes$1[w],E=/[defgprs%]/.test(w);C===void 0?C=6:/[gprs]/.test(w)?C=Math.max(1,Math.min(21,C)):C=Math.max(0,Math.min(20,C));function D(R){var F=P,I=S,$;if(w==="c")I=O(+R)+I,$="";else{var B=+R,V=R<0||1/B<0;$=isNaN(B)?l:O(Math.abs(B),C),x&&($=formatTrim$1($)),V&&+$==0&&g!=="+"&&(V=!1);var G=V?g==="("?g:s:g==="-"||g==="("?"":g,U=V&&g==="("?")":"";if(F=G+F,I=(w==="s"?prefixes$1[8+prefixExponent$1/3]:"")+I+U,E)for(var H=0,N=$.length;H<N;H++){var j=$.charCodeAt(H);if(48>j||j>57){I=(j===46?n+$.slice(H+1):$.slice(H))+I,$=$.slice(0,H);break}}}b&&!m&&($=t($,1/0));var W=F.length+$.length+I.length,z=W<y?new Array(y-W+1).join(h):"";switch(b&&m&&($=t(z+$,z.length?y-I.length:1/0),z=""),p){case"<":$=F+$+I+z;break;case"=":$=F+z+$+I;break;case"^":$=z.slice(0,W=z.length>>1)+F+$+I+z.slice(W);break;default:$=z+F+$+I;break}var K=d.string;return K?K.replace(interpolateRegEx$1,function(){return o($)}):o($)}return D}function c(f,d){var h=makeFormatSpecifier$1(f);h.type="f";var p=u(h),g=Math.max(-8,Math.min(8,Math.floor(exponent$1(d)/3)))*3,v=Math.pow(10,-g),m=prefixes$1[8+g/3];return function(y){return p(v*+y)+m}}return{format:u,formatPrefix:c}}var __extends$2K=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LinearScale$1=function(i){__extends$2K(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="linear",e}return t.prototype.ticks=function(e,r){e===void 0&&(e=10);var n=this._domain;return e=Math.max(0,e-(r??0)),ticks$1(n[0],n[n.length-1],e)},t.prototype.nice=function(e){e===void 0&&(e=10);var r=this.domain,n=0,o=r.length-1,a=r[n],s=r[o],l;s<a&&(l=a,a=s,s=l,l=n,n=o,o=l),l=tickIncrement$1(a,s,e),l>0?(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,l=tickIncrement$1(a,s,e)):l<0&&(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,l=tickIncrement$1(a,s,e)),l>0?(r[n]=Math.floor(a/l)*l,r[o]=Math.ceil(s/l)*l,this.domain=r):l<0&&(r[n]=Math.ceil(a*l)/l,r[o]=Math.floor(s*l)/l,this.domain=r)},t.prototype.tickFormat=function(e){var r=e.count,n=e.specifier,o=this.domain;return tickFormat$1(o[0],o[o.length-1],r??10,n)},t}(ContinuousScale$1),__values$v=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function find(i,t){for(var e=0;e<i.length;e++){var r=i[e];if(t(r,e,i))return r}}function identity$4(i){return i}function extent$1(i,t,e){for(var r=e||identity$4,n=i.length,o=-1,a,s,l;++o<n;)if(a=i[o],t(a))for(s=l=a;++o<n;)a=i[o],t(a)&&(s>a&&(s=a),l<a&&(l=a));return s===void 0||l===void 0?void 0:[r(s),r(l)]}function findMinMax(i){var t,e,r=void 0,n=void 0;try{for(var o=__values$v(i),a=o.next();!a.done;a=o.next()){var s=a.value;s<0?r=(r??0)+s:s>=0&&(n=(n??0)+s)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return{min:r,max:n}}function isNumber$1(i){return typeof i!="number"?!1:Number.isFinite(i)}function isNumberObject$1(i){return!!i&&i.hasOwnProperty("valueOf")&&isNumber$1(i.valueOf())}function isNumeric$1(i){return isNumber$1(i)||isNumberObject$1(i)}function isDate$1(i){return i instanceof Date&&!isNaN(+i)}function isString$1(i){return typeof i=="string"}function isStringObject$1(i){return!!i&&i.hasOwnProperty("toString")&&isString$1(i.toString())}function isDiscrete(i){return isString$1(i)||isStringObject$1(i)}function isContinuous$1(i){return isNumeric$1(i)||isDate$1(i)}function checkDatum(i,t){if(t&&isContinuous$1(i))return i;if(!t)return isDiscrete(i)?i:String(i)}var sign$1=Math.sign?Math.sign:function(i){return i=+i,i===0||isNaN(i)?i:i>0?1:-1};function linearRoot$1(i,t){var e=-t/i;return i!==0&&e>=0&&e<=1?[e]:[]}function quadraticRoots$1(i,t,e){if(i===0)return linearRoot$1(t,e);var r=t*t-4*i*e,n=[];if(r===0){var o=-t/(2*i);o>=0&&o<=1&&n.push(o)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*i),l=(-t+a)/(2*i);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}function cubicRoots$1(i,t,e,r){if(i===0)return quadraticRoots$1(t,e,r);var n=t/i,o=e/i,a=r/i,s=(3*o-n*n)/9,l=(9*n*o-27*a-2*n*n*n)/54,u=s*s*s+l*l,c=1/3,f=[];if(u>=0){var d=Math.sqrt(u),h=sign$1(l+d)*Math.pow(Math.abs(l+d),c),p=sign$1(l-d)*Math.pow(Math.abs(l-d),c),g=Math.abs(Math.sqrt(3)*(h-p)/2),v=-c*n+(h+p);if(v>=0&&v<=1&&f.push(v),g===0){var m=-c*n-(h+p)/2;m>=0&&m<=1&&f.push(m)}}else{var y=Math.acos(l/Math.sqrt(-s*s*s)),b=c*n,C=2*Math.sqrt(-s),x=C*Math.cos(c*y)-b,w=C*Math.cos(c*(y+2*Math.PI))-b,P=C*Math.cos(c*(y+4*Math.PI))-b;x>=0&&x<=1&&f.push(x),w>=0&&w<=1&&f.push(w),P>=0&&P<=1&&f.push(P)}return f}var __values$u=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function segmentIntersection$1(i,t,e,r,n,o,a,s){var l=(e-i)*(s-o)-(r-t)*(a-n);if(l===0)return null;var u=((a-n)*(t-o)-(i-n)*(s-o))/l,c=((e-i)*(t-o)-(r-t)*(i-n))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:i+u*(e-i),y:t+u*(r-t)}:null}function cubicSegmentIntersections$1(i,t,e,r,n,o,a,s,l,u,c,f){var d,h,p=[],g=u-f,v=c-l,m=l*(f-u)-u*(c-l),y=bezierCoefficients$1(i,e,n,a),b=bezierCoefficients$1(t,r,o,s),C=g*y[0]+v*b[0],x=g*y[1]+v*b[1],w=g*y[2]+v*b[2],P=g*y[3]+v*b[3]+m,S=cubicRoots$1(C,x,w,P);try{for(var O=__values$u(S),E=O.next();!E.done;E=O.next()){var D=E.value,R=D*D,F=D*R,I=y[0]*F+y[1]*R+y[2]*D+y[3],$=b[0]*F+b[1]*R+b[2]*D+b[3],B=void 0;l!==c?B=(I-l)/(c-l):B=($-u)/(f-u),B>=0&&B<=1&&p.push({x:I,y:$})}}catch(V){d={error:V}}finally{try{E&&!E.done&&(h=O.return)&&h.call(O)}finally{if(d)throw d.error}}return p}function bezierCoefficients$1(i,t,e,r){return[-i+3*t-3*e+r,3*i-6*t+3*e,-3*i+3*t,i]}var __values$t=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Path2D$1=function(){function i(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}return i.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(var t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(var t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1},i.prototype.draw=function(t){var e,r,n=this.commands,o=this.params,a=0;t.beginPath();try{for(var s=__values$t(n),l=s.next();!l.done;l=s.next()){var u=l.value;switch(u){case"M":t.moveTo(o[a++],o[a++]);break;case"L":t.lineTo(o[a++],o[a++]);break;case"C":t.bezierCurveTo(o[a++],o[a++],o[a++],o[a++],o[a++],o[a++]);break;case"Z":t.closePath();break}}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}n.length===0&&t.closePath()},i.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push("M"),this.params.push(t,e)},i.prototype.lineTo=function(t,e){this.xy?(this.commands.push("L"),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},i.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},i.prototype.arcTo=function(t,e,r,n,o,a,s){var l=this.xy;if(l){t<0&&(t=-t),e<0&&(e=-e);var u=l[0],c=l[1],f=(u-a)/2,d=(c-s)/2,h=Math.sin(r),p=Math.cos(r),g=p*f+h*d,v=-h*f+p*d,m=g/t,y=v/e,b=m*m+y*y,C=(u+a)/2,x=(c+s)/2,w=0,P=0;b>=1?(b=Math.sqrt(b),t*=b,e*=b):(b=Math.sqrt(1/b-1),n===o&&(b=-b),w=b*t*y,P=-b*e*m,C+=p*w-h*P,x+=h*w+p*P);var S=Math.atan2((v-P)/e,(g-w)/t),O=Math.atan2((-v-P)/e,(-g-w)/t)-S;this.cubicArc(C,x,t,e,r,S,S+O,1-o)}},i.cubicArc=function(t,e,r,n,o,a,s,l,u,c){if(c){var f=l;l=u,u=f}var d=e.length,h=.5522847498307935,p=Math.sin(l),g=Math.cos(l),v=Math.sin(s),m=Math.cos(s),y=Math.PI/2,b=m*g*o-v*p*a,C=v*g*o+m*p*a,x=-m*p*o-v*g*a,w=-v*p*o+m*g*a;for(u-=l,u<0&&(u+=Math.PI*2),t.push("M"),e.push(b+r,C+n);u>=y;){u-=y,t.push("C");var P=x+r;e.push(b+x*h+r,C+w*h+n,b*h+x+r,C*h+w+n,Math.abs(P)<1e-8?0:P,w+n);var f=b;b=x,x=-f,f=C,C=w,w=-f}if(u){var S=1.3333333333333333*Math.tan(u/4),O=Math.sin(u),E=Math.cos(u),D=E+S*O,R=O-S*E;t.push("C");var P=b*E+x*O+r;e.push(b+x*S+r,C+w*S+n,b*D+x*R+r,C*D+w*R+n,Math.abs(P)<1e-8?0:P,C*E+w*O+n)}if(c)for(var F=d,I=e.length-2;F<I;F+=2,I-=2){var f=e[F];e[F]=e[I],e[I]=f,f=e[F+1],e[F+1]=e[I+1],e[I+1]=f}},i.prototype.cubicArc=function(t,e,r,n,o,a,s,l){var u=this.commands,c=this.params,f=u.length;i.cubicArc(u,c,t,e,r,n,o,a,s,l);var d=c[c.length-2],h=c[c.length-1];this.xy?(u[f]="L",this.xy[0]=d,this.xy[1]=h):this.xy=[d,h]},i.prototype.deCasteljau=function(t,e){var r=t.length;if(r<2||r%2===1)throw new Error("Fewer than two points or not an even count.");if(r===2||e===0)return t.slice(0,2);if(e===1)return t.slice(-2);for(var n=[],o=r-2,a=0;a<o;a+=2)n.push((1-e)*t[a]+e*t[a+2],(1-e)*t[a+1]+e*t[a+3]);return this.deCasteljau(n,e)},i.prototype.approximateCurve=function(t,e){var r=this.deCasteljau(t,0);this.moveTo(r[0],r[1]);for(var n=1/e,o=n;o<=1;o+=n){var a=this.deCasteljau(t,o);this.lineTo(a[0],a[1])}},i.prototype.quadraticCurveTo=function(t,e,r,n){this.xy||this.moveTo(t,e),this.cubicCurveTo((this.xy[0]+2*t)/3,(this.xy[1]+2*e)/3,(2*t+r)/3,(2*e+n)/3,r,n)},i.prototype.cubicCurveTo=function(t,e,r,n,o,a){this.xy||this.moveTo(t,e),this.commands.push("C"),this.params.push(t,e,r,n,o,a),this.xy[0]=o,this.xy[1]=a},Object.defineProperty(i.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),i.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},i.prototype.clear=function(t){var e=(t===void 0?{trackChanges:!1}:t).trackChanges;e?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1},i.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,o=r.length,a=-1e4,s=-1e4,l=NaN,u=NaN,c=0,f=0,d=0,h=0,p=0;h<o;h++)switch(r[h]){case"M":isNaN(l)||segmentIntersection$1(l,u,c,f,a,s,t,e)&&d++,c=n[p++],l=c,f=n[p++],u=f;break;case"L":segmentIntersection$1(c,f,n[p++],n[p++],a,s,t,e)&&d++,c=n[p-2],f=n[p-1];break;case"C":d+=cubicSegmentIntersections$1(c,f,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],a,s,t,e).length,c=n[p-2],f=n[p-1];break;case"Z":isNaN(l)||segmentIntersection$1(l,u,c,f,a,s,t,e)&&d++;break}return d%2===1},i.prototype.toCubicPaths=function(){var t=[],e=this.params,r,n,o,a,s,l=0;return this.commands.forEach(function(u){switch(u){case"M":a=e[l++],s=e[l++],n=a,o=s,t.push([n,o]);break;case"L":var c=e[l++],f=e[l++];r.push((a+a+c)/3,(s+s+f)/3,(a+c+c)/3,(s+f+f)/3,c,f),a=c,s=f;break;case"C":r.push(e[l++],e[l++],e[l++],e[l++],e[l++],e[l++]),a=e[l-2],s=e[l-1];break;case"Z":r.push((a+a+n)/3,(s+s+o)/3,(a+n+n)/3,(s+o+o)/3,n,o),a=n,s=o;break}}),t},i.cubicPathToString=function(t){var e=t.length;if(!(e%2===0&&(e/2-1)/2>=1))throw new Error("Invalid path.");return"M"+t.slice(0,2).join(",")+"C"+t.slice(2).join(",")},i}(),__extends$2J=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$B=function(){return __assign$B=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$B.apply(this,arguments)},__decorate$1F=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__values$s=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$I=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$p=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$I(arguments[t]));return i},Group$1=function(i){__extends$2J(t,i);function t(e){var r,n,o=i.call(this)||this;o.opts=e,o.clipPath=new Path2D$1,o.opacity=1,o.lastBBox=void 0;var a=e||{},s=a.zIndex,l=a.zIndexSubOrder;return o.isContainerNode=!0,s!==void 0&&(o.zIndex=s),l!==void 0&&(o.zIndexSubOrder=l),!((r=o.opts)===null||r===void 0)&&r.optimiseDirtyTracking&&(o.visibleChildren={},o.dirtyChildren={}),o.name=(n=o.opts)===null||n===void 0?void 0:n.name,o}return t.prototype.opacityChanged=function(){this.layer&&(this.layer.opacity=this.opacity)},t.prototype.zIndexChanged=function(){var e;this.layer&&((e=this._scene)===null||e===void 0||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))},t.prototype.isLayer=function(){return this.layer!=null},t.prototype.append=function(e){var r,n;if(i.prototype.append.call(this,e),this.dirtyChildren){e=e instanceof Array?e:[e];try{for(var o=__values$s(e),a=o.next();!a.done;a=o.next()){var s=a.value;this.dirtyChildren[s.id]=s}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}},t.prototype._setScene=function(e){var r;if(this._scene&&this.layer&&(this._scene.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(i.prototype._setScene.call(this,e),e&&(!((r=this.opts)===null||r===void 0)&&r.layer)){var n=this.opts||{},o=n.zIndex,a=n.zIndexSubOrder,s=n.name;this.layer=e.addLayer({zIndex:o,zIndexSubOrder:a,name:s})}},t.prototype.visibilityChanged=function(){this.layer&&(this.layer.enabled=this.visible)},t.prototype.removeChild=function(e){return i.prototype.removeChild.call(this,e),this.dirtyChildren&&this.visibleChildren&&(delete this.dirtyChildren[e.id],delete this.visibleChildren[e.id]),e},t.prototype.markDirty=function(e,r){r===void 0&&(r=RedrawType.TRIVIAL);var n=r<=RedrawType.MINOR?RedrawType.TRIVIAL:r;i.prototype.markDirty.call(this,e,r,n),e!==this&&this.dirtyChildren&&(this.dirtyChildren[e.id]=e)},t.prototype.markClean=function(e){var r,n;this.syncChildVisibility();var o=this.dirtyChildren,a=o===void 0?{}:o;try{for(var s=__values$s(Object.keys(a)),l=s.next();!l.done;l=s.next()){var u=l.value;delete a[u]}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}i.prototype.markClean.call(this,e)},t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){var e=1/0,r=-1/0,n=1/0,o=-1/0;return this.computeTransformMatrix(),this.children.forEach(function(a){if(a.visible){var s=a.computeTransformedBBox();if(s){var l=s.x,u=s.y;l<e&&(e=l),u<n&&(n=u),l+s.width>r&&(r=l+s.width),u+s.height>o&&(o=u+s.height)}}}),new BBox$1(e,n,r-e,o-n)},t.prototype.computeTransformedBBox=function(){return this.computeBBox()},t.prototype.render=function(e){var r;if(this.layer&&(!((r=this.opts)===null||r===void 0)&&r.optimiseDirtyTracking)){this.optimisedRender(e);return}this.basicRender(e)},t.prototype.basicRender=function(e){var r,n,o=this.opts,a=(o===void 0?{}:o).name,s=a===void 0?void 0:a,l=this._debug,u=(l===void 0?{}:l).consoleLog,c=u===void 0?!1:u,f=this,d=f.dirty,h=f.dirtyZIndex,p=f.clipPath,g=f.layer,v=f.children,m=e.ctx,y=e.forceRender,b=e.clipBBox,C=e.resized,x=e.stats,w=d>=RedrawType.MINOR||h||C,P=w||v.some(function(N){return N.dirty>=RedrawType.TRIVIAL});if(s&&c&&console.log({name:s,group:this,isDirty:w,isChildDirty:P,renderCtx:e,forceRender:y}),g){y=!1;var S=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(S))&&(y=!0,this.lastBBox=S)}if(!w&&!P&&!y){if(s&&c&&x){var O=this.nodeCount;console.log({name:s,result:"skipping",renderCtx:e,counts:O,group:this})}g&&x&&(x.layersSkipped++,x.nodesSkipped+=this.nodeCount.count),i.prototype.markClean.call(this,{recursive:!1});return}var E=this.visible;if(g){if(m=g.context,m.save(),m.setTransform(e.ctx.getTransform()),y=!0,g.clear(),b){var D=b.width,R=b.height,F=b.x,I=b.y;c&&console.log({name:s,clipBBox:b,ctxTransform:m.getTransform(),renderCtx:e,group:this}),p.clear(),p.rect(F,I,D,R),p.draw(m),m.clip()}}else m.globalAlpha*=this.opacity;this.computeTransformMatrix(),this.matrix.toContext(m),b=b?this.matrix.inverse().transformBBox(b):void 0,h&&(this.sortChildren(),y=!0);var $=y!==e.forceRender||b!==e.clipBBox||m!==e.ctx,B=$?__assign$B(__assign$B({},e),{ctx:m,forceRender:y,clipBBox:b}):e,V=0;try{for(var G=__values$s(v),U=G.next();!U.done;U=G.next()){var H=U.value;if(!H.visible||!E){H.markClean(),x&&(V+=H.nodeCount.count);continue}if(!y&&H.dirty===RedrawType.NONE){x&&(V+=H.nodeCount.count);continue}m.save(),H.render(B),m.restore()}}catch(N){r={error:N}}finally{try{U&&!U.done&&(n=G.return)&&n.call(G)}finally{if(r)throw r.error}}if(x&&(x.nodesSkipped+=V),i.prototype.render.call(this,e),g&&(x&&x.layersRendered++,m.restore(),g.snapshot()),s&&c&&x){var O=this.nodeCount;console.log({name:s,result:"rendered",skipped:V,renderCtx:e,counts:O,group:this})}},t.prototype.optimisedRender=function(e){var r,n,o,a,s=this._debug,l=(s===void 0?{}:s).consoleLog,u=l===void 0?!1:l,c=this,f=c.name,d=c.dirty,h=c.dirtyZIndex,p=c.clipPath,g=c.layer,v=c.dirtyChildren,m=v===void 0?{}:v,y=c.visibleChildren,b=y===void 0?{}:y,C=c.visible,x=e.ctx,w=e.clipBBox,P=e.resized,S=e.stats;if(g){var O=d>=RedrawType.MINOR||h||P,E=Object.keys(m).length>0;if(f&&u&&console.log({name:f,group:this,isDirty:O,isChildDirty:E,renderCtx:e}),!O&&!E){if(f&&u&&S){var D=this.nodeCount;console.log({name:f,result:"skipping",renderCtx:e,counts:D,group:this})}S&&(S.layersSkipped++,S.nodesSkipped+=this.nodeCount.count),i.prototype.markClean.call(this,{recursive:!1});return}if(x=g.context,x.save(),x.setTransform(e.ctx.getTransform()),g.clear(),w){var R=w.width,F=w.height,I=w.x,$=w.y;u&&console.log({name:f,clipBBox:w,ctxTransform:x.getTransform(),renderCtx:e,group:this}),p.clear(),p.rect(I,$,R,F),p.draw(x),x.clip()}this.syncChildVisibility(),this.computeTransformMatrix(),this.matrix.toContext(x),w=w?this.matrix.inverse().transformBBox(w):void 0,h&&this.sortChildren();var B=e.forceRender!==!0||w!==e.clipBBox||x!==e.ctx,V=B?__assign$B(__assign$B({},e),{ctx:x,forceRender:!0,clipBBox:w}):e;u&&console.log({name:f,visibleChildren:b,dirtyChildren:m});var G=0;if(C)try{for(var U=__values$s(Object.values(b)),H=U.next();!H.done;H=U.next()){var N=H.value;x.save(),N.render(V),x.restore()}}catch(z){r={error:z}}finally{try{H&&!H.done&&(n=U.return)&&n.call(U)}finally{if(r)throw r.error}}this.markClean({recursive:!1});try{for(var j=__values$s(Object.values(m)),W=j.next();!W.done;W=j.next()){var N=W.value;N.markClean(),delete m[N.id]}}catch(z){o={error:z}}finally{try{W&&!W.done&&(a=j.return)&&a.call(j)}finally{if(o)throw o.error}}if(S&&(S.nodesSkipped+=G),S&&S.layersRendered++,x.restore(),g.snapshot(),f&&u&&S){var D=this.nodeCount;console.log({name:f,result:"rendered",skipped:G,renderCtx:e,counts:D,group:this})}}},t.prototype.syncChildVisibility=function(){var e,r,n=this,o=n.dirtyChildren,a=n.visibleChildren;if(!(!o||!a))try{for(var s=__values$s(Object.values(o)),l=s.next();!l.done;l=s.next()){var u=l.value;!u.visible&&a[u.id]?delete a[u.id]:u.visible&&!a[u.id]&&(a[u.id]=u)}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}},t.prototype.sortChildren=function(){this.dirtyZIndex=!1,this.children.sort(function(e,r){var n,o;return compoundAscending(__spread$p([e.zIndex],(n=e.zIndexSubOrder,n??[void 0,void 0]),[e.serialNumber]),__spread$p([r.zIndex],(o=r.zIndexSubOrder,o??[void 0,void 0]),[r.serialNumber]),ascendingStringNumberUndefined)})},t.className="Group",__decorate$1F([SceneChangeDetection({convertor:function(e){return Math.min(1,Math.max(0,e))},changeCb:function(e){return e.opacityChanged()}})],t.prototype,"opacity",void 0),t}(Node$1),__values$r=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},EnterNode$1=function(){function i(t,e){this.next=null,this.scene=t.scene,this.parent=t,this.datum=e}return i.prototype.appendChild=function(t){if(this.next===null)return this.parent.insertBefore(t,null);if(!Node$1.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(t,this.next)},i.prototype.insertBefore=function(t,e){return this.parent.insertBefore(t,e)},i}(),Selection$1=function(){function i(t,e){this.groups=t,this.parents=e}return i.select=function(t){return new i([[typeof t=="function"?t():t]],[void 0])},i.selectAll=function(t){return new i([t??[]],[void 0])},i.prototype.append=function(t){return this.select(function(e){return e.appendChild(new t)})},i.prototype.select=function(t){for(var e=this.groups,r=e.length,n=[],o=0;o<r;o++)for(var a=e[o],s=a.length,l=n[o]=new Array(s),u=0;u<s;u++){var c=a[u];if(c){var f=t(c,c.datum,u,a);f&&(f.datum=c.datum),l[u]=f}}return new i(n,this.parents)},i.prototype.selectByClass=function(t){return this.select(function(e){if(Node$1.isNode(e))for(var r=e.children,n=r.length,o=0;o<n;o++){var a=r[o];if(a instanceof t)return a}})},i.prototype.selectByTag=function(t){return this.select(function(e){if(Node$1.isNode(e))for(var r=e.children,n=r.length,o=0;o<n;o++){var a=r[o];if(a.tag===t)return a}})},i.prototype.selectAllByClass=function(t){return this.selectAll(function(e){var r=[];if(Node$1.isNode(e))for(var n=e.children,o=n.length,a=0;a<o;a++){var s=n[a];s instanceof t&&r.push(s)}return r})},i.prototype.selectAllByTag=function(t){return this.selectAll(function(e){var r=[];if(Node$1.isNode(e))for(var n=e.children,o=n.length,a=0;a<o;a++){var s=n[a];s.tag===t&&r.push(s)}return r})},i.prototype.selectNone=function(){return[]},i.prototype.selectAll=function(t){t||(t=this.selectNone);for(var e=[],r=[],n=this.groups,o=n.length,a=0;a<o;a++)for(var s=n[a],l=s.length,u=0;u<l;u++){var c=s[u];c&&(e.push(t(c,c.datum,u,s)),r.push(c))}return new i(e,r)},i.prototype.each=function(t){var e,r,n,o;try{for(var a=__values$r(this.groups),s=a.next();!s.done;s=a.next()){var l=s.value,u=0;try{for(var c=(n=void 0,__values$r(l)),f=c.next();!f.done;f=c.next()){var d=f.value;d&&t(d,d.datum,u,l),u++}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this},i.prototype.remove=function(){return this.each(function(t){if(Node$1.isNode(t)){var e=t.parent;e&&e.removeChild(t)}})},i.prototype.merge=function(t){for(var e=this.groups,r=t.groups,n=e.length,o=r.length,a=Math.min(n,o),s=new Array(n),l=0;l<a;l++)for(var u=e[l],c=r[l],f=u.length,d=s[l]=new Array(f),h=0;h<f;h++){var p=u[h]||c[h];d[h]=p||void 0}for(;l<n;l++)s[l]=e[l];return new i(s,this.parents)},i.prototype.node=function(){for(var t=this.groups,e=t.length,r=0;r<e;r++)for(var n=t[r],o=n.length,a=0;a<o;a++){var s=n[a];if(s)return s}return null},i.prototype.attr=function(t,e){return this.each(function(r){r[t]=e}),this},i.prototype.attrFn=function(t,e){return this.each(function(r,n,o,a){r[t]=e(r,n,o,a)}),this},i.prototype.call=function(t){return t(this),this},Object.defineProperty(i.prototype,"size",{get:function(){var t,e,r,n,o=0;try{for(var a=__values$r(this.groups),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(r=void 0,__values$r(l)),c=u.next();!c.done;c=u.next()){var f=c.value;f&&o++}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){var t,e,r,n,o=new Array(this.size),a=0;try{for(var s=__values$r(this.groups),l=s.next();!l.done;l=s.next()){var u=l.value;try{for(var c=(r=void 0,__values$r(u)),f=c.next();!f.done;f=c.next()){var d=f.value;d&&(o[a++]=d.datum)}}catch(h){r={error:h}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}}catch(h){t={error:h}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return o},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enter",{get:function(){return new i(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exit",{get:function(){return new i(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),i.prototype.setDatum=function(t){return this.each(function(e){e.datum=t})},Object.defineProperty(i.prototype,"datum",{get:function(){var t=this.node();return t?t.datum:null},enumerable:!0,configurable:!0}),i.prototype.setData=function(t,e){if(typeof t!="function"){var r=t;t=function(){return r}}for(var n=this.groups,o=this.parents,a=n.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;c++){var f=n[c],d=o[c];if(!d)throw new Error("Group #"+c+" has no parent: "+f);var h=f.length,p=t(d,d.datum,c,o),g=p.length,v=l[c]=new Array(g),m=s[c]=new Array(g),y=u[c]=new Array(h);e?this.bindKey(d,f,v,m,y,p,e):this.bindIndex(d,f,v,m,y,p);for(var b=0,C=0;b<g;b++){var x=v[b];if(x){b>=C&&(C=b+1);for(var w=m[C];!w&&C<g;)C++,w=m[C];x.next=w||null}}}var P=new i(s,o);return P.enterGroups=l,P.exitGroups=u,P},i.prototype.bindIndex=function(t,e,r,n,o,a){for(var s=e.length,l=a.length,u=0;u<l;u++){var c=e[u];c?(c.datum=a[u],n[u]=c):r[u]=new EnterNode$1(t,a[u])}for(;u<s;u++){var c=e[u];c&&(o[u]=c)}},i.prototype.bindKey=function(t,e,r,n,o,a,s){for(var l=e.length,u=a.length,c=new Array(l),f={},d=0;d<l;d++){var h=e[d];if(h){var p=c[d]=i.keyPrefix+s(h,h.datum,d,e);p in f?o[d]=h:f[p]=h}}for(var d=0;d<u;d++){var p=i.keyPrefix+s(t,a[d],d,a),h=f[p];h?(n[d]=h,h.datum=a[d],f[p]=void 0):r[d]=new EnterNode$1(t,a[d])}for(var d=0;d<l;d++){var h=e[d];h&&f[c[d]]===h&&(o[d]=h)}},i.keyPrefix="$",i}(),__extends$2I=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1E=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Line$1=function(i){__extends$2I(t,i);function t(){var e=i.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.restoreOwnStyles(),e}return t.prototype.computeBBox=function(){return new BBox$1(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,a=e.stats;if(this.dirty===RedrawType.NONE&&!o){a&&(a.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(n);var s=this.x1,l=this.y1,u=this.x2,c=this.y2;if(s===u){var f=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=f,u=f}else if(l===c){var d=Math.round(l)+Math.floor(this.strokeWidth)%2/2;l=d,c=d}n.beginPath(),n.moveTo(s,l),n.lineTo(u,c),this.fillStroke(n),(r=this.fillShadow)===null||r===void 0||r.markClean(),i.prototype.render.call(this,e)},t.className="Line",t.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{fill:void 0,strokeWidth:1}),__decorate$1E([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x1",void 0),__decorate$1E([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y1",void 0),__decorate$1E([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x2",void 0),__decorate$1E([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y2",void 0),t}(Shape$1),__extends$2H=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1D=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function ScenePathChangeDetection(i){var t=i||{},e=t.redraw,r=e===void 0?RedrawType.MAJOR:e,n=t.changeCb,o=t.convertor;return SceneChangeDetection({redraw:r,type:"path",convertor:o,changeCb:n})}var Path$1=function(i){__extends$2H(t,i);function t(e){var r=i.call(this)||this;return r.renderOverride=e,r.path=new Path2D$1,r._dirtyPath=!0,r}return Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,RedrawType.MAJOR))},enumerable:!0,configurable:!0}),t.prototype.checkPathDirty=function(){var e,r;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(r=(e=this.fillShadow)===null||e===void 0?void 0:e.isDirty(),r??!1))},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isDirtyPath=function(){},t.prototype.updatePath=function(){},t.prototype.render=function(e){var r,n,o=e.ctx,a=e.forceRender,s=e.stats;if(this.dirty===RedrawType.NONE&&!a){s&&(s.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(o.save(),this.clipMode==="normal"&&(this.clipPath.draw(o),o.clip()),this.renderOverride?this.renderOverride(o):(this.path.draw(o),this.fillStroke(o)),this.clipMode==="punch-out"){this.clipPath.draw(o),o.clip();var l=(r=this.computeBBox(),r??{}),u=l.x,c=u===void 0?-1e4:u,f=l.y,d=f===void 0?-1e4:f,h=l.width,p=h===void 0?2e4:h,g=l.height,v=g===void 0?2e4:g;o.clearRect(c,d,p,v)}o.restore()}else this.renderOverride?this.renderOverride(o):(this.path.draw(o),this.fillStroke(o));(n=this.fillShadow)===null||n===void 0||n.markClean(),i.prototype.render.call(this,e)},t.className="Path",__decorate$1D([ScenePathChangeDetection()],t.prototype,"clipPath",void 0),__decorate$1D([ScenePathChangeDetection()],t.prototype,"clipMode",void 0),t}(Shape$1),twoPi=Math.PI*2;function normalizeAngle360(i){return i%=twoPi,i+=twoPi,i%=twoPi,i}function normalizeAngle360Inclusive(i){return i%=twoPi,i+=twoPi,i!==twoPi&&(i%=twoPi),i}function normalizeAngle180(i){return i%=twoPi,i<-Math.PI?i+=twoPi:i>=Math.PI&&(i-=twoPi),i}function toRadians(i){return i/180*Math.PI}function isEqual(i,t,e){return e===void 0&&(e=1e-10),Math.abs(i-t)<e}function toFixed(i,t){t===void 0&&(t=2);var e=Math.floor(Math.log(Math.abs(i))/Math.LN10);return e>=0||!isFinite(e)?i.toFixed(t):i.toFixed(Math.abs(e)-1+t)}function mod(i,t){var e=i%t;return e>=0?e:e+t}var __extends$2G=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1C=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ArcType;(function(i){i[i.Open=0]="Open",i[i.Chord=1]="Chord",i[i.Round=2]="Round"})(ArcType||(ArcType={}));var Arc=function(i){__extends$2G(t,i);function t(){var e=i.call(this)||this;return e.centerX=0,e.centerY=0,e.radiusX=10,e.radiusY=10,e.startAngle=0,e.endAngle=Math.PI*2,e.counterClockwise=!1,e.type=ArcType.Open,e.restoreOwnStyles(),e}return Object.defineProperty(t.prototype,"fullPie",{get:function(){return isEqual(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle))},enumerable:!0,configurable:!0}),t.prototype.updatePath=function(){var e=this.path;e.clear(),e.cubicArc(this.centerX,this.centerY,this.radiusX,this.radiusY,0,this.startAngle,this.endAngle,this.counterClockwise?1:0),this.type===ArcType.Chord?e.closePath():this.type===ArcType.Round&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())},t.prototype.computeBBox=function(){return new BBox$1(this.centerX-this.radiusX,this.centerY-this.radiusY,this.radiusX*2,this.radiusY*2)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return this.type!==ArcType.Open&&o.containsPoint(n.x,n.y)&&this.path.isPointInPath(n.x,n.y)},t.className="Arc",t.defaultStyles=chainObjects$1(Shape$1.defaultStyles,{lineWidth:1,fillStyle:null}),__decorate$1C([ScenePathChangeDetection()],t.prototype,"centerX",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"centerY",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"radiusX",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"radiusY",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"startAngle",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"endAngle",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"counterClockwise",void 0),__decorate$1C([ScenePathChangeDetection()],t.prototype,"type",void 0),t}(Path$1),doOnceFlags$1={};function doOnce$1(i,t){doOnceFlags$1[t]||(i(),doOnceFlags$1[t]=!0)}var __extends$2F=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),t0$1=new Date,t1$1=new Date,TimeInterval$1=function(){function i(t,e){this._floor=t,this._offset=e}return i.prototype.floor=function(t){return t=new Date(+t),this._floor(t),t},i.prototype.ceil=function(t){return t=new Date(+t-1),this._floor(t),this._offset(t,1),this._floor(t),t},i.prototype.round=function(t){var e=this.floor(t),r=this.ceil(t),n=+t;return n-e.getTime()<r.getTime()-n?e:r},i.prototype.offset=function(t,e){return e===void 0&&(e=1),t=new Date(+t),this._offset(t,Math.floor(e)),t},i.prototype.range=function(t,e,r){r===void 0&&(r=1);var n=[];if(t=this.ceil(t),r=Math.floor(r),t>e||r<=0)return n;var o;do o=new Date(+t),n.push(o),this._offset(t,r),this._floor(t);while(o<t&&t<e);return n},i.prototype.filter=function(t){var e=this,r=function(o){if(o>=o)for(e._floor(o);!t(o);)o.setTime(o.getTime()-1),e._floor(o);return o},n=function(o,a){if(o>=o)if(a<0)for(;++a<=0;)do e._offset(o,-1);while(!t(o));else for(;--a>=0;)do e._offset(o,1);while(!t(o));return o};return new i(r,n)},i}(),CountableTimeInterval$1=function(i){__extends$2F(t,i);function t(e,r,n,o){var a=i.call(this,e,r)||this;return a._count=n,a._field=o,a}return t.prototype.count=function(e,r){return t0$1.setTime(+e),t1$1.setTime(+r),this._floor(t0$1),this._floor(t1$1),Math.floor(this._count(t0$1,t1$1))},t.prototype.every=function(e){var r=this,n;if(e=Math.floor(e),isFinite(e)&&e>0)if(e>1){var o=this._field;o?n=this.filter(function(a){return o(a)%e===0}):n=this.filter(function(a){return r.count(0,a)%e===0})}else n=this;return n},t}(TimeInterval$1),Layers;(function(i){i[i.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",i[i.AXIS_GRIDLINES_ZINDEX=0]="AXIS_GRIDLINES_ZINDEX",i[i.SERIES_CROSSLINE_RANGE_ZINDEX=10]="SERIES_CROSSLINE_RANGE_ZINDEX",i[i.AXIS_ZINDEX=20]="AXIS_ZINDEX",i[i.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",i[i.SERIES_LABEL_ZINDEX=1e3]="SERIES_LABEL_ZINDEX",i[i.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",i[i.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"})(Layers||(Layers={}));function circleRectOverlap(i,t,e,r,n){var o=i.x<t?t:i.x>t+r?t+r:i.x,a=i.y<e?e:i.y>e+n?e+n:i.y,s=i.x-o,l=i.y-a,u=Math.sqrt(s*s+l*l);return u<=i.size*.5}function rectRectOverlap(i,t,e,r,n){var o=i.x+i.width>t&&i.x<t+r,a=i.y+i.height>e&&i.y<e+n;return o&&a}function rectContainsRect(i,t,e,r,n){return t+r<i.x+i.width&&t>i.x&&e>i.y&&e+n<i.y+i.height}function isPointLabelDatum(i){return i!=null&&typeof i.point=="object"&&typeof i.label=="object"}function placeLabels(i,t,e){e===void 0&&(e=5);var r=[];i=i.map(function(c){return c.slice().sort(function(f,d){return d.point.size-f.point.size})});for(var n=0;n<i.length;n++){var o=r[n]=[],a=i[n];if(a&&a.length&&a[0].label)for(var s=function(c,f){var d=a[c],h=d.label,p=d.point.size*.5,g=d.point.x-h.width*.5,v=d.point.y-p-h.height-e,m=h.width,y=h.height,b=!t||rectContainsRect(t,g,v,m,y);if(!b)return"continue";var C=i.some(function(w){return w.some(function(P){return circleRectOverlap(P.point,g,v,m,y)})});if(C)return"continue";var x=r.some(function(w){return w.some(function(P){return rectRectOverlap(P,g,v,m,y)})});if(x)return"continue";o.push({index:c,text:h.text,x:g,y:v,width:m,height:y,datum:d})},l=0,u=a.length;l<u;l++)s(l,u)}return r}function axisLabelsOverlap(i,t){for(var e=[],r=function(a){var s=i[a],l=s.point,u=l.x,c=l.y,f=s.label,d=f.width,h=f.height,p=f.text;d+=t??0,h+=t??0;var g=e.some(function(v){var m=rectRectOverlap(v,u,c,d,h);return m});if(g)return{value:!0};e.push({index:a,text:p,x:u,y:c,width:d,height:h,datum:s})},n=0;n<i.length;n++){var o=r(n);if(typeof o=="object")return o.value}return!1}var __decorate$1B=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$H=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$o=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$H(arguments[t]));return i},__values$q=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},TICK_COUNT=predicateWithMessage(function(i,t){return NUMBER(0)(i,t)||i instanceof TimeInterval$1},"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),OPT_TICK_COUNT=predicateWithMessage(function(i,t){return OPTIONAL(i,t,TICK_COUNT)},"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),GRID_STYLE_KEYS=["stroke","lineDash"],GRID_STYLE=predicateWithMessage(ARRAY(void 0,function(i){for(var t in i)if(!GRID_STYLE_KEYS.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'"),Tags;(function(i){i[i.Tick=0]="Tick",i[i.GridLine=1]="GridLine"})(Tags||(Tags={}));var AxisLine=function(){function i(){this.width=1,this.color="rgba(195, 195, 195, 1)"}return __decorate$1B([Validate(NUMBER(0))],i.prototype,"width",void 0),__decorate$1B([Validate(OPT_COLOR_STRING)],i.prototype,"color",void 0),i}(),AxisTick=function(){function i(){this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0}return __decorate$1B([Validate(NUMBER(0))],i.prototype,"width",void 0),__decorate$1B([Validate(NUMBER(0))],i.prototype,"size",void 0),__decorate$1B([Validate(OPT_COLOR_STRING)],i.prototype,"color",void 0),__decorate$1B([Validate(OPT_TICK_COUNT)],i.prototype,"count",void 0),i}(),AxisLabel=function(){function i(){this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}return __decorate$1B([Validate(OPT_FONT_STYLE)],i.prototype,"fontStyle",void 0),__decorate$1B([Validate(OPT_FONT_WEIGHT)],i.prototype,"fontWeight",void 0),__decorate$1B([Validate(NUMBER(1))],i.prototype,"fontSize",void 0),__decorate$1B([Validate(STRING)],i.prototype,"fontFamily",void 0),__decorate$1B([Validate(NUMBER(0))],i.prototype,"padding",void 0),__decorate$1B([Validate(OPT_COLOR_STRING)],i.prototype,"color",void 0),__decorate$1B([Validate(OPT_NUMBER(-360,360))],i.prototype,"rotation",void 0),__decorate$1B([Validate(OPT_BOOLEAN)],i.prototype,"autoRotate",void 0),__decorate$1B([Validate(NUMBER(-360,360))],i.prototype,"autoRotateAngle",void 0),__decorate$1B([Validate(BOOLEAN)],i.prototype,"mirrored",void 0),__decorate$1B([Validate(BOOLEAN)],i.prototype,"parallel",void 0),__decorate$1B([Validate(OPT_STRING)],i.prototype,"format",void 0),i}(),Axis=function(){function i(t){this.id=createId$1(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new Group$1({name:this.id+"-axis",layer:!0,zIndex:Layers.AXIS_ZINDEX}),this.crossLineGroup=new Group$1({name:this.id+"-CrossLines"}),this.lineGroup=this.axisGroup.appendChild(new Group$1({name:this.id+"-Line"})),this.tickGroup=this.axisGroup.appendChild(new Group$1({name:this.id+"-Tick"})),this.titleGroup=this.axisGroup.appendChild(new Group$1({name:this.id+"-Title"})),this.tickGroupSelection=Selection$1.select(this.tickGroup).selectAll(),this.lineNode=this.lineGroup.appendChild(new Line$1),this.gridlineGroup=new Group$1({name:this.id+"-gridline",layer:!0,zIndex:Layers.AXIS_GRIDLINES_ZINDEX}),this.gridlineGroupSelection=Selection$1.select(this.gridlineGroup).selectAll(),this._crossLines=[],this.line=new AxisLine,this.tick=new AxisTick,this.label=new AxisLabel,this.translation={x:0,y:0},this.rotation=0,this.requestedRange=[0,1],this._visibleRange=[0,1],this._title=void 0,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.thickness=0,this._scale=t,this.refreshScale()}return Object.defineProperty(i.prototype,"scale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"crossLines",{get:function(){return this._crossLines},set:function(t){var e=this,r,n;(r=this._crossLines)===null||r===void 0||r.forEach(function(o){return e.detachCrossLine(o)}),this._crossLines=t,(n=this._crossLines)===null||n===void 0||n.forEach(function(o){e.attachCrossLine(o),e.initCrossLine(o)})},enumerable:!0,configurable:!0}),i.prototype.attachCrossLine=function(t){this.crossLineGroup.appendChild(t.group)},i.prototype.detachCrossLine=function(t){this.crossLineGroup.removeChild(t.group)},i.prototype.getMeta=function(){},i.prototype.refreshScale=function(){var t=this,e;this.requestedRange=this.scale.range.slice(),(e=this.crossLines)===null||e===void 0||e.forEach(function(r){t.initCrossLine(r)})},i.prototype.updateRange=function(){var t,e=this,r=e.requestedRange,n=e.visibleRange,o=e.scale,a=(r[1]-r[0])/(n[1]-n[0]),s=a*n[0],l=r[0]-s;o.range=[l,l+a],(t=this.crossLines)===null||t===void 0||t.forEach(function(u){u.clippedRange=[r[0],r[1]]})},i.prototype.inRange=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),this.inRangeEx(t,e,r)===0},i.prototype.inRangeEx=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=this.range,o=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return t+e<o-r?-1:t>a+r?1:0},Object.defineProperty(i.prototype,"range",{get:function(){return this.requestedRange},set:function(t){this.requestedRange=t.slice(),this.updateRange()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleRange",{get:function(){return this._visibleRange.slice()},set:function(t){if(t&&t.length===2){var e=__read$H(t,2),r=e[0],n=e[1];r=Math.max(0,r),n=Math.min(1,n),r=Math.min(r,n),n=Math.max(r,n),this._visibleRange=[r,n],this.updateRange()}},enumerable:!0,configurable:!0}),i.prototype.onLabelFormatChange=function(t,e){var r=this.scale;if(e&&r&&r.tickFormat)try{this.labelFormatter=r.tickFormat({ticks:t,count:t.length,specifier:e})}catch{this.labelFormatter=void 0,doOnce$1(function(){return console.warn("AG Charts - the axis label format string "+e+" is invalid. No formatting will be applied")},"invalid axis label format string "+e)}else this.labelFormatter=void 0},Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){var e=this._title;e!==t&&(e&&this.titleGroup.removeChild(e.node),t&&(t.node.rotation=-Math.PI/2,this.titleGroup.appendChild(t.node)),this._title=t,this.updateTitle({ticks:this.scale.ticks(this.tick.count)}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){var e=this,r;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridlineGroupSelection=this.gridlineGroupSelection.remove().setData([])),this._gridLength=t,(r=this.crossLines)===null||r===void 0||r.forEach(function(n){e.initCrossLine(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"radialGrid",{get:function(){return this._radialGrid},set:function(t){this._radialGrid!==t&&(this._radialGrid=t,this.gridlineGroupSelection=this.gridlineGroupSelection.remove().setData([]))},enumerable:!0,configurable:!0}),i.prototype.update=function(t){var e,r;this.calculateDomain();var n=this,o=n.scale,a=n.gridLength,s=n.tick,l=n.label,u=n.requestedRange,c=Math.min.apply(Math,__spread$o(u)),f=Math.max.apply(Math,__spread$o(u)),d=toRadians(this.rotation),h=l.parallel,p=this.isAnySeriesActive(),g=l.mirrored?1:-1,v=normalizeAngle360(d),m=normalizeAngle360(d-Math.PI/2),y=(o.bandwidth||0)/2;this.updatePosition(),this.updateLine();var b=0,C=!0,x=[],w=10,P=this.tick.count!==void 0,S=this.nice&&o.nice,O=o instanceof ContinuousScale$1,E=t!==void 0,D=!E&&!P&&S;for(o.domain=this.dataDomain,S&&o.nice(this.tick.count);C;){for(var R=!0,F=function(){if(b>=w)return"break";D&&(o.domain=I.dataDomain,o.nice(w-b));var K=x,X=O&&!P||b===0?void 0:x.filter(function(Z,ee){return ee%2===0}),q=void 0;E&&(q=I.updateSecondaryAxisTicks(t)),x=(e=X??q,e??I.scale.ticks(I.tick.count,b)),I.updateSelections({halfBandwidth:y,gridLength:a,ticks:x}),!E&&x.length>0&&(t=x.length),R=x.every(function(Z,ee){return Z===K[ee]}),b++},I=this;R;){var $=F();if($==="break")break}if(R)break;this.onLabelFormatChange(x,this.label.format);var B=this.updateLabels({parallelFlipRotation:v,regularFlipRotation:m,sideFlag:g,tickLineGroupSelection:this.tickGroupSelection,ticks:x}),V=B.labelData,G=B.rotated,U=G?0:10;C=axisLabelsOverlap(V,U)}this.updateGridLines({gridLength:a,halfBandwidth:y,sideFlag:g});var H=!1,N=function(K){var X=Math.floor(c),q=Math.ceil(f),Z=X!==q&&K.translationY>=X&&K.translationY<=q;return H=Z||H,Z},j=this,W=j.gridlineGroupSelection,z=j.tickGroupSelection;return W.attrFn("visible",N),z.attrFn("visible",N),this.tickGroup.visible=H,this.gridlineGroup.visible=H,(r=this.crossLines)===null||r===void 0||r.forEach(function(K){K.sideFlag=-g,K.direction=d===-Math.PI/2?ChartAxisDirection.X:ChartAxisDirection.Y,K.label.parallel=K.label.parallel!==void 0?K.label.parallel:h,K.parallelFlipRotation=v,K.regularFlipRotation=m,K.update(p)}),this.updateTitle({ticks:x}),z.selectByTag(Tags.Tick).each(function(K){K.strokeWidth=s.width,K.stroke=s.color,K.visible=H}).attr("x1",g*s.size).attr("x2",0).attr("y1",0).attr("y2",0),t},i.prototype.calculateDomain=function(){},i.prototype.updatePosition=function(){var t=this,e=t.label,r=t.axisGroup,n=t.gridlineGroup,o=t.crossLineGroup,a=t.translation,s=t.gridlineGroupSelection,l=t.gridPadding,u=t.gridLength,c=toRadians(this.rotation),f=e.mirrored?1:-1,d=Math.floor(a.x),h=Math.floor(a.y);o.translationX=d,o.translationY=h,o.rotation=c,r.translationX=d,r.translationY=h,r.rotation=c,n.translationX=d,n.translationY=h,n.rotation=c,s.selectByTag(Tags.GridLine).each(function(p){p.x1=l,p.x2=-f*u+l,p.y1=0,p.y2=0})},i.prototype.updateSecondaryAxisTicks=function(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")},i.prototype.updateTickGroupSelection=function(t){var e=t.data,r=this.tickGroupSelection.setData(e);r.exit.remove();var n=r.enter.append(Group$1);return n.append(Line$1).each(function(o){return o.tag=Tags.Tick}),n.append(Text$1),r.merge(n)},i.prototype.updateGridLineGroupSelection=function(t){var e=t.gridLength,r=t.data,n=this.gridlineGroupSelection.setData(e?r:[]);n.exit.remove();var o=n;if(e){var a=function(l){return l.tag=Tags.GridLine},s=n.enter.append(Group$1);this.radialGrid?s.append(Arc).each(a):s.append(Line$1).each(a),o=n.merge(s)}return o},i.prototype.updateSelections=function(t){var e=t.ticks,r=t.halfBandwidth,n=t.gridLength,o=this.scale,a=e.map(function(u){return{tick:u,translationY:o.convert(u)+r}}),s=this.updateGridLineGroupSelection({gridLength:n,data:a}),l=this.updateTickGroupSelection({data:a});s.attrFn("translationY",function(u,c){return Math.round(c.translationY)}),l.attrFn("translationY",function(u,c){return Math.round(c.translationY)}),this.tickGroupSelection=l,this.gridlineGroupSelection=s},i.prototype.updateGridLines=function(t){var e=t.gridLength,r=t.halfBandwidth,n=t.sideFlag,o=this,a=o.gridStyle,s=o.scale,l=o.tick,u=o.gridPadding;if(e&&a.length){var c=a.length,f=void 0;if(this.radialGrid){var d=normalizeAngle360Inclusive(toRadians(e));f=this.gridlineGroupSelection.selectByTag(Tags.GridLine).each(function(h,p){var g=Math.round(s.convert(p)+r);h.centerX=0,h.centerY=s.range[0]-g,h.endAngle=d,h.radiusX=g,h.radiusY=g})}else f=this.gridlineGroupSelection.selectByTag(Tags.GridLine).each(function(h){h.x1=u,h.x2=-n*e+u,h.y1=0,h.y2=0,h.visible=Math.abs(h.parent.translationY-s.range[0])>1});f.each(function(h,p,g){var v=a[g%c];h.stroke=v.stroke,h.strokeWidth=l.width,h.lineDash=v.lineDash,h.fill=void 0})}},i.prototype.updateLabels=function(t){var e=this,r=t.ticks,n=t.tickLineGroupSelection,o=t.sideFlag,a=t.parallelFlipRotation,s=t.regularFlipRotation,l=this,u=l.label,c=l.label.parallel,f=l.scale,d=l.tick,h=l.requestedRange,p=Math.min.apply(Math,__spread$o(h)),g=Math.max.apply(Math,__spread$o(h)),v=0,m=u.rotation?normalizeAngle360(toRadians(u.rotation)):0,y=!m&&a>=0&&a<=Math.PI?-1:1,b=!m&&s>=0&&s<=Math.PI?-1:1;this.fractionDigits=r.fractionDigits>=0?r.fractionDigits:0;var C=new Map,x=0,w=!1,P=!1,S=g-p,O=n.selectByClass(Text$1).each(function(N,j,W){var z=j.tick;N.fontStyle=u.fontStyle,N.fontWeight=u.fontWeight,N.fontSize=u.fontSize,N.fontFamily=u.fontFamily,N.fill=u.color,N.text=e.formatTickDatum(z,W);var K=N.text===""||N.text==null;C.set(W,K?null:N.computeBBox()),!K&&(x++,W===0&&N.translationY===f.range[0]?w=!0:W===r.length-1&&N.translationY===f.range[1]&&(P=!0))}),E=o*(d.size+u.padding),D=S/x,R=function(N,j){var W,z,K=!1,X=N.size-1,q=12;try{for(var Z=__values$q(N.entries()),ee=Z.next();!ee.done;ee=Z.next()){var ue=__read$H(ee.value,2),ne=ue[0],Q=ue[1];if(Q!=null){var ie=ne===0&&w||ne===X&&P?2:1,se=j?Q.width/ie:Q.height/ie,ae=se<=0?0:se+q;ae>D&&(K=!0)}}}catch(oe){W={error:oe}}finally{try{ee&&!ee.done&&(z=Z.return)&&z.call(Z)}finally{if(W)throw W.error}}return K},F=R(C,c);u.rotation===void 0&&u.autoRotate===!0&&F&&(v=normalizeAngle360(toRadians(u.autoRotateAngle)));var I=c?y*Math.PI/2:b===-1?Math.PI:0,$=c&&!m?o*y===-1?"hanging":"bottom":"middle",B=m>0&&m<=Math.PI||v>0&&v<=Math.PI?-1:1,V=c?m||v?o*B===-1?"end":"start":"center":o*b===-1?"end":"start",G=[],U=I+m+v,H=new Matrix$1;return U&&Matrix$1.updateTransformMatrix(H,1,1,U,0,0),O.each(function(N,j){if(N.text===""||N.text==null){N.visible=!1;return}N.textBaseline=$,N.textAlign=V,N.x=E,N.rotationCenterX=E,N.rotation=U;var W=N.text===""||N.text==null;if(!W){var z=N.computeBBox(),K=z.width,X=K===void 0?0:K,q=z.height,Z=q===void 0?0:q,ee=j.translationY,ue=new BBox$1(E,ee,0,0);H.transformBBox(ue,0,z);var ne=z.x,Q=ne===void 0?0:ne,ie=z.y,se=ie===void 0?0:ie;G.push({point:{x:Q,y:se,size:0},label:{width:X,height:Z,text:N.text}})}}),{labelData:G,rotated:!!(m||v)}},i.prototype.updateLine=function(){var t=this,e=t.lineNode,r=t.requestedRange;e.x1=0,e.x2=0,e.y1=r[0],e.y2=r[1],e.strokeWidth=this.line.width,e.stroke=this.line.color,e.visible=!0},i.prototype.updateTitle=function(t){var e=t.ticks,r,n=this,o=n.label,a=n.rotation,s=n.title,l=n.lineNode,u=n.requestedRange,c=n.tickGroup,f=n.lineGroup;if(s){var d=!1;if(s.enabled&&l.visible){d=!0;var h=o.mirrored?1:-1,p=normalizeAngle360(a),g=Caption.PADDING,v=s.node,m=h===-1&&p>Math.PI&&p<Math.PI*2?-1:1;v.rotation=m*h*Math.PI/2,v.x=Math.floor(m*h*(u[0]+u[1])/2);var y=f.computeBBox(),b=a===0?y.width:y.height;if(((r=e)===null||r===void 0?void 0:r.length)>0){var C=c.computeBBox(),x=a===0?C.width:C.height;Math.abs(x)<1/0&&(b+=x)}h===-1?v.y=Math.floor(m*(-g-b)):v.y=Math.floor(-g-b),v.textBaseline=m===1?"bottom":"top"}s.node.visible=d}},i.prototype.formatTickDatum=function(t,e){var r=this,n=r.label,o=r.labelFormatter,a=r.fractionDigits,s=this.getMeta();return n.formatter?n.formatter({value:a>=0?t:String(t),index:e,fractionDigits:a,formatter:o,axis:s}):o?o(t):typeof t=="number"&&a>=0?t.toFixed(a):String(t)},i.prototype.formatDatum=function(t){return String(t)},i.prototype.computeBBox=function(){return this.axisGroup.computeBBox()},i.prototype.initCrossLine=function(t){t.scale=this.scale,t.gridLength=this.gridLength},i.prototype.isAnySeriesActive=function(){return!1},__decorate$1B([Validate(BOOLEAN)],i.prototype,"nice",void 0),__decorate$1B([Validate(GRID_STYLE)],i.prototype,"gridStyle",void 0),__decorate$1B([Validate(NUMBER(0))],i.prototype,"thickness",void 0),i}(),__extends$2E=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1A=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$G=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$n=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$G(arguments[t]));return i},ChartAxisDirection;(function(i){i.X="x",i.Y="y"})(ChartAxisDirection||(ChartAxisDirection={}));function flipChartAxisDirection(i){return i===ChartAxisDirection.X?ChartAxisDirection.Y:ChartAxisDirection.X}var ChartAxisPosition;(function(i){i.Top="top",i.Right="right",i.Bottom="bottom",i.Left="left",i.Angle="angle",i.Radius="radius"})(ChartAxisPosition||(ChartAxisPosition={}));var ChartAxis=function(i){__extends$2E(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.keys=[],e.direction=ChartAxisDirection.Y,e.boundSeries=[],e.includeInvisibleDomains=!1,e._position=ChartAxisPosition.Left,e}return Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),t.prototype.getMeta=function(){return{id:this.id,direction:this.direction,boundSeries:this.boundSeries}},t.prototype.useCalculatedTickCount=function(){return this.scale instanceof LinearScale$1},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){if(this._position!==e)switch(this._position=e,e){case ChartAxisPosition.Top:this.direction=ChartAxisDirection.X,this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case ChartAxisPosition.Right:this.direction=ChartAxisDirection.Y,this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case ChartAxisPosition.Bottom:this.direction=ChartAxisDirection.X,this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case ChartAxisPosition.Left:this.direction=ChartAxisDirection.Y,this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}},enumerable:!0,configurable:!0}),t.prototype.calculateDomain=function(){var e,r=this,n=r.direction,o=r.boundSeries,a=r.includeInvisibleDomains;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{var s=[];o.filter(function(u){return a||u.isEnabled()}).forEach(function(u){s.push(u.getDomain(n))});var l=(e=new Array).concat.apply(e,__spread$n(s));this.dataDomain=this.normaliseDataDomain(l)}},t.prototype.normaliseDataDomain=function(e){return e},t.prototype.isAnySeriesActive=function(){var e=this;return this.boundSeries.some(function(r){return e.includeInvisibleDomains||r.isEnabled()})},__decorate$1A([Validate(STRING_ARRAY)],t.prototype,"keys",void 0),__decorate$1A([Validate(POSITION)],t.prototype,"_position",void 0),t}(Axis);function calculateNiceSecondaryAxis(i,t){var e=Math.floor(i[0]),r=i[1];e=calculateNiceStart(e,r,t);var n=getTickStep(e,r,t),o=t-1;r=e+o*n;var a=[e,r],s=getTicks(e,n,t);return[a,s]}function calculateNiceStart(i,t,e){var r=Math.abs(t-i)/(e-1),n=Math.floor(Math.log10(r)),o=Math.pow(10,n);return Math.floor(i/o)*o}function getTicks(i,t,e){for(var r=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(r):0,o=Math.pow(10,n),a=new NumericTicks$1(n),s=0;s<e;s++){var l=i+t*s;a[s]=Math.round(l*o)/o}return a}function getTickStep(i,t,e){var r=e-1,n=(t-i)/r;return calculateNextNiceStep(n)}function calculateNextNiceStep(i){var t=Math.floor(Math.log10(i)),e=Math.pow(10,t),r=i/e*10;return r>0&&r<=1?e/10:r>1&&r<=2?2*e/10:r>1&&r<=5?5*e/10:r>5&&r<=10?10*e/10:r>10&&r<=20?20*e/10:r>20&&r<=40?40*e/10:r>40&&r<=50?50*e/10:r>50&&r<=100?100*e/10:r}var __extends$2D=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1z=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$F=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o};function NUMBER_OR_NAN(i,t){var e="expecting a finite Number"+((i!==void 0?", more than or equal to "+i:"")+(t!==void 0?", less than or equal to "+t:""));return predicateWithMessage(function(r){return typeof r=="number"&&(isNaN(r)||Number.isFinite(r))&&(i!==void 0?r>=i:!0)&&(t!==void 0?r<=t:!0)},e)}var NumberAxis=function(i){__extends$2D(t,i);function t(e){e===void 0&&(e=new LinearScale$1);var r=i.call(this,e)||this;return r.min=NaN,r.max=NaN,r.scale.clamper=filter,r}return t.prototype.normaliseDataDomain=function(e){var r=this,n=r.min,o=r.max;return e.length>2&&(e=extent$1(e,isContinuous$1,Number)||[NaN,NaN]),isNaN(n)||(e=[n,e[1]]),isNaN(o)||(e=[e[0],o]),e[0]>e[1]&&(e=[]),this.scale.clamp=!0,e},t.prototype.formatDatum=function(e){return typeof e=="number"?e.toFixed(2):(doOnce$1(function(){return console.warn("AG Charts - Data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers.")},"number axis config used with Date objects"),String(e))},t.prototype.updateSecondaryAxisTicks=function(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");var r=__read$F(calculateNiceSecondaryAxis(this.dataDomain,e??0),2),n=r[0],o=r[1];return this.scale.domain=n,o},t.className="NumberAxis",t.type="number",__decorate$1z([Validate(AND(NUMBER_OR_NAN(),LESS_THAN("max")))],t.prototype,"min",void 0),__decorate$1z([Validate(AND(NUMBER_OR_NAN(),GREATER_THAN("min")))],t.prototype,"max",void 0),t}(ChartAxis),__read$E=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},BandScale$1=function(){function i(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(i.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=this._domain;e.length=0,this.index=new Map;var r=this.index;t.forEach(function(n){r.get(n)===void 0&&r.set(n,e.push(n)-1)}),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return this._range},set:function(t){this._range[0]=t[0],this._range[1]=t[1],this.rescale()},enumerable:!0,configurable:!0}),i.prototype.ticks=function(){return this._domain},i.prototype.convert=function(t){var e=this.index.get(t);if(e===void 0)return NaN;var r=this.ordinalRange[e];return r===void 0?NaN:r},Object.defineProperty(i.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rawBandwidth",{get:function(){return this._rawBandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=Math.max(0,Math.min(1,t)),this._paddingInner=t,this._paddingOuter=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"round",{get:function(){return this._round},set:function(t){this._round=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),i.prototype.rescale=function(){var t,e=this._domain.length;if(e){var r=__read$E(this._range,2),n=r[0],o=r[1],a=o<n;a&&(t=__read$E([o,n],2),n=t[0],o=t[1]);var s=(o-n)/Math.max(1,e-this._paddingInner+this._paddingOuter*2),l=s;this._round&&(l=Math.floor(l)),n+=(o-n-l*(e-this._paddingInner))*this._align,this._bandwidth=l*(1-this._paddingInner),this._rawBandwidth=s*(1-this._paddingInner),this._round&&(n=Math.round(n),this._bandwidth=Math.round(this._bandwidth));for(var u=[],c=0;c<e;c++)u.push(n+l*c);a&&u.reverse(),this.ordinalRange=u}},i}(),__extends$2C=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1y=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$D=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$m=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$D(arguments[t]));return i},CategoryAxis=function(i){__extends$2C(t,i);function t(){var e=i.call(this,new BandScale$1)||this;return e._paddingOverrideEnabled=!1,e.groupPaddingInner=.1,e.includeInvisibleDomains=!0,e}return Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner},set:function(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(e){this.scale.paddingOuter=e},enumerable:!0,configurable:!0}),t.prototype.normaliseDataDomain=function(e){var r=new Set(e);return new(Array.bind.apply(Array,__spread$m([void 0],r.values())))},t.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var e=this.boundSeries;e.some(function(r){return["bar","column"].includes(r.type)})?(this.scale.paddingInner=.2,this.scale.paddingOuter=.3):(this.scale.paddingInner=1,this.scale.paddingOuter=0)}return i.prototype.calculateDomain.call(this)},t.className="CategoryAxis",t.type="category",__decorate$1y([Validate(NUMBER(0,1))],t.prototype,"groupPaddingInner",void 0),t}(ChartAxis),TreeNode=function(){function i(t,e,r){t===void 0&&(t=""),r===void 0&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return i.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},i.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},i.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},i.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},i.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter(function(e,r){return r!==t.number}):[]},i}();function ticksToTree(i,t){t===void 0&&(t=!0);var e=new TreeNode,r=0;return t&&i.forEach(function(n){return r=Math.max(r,n.labels.length)}),i.forEach(function(n){if(t)for(;n.labels.length<r;)n.labels.unshift("");insertTick(e,n)}),e}function insertTick(i,t){var e=t.labels.slice().reverse(),r=e.length-1;e.forEach(function(n,o){var a=i.children,s=find(a,function(c){return c.label===n}),l=o!==r;if(s&&l)i=s;else{var u=new TreeNode(n,i);u.number=a.length,a.push(u),l&&(i=u)}})}function moveSubtree(i,t,e){var r=t.number-i.number,n=e/r;t.change-=n,t.shift+=e,i.change+=n,t.prelim+=e,t.mod+=e}function ancestor(i,t,e){return t.getSiblings().indexOf(i.ancestor)>=0?i.ancestor:e}function executeShifts(i){var t=i.children;if(t)for(var e=0,r=0,n=t.length-1;n>=0;n--){var o=t[n];o.prelim+=e,o.mod+=e,r+=o.change,e+=o.shift+r}}function apportion(i,t,e){var r=i.getLeftSibling();if(r){for(var n=i,o=i,a=r,s=o.getLeftmostSibling(),l=o.mod,u=n.mod,c=a.mod,f=s.mod;a.nextRight()&&o.nextLeft();){a=a.nextRight(),o=o.nextLeft(),s=s.nextLeft(),n=n.nextRight(),n.ancestor=i;var d=a.prelim+c-(o.prelim+l)+e;d>0&&(moveSubtree(ancestor(a,i,t),i,d),l+=d,u+=d),c+=a.mod,l+=o.mod,f+=s.mod,u+=n.mod}a.nextRight()&&!n.nextRight()?(n.thread=a.nextRight(),n.mod+=c-u):(o.nextLeft()&&!s.nextLeft()&&(s.thread=o.nextLeft(),s.mod+=l-f),t=i)}return t}function firstWalk(i,t){var e=i.children;if(e.length){var r=e[0];e.forEach(function(a){firstWalk(a,t),r=apportion(a,r,t)}),executeShifts(i);var n=(e[0].prelim+e[e.length-1].prelim)/2,o=i.getLeftSibling();o?(i.prelim=o.prelim+t,i.mod=i.prelim-n):i.prelim=n}else{var o=i.getLeftSibling();i.prelim=o?o.prelim+t:0}}var Dimensions=function(){function i(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return i.prototype.update=function(t,e){var r=e(t),n=r.x,o=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),o>this.bottom&&(this.bottom=o),o<this.top&&(this.top=o)},i}();function secondWalk(i,t,e){i.x=i.prelim+t,i.y=i.depth,e.update(i),i.children.forEach(function(r){return secondWalk(r,t+i.mod,e)})}function thirdWalk(i){var t=i.children,e=0;t.forEach(function(r){thirdWalk(r),r.children.length?e+=r.leafCount:e++}),i.leafCount=e,t.length?(i.subtreeLeft=t[0].subtreeLeft,i.subtreeRight=t[i.children.length-1].subtreeRight,i.x=(i.subtreeLeft+i.subtreeRight)/2):(i.subtreeLeft=i.x,i.subtreeRight=i.x)}function treeLayout(i){var t=new TreeLayout;return firstWalk(i,1),secondWalk(i,-i.prelim,t),thirdWalk(i),t}var TreeLayout=function(){function i(){this.dimensions=new Dimensions,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return i.prototype.update=function(t){this.dimensions.update(t,function(e){return{x:e.x,y:e.y}}),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},i.prototype.resize=function(t,e,r,n,o){r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=!1);var a=this.leafCount-1,s=this.depth,l=this.dimensions,u=1,c=1;if(t>0&&a){var f=(l.right-l.left)/a,d=t/a;u=d/f,o&&(u=-u)}if(e>0&&s){var h=(l.bottom-l.top)/s,p=e/s;c=p/h}var g=new Dimensions;this.nodes.forEach(function(y){y.screenX=y.x*u,y.screenY=y.y*c,g.update(y,function(b){return{x:b.screenX,y:b.screenY}})});var v=-g.left,m=-g.top;this.nodes.forEach(function(y){y.screenX+=v+r,y.screenY+=m+n})},i}(),__extends$2B=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1x=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$C=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$l=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$C(arguments[t]));return i},GroupedCategoryAxisLabel=function(i){__extends$2B(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.grid=!1,e}return __decorate$1x([Validate(BOOLEAN)],t.prototype,"grid",void 0),t}(AxisLabel),GroupedCategoryAxis=function(i){__extends$2B(t,i);function t(){var e=i.call(this,new BandScale$1)||this;e.tickScale=new BandScale$1,e.translation={x:0,y:0},e.line=new AxisLine,e.label=new GroupedCategoryAxisLabel,e.labelColor="rgba(87, 87, 87, 1)",e.includeInvisibleDomains=!0;var r=e,n=r.axisGroup,o=r.gridlineGroup,a=r.tickScale,s=r.scale;return s.paddingOuter=.1,s.paddingInner=s.paddingOuter*2,e.requestedRange=s.range.slice(),e.refreshScale(),a.paddingInner=1,a.paddingOuter=0,e.gridLineSelection=Selection$1.select(o).selectAll(),e.axisLineSelection=Selection$1.select(n).selectAll(),e.separatorSelection=Selection$1.select(n).selectAll(),e.labelSelection=Selection$1.select(n).selectAll(),e}return Object.defineProperty(t.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(e){this.requestedRange=e.slice(),this.updateRange()},enumerable:!0,configurable:!0}),t.prototype.updateRange=function(){var e=this,r=e.requestedRange,n=e.visibleRange,o=e.scale,a=(r[1]-r[0])/(n[1]-n[0]),s=a*n[0],l=r[0]-s;this.tickScale.range=o.range=[l,l+a],this.resizeTickTree()},t.prototype.resizeTickTree=function(){var e=this.scale,r=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(r[1]-r[0]),n.depth*o,(Math.min(r[0],r[1])||0)+(e.bandwidth||0)/2,-n.depth*o,r[1]-r[0]<0)},Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.label.fontSize*1.5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection=this.gridLineSelection.remove().setData([]),this.labelSelection=this.labelSelection.remove().setData([])),this._gridLength=e},enumerable:!0,configurable:!0}),t.prototype.calculateDomain=function(){var e,r=this,n=r.direction,o=r.boundSeries,a=[],s=void 0;o.filter(function(c){return c.visible}).forEach(function(c){if(n===ChartAxisDirection.X)if(s===void 0){var f=c.getDomain(n);a.push(f),s=typeof f[0]=="number"}else s&&a.push(c.getDomain(n));else a.push(c.getDomain(n))});var l=(e=new Array).concat.apply(e,__spread$l(a)),u=extent$1(l,isContinuous$1)||l;this.dataDomain=this.normaliseDataDomain(u)},t.prototype.normaliseDataDomain=function(e){var r=e.filter(function(a,s,l){return l.indexOf(a)===s}),n=ticksToTree(r);this.tickTreeLayout=treeLayout(n);var o=r.slice();return o.push(""),this.tickScale.domain=o,this.resizeTickTree(),r},t.prototype.update=function(e){var r=this;this.calculateDomain();var n=this,o=n.scale,a=n.label,s=n.tickScale,l=n.requestedRange;o.domain=this.dataDomain;var u=o.range[0],c=o.range[1],f=Math.abs(c-u),d=f/o.domain.length||0,h=a.parallel,p=toRadians(this.rotation),g=Math.abs(Math.cos(p))<1e-8,v=this.label.rotation?normalizeAngle360(toRadians(this.label.rotation)):0;this.updatePosition();var m=this.title;m&&(m.node.visible=!1);var y=this.lineHeight,b=this.tickTreeLayout,C=o.ticks(),x=b?b.nodes:[],w=b?b.depth>1:!1,P=s.ticks(),S=a.mirrored?1:-1,O=normalizeAngle360(p),E=!v&&O>=0&&O<=Math.PI?-1:1,D=normalizeAngle360(p-Math.PI/2),R=!v&&D>=0&&D<=Math.PI?-1:1,F=this.gridLineSelection.setData(this.gridLength?P:[]);F.exit.remove();var I=F.enter.append(Line$1),$=F.merge(I),B=this.labelSelection.setData(x);B.exit.remove();var V=B.enter.append(Text$1),G=B.merge(V),U=a.formatter,H=new Map,N=0;G.each(function(Y,re,he){Y.fontStyle=a.fontStyle,Y.fontWeight=a.fontWeight,Y.fontSize=a.fontSize,Y.fontFamily=a.fontFamily,Y.fill=a.color,Y.textBaseline=E===-1?"bottom":"hanging",Y.textAlign="center",Y.translationX=re.screenY-a.fontSize*.25,Y.translationY=re.screenX,he===0?m&&m.enabled&&C.length>0?(Y.visible=!0,Y.text=m.text,Y.fontSize=m.fontSize,Y.fontStyle=m.fontStyle,Y.fontWeight=m.fontWeight,Y.fontFamily=m.fontFamily,Y.textBaseline="hanging"):Y.visible=!1:(Y.text=U?U({value:String(re.label),index:he}):String(re.label),Y.visible=re.screenX>=l[0]&&re.screenX<=l[1]);var de=Y.computeBBox();H.set(Y.id,de),de.width>N&&(N=de.width)});var j=S*a.padding,W=h?E*Math.PI/2:R===-1?Math.PI:0,z=this.label.grid,K=[];G.each(function(Y,re,he){if(Y.x=j,Y.rotationCenterX=j,re.children.length){Y.translationX-=N-y+r.label.padding;var ve=re.leafCount*d,de=H.get(Y.id);de&&de.width>ve?Y.visible=!1:g?Y.rotation=W:Y.rotation=-Math.PI/2}else{Y.rotation=v,Y.textAlign="end",Y.textBaseline="middle";var de=H.get(Y.id);de&&de.height>d&&(Y.visible=!1)}if(re.parent&&w){var me=re.children.length?re.screenX-re.leafCount*d/2:re.screenX-d/2;if(!re.children.length)(re.number!==re.children.length-1||z)&&K.push({y:me,x1:0,x2:-N-r.label.padding*2,toString:function(){return String(he)}});else{var ye=-N-r.label.padding*2+re.screenY;K.push({y:me,x1:ye+y,x2:ye,toString:function(){return String(he)}})}}});var X=0;K.forEach(function(Y){return X=Math.min(X,Y.x2)}),K.push({y:Math.max(u,c),x1:0,x2:X,toString:function(){return String(K.length)}});var q=this.separatorSelection.setData(K);q.exit.remove();var Z=q.enter.append(Line$1),ee=q.merge(Z);this.separatorSelection=ee;var ue=1e-7;ee.each(function(Y,re){Y.x1=re.x1,Y.x2=re.x2,Y.y1=re.y,Y.y2=re.y,Y.visible=re.y>=l[0]-ue&&re.y<=l[1]+ue,Y.stroke=r.tick.color,Y.fill=void 0,Y.strokeWidth=1}),this.gridLineSelection=$,this.labelSelection=G;for(var ne=b?b.depth+1:1,Q=[],ie=0;ie<ne;ie++)Q.push(ie);var se=this.axisLineSelection.setData(Q);se.exit.remove();var ae=se.enter.append(Line$1),oe=se.merge(ae);if(this.axisLineSelection=oe,oe.each(function(Y,re,he){var de=he>0?-N-r.label.padding*2-(he-1)*y:0;Y.x1=de,Y.x2=de,Y.y1=l[0],Y.y2=l[1],Y.strokeWidth=r.line.width,Y.stroke=r.line.color,Y.visible=C.length>0&&(he===0||z&&w)}),this.gridLength){var fe=this.gridStyle,le=fe.length;$.each(function(Y,re,he){var de=Math.round(s.convert(re));Y.x1=0,Y.x2=-S*r.gridLength,Y.y1=de,Y.y2=de,Y.visible=de>=l[0]&&de<=l[1]&&Math.abs(Y.parent.translationY-u)>1;var ve=fe[he%le];Y.stroke=ve.stroke,Y.strokeWidth=r.tick.width,Y.lineDash=ve.lineDash,Y.fill=void 0})}return e},t.className="GroupedCategoryAxis",t.type="groupedCategory",__decorate$1x([Validate(OPT_COLOR_STRING)],t.prototype,"labelColor",void 0),t}(ChartAxis);function floor$k(i){return i}function offset$k(i,t){i.setTime(i.getTime()+t)}function count$k(i,t){return t.getTime()-i.getTime()}var millisecond$1=new CountableTimeInterval$1(floor$k,offset$k,count$k),epochYear=new Date(0).getFullYear(),durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth$1=durationDay$1*30,durationYear$1=durationDay$1*365;function floor$j(i){i.setTime(i.getTime()-i.getMilliseconds())}function offset$j(i,t){i.setTime(i.getTime()+t*durationSecond$1)}function count$j(i,t){return(t.getTime()-i.getTime())/durationSecond$1}var second$1=new CountableTimeInterval$1(floor$j,offset$j,count$j);function floor$i(i){i.setTime(i.getTime()-i.getMilliseconds()-i.getSeconds()*durationSecond$1)}function offset$i(i,t){i.setTime(i.getTime()+t*durationMinute$1)}function count$i(i,t){return(t.getTime()-i.getTime())/durationMinute$1}function field$g(i){return Math.floor(i.getTime()/durationMinute$1)}var minute$1=new CountableTimeInterval$1(floor$i,offset$i,count$i,field$g);function floor$h(i){i.setTime(i.getTime()-i.getMilliseconds()-i.getSeconds()*durationSecond$1-i.getMinutes()*durationMinute$1)}function offset$h(i,t){i.setTime(i.getTime()+t*durationHour$1)}function count$h(i,t){return(t.getTime()-i.getTime())/durationHour$1}function field$f(i){return Math.floor(i.getTime()/durationHour$1)}var hour$1=new CountableTimeInterval$1(floor$h,offset$h,count$h,field$f);function floor$g(i){i.setHours(0,0,0,0)}function offset$g(i,t){i.setDate(i.getDate()+t)}function count$g(i,t){var e=t.getTimezoneOffset()-i.getTimezoneOffset();return(t.getTime()-i.getTime()-e*durationMinute$1)/durationDay$1}function field$e(i){return Math.floor(i.getTime()/durationDay$1)}var day$1=new CountableTimeInterval$1(floor$g,offset$g,count$g,field$e);function weekday$3(i){function t(n){n.setDate(n.getDate()-(n.getDay()+7-i)%7),n.setHours(0,0,0,0)}function e(n,o){n.setDate(n.getDate()+o*7)}function r(n,o){var a=o.getTime()-n.getTime(),s=o.getTimezoneOffset()-n.getTimezoneOffset();return(a-s*durationMinute$1)/durationWeek$1}return new CountableTimeInterval$1(t,e,r)}var sunday$1=weekday$3(0),monday$1=weekday$3(1);weekday$3(2);weekday$3(3);var thursday$1=weekday$3(4);weekday$3(5);weekday$3(6);function floor$f(i){i.setDate(1),i.setHours(0,0,0,0)}function offset$f(i,t){i.setMonth(i.getMonth()+t)}function count$f(i,t){return t.getMonth()-i.getMonth()+(t.getFullYear()-i.getFullYear())*12}function field$d(i){var t=i.getFullYear()-epochYear,e=t*12+i.getMonth();return e}var month$1=new CountableTimeInterval$1(floor$f,offset$f,count$f,field$d);function floor$e(i){i.setMonth(0,1),i.setHours(0,0,0,0)}function offset$e(i,t){i.setFullYear(i.getFullYear()+t)}function count$e(i,t){return t.getFullYear()-i.getFullYear()}function field$c(i){return i.getFullYear()-epochYear}var year$1=new CountableTimeInterval$1(floor$e,offset$e,count$e,field$c);function floor$d(i){i.setUTCHours(0,0,0,0)}function offset$d(i,t){i.setUTCDate(i.getUTCDate()+t)}function count$d(i,t){return(t.getTime()-i.getTime())/durationDay$1}function field$b(i){return i.getUTCDate()-1}var utcDay$1=new CountableTimeInterval$1(floor$d,offset$d,count$d,field$b);function floor$c(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}function offset$c(i,t){i.setUTCFullYear(i.getUTCFullYear()+t)}function count$c(i,t){return t.getUTCFullYear()-i.getUTCFullYear()}function field$a(i){return i.getUTCFullYear()}var utcYear$1=new CountableTimeInterval$1(floor$c,offset$c,count$c,field$a);function weekday$2(i){function t(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-i)%7),n.setHours(0,0,0,0)}function e(n,o){n.setUTCDate(n.getUTCDate()+o*7)}function r(n,o){return(o.getTime()-n.getTime())/durationWeek$1}return new CountableTimeInterval$1(t,e,r)}var utcSunday$1=weekday$2(0),utcMonday$1=weekday$2(1);weekday$2(2);weekday$2(3);var utcThursday$1=weekday$2(4);weekday$2(5);weekday$2(6);function localDate$1(i){if(i.y>=0&&i.y<100){var t=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return t.setFullYear(i.y),t}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function utcDate$1(i){if(i.y>=0&&i.y<100){var t=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return t.setUTCFullYear(i.y),t}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function formatLookup$1(i){for(var t={},e=0,r=i.length;e<r;e++)t[i[e].toLowerCase()]=e;return t}function newYear$1(i){return{y:i,m:0,d:1,H:0,M:0,S:0,L:0}}var percentCharCode$1=37,numberRe$1=/^\s*\d+/,percentRe$1=/^%/,requoteRe$1=/[\\^$*+?|[\]().{}]/g,requote$1=function(i){return i.replace(requoteRe$1,"\\$&")},formatRe$1=function(i){return new RegExp("^(?:"+i.map(requote$1).join("|")+")","i")},pads$1={"-":"",_:" ",0:"0"};function pad$1(i,t,e){var r=i<0?"-":"",n=String(r?-i:i),o=n.length;return r+(o<e?new Array(e-o+1).join(t)+n:n)}function formatLocale$2(i){var t=i.dateTime,e=i.date,r=i.time,n=i.periods,o=i.days,a=i.shortDays,s=i.months,l=i.shortMonths,u=formatRe$1(n),c=formatLookup$1(n),f=formatRe$1(o),d=formatLookup$1(o),h=formatRe$1(a),p=formatLookup$1(a),g=formatRe$1(s),v=formatLookup$1(s),m=formatRe$1(l),y=formatLookup$1(l),b={a:B,A:V,b:K,B:X,c:void 0,d:W,e:W,f:O,H:I,I:F,j:z,L:E,m:q,M:R,p:$,Q:we,s:_e,S:D,u:G,U,V:H,w:N,W:j,x:void 0,X:void 0,y:Z,Y:ee,Z:ue,"%":Oe},C={a:ve,A:me,b:he,B:de,c:void 0,d:le,e:le,f:ne,H:oe,I:ae,j:Y,L:Q,m:re,M:se,p:fe,Q:we,s:_e,S:ie,u:ye,U:xe,V:J,w:ce,W:Ce,x:void 0,X:void 0,y:pe,Y:Te,Z:Ae,"%":Oe},x={a:Ne,A:Be,b:Ue,B:ze,c:Xe,d:Le,e:Le,f:Pe,H:Ie,I:Ie,j:ke,L:De,m:Ke,M:$e,p:Fe,Q:Ze,s:Je,S:Me,u:Ge,U:Ve,V:je,w:He,W:We,x:Ye,X:qe,y:Qe,Y:et,Z:tt,"%":rt};b.x=P(e,b),b.X=P(r,b),b.c=P(t,b),C.x=P(e,C),C.X=P(r,C),C.c=P(t,C);function w(T,M){return function(k){var A=newYear$1(1900);k+="";var Se=S(A,T,k,0);if(Se==k.length){if("Q"in A)return new Date(A.Q);if("p"in A&&(A.H=A.H%12+A.p*12),"V"in A){if(A.V<1||A.V>53)return;if("w"in A||(A.w=1),"Z"in A){var te=utcDate$1(newYear$1(A.y)),ge=te.getUTCDay();te=ge>4||ge===0?utcMonday$1.ceil(te):utcMonday$1.floor(te),te=utcDay$1.offset(te,(A.V-1)*7),A.y=te.getUTCFullYear(),A.m=te.getUTCMonth(),A.d=te.getUTCDate()+(A.w+6)%7}else{var te=M(newYear$1(A.y)),ge=te.getDay();te=ge>4||ge===0?monday$1.ceil(te):monday$1.floor(te),te=day$1.offset(te,(A.V-1)*7),A.y=te.getFullYear(),A.m=te.getMonth(),A.d=te.getDate()+(A.w+6)%7}}else if("W"in A||"U"in A){"w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0);var ge="Z"in A?utcDate$1(newYear$1(A.y)).getUTCDay():M(newYear$1(A.y)).getDay();A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(ge+5)%7:A.w+A.U*7-(ge+6)%7}return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,utcDate$1(A)):M(A)}}}function P(T,M){return function(k){var A=[],Se=T.length,te=-1,ge=0;for(k instanceof Date||(k=new Date(+k));++te<Se;)if(T.charCodeAt(te)===percentCharCode$1){A.push(T.slice(ge,te));var be=T.charAt(++te),Ee=pads$1[be];Ee!=null?be=T.charAt(++te):Ee=be==="e"?" ":"0";var Re=M[be];Re&&(be=Re(k,Ee)),A.push(be),ge=te+1}return A.push(T.slice(ge,te)),A.join("")}}function S(T,M,k,A){for(var Se=0,te=M.length,ge=k.length;Se<te;){if(A>=ge)return-1;var be=M.charCodeAt(Se++);if(be===percentCharCode$1){var Ee=M.charAt(Se++),Re=x[Ee in pads$1?M.charAt(Se++):Ee];if(!Re||(A=Re(T,k,A))<0)return-1}else if(be!=k.charCodeAt(A++))return-1}return A}function O(T,M){return E(T,M)+"000"}function E(T,M){return pad$1(T.getMilliseconds(),M,3)}function D(T,M){return pad$1(T.getSeconds(),M,2)}function R(T,M){return pad$1(T.getMinutes(),M,2)}function F(T,M){return pad$1(T.getHours()%12||12,M,2)}function I(T,M){return pad$1(T.getHours(),M,2)}function $(T){return n[T.getHours()>=12?1:0]}function B(T){return a[T.getDay()]}function V(T){return o[T.getDay()]}function G(T){var M=T.getDay();return M===0?7:M}function U(T,M){return pad$1(sunday$1.count(year$1.floor(T),T),M,2)}function H(T,M){var k=T.getDay();T=k>=4||k===0?thursday$1.floor(T):thursday$1.ceil(T);var A=year$1.floor(T);return pad$1(thursday$1.count(A,T)+(A.getDay()===4?1:0),M,2)}function N(T){return T.getDay()}function j(T,M){return pad$1(monday$1.count(year$1.floor(T),T),M,2)}function W(T,M){return pad$1(T.getDate(),M,2)}function z(T,M){return pad$1(1+day$1.count(year$1.floor(T),T),M,3)}function K(T){return l[T.getMonth()]}function X(T){return s[T.getMonth()]}function q(T,M){return pad$1(T.getMonth()+1,M,2)}function Z(T,M){return pad$1(T.getFullYear()%100,M,2)}function ee(T,M){return pad$1(T.getFullYear()%1e4,M,4)}function ue(T){var M=T.getTimezoneOffset();return(M>0?"-":(M*=-1,"+"))+pad$1(Math.floor(M/60),"0",2)+pad$1(M%60,"0",2)}function ne(T,M){return Q(T,M)+"000"}function Q(T,M){return pad$1(T.getUTCMilliseconds(),M,3)}function ie(T,M){return pad$1(T.getUTCSeconds(),M,2)}function se(T,M){return pad$1(T.getUTCMinutes(),M,2)}function ae(T,M){return pad$1(T.getUTCHours()%12||12,M,2)}function oe(T,M){return pad$1(T.getUTCHours(),M,2)}function fe(T){return n[T.getUTCHours()>=12?1:0]}function le(T,M){return pad$1(T.getUTCDate(),M,2)}function Y(T,M){return pad$1(1+utcDay$1.count(utcYear$1.floor(T),T),M,3)}function re(T,M){return pad$1(T.getUTCMonth()+1,M,2)}function he(T){return l[T.getUTCMonth()]}function de(T){return s[T.getUTCMonth()]}function ve(T){return a[T.getUTCDay()]}function me(T){return o[T.getUTCDay()]}function ye(T){var M=T.getUTCDay();return M===0?7:M}function xe(T,M){return pad$1(utcSunday$1.count(utcYear$1.floor(T),T),M,2)}function J(T,M){var k=T.getUTCDay();T=k>=4||k===0?utcThursday$1.floor(T):utcThursday$1.ceil(T);var A=utcYear$1.floor(T);return pad$1(utcThursday$1.count(A,T)+(A.getUTCDay()===4?1:0),M,4)}function ce(T){return T.getUTCDay()}function Ce(T,M){return pad$1(utcMonday$1.count(utcYear$1.floor(T),T),M,2)}function pe(T,M){return pad$1(T.getUTCFullYear()%100,M,2)}function Te(T,M){return pad$1(T.getUTCFullYear()%1e4,M,4)}function Ae(){return"+0000"}function Oe(){return"%"}function we(T){return T.getTime()}function _e(T){return Math.floor(T.getTime()/1e3)}function Pe(T,M,k){var A=numberRe$1.exec(M.slice(k,k+6));return A?(T.L=Math.floor(parseFloat(A[0])/1e3),k+A[0].length):-1}function De(T,M,k){var A=numberRe$1.exec(M.slice(k,k+3));return A?(T.L=+A[0],k+A[0].length):-1}function Me(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.S=+A[0],k+A[0].length):-1}function $e(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.M=+A[0],k+A[0].length):-1}function Ie(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.H=+A[0],k+A[0].length):-1}function Fe(T,M,k){var A=u.exec(M.slice(k));return A?(T.p=c[A[0].toLowerCase()],k+A[0].length):-1}function Le(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.d=+A[0],k+A[0].length):-1}function ke(T,M,k){var A=numberRe$1.exec(M.slice(k,k+3));return A?(T.m=0,T.d=+A[0],k+A[0].length):-1}function Ne(T,M,k){var A=h.exec(M.slice(k));return A?(T.w=p[A[0].toLowerCase()],k+A[0].length):-1}function Be(T,M,k){var A=f.exec(M.slice(k));return A?(T.w=d[A[0].toLowerCase()],k+A[0].length):-1}function Ge(T,M,k){var A=numberRe$1.exec(M.slice(k,k+1));return A?(T.u=+A[0],k+A[0].length):-1}function Ve(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.U=+A[0],k+A[0].length):-1}function je(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.V=+A[0],k+A[0].length):-1}function We(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.W=+A[0],k+A[0].length):-1}function He(T,M,k){var A=numberRe$1.exec(M.slice(k,k+1));return A?(T.w=+A[0],k+A[0].length):-1}function Ue(T,M,k){var A=m.exec(M.slice(k));return A?(T.m=y[A[0].toLowerCase()],k+A[0].length):-1}function ze(T,M,k){var A=g.exec(M.slice(k));return A?(T.m=v[A[0].toLowerCase()],k+A[0].length):-1}function Ke(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.m=parseFloat(A[0])-1,k+A[0].length):-1}function Xe(T,M,k){return S(T,t,M,k)}function Ye(T,M,k){return S(T,e,M,k)}function qe(T,M,k){return S(T,r,M,k)}function Ze(T,M,k){var A=numberRe$1.exec(M.slice(k));return A?(T.Q=+A[0],k+A[0].length):-1}function Je(T,M,k){var A=numberRe$1.exec(M.slice(k));return A?(T.Q=+A[0]*1e3,k+A[0].length):-1}function Qe(T,M,k){var A=numberRe$1.exec(M.slice(k,k+2));return A?(T.y=+A[0]+(+A[0]>68?1900:2e3),k+A[0].length):-1}function et(T,M,k){var A=numberRe$1.exec(M.slice(k,k+4));return A?(T.y=+A[0],k+A[0].length):-1}function tt(T,M,k){var A=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(M.slice(k,k+6));return A?(T.Z=A[1]?0:-(A[2]+(A[3]||"00")),k+A[0].length):-1}function rt(T,M,k){var A=percentRe$1.exec(M.slice(k,k+1));return A?k+A[0].length:-1}return{format:function(T){var M=P(T,b);return M.toString=function(){return T},M},parse:function(T){var M=w(T,localDate$1);return M.toString=function(){return T},M},utcFormat:function(T){var M=P(T,C);return M.toString=function(){return T},M},utcParse:function(T){var M=w(T,utcDate$1);return M.toString=function(){return T},M}}}var locale$1;setDefaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function setDefaultLocale$1(i){return locale$1=formatLocale$2(i),locale$1}var __extends$2A=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__values$p=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$B=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$k=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$B(arguments[t]));return i},_a,DefaultTimeFormats;(function(i){i[i.MILLISECOND=0]="MILLISECOND",i[i.SECOND=1]="SECOND",i[i.MINUTE=2]="MINUTE",i[i.HOUR=3]="HOUR",i[i.SHORT_MONTH=4]="SHORT_MONTH",i[i.MONTH=5]="MONTH",i[i.YEAR=6]="YEAR"})(DefaultTimeFormats||(DefaultTimeFormats={}));var formatStrings=(_a={},_a[DefaultTimeFormats.MILLISECOND]=".%L",_a[DefaultTimeFormats.SECOND]=":%S",_a[DefaultTimeFormats.MINUTE]="%I:%M",_a[DefaultTimeFormats.HOUR]="%I %p",_a[DefaultTimeFormats.SHORT_MONTH]="%b %d",_a[DefaultTimeFormats.MONTH]="%B",_a[DefaultTimeFormats.YEAR]="%Y",_a),TimeScale$1=function(i){__extends$2A(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="time",e.year=year$1,e.month=month$1,e.week=sunday$1,e.day=day$1,e.hour=hour$1,e.minute=minute$1,e.second=second$1,e.millisecond=millisecond$1,e.format=locale$1.format,e.tickIntervals=[[e.second,1,durationSecond$1],[e.second,5,5*durationSecond$1],[e.second,15,15*durationSecond$1],[e.second,30,30*durationSecond$1],[e.minute,1,durationMinute$1],[e.minute,5,5*durationMinute$1],[e.minute,15,15*durationMinute$1],[e.minute,30,30*durationMinute$1],[e.hour,1,durationHour$1],[e.hour,3,3*durationHour$1],[e.hour,6,6*durationHour$1],[e.hour,12,12*durationHour$1],[e.day,1,durationDay$1],[e.day,2,2*durationDay$1],[e.week,1,durationWeek$1],[e.month,1,durationMonth$1],[e.month,3,3*durationMonth$1],[e.year,1,durationYear$1]],e._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],e}return t.prototype.calculateDefaultTickFormat=function(e){var r,n,o=DefaultTimeFormats.YEAR,a=function(v){v<o&&(o=v)};try{for(var s=__values$p(e??[]),l=s.next();!l.done;l=s.next()){var u=l.value;this.second.floor(u)<u?a(DefaultTimeFormats.MILLISECOND):this.minute.floor(u)<u?a(DefaultTimeFormats.SECOND):this.hour.floor(u)<u?a(DefaultTimeFormats.MINUTE):this.day.floor(u)<u?a(DefaultTimeFormats.HOUR):this.month.floor(u)<u?a(DefaultTimeFormats.SHORT_MONTH):this.year.floor(u)<u?a(DefaultTimeFormats.MONTH):a(DefaultTimeFormats.YEAR)}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var c=i.prototype.getDomain.call(this),f=Math.min.apply(Math,__spread$k(c)),d=Math.max.apply(Math,__spread$k(c)),h=d-f,p=[formatStrings[o]],g=0;switch(o){case DefaultTimeFormats.SECOND:h/durationMinute$1>1&&p.push(formatStrings[DefaultTimeFormats.MINUTE]);case DefaultTimeFormats.MINUTE:h/durationHour$1>1&&p.push(formatStrings[DefaultTimeFormats.HOUR]);case DefaultTimeFormats.HOUR:g=p.length,h/durationDay$1>1&&p.push(formatStrings[DefaultTimeFormats.SHORT_MONTH]);case DefaultTimeFormats.SHORT_MONTH:case DefaultTimeFormats.MONTH:h/durationYear$1>1&&p.push(formatStrings[DefaultTimeFormats.YEAR])}return g<p.length&&(p=__spread$k(p.slice(0,g),[p.slice(g).join(" ")])),g>0&&(p=__spread$k(p.slice(0,g).reverse(),p.slice(g)),g<p.length&&p.splice(g,0," ")),p.join("")},t.prototype.defaultTickFormat=function(e){var r=this,n=this.calculateDefaultTickFormat(e);return function(o){return r.format(n)(o)}},t.prototype.tickInterval=function(e){var r,n=e.interval,o=e.start,a=e.stop,s=e.step,l=e.offset;if(typeof n=="number"){var u=Math.max(0,n-(l??0)),c=this.tickIntervals,f=Math.abs(a-o)/u,d=complexBisectRight$1(c,f,function(h){return h[2]});d===c.length?(s=tickStep$1(o/durationYear$1,a/durationYear$1,u),n=this.year):d?(r=__read$B(c[f/c[d-1][2]<c[d][2]/f?d-1:d],2),n=r[0],s=r[1]):(s=Math.max(tickStep$1(o,a,n),1),n=this.millisecond)}return s==null?n:n.every(s)},Object.defineProperty(t.prototype,"domain",{get:function(){return i.prototype.getDomain.call(this).map(function(e){return new Date(e)})},set:function(e){i.prototype.setDomain.call(this,e.map(function(r){return r instanceof Date?+r:+new Date(+r)}))},enumerable:!0,configurable:!0}),t.prototype.invert=function(e){return new Date(i.prototype.invert.call(this,e))},t.prototype.ticks=function(e,r){e===void 0&&(e=10);var n=i.prototype.getDomain.call(this),o=n[0],a=n[n.length-1],s=a<o;if(s){var l=o;o=a,a=l}var u=this.tickInterval({interval:e,start:o,stop:a,offset:r}),c=u?u.range(o,a+1):[];return s?c.reverse():c},t.prototype.tickFormat=function(e){var r=e.ticks,n=e.specifier;return n==null?this.defaultTickFormat(r):this.format(n)},t.prototype.nice=function(e){e===void 0&&(e=10);var r=i.prototype.getDomain.call(this),n=this.tickInterval({interval:e,start:r[0],stop:r[r.length-1]});n&&(this.domain=this._nice(r,n))},t.prototype._nice=function(e,r){var n,o;e=e.slice();var a=0,s=e.length-1,l=e[a],u=e[s];return u<l&&(n=__read$B([s,a],2),a=n[0],s=n[1],o=__read$B([u,l],2),l=o[0],u=o[1]),e[a]=r.floor(l),e[s]=r.ceil(u),e},t}(ContinuousScale$1),__extends$2z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1w=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TimeAxis=function(i){__extends$2z(t,i);function t(){var e=i.call(this,new TimeScale$1)||this;e.datumFormat="%m/%d/%y, %H:%M:%S",e.min=void 0,e.max=void 0;var r=e.scale;return r.clamp=!0,r.clamper=filter,e.refreshScale(),e.datumFormatter=r.tickFormat({specifier:e.datumFormat}),e}return t.prototype.normaliseDataDomain=function(e){var r=this,n=r.min,o=r.max;return typeof n=="number"&&(n=new Date(n)),typeof o=="number"&&(o=new Date(o)),e.length>2&&(e=(extent$1(e,isContinuous$1,Number)||[0,1e3]).map(function(a){return new Date(a)})),n instanceof Date&&(e=[n,e[1]]),o instanceof Date&&(e=[e[0],o]),e[0]>e[1]&&(e=[]),e},t.prototype.onLabelFormatChange=function(e,r){r?i.prototype.onLabelFormatChange.call(this,e,r):this.labelFormatter=this.scale.tickFormat({ticks:e})},t.prototype.formatDatum=function(e){return this.datumFormatter(e)},t.className="TimeAxis",t.type="time",__decorate$1w([Validate(AND(OPT_DATE_OR_DATETIME_MS,LESS_THAN("max")))],t.prototype,"min",void 0),__decorate$1w([Validate(AND(OPT_DATE_OR_DATETIME_MS,GREATER_THAN("min")))],t.prototype,"max",void 0),t}(ChartAxis),HdpiOffscreenCanvas=function(){function i(t){var e=t.width,r=e===void 0?600:e,n=t.height,o=n===void 0?300:n,a=t.overrideDevicePixelRatio,s=a===void 0?void 0:a;this.enabled=!0,this.opacity=1,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,o),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(s),this.resize(r,o)}return i.isSupported=function(){return window.OffscreenCanvas!=null},i.prototype.snapshot=function(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()},i.prototype.destroy=function(){this.imageSource.close()},i.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),i.prototype.setPixelRatio=function(t){var e=t||window.devicePixelRatio;e!==this.pixelRatio&&(HdpiCanvas$1.overrideScale(this.context,e),this._pixelRatio=e,this.resize(this.width,this.height))},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),i.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.canvas,o=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),o.resetTransform(),this._width=t,this._height=e}},i}(),__assign$A=function(){return __assign$A=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$A.apply(this,arguments)},__awaiter$e=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$e=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$A=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$j=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$A(arguments[t]));return i},__values$o=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Scene$1=function(){function i(t){var e,r;this.id=createId$1(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1};var n=t.document,o=n===void 0?window.document:n,a=t.mode,s=a===void 0?windowValue("agChartsSceneRenderModel")||"adv-composite":a,l=t.width,u=t.height,c=t.overrideDevicePixelRatio,f=c===void 0?void 0:c;this.overrideDevicePixelRatio=f,this.opts={document:o,mode:s},this.debug.stats=(e=windowValue("agChartsSceneStats"),e??!1),this.debug.dirtyTree=(r=windowValue("agChartsSceneDirtyTree"),r??!1),this.canvas=new HdpiCanvas$1({document:o,width:l,height:u,overrideDevicePixelRatio:f}),this.ctx=this.canvas.context}return Object.defineProperty(i.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!0,configurable:!0}),i.prototype.download=function(t,e){this.canvas.download(t,e)},i.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(i.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),i.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e);var r=t<=0||e<=0,n=t===this.width&&e===this.height;return n||r?!1:(this.pendingSize=[t,e],this.markDirty(),!0)},i.prototype.addLayer=function(t){var e,r=this.opts.mode,n=["composite","dom-composite","adv-composite"];if(n.includes(r)){var o=t||{},a=o.zIndex,s=a===void 0?this._nextZIndex++:a,l=o.name,u=o.zIndexSubOrder,c=this,f=c.width,d=c.height,h=c.overrideDevicePixelRatio,p=r==="dom-composite",g=r==="adv-composite",v=!g||!HdpiOffscreenCanvas.isSupported()?new HdpiCanvas$1({document:this.opts.document,width:f,height:d,domLayer:p,zIndex:s,name:l,overrideDevicePixelRatio:h}):new HdpiOffscreenCanvas({width:f,height:d,overrideDevicePixelRatio:h}),m={id:this._nextLayerId++,name:l,zIndex:s,zIndexSubOrder:u,canvas:v};if(s>=this._nextZIndex&&(this._nextZIndex=s+1),this.layers.push(m),this.sortLayers(),p){var y=this.layers.map(function(x){return x.canvas}).filter(function(x){return x instanceof HdpiCanvas$1}),b=y.findIndex(function(x){return x===v}),C=(e=y[b-1],e??this.canvas);C.element.insertAdjacentElement("afterend",v.element)}return this.debug.consoleLog&&console.log({layers:this.layers}),m.canvas}},i.prototype.removeLayer=function(t){var e=this.layers.findIndex(function(r){return r.canvas===t});e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&console.log({layers:this.layers}))},i.prototype.moveLayer=function(t,e,r){var n=this.layers.find(function(o){return o.canvas===t});n&&(n.zIndex=e,n.zIndexSubOrder=r,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&console.log({layers:this.layers}))},i.prototype.sortLayers=function(){this.layers.sort(function(t,e){var r,n;return compoundAscending(__spread$j([t.zIndex],(r=t.zIndexSubOrder,r??[void 0,void 0]),[t.id]),__spread$j([e.zIndex],(n=e.zIndexSubOrder,n??[void 0,void 0]),[e.id]),ascendingStringNumberUndefined)})},i.prototype.markDirty=function(){this._dirty=!0},Object.defineProperty(i.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._root},set:function(t){t!==this._root&&(this._root&&this._root._setScene(),this._root=t,t&&(t.parent===null&&t.scene&&t.scene!==this&&(t.scene.root=null),t._setScene(this)),this.markDirty())},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){var t,e;this.container=void 0;var r=this.layers;try{for(var n=__values$o(r),o=n.next();!o.done;o=n.next()){var a=o.value;a.canvas.destroy(),delete a.canvas}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.splice(0,r.length)},i.prototype.render=function(t){return __awaiter$e(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b;return __generator$e(this,function(C){return e=t||{},r=e.debugSplitTimes,n=r===void 0?[performance.now()]:r,o=e.extraDebugStats,a=o===void 0?{}:o,s=this,l=s.canvas,u=s.ctx,c=s.root,f=s.layers,d=s.pendingSize,h=s.opts.mode,d&&((b=this.canvas).resize.apply(b,__spread$j(d)),this.layers.forEach(function(x){var w;return(w=x.canvas).resize.apply(w,__spread$j(d))}),this.pendingSize=void 0),c&&!c.visible?(this._dirty=!1,[2]):c&&!this.dirty?(this.debug.consoleLog&&console.log("no-op",{redrawType:RedrawType[c.dirty],tree:this.buildTree(c)}),this.debugStats(n,u,void 0,a),[2]):(p={ctx:u,forceRender:!0,resized:!!d},this.debug.stats==="detailed"&&(p.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),g=!1,(!c||c.dirty>=RedrawType.TRIVIAL)&&(g=!0,l.clear()),c&&this.debug.dirtyTree&&(v=this.buildDirtyTree(c),m=v.dirtyTree,y=v.paths,console.log({dirtyTree:m,paths:y})),c&&g&&(this.debug.consoleLog&&console.log("before",{redrawType:RedrawType[c.dirty],canvasCleared:g,tree:this.buildTree(c)}),c.visible&&(u.save(),c.render(p),u.restore())),h!=="dom-composite"&&f.length>0&&g&&(u.save(),u.setTransform(1/l.pixelRatio,0,0,1/l.pixelRatio,0,0),f.forEach(function(x){var w=x.canvas,P=w.imageSource,S=w.enabled,O=w.opacity;S&&(u.globalAlpha=O,u.drawImage(P,0,0))}),u.restore()),this._dirty=!1,this.debugStats(n,u,p.stats,a),c&&this.debug.consoleLog&&console.log("after",{redrawType:RedrawType[c.dirty],canvasCleared:g,tree:this.buildTree(c)}),[2])})})},i.prototype.debugStats=function(t,e,r,n){var o,a;n===void 0&&(n={});var s=performance.now();if(this.debug.stats){var l=t[0];t.push(s);var u=function(R,F){var I=R+F;return R+" / "+I+" ("+Math.round(100*R/I)+"%)"},c=function(R,F){return Math.round((F-R)*100)/100+"ms"},f=r??{},d=f.layersRendered,h=d===void 0?0:d,p=f.layersSkipped,g=p===void 0?0:p,v=f.nodesRendered,m=v===void 0?0:v,y=f.nodesSkipped,b=y===void 0?0:y,C=t.map(function(R,F){return F>0?c(t[F-1],R):null}).filter(function(R){return R!=null}).join(" + "),x=Object.entries(n).map(function(R){var F=__read$A(R,2),I=F[0],$=F[1];return I+": "+$}).join(" ; "),w=[c(l,s)+" ("+C+")",""+x,this.debug.stats==="detailed"?"Layers: "+u(h,g):null,this.debug.stats==="detailed"?"Nodes: "+u(m,b):null].filter(function(R){return R!=null}),P=15;e.save(),e.fillStyle="white",e.fillRect(0,0,200,10+P*w.length),e.fillStyle="black";var S=0;try{for(var O=__values$o(w),E=O.next();!E.done;E=O.next()){var D=E.value;e.fillText(D,2,10+S++*P)}}catch(R){o={error:R}}finally{try{E&&!E.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}e.restore()}},i.prototype.buildTree=function(t){var e=this,r,n=(r=t instanceof Group$1?t.name:null,r??t.id);return __assign$A({name:n,node:t,dirty:RedrawType[t.dirty]},t.children.map(function(o){return e.buildTree(o)}).reduce(function(o,a){var s=a.name,l=a.node,u=l.visible,c=l.opacity,f=l.zIndex,d=l.zIndexSubOrder;(!u||c<=0)&&(s="( "+s+" )"),t instanceof Group$1&&t.isLayer()&&(s="[ "+s+" ]");var h=[""+(s??"<unknown>"),"z: "+f,d&&"zo: "+d.join(" / ")].filter(function(p){return!!p}).join(" ");return o[h]=a,o},{}))},i.prototype.buildDirtyTree=function(t){var e=this,r;if(t.dirty===RedrawType.NONE)return{dirtyTree:{},paths:[]};var n=t.children.map(function(s){return e.buildDirtyTree(s)}).filter(function(s){return s.paths.length>0}),o=(r=t instanceof Group$1?t.name:null,r??t.id),a=n.length===0?[o]:n.map(function(s){return s.paths}).reduce(function(s,l){return s.concat(l)},[]).map(function(s){return o+"."+s});return{dirtyTree:__assign$A({name:o,node:t,dirty:RedrawType[t.dirty]},n.map(function(s){return s.dirtyTree}).filter(function(s){return s.dirty!==void 0}).reduce(function(s,l){return s[l.name||"<unknown>"]=l,s},{})),paths:a}},i.className="Scene",i}();function createDeprecationWarning(){var i=!1;return function(t,e){if(!i){var r=["AG Charts - Property ["+t+"] is deprecated.",e].filter(function(n){return n!=null}).join(" ");console.warn(r),i=!0}}}function Deprecated(i,t){var e,r=(e=t)===null||e===void 0?void 0:e.default,n=createDeprecationWarning();return function(o,a){if(!o.hasOwnProperty(a)){var s=Symbol("__"+a+"__");Object.defineProperty(o,a,{get:function(){return this[s]},set:function(l){l!==r&&n(a,i),this[s]=l},enumerable:!0,configurable:!1})}}}function DeprecatedAndRenamedTo(i){var t=createDeprecationWarning();return function(e,r){if(!e.hasOwnProperty(r)){var n=function(){return t(r,"Use ["+i+"] instead.")};Object.defineProperty(e,r,{get:function(){return n(),this[i]},set:function(o){o!==this[i]&&(n(),this[i]=o)},enumerable:!0,configurable:!1})}}}var __extends$2y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1v=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$z=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$i=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$z(arguments[t]));return i},__values$n=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SeriesNodePickMode;(function(i){i[i.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",i[i.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",i[i.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",i[i.NEAREST_NODE=3]="NEAREST_NODE"})(SeriesNodePickMode||(SeriesNodePickMode={}));var warnDeprecated=createDeprecationWarning(),warnSeriesDeprecated=function(){return warnDeprecated("series","Use seriesId to get the series ID")},SeriesNodeClickEvent=function(){function i(t,e,r){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=r.id,this._series=r}return Object.defineProperty(i.prototype,"series",{get:function(){return warnSeriesDeprecated(),this._series},enumerable:!0,configurable:!0}),i}(),SeriesItemHighlightStyle=function(){function i(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}return __decorate$1v([Validate(OPT_COLOR_STRING)],i.prototype,"fill",void 0),__decorate$1v([Validate(OPT_NUMBER(0,1))],i.prototype,"fillOpacity",void 0),__decorate$1v([Validate(OPT_COLOR_STRING)],i.prototype,"stroke",void 0),__decorate$1v([Validate(OPT_NUMBER(0))],i.prototype,"strokeWidth",void 0),i}(),SeriesHighlightStyle=function(){function i(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}return __decorate$1v([Validate(OPT_NUMBER(0))],i.prototype,"strokeWidth",void 0),__decorate$1v([Validate(OPT_NUMBER(0,1))],i.prototype,"dimOpacity",void 0),__decorate$1v([Validate(OPT_BOOLEAN)],i.prototype,"enabled",void 0),i}(),HighlightStyle=function(){function i(){this.fill=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.item=new SeriesItemHighlightStyle,this.series=new SeriesHighlightStyle}return __decorate$1v([Deprecated("Use item.fill instead.")],i.prototype,"fill",void 0),__decorate$1v([Deprecated("Use item.stroke instead.")],i.prototype,"stroke",void 0),__decorate$1v([Deprecated("Use item.strokeWidth instead.")],i.prototype,"strokeWidth",void 0),i}(),SeriesTooltip=function(){function i(){this.enabled=!0}return __decorate$1v([Validate(BOOLEAN)],i.prototype,"enabled",void 0),i}(),Series=function(i){__extends$2y(t,i);function t(e){var r=e===void 0?{}:e,n=r.useSeriesGroupLayer,o=n===void 0?!0:n,a=r.useLabelLayer,s=a===void 0?!1:a,l=r.pickModes,u=l===void 0?[SeriesNodePickMode.NEAREST_BY_MAIN_AXIS_FIRST]:l,c=i.call(this)||this;c.id=createId$1(c),c.group=new Group$1,c.directions=[ChartAxisDirection.X,ChartAxisDirection.Y],c.directionKeys={},c.nodeDataRefresh=!0,c._data=void 0,c._visible=!0,c.showInLegend=!0,c.cursor="default",c.highlightStyle=new HighlightStyle;var f=c.group;return c.backgroundGroup=f.appendChild(new Group$1({name:c.id+"-background",layer:o,zIndex:Layers.SERIES_BACKGROUND_ZINDEX})),c.seriesGroup=f.appendChild(new Group$1({name:c.id+"-series",layer:o,zIndex:Layers.SERIES_LAYER_ZINDEX})),c.pickGroup=c.seriesGroup.appendChild(new Group$1),c.highlightGroup=f.appendChild(new Group$1({name:c.id+"-highlight",layer:!0,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[c.id,15e3],optimiseDirtyTracking:!0})),c.highlightNode=c.highlightGroup.appendChild(new Group$1),c.highlightLabel=c.highlightGroup.appendChild(new Group$1),c.highlightNode.zIndex=0,c.highlightLabel.zIndex=10,c.pickModes=u,s&&(c.labelGroup=f.appendChild(new Group$1({name:c.id+"-series-labels",layer:!0,zIndex:Layers.SERIES_LABEL_ZINDEX}))),c}return Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.nodeDataRefresh=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.visibleChanged()},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"grouped",{set:function(e){if(e===!0)throw new Error("AG Charts - grouped: true is unsupported for series of type: "+this.type)},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){},t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,o=n&&n[e],a=[];return o&&o.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a.push.apply(a,__spread$i(l)):a.push(l))}),a},t.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=!0},t.prototype.visibleChanged=function(){},t.prototype.getOpacity=function(e){var r=this.highlightStyle.series,n=r.dimOpacity,o=n===void 0?1:n,a=r.enabled,s=a===void 0?!0:a,l=1;if(s===!1||o===l)return l;switch(this.isItemIdHighlighted(e)){case"no-highlight":case"highlighted":return l;case"peer-highlighted":case"other-highlighted":return o}},t.prototype.getStrokeWidth=function(e,r){var n=this.highlightStyle.series,o=n.strokeWidth,a=n.enabled,s=a===void 0?!0:a;if(s===!1||o===void 0)return e;switch(this.isItemIdHighlighted(r)){case"highlighted":return o;case"no-highlight":case"other-highlighted":case"peer-highlighted":return e}},t.prototype.isItemIdHighlighted=function(e){var r=this.chart,n=r===void 0?{}:r,o=n.highlightedDatum,a=o===void 0?{}:o,s=a.series,l=s===void 0?void 0:s,u=a.itemId,c=u===void 0?void 0:u,f=n.highlightedDatum,d=f===void 0?void 0:f,h=l!=null;return h?l!==this?"other-highlighted":c===void 0?"highlighted":e&&d!==e&&c!==e.itemId?"peer-highlighted":"highlighted":"no-highlight"},t.prototype.pickNode=function(e,r){var n,o,a=this,s=a.pickModes,l=a.visible,u=a.group;if(!(!l||!u.visible))try{for(var c=__values$n(s),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(r&&!r.includes(d))){var h=void 0;switch(d){case SeriesNodePickMode.EXACT_SHAPE_MATCH:h=this.pickNodeExactShape(e);break;case SeriesNodePickMode.NEAREST_BY_MAIN_AXIS_FIRST:case SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:h=this.pickNodeMainAxisFirst(e,d===SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case SeriesNodePickMode.NEAREST_NODE:h=this.pickNodeClosestDatum(e);break}if(h)return{pickMode:d,match:h.datum,distance:h.distance}}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}},t.prototype.pickNodeExactShape=function(e){var r=this.pickGroup.pickNode(e.x,e.y);if(r)return{datum:r.datum,distance:0}},t.prototype.pickNodeClosestDatum=function(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")},t.prototype.pickNodeMainAxisFirst=function(e,r){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")},t.prototype.fireNodeClickEvent=function(e,r){var n=this.getNodeClickEvent(e,r);this.fireEvent(n)},t.prototype.getNodeClickEvent=function(e,r){return new SeriesNodeClickEvent(e,r,this)},t.prototype.toggleSeriesItem=function(e,r){this.visible=r,this.nodeDataRefresh=!0},t.prototype.isEnabled=function(){return this.visible},t.prototype.fixNumericExtent=function(e,r){if(e===void 0)return[];var n=__read$z(e,2),o=n[0],a=n[1];if(o=+o,a=+a,o===0&&a===0)return[0,1];if(o===1/0&&a===-1/0)return[];if(o===1/0&&(o=0),a===-1/0&&(a=0),o===a)if(r instanceof TimeAxis)o-=1,a+=1;else{var s=Math.abs(o*.01);o-=s,a+=s}return isNumber$1(o)&&isNumber$1(a)?[o,a]:[]},t.highlightedZIndex=1e12,__decorate$1v([Validate(STRING)],t.prototype,"id",void 0),__decorate$1v([Validate(BOOLEAN)],t.prototype,"_visible",void 0),__decorate$1v([Validate(BOOLEAN)],t.prototype,"showInLegend",void 0),__decorate$1v([Validate(STRING)],t.prototype,"cursor",void 0),t}(Observable$1),__extends$2x=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1u=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Padding$1=function(i){__extends$2x(t,i);function t(e,r,n,o){e===void 0&&(e=0),r===void 0&&(r=e),n===void 0&&(n=e),o===void 0&&(o=r);var a=i.call(this)||this;return a.top=e,a.right=r,a.bottom=n,a.left=o,a}return t.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},__decorate$1u([Validate(NUMBER(0))],t.prototype,"top",void 0),__decorate$1u([Validate(NUMBER(0))],t.prototype,"right",void 0),__decorate$1u([Validate(NUMBER(0))],t.prototype,"bottom",void 0),__decorate$1u([Validate(NUMBER(0))],t.prototype,"left",void 0),t}(Observable$1),Gradient=function(){function i(){this.stops=[]}return i}(),__extends$2w=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LinearGradient=function(i){__extends$2w(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.angle=0,e}return t.prototype.createGradient=function(e,r){var n=this.stops,o=this.angle%360*Math.PI/180,a=Math.cos(o),s=Math.sin(o),l=r.width,u=r.height,c=r.x+l*.5,f=r.y+u*.5;if(l>0&&u>0){var d=Math.sqrt(u*u+l*l)*Math.abs(Math.cos(o-Math.atan(u/l)))/2,h=e.createLinearGradient(c+a*d,f+s*d,c-a*d,f-s*d);return n.forEach(function(p){h.addColorStop(p.offset,p.color)}),h}return"black"},t}(Gradient),__extends$2v=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1t=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RectSizing;(function(i){i[i.Content=0]="Content",i[i.Border=1]="Border"})(RectSizing||(RectSizing={}));var Rect=function(i){__extends$2v(t,i);function t(){var e=i.call(this,function(r){return e.renderRect(r)})||this;return e.borderPath=new Path2D$1,e.x=0,e.y=0,e.width=10,e.height=10,e.radius=0,e.crisp=!1,e.gradient=!1,e.lastUpdatePathStrokeWidth=Shape$1.defaultStyles.strokeWidth,e.effectiveStrokeWidth=Shape$1.defaultStyles.strokeWidth,e.microPixelEffectOpacity=1,e}return t.prototype.updateGradientInstance=function(){var e=this.fill;if(this.gradient){if(e){var r=new LinearGradient;r.angle=270,r.stops=[{offset:0,color:Color$1.fromString(e).brighter().toString()},{offset:1,color:Color$1.fromString(e).darker().toString()}],this.gradientInstance=r}}else this.gradientInstance=void 0;this.gradientFill=e},t.prototype.isDirtyPath=function(){var e;return!!(this.lastUpdatePathStrokeWidth!==this.strokeWidth||this.path.isDirty()||this.borderPath.isDirty()||!((e=this.clipPath)===null||e===void 0)&&e.isDirty())},t.prototype.updatePath=function(){var e,r,n,o=this,a=o.path,s=o.borderPath,l=o.crisp,u=this,c=u.x,f=u.y,d=u.width,h=u.height,p=u.strokeWidth,g=(r=(e=this.scene)===null||e===void 0?void 0:e.canvas.pixelRatio,r??1),v=1/g,m=1;if(a.clear({trackChanges:!0}),s.clear({trackChanges:!0}),l&&(d<=v&&(m*=d/v),h<=v&&(m*=h/v),d=this.align(c,d),h=this.align(f,h),c=this.align(c),f=this.align(f)),p)if(d<v){var y=c+v/2;s.moveTo(y,f),s.lineTo(y,f+h),p=v,this.borderClipPath=void 0}else if(h<v){var b=f+v/2;s.moveTo(c,b),s.lineTo(c+d,b),p=v,this.borderClipPath=void 0}else if(p<d&&p<h){var C=p/2;c+=C,f+=C,d-=p,h-=p,this.borderClipPath=void 0,a.rect(c,f,d,h),s.rect(c,f,d,h)}else this.borderClipPath=(n=this.borderClipPath,n??new Path2D$1),this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(c,f,d,h),s.rect(c,f,d,h);else this.borderClipPath=void 0,a.rect(c,f,d,h);this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=m},t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,o=e.width,a=e.height;return new BBox$1(r,n,o,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return o.containsPoint(n.x,n.y)},t.prototype.renderRect=function(e){var r,n,o=this,a=o.stroke,s=o.effectiveStrokeWidth,l=o.fill,u=o.path,c=o.borderPath,f=o.borderClipPath,d=o.opacity,h=o.microPixelEffectOpacity,p=!!a&&!!s;if(l){var g=this,v=g.gradientFill,m=g.fillOpacity,y=g.fillShadow;l!==v&&this.updateGradientInstance();var b=this.gradientInstance;if(b?e.fillStyle=b.createGradient(e,this.computeBBox()):e.fillStyle=l,e.globalAlpha=d*m*h,y&&y.enabled){var C=(n=(r=this.scene)===null||r===void 0?void 0:r.canvas.pixelRatio,n??1);e.shadowColor=y.color,e.shadowOffsetX=y.xOffset*C,e.shadowOffsetY=y.yOffset*C,e.shadowBlur=y.blur*C}u.draw(e),e.fill(),e.shadowColor="rgba(0, 0, 0, 0)"}if(p){var x=this,w=x.strokeOpacity,P=x.lineDash,S=x.lineDashOffset,O=x.lineCap,E=x.lineJoin;f&&(f.draw(e),e.clip()),c.draw(e),e.strokeStyle=a,e.globalAlpha=d*w*h,e.lineWidth=s,P&&e.setLineDash(P),S&&(e.lineDashOffset=S),O&&(e.lineCap=O),E&&(e.lineJoin=E),e.stroke()}},t.className="Rect",__decorate$1t([ScenePathChangeDetection()],t.prototype,"x",void 0),__decorate$1t([ScenePathChangeDetection()],t.prototype,"y",void 0),__decorate$1t([ScenePathChangeDetection()],t.prototype,"width",void 0),__decorate$1t([ScenePathChangeDetection()],t.prototype,"height",void 0),__decorate$1t([ScenePathChangeDetection()],t.prototype,"radius",void 0),__decorate$1t([ScenePathChangeDetection()],t.prototype,"crisp",void 0),__decorate$1t([ScenePathChangeDetection({changeCb:function(e){return e.updateGradientInstance()}})],t.prototype,"gradient",void 0),t}(Path$1),__extends$2u=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1s=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Background=function(i){__extends$2u(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.node=new Rect,e._visible=!0,e}return Object.defineProperty(t.prototype,"width",{get:function(){return this.node.width},set:function(e){this.node.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.node.height},set:function(e){this.node.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.node.visible=this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill=e,this.node.fill=this._fill},enumerable:!0,configurable:!0}),__decorate$1s([Validate(BOOLEAN)],t.prototype,"_visible",void 0),__decorate$1s([Validate(OPT_COLOR_STRING)],t.prototype,"_fill",void 0),t}(Observable$1),__extends$2t=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1r=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__values$m=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Marker$1=function(i){__extends$2t(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.x=0,e.y=0,e.size=12,e}return t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,o=e.size,a=o/2;return new BBox$1(r-a,n-a,o,o)},t.prototype.applyPath=function(e,r){var n,o,a=this.path,s=this,l=s.x,u=s.y;a.clear();try{for(var c=__values$m(r),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.x,p=d.y,g=d.t;l+=h*e,u+=p*e,g==="move"?a.moveTo(l,u):a.lineTo(l,u)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}a.closePath()},__decorate$1r([ScenePathChangeDetection()],t.prototype,"x",void 0),__decorate$1r([ScenePathChangeDetection()],t.prototype,"y",void 0),__decorate$1r([ScenePathChangeDetection({convertor:Math.abs})],t.prototype,"size",void 0),t}(Path$1),__extends$2s=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Square$1=function(i){__extends$2s(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,o=e.y,a=this.size/2;r.clear(),r.moveTo(this.align(n-a),this.align(o-a)),r.lineTo(this.align(n+a),this.align(o-a)),r.lineTo(this.align(n+a),this.align(o+a)),r.lineTo(this.align(n-a),this.align(o+a)),r.closePath()},t.className="Square",t}(Marker$1),__extends$2r=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MarkerLabel=function(i){__extends$2r(t,i);function t(){var e=i.call(this)||this;e.label=new Text$1,e._marker=new Square$1,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=HdpiCanvas$1.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return Object.defineProperty(t.prototype,"text",{get:function(){return this.label.text},set:function(e){this.label.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.label.fontStyle},set:function(e){this.label.fontStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.label.fontWeight},set:function(e){this.label.fontWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.label.fontSize},set:function(e){this.label.fontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.label.fontFamily},set:function(e){this.label.fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.label.fill},set:function(e){this.label.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},set:function(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerSize",{get:function(){return this._markerSize},set:function(e){this._markerSize!==e&&(this._markerSize=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerFill",{get:function(){return this.marker.fill},set:function(e){this.marker.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStroke",{get:function(){return this.marker.stroke},set:function(e){this.marker.stroke=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStrokeWidth",{get:function(){return this.marker.strokeWidth},set:function(e){this.marker.strokeWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerFillOpacity",{get:function(){return this.marker.fillOpacity},set:function(e){this.marker.fillOpacity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStrokeOpacity",{get:function(){return this.marker.strokeOpacity},set:function(e){this.marker.strokeOpacity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this.update())},enumerable:!0,configurable:!0}),t.prototype.update=function(){var e=this.marker,r=this.markerSize;e.size=r,this.label.x=r/2+this.spacing},t.prototype.render=function(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,i.prototype.render.call(this,e)},t.className="MarkerLabel",t}(Group$1),__extends$2q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Circle$1=function(i){__extends$2q(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this,r=e.x,n=e.y,o=e.path,a=e.size,s=a/2;o.clear(),o.cubicArc(r,n,s,s,0,0,Math.PI*2,0),o.closePath()},t.className="Circle",t}(Marker$1),__extends$2p=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cross=function(i){__extends$2p(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/4.2;i.prototype.applyPath.call(this,e,t.moves)},t.className="Cross",t.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],t}(Marker$1),__extends$2o=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Diamond$1=function(i){__extends$2o(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/2;i.prototype.applyPath.call(this,e,t.moves)},t.className="Diamond",t.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],t}(Marker$1),__extends$2n=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Heart=function(i){__extends$2n(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.rad=function(e){return e/180*Math.PI},t.prototype.updatePath=function(){var e=this,r=e.x,n=e.path,o=e.size,a=e.rad,s=o/4,l=this.y+s/2;n.clear(),n.cubicArc(r-s,l-s,s,s,0,a(130),a(330),0),n.cubicArc(r+s,l-s,s,s,0,a(220),a(50),0),n.lineTo(r,l+s),n.closePath()},t.className="Heart",t}(Marker$1),__extends$2m=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Plus=function(i){__extends$2m(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size/3;i.prototype.applyPath.call(this,e,t.moves)},t.className="Plus",t.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],t}(Marker$1),__extends$2l=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Triangle=function(i){__extends$2l(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updatePath=function(){var e=this.size*1.1;i.prototype.applyPath.call(this,e,t.moves)},t.className="Triangle",t.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],t}(Marker$1);function getMarker$1(i){if(i===void 0&&(i=Square$1),typeof i=="string")switch(i){case"circle":return Circle$1;case"cross":return Cross;case"diamond":return Diamond$1;case"heart":return Heart;case"plus":return Plus;case"triangle":return Triangle;default:return Square$1}return typeof i=="function"?i:Square$1}var __decorate$1q=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$y=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$h=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$y(arguments[t]));return i},__values$l=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LegendOrientation;(function(i){i[i.Vertical=0]="Vertical",i[i.Horizontal=1]="Horizontal"})(LegendOrientation||(LegendOrientation={}));var LegendPosition;(function(i){i.Top="top",i.Right="right",i.Bottom="bottom",i.Left="left"})(LegendPosition||(LegendPosition={}));var LegendLabel=function(){function i(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}return i.prototype.getFont=function(){return getFont$2(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},__decorate$1q([Validate(OPT_NUMBER(0))],i.prototype,"maxLength",void 0),__decorate$1q([Validate(COLOR_STRING)],i.prototype,"color",void 0),__decorate$1q([Validate(OPT_FONT_STYLE)],i.prototype,"fontStyle",void 0),__decorate$1q([Validate(OPT_FONT_WEIGHT)],i.prototype,"fontWeight",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"fontSize",void 0),__decorate$1q([Validate(STRING)],i.prototype,"fontFamily",void 0),__decorate$1q([Validate(OPT_FUNCTION)],i.prototype,"formatter",void 0),i}(),LegendMarker=function(){function i(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}return Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,(e=this.parent)===null||e===void 0||e.onMarkerShapeChange()},enumerable:!0,configurable:!0}),__decorate$1q([Validate(NUMBER(0))],i.prototype,"size",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"padding",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"strokeWidth",void 0),i}(),LegendItem=function(){function i(){this.marker=new LegendMarker,this.label=new LegendLabel,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8}return __decorate$1q([Validate(OPT_NUMBER(0))],i.prototype,"maxWidth",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"paddingX",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"paddingY",void 0),i}(),NO_OP_LISTENER=function(){},LegendListeners=function(){function i(){this.legendItemClick=NO_OP_LISTENER}return __decorate$1q([Validate(FUNCTION)],i.prototype,"legendItemClick",void 0),i}(),Legend=function(){function i(){this.id=createId$1(this),this.group=new Group$1({name:"legend",layer:!0,zIndex:Layers.LEGEND_ZINDEX}),this.itemSelection=Selection$1.select(this.group).selectAll(),this.oldSize=[0,0],this.item=new LegendItem,this.listeners=new LegendListeners,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.orientation=LegendOrientation.Vertical,this._position=LegendPosition.Right,this.reverseOrder=void 0,this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this.item.marker.parent=this}return Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.group.visible=t.length>0&&this.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.group.visible=t&&this.data.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){switch(this._position=t,t){case"right":case"left":this.orientation=LegendOrientation.Vertical;break;case"bottom":case"top":this.orientation=LegendOrientation.Horizontal;break}},enumerable:!0,configurable:!0}),i.prototype.onMarkerShapeChange=function(){this.itemSelection=this.itemSelection.setData([]),this.itemSelection.exit.remove(),this.group.markDirty(this.group,RedrawType.MINOR)},i.prototype.getCharacterWidths=function(t){var e=this.characterWidths;if(e.has(t))return e.get(t);var r={"...":HdpiCanvas$1.getTextSize("...",t).width};return e.set(t,r),r},i.prototype.performLayout=function(t,e){var r=this,n=this.item,o=n.paddingX,a=n.paddingY,s=n.label,l=n.maxWidth,u=n.marker,c=u.size,f=u.padding,d=u.shape,h=n.label,p=h.maxLength,g=p===void 0?1/0:p,v=h.fontStyle,m=h.fontWeight,y=h.fontSize,b=h.fontFamily,C=__spread$h(this.data);this.reverseOrder&&C.reverse();var x=this.itemSelection.setData(C,function(ne,Q){var ie=getMarker$1(d||Q.marker.shape);return Q.id+"-"+Q.itemId+"-"+ie.name});x.exit.remove();var w=x.enter.append(MarkerLabel).each(function(ne,Q){var ie=getMarker$1(d||Q.marker.shape);ne.marker=new ie}),P=this.itemSelection=x.merge(w),S=P.size,O=[],E=s.getFont(),D="...",R=.8,F=l??t*R;P.each(function(ne,Q){var ie,se,ae,oe=(ae=Q.label.text,ae??"<unknown>");ne.markerSize=c,ne.spacing=f,ne.fontStyle=v,ne.fontWeight=m,ne.fontSize=y,ne.fontFamily=b;var fe=oe.split(""),le=!1;oe.length>g&&(oe=""+oe.substring(0,g),le=!0);var Y=c+f+HdpiCanvas$1.getTextSize(oe,E).width;if(Y>F){var re="",he=r.getCharacterWidths(E),de=he[D];try{for(var ve=__values$l(fe),me=ve.next();!me.done;me=ve.next()){var ye=me.value;if(he[ye]||(he[ye]=HdpiCanvas$1.getTextSize(ye,E).width),de+=he[ye],de>F)break;re+=ye}}catch(J){ie={error:J}}finally{try{me&&!me.done&&(se=ve.return)&&se.call(ve)}finally{if(ie)throw ie.error}}oe=re,le=!0}var xe=Q.itemId||Q.id;le?(oe+=D,r.truncatedItems.add(xe)):r.truncatedItems.delete(xe),ne.text=oe,O.push(ne.computeBBox())});var I=O.length&&O[0].height,$=0,B=0,V=0,G=0;switch(t=Math.max(1,t),e=Math.max(1,e),this.orientation){case LegendOrientation.Horizontal:if(!(isFinite(t)&&t>0))return!1;$=0;var U=0;do{var H=0;U=0,B=0,$++;for(var N=0;N<S;){var j=O[N];j.width>B&&(B=j.width),N++,N%$===0&&(H+=B,B=0,U++)}N%$!==0&&(H+=B,U++),V=H+(U-1)*o}while(V>t&&U>1);G=I*$+($-1)*a;break;case LegendOrientation.Vertical:if(!(isFinite(e)&&e>0))return!1;$=S*2;do{$=($>>1)+$%2,B=0;for(var H=0,W=0,z=0,N=0;N<S;){var j=O[N];z||(W+=j.height),j.width>B&&(B=j.width),N++,N%$===0&&(H+=B,B=0,z++)}N%$!==0&&(H+=B,z++),V=H+(z-1)*o,G=W+($-1)*a}while(G>e&&$>1);break}var K=(t-V)/2,X=(e-G)/2,q=0,Z=0;B=0,P.each(function(ne,Q,ie){ne.translationX=Math.floor(K+q),ne.translationY=Math.floor(X+Z);var se=O[ie];se.width>B&&(B=se.width),(ie+1)%$===0?(q+=B+o,Z=0,B=0):Z+=se.height+a}),this.update();var ee=this.size,ue=this.oldSize;ee[0]=V,ee[1]=G,(ee[0]!==ue[0]||ee[1]!==ue[1])&&(ue[0]=ee[0],ue[1]=ee[1])},i.prototype.update=function(){var t=this.item,e=t.marker.strokeWidth,r=t.label.color;this.itemSelection.each(function(n,o){var a=o.marker;n.markerFill=a.fill,n.markerStroke=a.stroke,n.markerStrokeWidth=e,n.markerFillOpacity=a.fillOpacity,n.markerStrokeOpacity=a.strokeOpacity,n.opacity=o.enabled?1:.5,n.color=r})},i.prototype.getDatumForPoint=function(t,e){var r=this.group.pickNode(t,e);if(r&&r.parent)return r.parent.datum},i.className="Legend",__decorate$1q([Validate(BOOLEAN)],i.prototype,"_enabled",void 0),__decorate$1q([Validate(POSITION)],i.prototype,"_position",void 0),__decorate$1q([Validate(OPT_BOOLEAN)],i.prototype,"reverseOrder",void 0),__decorate$1q([Validate(NUMBER(0))],i.prototype,"spacing",void 0),i}(),__values$k=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SizeMonitor=function(){function i(){}return i.init=function(){var t=this,e=window.ResizeObserver;if(e)this.resizeObserver=new e(function(n){var o,a;try{for(var s=__values$k(n),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.contentRect,f=c.width,d=c.height;t.checkSize(t.elements.get(u.target),u.target,f,d)}}catch(h){o={error:h}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}});else{var r=function(){t.elements.forEach(function(n,o){t.checkClientSize(o,n)})};window.setInterval(r,100)}this.ready=!0},i.checkSize=function(t,e,r,n){t&&(!t.size||r!==t.size.width||n!==t.size.height)&&(t.size={width:r,height:n},t.cb(t.size,e))},i.observe=function(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},i.unobserve=function(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)},i.checkClientSize=function(t,e){var r=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,r,n)},i.elements=new Map,i.ready=!1,i}(),__awaiter$d=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$d=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function debouncedAnimationFrame(i){return buildScheduler(function(t){return requestAnimationFrame(t)},i)}function debouncedCallback(i){return buildScheduler(function(t){return setTimeout(t,0)},i)}function buildScheduler(i,t){var e=0,r=!1,n,o,a=function(){return r},s=function(){var u;r=!1,(u=o)===null||u===void 0||u(),o=void 0,n=void 0,e>0&&i(l)},l=function(){var u=e;e=0,r=!0;var c=t({count:u});if(!c){s();return}c.then(s).catch(s)};return{schedule:function(){e===0&&!a()&&i(l),e++},await:function(){return __awaiter$d(this,void 0,void 0,function(){return __generator$d(this,function(u){switch(u.label){case 0:if(!a())return[2];n||(n=new Promise(function(c){o=c})),u.label=1;case 1:return a()?[4,n]:[3,3];case 2:return u.sent(),[3,1];case 3:return[2]}})})}}}var __extends$2k=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1p=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MARKER_SHAPES=["circle","cross","diamond","heart","plus","square","triangle"],MARKER_SHAPE=predicateWithMessage(function(i){return MARKER_SHAPES.includes(i)||Object.getPrototypeOf(i)===Marker$1},"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),SeriesMarker=function(i){__extends$2k(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.enabled=!0,e.shape=Circle$1,e.size=6,e.maxSize=30,e.domain=void 0,e.fill=void 0,e.stroke=void 0,e.strokeWidth=1,e.fillOpacity=void 0,e.strokeOpacity=void 0,e}return __decorate$1p([ValidateAndChangeDetection({validatePredicate:BOOLEAN,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"enabled",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:MARKER_SHAPE,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"shape",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:NUMBER(0),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"size",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:NUMBER(0),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"maxSize",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_NUMBER_ARRAY,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"domain",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_COLOR_STRING,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"fill",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_COLOR_STRING,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"stroke",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_NUMBER(0),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"strokeWidth",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_NUMBER(0,1),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"fillOpacity",void 0),__decorate$1p([ValidateAndChangeDetection({validatePredicate:OPT_NUMBER(0,1),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"strokeOpacity",void 0),t}(ChangeDetectable),__assign$z=function(){return __assign$z=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$z.apply(this,arguments)},__read$x=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$g=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$x(arguments[t]));return i},__values$j=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function jsonDiff(i,t){var e,r,n=classify(i),o=classify(t);if(o==="array")return n!=="array"||i.length!==t.length||t.some(function(g,v){var m;return jsonDiff((m=i)===null||m===void 0?void 0:m[v],g)!=null})?__spread$g(t):null;if(o==="primitive")return n!=="primitive"?__assign$z({},t):i!==t?t:null;var a=i||{},s=t||{},l=new Set(__spread$g(Object.keys(a),Object.keys(s))),u=0,c={},f=function(g){if(a[g]===s[g])return"continue";var v=function(C){c[g]=C,u++},m=classify(a[g]),y=classify(s[g]);if(m!==y||y==="primitive"||y===null||y==="array"&&a[g].length!==s[g].length||y==="class-instance"||y==="function"&&a[g]!==s[g])return v(s[g]),"continue";var b=jsonDiff(a[g],s[g]);b!==null&&v(b)};try{for(var d=__values$j(l),h=d.next();!h.done;h=d.next()){var p=h.value;f(p)}}catch(g){e={error:g}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return u===0?null:c}var DELETE=Symbol("<delete-property>"),NOT_SPECIFIED=Symbol("<unspecified-property>");function jsonMerge(i,t){var e,r,n,o=((n=t)===null||n===void 0?void 0:n.avoidDeepClone)||[],a=i.map(function(p){return classify(p)});if(a.some(function(p){return p==="array"})){var s=i[i.length-1];return s instanceof Array?s.map(function(p){var g=classify(p);return g==="array"?jsonMerge([[],p],t):g==="object"?jsonMerge([{},p],t):p}):s}var l={},u=new Set(i.map(function(p){return p!=null?Object.keys(p):[]}).reduce(function(p,g){return p.concat(g)},[])),c=function(p){var g=i.map(function(b){return b!=null&&p in b?b[p]:NOT_SPECIFIED}).filter(function(b){return b!==NOT_SPECIFIED});if(g.length===0)return"continue";var v=g[g.length-1];if(v===DELETE)return"continue";var m=g.map(function(b){return classify(b)}),y=m[0];if(m.some(function(b){return b!==y&&b!==null}))return l[p]=v,"continue";(y==="array"||y==="object")&&!o.includes(p)?l[p]=jsonMerge(g,t):y==="array"?l[p]=__spread$g(v):l[p]=v};try{for(var f=__values$j(u),d=f.next();!d.done;d=f.next()){var h=d.value;c(h)}}catch(p){e={error:p}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}return l}function jsonApply(i,t,e){e===void 0&&(e={});var r,n,o,a,s=e.path,l=s===void 0?void 0:s,u=e.matcherPath,c=u===void 0?l?l.replace(/(\[[0-9+]+\])/i,"[]"):void 0:u,f=e.skip,d=f===void 0?[]:f,h=e.constructors,p=h===void 0?{}:h,g=e.allowedTypes,v=g===void 0?{}:g;if(i==null)throw new Error("AG Charts - target is uninitialised: "+(l||"<root>"));if(t==null)return i;var m=classify(i),y=function(C){var x=(c?c+".":"")+C;if(d.indexOf(x)>=0)return"continue";var w=t[C],P=(l?l+".":"")+C,S=i,O=S.constructor,E=S[C],D=(r=p[C],r??p[x]);try{var R=classify(E),F=classify(w);if(m==="class-instance"&&!(C in i||S.hasOwnProperty(C)))return console.warn("AG Charts - unable to set ["+P+"] in "+((n=O)===null||n===void 0?void 0:n.name)+" - property is unknown"),"continue";var I=v[x]||[R];if(!(R==="class-instance"&&F==="object")){if(R!=null&&F!=null&&!I.includes(F))return console.warn("AG Charts - unable to set ["+P+"] in "+((o=O)===null||o===void 0?void 0:o.name)+" - can't apply type of ["+F+"], allowed types are: ["+I+"]"),"continue"}if(F==="array")if(D=D??p[x+"[]"],D!=null){var $=w;S[C]=$.map(function(B){return jsonApply(new D,B,__assign$z(__assign$z({},e),{path:P,matcherPath:x+"[]"}))})}else S[C]=w;else F==="class-instance"?S[C]=w:F==="object"?E!=null?jsonApply(E,w,__assign$z(__assign$z({},e),{path:P,matcherPath:x})):D!=null?S[C]=jsonApply(new D,w,__assign$z(__assign$z({},e),{path:P,matcherPath:x})):S[C]=w:S[C]=w}catch(B){return console.warn("AG Charts - unable to set ["+P+"] in ["+((a=O)===null||a===void 0?void 0:a.name)+"]; nested error is: "+B.message),"continue"}};for(var b in t)y(b);return i}function jsonWalk(i,t,e){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var o,a=classify(i),s=e.skip||[];if(a==="array"){i.forEach(function(c,f){var d;jsonWalk.apply(void 0,__spread$g([c,t,e],(d=r)===null||d===void 0?void 0:d.map(function(h){var p;return(p=h)===null||p===void 0?void 0:p[f]})))});return}else if(a!=="object")return;t.apply(void 0,__spread$g([a,i],r));var l=function(c){if(s.indexOf(c)>=0)return"continue";var f=i[c],d=(o=r)===null||o===void 0?void 0:o.map(function(p){var g;return(g=p)===null||g===void 0?void 0:g[c]}),h=classify(f);(h==="object"||h==="array")&&jsonWalk.apply(void 0,__spread$g([f,t,e],d))};for(var u in i)l(u)}function classify(i){return i==null?null:i instanceof HTMLElement?"primitive":i instanceof Array?"array":i instanceof Date?"primitive":typeof i=="object"&&i.constructor===Object?"object":typeof i=="function"?"function":typeof i=="object"&&i.constructor!=null?"class-instance":"primitive"}var __extends$2j=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1o=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$c=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$c=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$w=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$f=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$w(arguments[t]));return i},__values$i=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CartesianSeriesNodeClickEvent=function(i){__extends$2j(t,i);function t(e,r,n,o,a){var s=i.call(this,n,o,a)||this;return s.xKey=e,s.yKey=r,s}return t}(SeriesNodeClickEvent),CartesianSeries=function(i){__extends$2j(t,i);function t(e){var r;e===void 0&&(e={});var n=i.call(this,{useSeriesGroupLayer:!0,pickModes:e.pickModes})||this;n._contextNodeData=[],n.nodeDataDependencies={},n.highlightSelection=Selection$1.select(n.highlightNode).selectAll(),n.highlightLabelSelection=Selection$1.select(n.highlightLabel).selectAll(),n.subGroups=[],n.subGroupId=0,n.seriesItemEnabled=new Map,n.directionKeys=(r={},r[ChartAxisDirection.X]=["xKey"],r[ChartAxisDirection.Y]=["yKey"],r);var o=e.pickGroupIncludes,a=o===void 0?["datumNodes"]:o,s=e.pathsPerSeries,l=s===void 0?1:s,u=e.features,c=u===void 0?[]:u,f=e.pathsZIndexSubOrderOffset,d=f===void 0?[]:f,h=e.renderLayerPerSubSeries,p=h===void 0?!0:h;return n.opts={pickGroupIncludes:a,pathsPerSeries:l,features:c,pathsZIndexSubOrderOffset:d,renderLayerPerSubSeries:p},n}return Object.defineProperty(t.prototype,"contextNodeData",{get:function(){var e;return(e=this._contextNodeData)===null||e===void 0?void 0:e.slice()},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){i.prototype.destroy.call(this),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)},t.prototype.checkDomainXY=function(e,r,n,o){var a=(n&&isContinuous$1(e)||!n&&isDiscrete(e))&&(o&&isContinuous$1(r)||!o&&isDiscrete(r));return a?[e,r]:void 0},t.prototype.checkRangeXY=function(e,r,n,o){return!isNaN(e)&&!isNaN(r)&&n.inRange(e)&&o.inRange(r)},t.prototype.update=function(e){var r=e.seriesRect,n,o;return __awaiter$c(this,void 0,void 0,function(){var a,s,l,u,c,f,d,h,p,g;return __generator$c(this,function(v){switch(v.label){case 0:return a=this,s=a.seriesItemEnabled,l=a.visible,u=a.chart,c=(u===void 0?{}:u).highlightedDatum,f=(c===void 0?{}:c).series,d=f===void 0?void 0:f,h=d?d===this:void 0,p=l&&s.size===0||__spread$f(s.values()).some(function(m){return m===!0}),g={seriesRectWidth:(n=r)===null||n===void 0?void 0:n.width,seriesRectHeight:(o=r)===null||o===void 0?void 0:o.height},jsonDiff(this.nodeDataDependencies,g)!=null&&(this.nodeDataDependencies=g,this.markNodeDataDirty()),[4,this.updateSelections(h,p)];case 1:return v.sent(),[4,this.updateNodes(h,p)];case 2:return v.sent(),[2]}})})},t.prototype.updateSelections=function(e,r){return __awaiter$c(this,void 0,void 0,function(){var n,o=this;return __generator$c(this,function(a){switch(a.label){case 0:return[4,this.updateHighlightSelection(e)];case 1:return a.sent(),r?!this.nodeDataRefresh&&!this.isPathOrSelectionDirty()?[2]:this.nodeDataRefresh?(this.nodeDataRefresh=!1,n=this,[4,this.createNodeData()]):[3,4]:[2];case 2:return n._contextNodeData=a.sent(),[4,this.updateSeriesGroups()];case 3:a.sent(),a.label=4;case 4:return[4,Promise.all(this.subGroups.map(function(s,l){return o.updateSeriesGroupSelections(s,l,e)}))];case 5:return a.sent(),[2]}})})},t.prototype.updateSeriesGroupSelections=function(e,r,n){return __awaiter$c(this,void 0,void 0,function(){var o,a,s,l,u,c,f,d,h,p,g;return __generator$c(this,function(v){switch(v.label){case 0:return o=e.datumSelection,a=e.labelSelection,s=e.markerSelection,l=e.paths,u=this._contextNodeData[r],c=u.nodeData,f=u.labelData,d=u.itemId,[4,this.updatePaths({seriesHighlighted:n,itemId:d,contextData:u,paths:l,seriesIdx:r})];case 1:return v.sent(),h=e,[4,this.updateDatumSelection({nodeData:c,datumSelection:o,seriesIdx:r})];case 2:return h.datumSelection=v.sent(),p=e,[4,this.updateLabelSelection({labelData:f,labelSelection:a,seriesIdx:r})];case 3:return p.labelSelection=v.sent(),s?(g=e,[4,this.updateMarkerSelection({nodeData:c,markerSelection:s,seriesIdx:r})]):[3,5];case 4:g.markerSelection=v.sent(),v.label=5;case 5:return[2]}})})},t.prototype.updateSeriesGroups=function(){var e;return __awaiter$c(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S;return __generator$c(this,function(O){if(r=this,n=r._contextNodeData,o=r.seriesGroup,a=r.subGroups,s=r.opts,l=s.pickGroupIncludes,u=s.pathsPerSeries,c=s.features,f=s.pathsZIndexSubOrderOffset,d=s.renderLayerPerSubSeries,n.length===a.length)return[2];for(n.length<a.length&&a.splice(n.length).forEach(function(E){var D,R,F=E.group,I=E.markerGroup,$=E.paths;if(o.removeChild(F),I&&o.removeChild(I),!l.includes("mainPath"))try{for(var B=__values$i($),V=B.next();!V.done;V=B.next()){var G=V.value;o.removeChild(G)}}catch(U){D={error:U}}finally{try{V&&!V.done&&(R=B.return)&&R.call(B)}finally{if(D)throw D.error}}}),h=n.length;h>a.length;){for(p=d,g=this.subGroupId++,v=g,m=new Group$1({name:this.id+"-series-sub"+g,layer:p,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[this.id,v]}),y=c.includes("markers")?new Group$1({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:p,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[this.id,1e4+g]}):void 0,b=new Group$1({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:p,zIndex:Layers.SERIES_LABEL_ZINDEX,zIndexSubOrder:[this.id,g]}),C=new Group$1({name:this.id+"-series-sub"+this.subGroupId+++"-pickGroup",zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[this.id,1e4+g]}),x=l.includes("mainPath")?C:d?m:o,w=l.includes("datumNodes")?C:m,o.appendChild(m),o.appendChild(b),y&&o.appendChild(y),P=[],S=0;S<u;S++)P[S]=new Path$1,P[S].zIndex=Layers.SERIES_LAYER_ZINDEX,P[S].zIndexSubOrder=[this.id,(e=f[S],(e??0)+v)],x.appendChild(P[S]);m.appendChild(C),a.push({paths:P,group:m,pickGroup:C,markerGroup:y,labelGroup:b,labelSelection:Selection$1.select(b).selectAll(),datumSelection:Selection$1.select(w).selectAll(),markerSelection:y?Selection$1.select(y).selectAll():void 0})}return[2]})})},t.prototype.updateNodes=function(e,r){var n;return __awaiter$c(this,void 0,void 0,function(){var o,a,s,l,u,c,f,d,h=this;return __generator$c(this,function(p){switch(p.label){case 0:return o=this,a=o.highlightSelection,s=o.highlightLabelSelection,l=o._contextNodeData,u=o.seriesItemEnabled,c=o.opts.features,f=c.includes("markers"),d=this.visible&&((n=this._contextNodeData)===null||n===void 0?void 0:n.length)>0&&r,this.group.visible=d,this.seriesGroup.visible=d,this.highlightGroup.visible=d&&!!e,this.seriesGroup.opacity=this.getOpacity(),f?[4,this.updateMarkerNodes({markerSelection:a,isHighlight:!0,seriesIdx:-1})]:[3,2];case 1:return p.sent(),[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:a,isHighlight:!0,seriesIdx:-1})];case 3:p.sent(),p.label=4;case 4:return[4,this.updateLabelNodes({labelSelection:s,seriesIdx:-1})];case 5:return p.sent(),[4,Promise.all(this.subGroups.map(function(g,v){return __awaiter$c(h,void 0,void 0,function(){var m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V;return __generator$c(this,function(G){switch(G.label){case 0:m=g.group,y=g.markerGroup,b=g.datumSelection,C=g.labelSelection,x=g.markerSelection,w=g.paths,P=g.labelGroup,S=g.pickGroup,O=l[v].itemId,E=d&&(V=u.get(O),V??!0),D=this.getOpacity({itemId:O}),m.opacity=D,m.visible=E,S.visible=E,P.visible=E,y&&(y.opacity=D,y.zIndex=m.zIndex>=Layers.SERIES_LAYER_ZINDEX?m.zIndex:m.zIndex+1,y.visible=E);try{for(R=__values$i(w),F=R.next();!F.done;F=R.next())I=F.value,I.parent!==m&&(I.opacity=D,I.visible=E)}catch(U){$={error:U}}finally{try{F&&!F.done&&(B=R.return)&&B.call(R)}finally{if($)throw $.error}}return m.visible?[4,this.updatePathNodes({seriesHighlighted:e,itemId:O,paths:w,seriesIdx:v})]:[2];case 1:return G.sent(),[4,this.updateDatumNodes({datumSelection:b,isHighlight:!1,seriesIdx:v})];case 2:return G.sent(),[4,this.updateLabelNodes({labelSelection:C,seriesIdx:v})];case 3:return G.sent(),f&&x?[4,this.updateMarkerNodes({markerSelection:x,isHighlight:!1,seriesIdx:v})]:[3,5];case 4:G.sent(),G.label=5;case 5:return[2]}})})}))];case 6:return p.sent(),[2]}})})},t.prototype.updateHighlightSelection=function(e){return __awaiter$c(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S;return __generator$c(this,function(O){switch(O.label){case 0:return r=this,n=r.chart,o=n===void 0?{}:n,a=o.highlightedDatum,s=(a===void 0?{}:a).datum,l=s===void 0?void 0:s,u=o.highlightedDatum,c=u===void 0?void 0:u,f=r.highlightSelection,d=r.highlightLabelSelection,h=r._contextNodeData,p=e&&c&&l?c:void 0,g=this,[4,this.updateHighlightSelectionItem({item:p,highlightSelection:f})];case 1:if(g.highlightSelection=O.sent(),this.isLabelEnabled()&&p!=null){m=p.itemId,y=m===void 0?void 0:m;try{for(b=__values$i(h),C=b.next();!C.done&&(x=C.value.labelData,v=x.find(function(E){return E.datum===p.datum&&E.itemId===y}),v==null);C=b.next());}catch(E){P={error:E}}finally{try{C&&!C.done&&(S=b.return)&&S.call(b)}finally{if(P)throw P.error}}}return w=this,[4,this.updateHighlightSelectionLabel({item:v,highlightLabelSelection:d})];case 2:return w.highlightLabelSelection=O.sent(),[2]}})})},t.prototype.pickNodeExactShape=function(e){var r,n,o,a=i.prototype.pickNodeExactShape.call(this,e);if(a)return a;var s=e.x,l=e.y,u=this.opts.pickGroupIncludes,c=u.includes("markers");try{for(var f=__values$i(this.subGroups),d=f.next();!d.done;d=f.next()){var h=d.value,p=h.pickGroup,g=h.markerGroup,v=p.pickNode(s,l);if(!v&&c&&(v=(o=g)===null||o===void 0?void 0:o.pickNode(s,l)),v)return{datum:v.datum,distance:0}}}catch(m){r={error:m}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}},t.prototype.pickNodeClosestDatum=function(e){var r,n,o,a,s,l,u,c,f=e.x,d=e.y,h=this,p=h.xAxis,g=h.yAxis,v=h.group,m=h._contextNodeData,y=v.transformPoint(f,d),b=1/0,C;try{for(var x=__values$i(m),w=x.next();!w.done;w=x.next()){var P=w.value;try{for(var S=(o=void 0,__values$i(P.nodeData)),O=S.next();!O.done;O=S.next()){var E=O.value,D=E.point,R=D===void 0?{}:D,F=R.x,I=F===void 0?NaN:F,$=R.y,B=$===void 0?NaN:$;if(!(isNaN(I)||isNaN(B))){var V=((s=p)===null||s===void 0?void 0:s.inRange(I))&&((l=g)===null||l===void 0?void 0:l.inRange(B));if(V){var G=Math.max(Math.pow(y.x-I,2)+Math.pow(y.y-B,2),0);G<b&&(b=G,C=E)}}}}catch(U){o={error:U}}finally{try{O&&!O.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}}}catch(U){r={error:U}}finally{try{w&&!w.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}if(C){var G=Math.max(Math.sqrt(b)-(c=(u=C.point)===null||u===void 0?void 0:u.size,c??0),0);return{datum:C,distance:G}}},t.prototype.pickNodeMainAxisFirst=function(e,r){var n,o,a,s,l,u,c,f,d=e.x,h=e.y,p=this,g=p.xAxis,v=p.yAxis,m=p.group,y=p._contextNodeData,b=[g,v].filter(function(ee){return ee instanceof CategoryAxis}).map(function(ee){return ee.direction});if(!(r&&b.length===0)){var C=__read$w(b,1),x=C[0],w=x===void 0?ChartAxisDirection.X:x,P=m.transformPoint(d,h),S=w===ChartAxisDirection.X?[P.x,P.y]:[P.y,P.x],O=[1/0,1/0],E=void 0;try{for(var D=__values$i(y),R=D.next();!R.done;R=D.next()){var F=R.value;try{for(var I=(a=void 0,__values$i(F.nodeData)),$=I.next();!$.done;$=I.next()){var B=$.value,V=B.point,G=V===void 0?{}:V,U=G.x,H=U===void 0?NaN:U,N=G.y,j=N===void 0?NaN:N;if(!(isNaN(H)||isNaN(j))){var W=((l=g)===null||l===void 0?void 0:l.inRange(H))&&((u=v)===null||u===void 0?void 0:u.inRange(j));if(W){for(var z=w===ChartAxisDirection.X?[H,j]:[j,H],K=!0,X=0;X<z.length;X++){var q=Math.abs(z[X]-S[X]);if(q>O[X]){K=!1;break}q<O[X]&&(O[X]=q,O.fill(1/0,X+1,O.length))}K&&(E=B)}}}}catch(ee){a={error:ee}}finally{try{$&&!$.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}}}catch(ee){n={error:ee}}finally{try{R&&!R.done&&(o=D.return)&&o.call(D)}finally{if(n)throw n.error}}if(E){var Z=Math.max(Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2))-(f=(c=E.point)===null||c===void 0?void 0:c.size,f??0),0);return{datum:E,distance:Z}}}},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(e,r),this.nodeDataRefresh=!0):i.prototype.toggleSeriesItem.call(this,e,r)},t.prototype.isEnabled=function(){var e,r;if(this.seriesItemEnabled.size>0){try{for(var n=__values$i(this.seriesItemEnabled),o=n.next();!o.done;o=n.next()){var a=__read$w(o.value,2),s=a[1];if(s)return!0}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return!1}return i.prototype.isEnabled.call(this)},t.prototype.isPathOrSelectionDirty=function(){return!1},t.prototype.getLabelData=function(){return[]},t.prototype.updatePaths=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return e.paths.forEach(function(n){return n.visible=!1}),[2]})})},t.prototype.updatePathNodes=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return[2]})})},t.prototype.updateHighlightSelectionItem=function(e){return __awaiter$c(this,void 0,void 0,function(){var r,n,o,a,s,l;return __generator$c(this,function(u){return r=this.opts.features,n=r.includes("markers"),o=e.item,a=e.highlightSelection,s=o?[o]:[],n?(l=a,[2,this.updateMarkerSelection({nodeData:s,markerSelection:l,seriesIdx:-1})]):[2,this.updateDatumSelection({nodeData:s,datumSelection:a,seriesIdx:-1})]})})},t.prototype.updateHighlightSelectionLabel=function(e){return __awaiter$c(this,void 0,void 0,function(){var r,n,o;return __generator$c(this,function(a){return r=e.item,n=e.highlightLabelSelection,o=r?[r]:[],[2,this.updateLabelSelection({labelData:o,labelSelection:n,seriesIdx:-1})]})})},t.prototype.updateDatumSelection=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return[2,e.datumSelection]})})},t.prototype.updateDatumNodes=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return[2]})})},t.prototype.updateMarkerSelection=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return[2,e.markerSelection]})})},t.prototype.updateMarkerNodes=function(e){return __awaiter$c(this,void 0,void 0,function(){return __generator$c(this,function(r){return[2]})})},t}(Series),CartesianSeriesMarker=function(i){__extends$2j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e}return __decorate$1o([ValidateAndChangeDetection({validatePredicate:OPT_FUNCTION,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"formatter",void 0),t}(SeriesMarker);function sleep(i){return new Promise(function(t){setTimeout(function(){return t(void 0)},i)})}var __decorate$1n=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__values$h=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},DEFAULT_TOOLTIP_CLASS="ag-chart-tooltip",defaultTooltipCss$1=`
.ag-chart-tooltip {
    transition: transform 0.1s ease;
    display: table;
    position: absolute;
    left: 0px;
    top: 0px;
    user-select: none;
    pointer-events: none;
    white-space: nowrap;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: black;
    background: rgb(244, 244, 244);
    border-radius: 5px;
    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);
}

.ag-chart-tooltip-no-animation {
    transition: none !important;
}

.ag-chart-tooltip-hidden {
    visibility: hidden;
}

.ag-chart-tooltip-title {
    font-weight: bold;
    padding: 7px;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    color: white;
    background-color: #888888;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}

.ag-chart-tooltip-content {
    padding: 7px;
    line-height: 1.7em;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    overflow: hidden;
}

.ag-chart-tooltip-content:empty {
    padding: 0;
    height: 7px;
}

.ag-chart-tooltip-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 6px solid #989898;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: #989898;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-tooltip-arrow::after {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid black;

    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: rgb(244, 244, 244);
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function toTooltipHtml$1(i,t){if(typeof i=="string")return i;t=t||{};var e=i.content,r=e===void 0?t.content||"":e,n=i.title,o=n===void 0?t.title||void 0:n,a=i.color,s=a===void 0?t.color||"white":a,l=i.backgroundColor,u=l===void 0?t.backgroundColor||"#888":l,c=o?'<div class="'+DEFAULT_TOOLTIP_CLASS+`-title"
        style="color: `+s+"; background-color: "+u+'">'+o+"</div>":"";return c+'<div class="'+DEFAULT_TOOLTIP_CLASS+'-content">'+r+"</div>"}var Tooltip=function(){function i(t,e,r){var n=this;this.enabled=!0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.tracking=!0,this.showTimeout=0,this.constrained=!1;var o=e.body,a=e.createElement("div");if(this.element=o.appendChild(a),this.element.classList.add(DEFAULT_TOOLTIP_CLASS),this.container=r,this.observedElement=t,window.IntersectionObserver){var s=new IntersectionObserver(function(u){var c,f;try{for(var d=__values$h(u),h=d.next();!h.done;h=d.next()){var p=h.value;p.target===n.observedElement()&&p.intersectionRatio===0&&n.toggle(!1)}}catch(g){c={error:g}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}},{root:o});s.observe(this.observedElement()),this.observer=s}if(i.tooltipDocuments.indexOf(e)<0){var l=e.createElement("style");l.innerHTML=defaultTooltipCss$1,e.head.insertBefore(l,e.head.querySelector("style")),i.tooltipDocuments.push(e)}}return i.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.observedElement())},i.prototype.isVisible=function(){var t=this.element;return!t.classList.contains(DEFAULT_TOOLTIP_CLASS+"-hidden")},i.prototype.updateClass=function(t,e){var r=this,n=r.element,o=r.class,a=r.lastClass,s=!n.classList.contains(DEFAULT_TOOLTIP_CLASS+"-hidden"),l=function(u,c){var f=DEFAULT_TOOLTIP_CLASS+"-"+u;c?n.classList.add(f):n.classList.remove(f)};l("no-animation",!s&&!!t),l("hidden",!t),l("arrow",!e),o!==a&&(a&&n.classList.remove(a),o&&n.classList.add(o),this.lastClass=o)},i.prototype.show=function(t,e,r){var n=this;r===void 0&&(r=!1);var o=this.element;if(e!==void 0)o.innerHTML=e;else if(!o.innerHTML)return;var a=t.pageX-o.clientWidth/2,s=t.pageY-o.clientHeight-8;if(this.constrained=!1,this.container()){var l=o.getBoundingClientRect().width,u=0,c=window.innerWidth-l-1;a<u?(a=u,this.constrained=!0):a>c&&(a=c,this.constrained=!0),s<window.scrollY&&(s=t.pageY+20,this.constrained=!0)}if(o.style.transform="translate("+Math.round(a)+"px, "+Math.round(s)+"px)",this.delay>0&&!r){this.toggle(!1),this.showTimeout=window.setTimeout(function(){n.toggle(!0)},this.delay);return}this.toggle(!0)},i.prototype.toggle=function(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this.constrained)},i.tooltipDocuments=[],__decorate$1n([Validate(BOOLEAN)],i.prototype,"enabled",void 0),__decorate$1n([Validate(OPT_STRING)],i.prototype,"class",void 0),__decorate$1n([Validate(NUMBER(0))],i.prototype,"delay",void 0),__decorate$1n([Validate(BOOLEAN)],i.prototype,"tracking",void 0),i}(),__extends$2i=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$y=function(){return __assign$y=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$y.apply(this,arguments)},__decorate$1m=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$b=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$b=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__values$g=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$v=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$e=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$v(arguments[t]));return i},ChartUpdateType;(function(i){i[i.FULL=0]="FULL",i[i.PROCESS_DATA=1]="PROCESS_DATA",i[i.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",i[i.SERIES_UPDATE=3]="SERIES_UPDATE",i[i.SCENE_RENDER=4]="SCENE_RENDER",i[i.NONE=5]="NONE"})(ChartUpdateType||(ChartUpdateType={}));var Chart=function(i){__extends$2i(t,i);function t(e,r){e===void 0&&(e=window.document);var n=i.call(this)||this;n.id=createId$1(n),n.options={},n.userOptions={},n.background=new Background,n.legend=new Legend,n.legendAutoPadding=new Padding$1,n._debug=!1,n.extraDebugStats={},n._container=void 0,n._data=[],n._autoSize=!1,n.padding=new Padding$1(20),n._title=void 0,n._subtitle=void 0,n._destroyed=!1,n._pendingFactoryUpdates=[],n._performUpdateNoRenderCount=0,n._performUpdateType=ChartUpdateType.NONE,n.seriesToUpdate=new Set,n.performUpdateTrigger=debouncedCallback(function(l){var u=l.count;return __awaiter$b(n,void 0,void 0,function(){var c;return __generator$b(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.performUpdate(u)];case 1:return f.sent(),[3,3];case 2:return c=f.sent(),this._lastPerformUpdateError=c,console.error(c),[3,3];case 3:return[2]}})})}),n._axes=[],n._series=[],n.legendBBox=new BBox$1(0,0,0,0),n._onMouseDown=n.onMouseDown.bind(n),n._onMouseMove=n.onMouseMove.bind(n),n._onMouseUp=n.onMouseUp.bind(n),n._onMouseOut=n.onMouseOut.bind(n),n._onClick=n.onClick.bind(n),n.lastPointerMeta=void 0,n.pointerScheduler=debouncedAnimationFrame(function(){n.handlePointer(n.lastPointerMeta),n.lastPointerMeta=void 0}),n.pointerInsideLegend=!1,n.pointerOverLegendDatum=!1;var o=new Group$1({name:"root"}),a=n.background;a.fill="white",o.appendChild(a.node);var s=n.element=e.createElement("div");return s.classList.add("ag-chart-wrapper"),s.style.position="relative",n.scene=new Scene$1({document:e,overrideDevicePixelRatio:r}),n.scene.debug.consoleLog=n._debug,n.scene.root=o,n.scene.container=s,n.autoSize=!0,SizeMonitor.observe(n.element,function(l){var u=l.width,c=l.height;n.autoSize&&(u===0&&c===0||u===n.width&&c===n.height||(n._lastAutoSize=[u,c],n.resize(u,c)))}),n.tooltip=new Tooltip(function(){return n.scene.canvas.element},e,function(){return n.container}),n.setupDomListeners(n.scene.canvas.element),n}return Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.scene.debug.consoleLog=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var r=this.element.parentNode;r!=null&&r.removeChild(this.element),e&&!this.destroyed&&e.appendChild(this.element),this._container=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.series.forEach(function(r){return r.data=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.scene.width},set:function(e){this.autoSize=!1,this.width!==e&&this.resize(e,this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scene.height},set:function(e){this.autoSize=!1,this.height!==e&&this.resize(this.width,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSize",{get:function(){return this._autoSize},set:function(e){if(this._autoSize!==e){this._autoSize=e;var r=this.element.style;if(e){if(r.display="block",r.width="100%",r.height="100%",!this._lastAutoSize)return;this.resize(this._lastAutoSize[0],this._lastAutoSize[1])}else r.display="inline-block",r.width="auto",r.height="auto"}},enumerable:!0,configurable:!0}),t.prototype.download=function(e,r){this.scene.download(e,r)},Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){var r,n,o=this.scene.root;this._title!=null&&((r=o)===null||r===void 0||r.removeChild(this._title.node)),this._title=e,this._title!=null&&((n=o)===null||n===void 0||n.appendChild(this._title.node))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitle",{get:function(){return this._subtitle},set:function(e){var r,n,o=this.scene.root;this._subtitle!=null&&((r=o)===null||r===void 0||r.removeChild(this._subtitle.node)),this._subtitle=e,this._subtitle!=null&&((n=o)===null||n===void 0||n.appendChild(this._subtitle.node))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._performUpdateType=ChartUpdateType.NONE,this._pendingFactoryUpdates.splice(0),this.tooltip.destroy(),SizeMonitor.unobserve(this.element),this.container=void 0,this.cleanupDomListeners(this.scene.canvas.element),this.scene.destroy(),this.series.forEach(function(e){return e.destroy()}),this.series=[],this._destroyed=!0},t.prototype.log=function(e){this.debug&&console.log(e)},t.prototype.togglePointer=function(e){this.tooltip.enabled?this.tooltip.toggle(e):this.lastPick&&this.changeHighlightDatum()},t.prototype.requestFactoryUpdate=function(e){var r=this._pendingFactoryUpdates,n=r.length;n===0?(r.push(e),this._processCallbacks()):r.splice(1,n-1,e)},t.prototype._processCallbacks=function(){return __awaiter$b(this,void 0,void 0,function(){var e,r;return __generator$b(this,function(n){switch(n.label){case 0:e=this._pendingFactoryUpdates,n.label=1;case 1:return e.length>0?this.updatePending?[4,sleep(1)]:[3,3]:[3,7];case 2:return n.sent(),[3,1];case 3:return n.trys.push([3,5,,6]),[4,e[0]()];case 4:return n.sent(),[3,6];case 5:return r=n.sent(),console.error(r),[3,6];case 6:return e.shift(),[3,1];case 7:return[2]}})})},Object.defineProperty(t.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updatePending",{get:function(){return this._performUpdateType!==ChartUpdateType.NONE||this.lastPointerMeta!=null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:!0,configurable:!0}),t.prototype.awaitUpdateCompletion=function(){return __awaiter$b(this,void 0,void 0,function(){return __generator$b(this,function(e){switch(e.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:return e.sent(),[2]}})})},t.prototype.update=function(e,r){var n,o;e===void 0&&(e=ChartUpdateType.FULL);var a=r||{},s=a.forceNodeDataRefresh,l=s===void 0?!1:s,u=a.seriesToUpdate,c=u===void 0?this.series:u;l&&this.series.forEach(function(p){return p.markNodeDataDirty()});try{for(var f=__values$g(c),d=f.next();!d.done;d=f.next()){var h=d.value;this.seriesToUpdate.add(h)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}e<this._performUpdateType&&(this._performUpdateType=e,this.performUpdateTrigger.schedule())},t.prototype.performUpdate=function(e){return __awaiter$b(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f;return __generator$b(this,function(d){switch(d.label){case 0:switch(r=this,n=r._performUpdateType,o=r.extraDebugStats,a=[performance.now()],s=n,s){case ChartUpdateType.FULL:return[3,1];case ChartUpdateType.PROCESS_DATA:return[3,1];case ChartUpdateType.PERFORM_LAYOUT:return[3,3];case ChartUpdateType.SERIES_UPDATE:return[3,5];case ChartUpdateType.SCENE_RENDER:return[3,7];case ChartUpdateType.NONE:return[3,9]}return[3,10];case 1:return[4,this.processData()];case 2:d.sent(),a.push(performance.now()),this.disablePointer({updateProcessing:!1}),d.label=3;case 3:return this._autoSize&&!this._lastAutoSize&&(l=this._performUpdateNoRenderCount++,l<5)?(this._performUpdateType=ChartUpdateType.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(),[3,10]):(this._performUpdateNoRenderCount=0,[4,this.performLayout()]);case 4:d.sent(),a.push(performance.now()),d.label=5;case 5:return u=this.seriesRect,c=__spread$e(this.seriesToUpdate).map(function(h){return h.update({seriesRect:u})}),this.seriesToUpdate.clear(),[4,Promise.all(c)];case 6:d.sent(),a.push(performance.now()),d.label=7;case 7:return[4,this.scene.render({debugSplitTimes:a,extraDebugStats:o})];case 8:d.sent(),this.extraDebugStats={},d.label=9;case 9:this._performUpdateType=ChartUpdateType.NONE,d.label=10;case 10:return f=performance.now(),this.log({chart:this,durationMs:Math.round((f-a[0])*100)/100,count:e,performUpdateType:ChartUpdateType[n]}),[2]}})})},Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},set:function(e){var r=this;this._axes.forEach(function(n){return r.detachAxis(n)}),this._axes=e.filter(function(n){return!n.linkedTo}).concat(e.filter(function(n){return n.linkedTo})),this._axes.forEach(function(n){return r.attachAxis(n)})},enumerable:!0,configurable:!0}),t.prototype.attachAxis=function(e){this.scene.root.insertBefore(e.gridlineGroup,this.seriesRoot),this.scene.root.insertBefore(e.axisGroup,this.seriesRoot),this.scene.root.insertBefore(e.crossLineGroup,this.seriesRoot)},t.prototype.detachAxis=function(e){this.scene.root.removeChild(e.axisGroup),this.scene.root.removeChild(e.gridlineGroup),this.scene.root.removeChild(e.crossLineGroup)},Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var r=this;this.removeAllSeries(),e.forEach(function(n){return r.addSeries(n)})},enumerable:!0,configurable:!0}),t.prototype.addSeries=function(e,r){var n=this,o=n.series,a=n.seriesRoot,s=o.indexOf(e)<0;if(s){var l=r?o.indexOf(r):-1;return l>=0?(o.splice(l,0,e),a.insertBefore(e.group,r.group)):(o.push(e),a.append(e.group)),this.initSeries(e),!0}return!1},t.prototype.initSeries=function(e){e.chart=this,e.data||(e.data=this.data),e.addEventListener("nodeClick",this.onSeriesNodeClick,this)},t.prototype.freeSeries=function(e){e.chart=void 0,e.removeEventListener("nodeClick",this.onSeriesNodeClick,this)},t.prototype.addSeriesAfter=function(e,r){var n=this,o=n.series,a=n.seriesRoot,s=o.indexOf(e)<0;if(s){var l=r?this.series.indexOf(r):-1;l>=0?(l+1<o.length?a.insertBefore(e.group,o[l+1].group):a.append(e.group),this.initSeries(e),o.splice(l+1,0,e)):(o.length>0?a.insertBefore(e.group,o[0].group):a.append(e.group),this.initSeries(e),o.unshift(e))}return!1},t.prototype.removeSeries=function(e){var r=this.series.indexOf(e);return r>=0?(this.series.splice(r,1),this.freeSeries(e),this.seriesRoot.removeChild(e.group),!0):!1},t.prototype.removeAllSeries=function(){var e=this;this.series.forEach(function(r){e.freeSeries(r),e.seriesRoot.removeChild(r.group)}),this._series=[]},t.prototype.assignSeriesToAxes=function(){var e=this;this.axes.forEach(function(r){r.boundSeries=e.series.filter(function(n){var o=r.direction===ChartAxisDirection.X?n.xAxis:n.yAxis;return o===r})})},t.prototype.assignAxesToSeries=function(e){var r=this;e===void 0&&(e=!1);var n={};this.axes.forEach(function(o){var a=o.direction,s=n[a]||(n[a]=[]);s.push(o)}),this.series.forEach(function(o){o.directions.forEach(function(a){var s=a===ChartAxisDirection.X?o.xAxis:o.yAxis;if(!(s&&!e)){var l=n[a];if(!l){console.warn("AG Charts - no available axis for direction ["+a+"]; check series and axes configuration.");return}var u=o.getKeys(a),c=r.findMatchingAxis(l,o.getKeys(a));if(!c){console.warn("AG Charts - no matching axis for direction ["+a+"] and keys ["+u+"]; check series and axes configuration.");return}a===ChartAxisDirection.X?o.xAxis=c:o.yAxis=c}})})},t.prototype.findMatchingAxis=function(e,r){var n,o,a,s;try{for(var l=__values$g(e),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.keys;if(!f.length)return c;if(r)try{for(var d=(a=void 0,__values$g(r)),h=d.next();!h.done;h=d.next()){var p=h.value;if(f.indexOf(p)>=0)return c}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}},t.prototype.resize=function(e,r){this.scene.resize(e,r)&&(this.background.width=this.width,this.background.height=this.height,this.update(ChartUpdateType.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))},t.prototype.processData=function(){return __awaiter$b(this,void 0,void 0,function(){return __generator$b(this,function(e){switch(e.label){case 0:return(this.axes.length>0||this.series.some(function(r){return r instanceof CartesianSeries}))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),[4,Promise.all(this.series.map(function(r){return r.processData()}))];case 1:return e.sent(),[4,this.updateLegend()];case 2:return e.sent(),[2]}})})},t.prototype.placeLabels=function(){var e,r,n=[],o=[];try{for(var a=__values$g(this.series),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.visible){var u=l.getLabelData();u&&isPointLabelDatum(u[0])&&(o.push(u),n.push(l))}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}var c=this.seriesRect,f=c&&o.length>0?placeLabels(o,{x:0,y:0,width:c.width,height:c.height}):[];return new Map(f.map(function(d,h){return[n[h],d]}))},t.prototype.updateLegend=function(){return __awaiter$b(this,void 0,void 0,function(){var e,r;return __generator$b(this,function(n){return e=[],this.series.filter(function(o){return o.showInLegend}).forEach(function(o){e.push.apply(e,__spread$e(o.getLegendData()))}),r=this.legend.item.label.formatter,r&&e.forEach(function(o){return o.label.text=r({get id(){return doOnce$1(function(){return console.warn("AG Charts - LegendLabelFormatterParams.id is deprecated, use seriesId instead",o)},"LegendLabelFormatterParams.id deprecated"),o.seriesId},itemId:o.itemId,value:o.label.text,seriesId:o.seriesId})}),this.legend.data=e,[2]})})},t.prototype.positionCaptions=function(){var e=this,r=e._title,n=e._subtitle,o=10,a=o;if(!r)return{};if(r.node.visible=r.enabled,r.enabled){r.node.x=this.width/2,r.node.y=a;var s=r.node.computeBBox();s&&(a=s.y+s.height)}if(!n)return{};if(n.node.visible=r.enabled&&n.enabled,r.enabled&&n.enabled){n.node.x=this.width/2,n.node.y=a+o;var l=n.node.computeBBox();l&&(a=l.y+l.height)}return{captionAutoPadding:Math.floor(a)}},t.prototype.positionLegend=function(e){var r=this,n=r.legend,o=r.legendAutoPadding;if(o.clear(),!(!n.enabled||!n.data.length)){var a=this.width,s=this.height-e,l=n.group,u=n.spacing,c=0,f=0,d;switch(n.position){case"bottom":n.performLayout(a-u*2,0),d=l.computeBBox(),l.visible=d.height<Math.floor(s*.5),l.visible?(c=(a-d.width)/2-d.x,f=e+s-d.height-d.y-u,o.bottom=d.height):o.bottom=0;break;case"top":n.performLayout(a-u*2,0),d=l.computeBBox(),l.visible=d.height<Math.floor(s*.5),l.visible?(c=(a-d.width)/2-d.x,f=e+u-d.y,o.top=d.height):o.top=0;break;case"left":n.performLayout(a,s-u*2),d=l.computeBBox(),l.visible=d.width<Math.floor(a*.5),l.visible?(c=u-d.x,f=e+(s-d.height)/2-d.y,o.left=d.width):o.left=0;break;default:n.performLayout(a,s-u*2),d=l.computeBBox(),l.visible=d.width<Math.floor(a*.5),l.visible?(c=a-d.width-d.x-u,f=e+(s-d.height)/2-d.y,o.right=d.width):o.right=0;break}l.visible&&(l.translationX=Math.floor(c+l.translationX),l.translationY=Math.floor(f+l.translationY),this.legendBBox=l.computeBBox())}},t.prototype.setupDomListeners=function(e){e.addEventListener("mousedown",this._onMouseDown),e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseup",this._onMouseUp),e.addEventListener("mouseout",this._onMouseOut),e.addEventListener("click",this._onClick)},t.prototype.cleanupDomListeners=function(e){e.removeEventListener("mousedown",this._onMouseDown),e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseup",this._onMouseUp),e.removeEventListener("mouseout",this._onMouseOut),e.removeEventListener("click",this._onClick)},t.prototype.getSeriesRect=function(){return this.seriesRect},t.prototype.pickSeriesNode=function(e){var r,n,o,a,s=this.tooltip.tracking,l=performance.now(),u=s?void 0:[SeriesNodePickMode.EXACT_SHAPE_MATCH],c=__spread$e(this.series).reverse(),f=void 0;try{for(var d=__values$g(c),h=d.next();!h.done;h=d.next()){var p=h.value;if(!(!p.visible||!p.group.visible)){var g=(o=p.pickNode(e,u),o??{}),v=g.match,m=g.distance;if(!(!v||m==null)&&((!f||f.distance>m)&&(f={series:p,distance:m,datum:v}),m===0))break}}}catch(y){r={error:y}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return this.extraDebugStats.pickSeriesNode=Math.round((a=this.extraDebugStats.pickSeriesNode,(a??0)+(performance.now()-l))),f},t.prototype.onMouseMove=function(e){this.handleLegendMouseMove(e),this.tooltip.enabled&&this.tooltip.delay>0&&this.togglePointer(!1),this.lastPointerMeta={pageX:e.pageX,pageY:e.pageY,offsetX:e.offsetX,offsetY:e.offsetY,event:e},this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(ChartUpdateType.SCENE_RENDER)},t.prototype.disablePointer=function(e){var r=(e===void 0?{}:e).updateProcessing,n=r===void 0?!0:r;this.changeHighlightDatum(void 0,{updateProcessing:n}),this.togglePointer(!1)},t.prototype.handlePointer=function(e){var r=this,n=this.lastPick,o=e.offsetX,a=e.offsetY,s=function(){n&&r.disablePointer()};if(!(this.seriesRect&&this.seriesRect.containsPoint(o,a))){s();return}var l=this.pickSeriesNode({x:o,y:a});if(!l){s();return}if(!n||n.datum!==l.datum){this.onSeriesDatumPick(e,l.datum);return}n.event=e.event,this.tooltip.enabled&&l.series.tooltip.enabled&&this.tooltip.show(this.mergePointerDatum(e,l.datum))},t.prototype.onMouseDown=function(e){},t.prototype.onMouseUp=function(e){},t.prototype.onMouseOut=function(e){this.togglePointer(!1)},t.prototype.onClick=function(e){if(this.checkSeriesNodeClick()){this.update(ChartUpdateType.SERIES_UPDATE);return}if(this.checkLegendClick(e)){this.update(ChartUpdateType.PROCESS_DATA,{forceNodeDataRefresh:!0});return}this.fireEvent({type:"click",event:e})},t.prototype.checkSeriesNodeClick=function(){var e=this.lastPick;if(e&&e.event){var r=e.event,n=e.datum;return n.series.fireNodeClickEvent(r,n),!0}return!1},t.prototype.onSeriesNodeClick=function(e){var r=__assign$y(__assign$y({},e),{type:"seriesNodeClick"});Object.defineProperty(r,"series",{enumerable:!1,get:function(){return e.series}}),this.fireEvent(r)},t.prototype.checkLegendClick=function(e){var r,n=this,o=n.legend,a=n.legend.listeners.legendItemClick,s=o.getDatumForPoint(e.offsetX,e.offsetY);if(!s)return!1;var l=s.id,u=s.itemId,c=s.enabled,f=find(this.series,function(d){return d.id===l});return f?(f.toggleSeriesItem(u,!c),c&&this.togglePointer(!1),c&&((r=this.highlightedDatum)===null||r===void 0?void 0:r.series)===f&&(this.highlightedDatum=void 0),c||(this.highlightedDatum={series:f,itemId:u,datum:void 0}),a({enabled:!c,itemId:u,seriesId:f.id}),!0):!1},t.prototype.handleLegendMouseMove=function(e){if(this.legend.enabled){var r=e.offsetX,n=e.offsetY,o=this.legend.getDatumForPoint(r,n),a=this.legendBBox.containsPoint(r,n),s=a&&o!==void 0;if(!a&&this.pointerInsideLegend){this.pointerInsideLegend=!1,this.element.style.cursor="default",this.changeHighlightDatum();return}s&&!this.pointerOverLegendDatum&&(this.element.style.cursor="pointer",o&&this.legend.truncatedItems.has(o.itemId||o.id)?this.element.title=o.label.text:this.element.title=""),!s&&this.pointerOverLegendDatum&&(this.element.style.cursor="default"),this.pointerInsideLegend=a,this.pointerOverLegendDatum=s;var l=this.highlightedDatum;if(o){var u=o.id,c=o.itemId,f=o.enabled;if(f){var d=find(this.series,function(h){return h.id===u});d&&(this.highlightedDatum={series:d,itemId:c,datum:void 0})}else this.highlightedDatum=void 0}(this.highlightedDatum&&!l||!this.highlightedDatum&&l||this.highlightedDatum&&l&&(this.highlightedDatum.series!==l.series||this.highlightedDatum.itemId!==l.itemId))&&this.update(ChartUpdateType.SERIES_UPDATE)}},t.prototype.onSeriesDatumPick=function(e,r){var n=this.lastPick;if(!(n&&n.datum===r)){this.changeHighlightDatum({datum:r,event:e.event}),r&&(e=this.mergePointerDatum(e,r));var o=this.tooltip.enabled&&r.series.tooltip.enabled,a=o&&r.series.getTooltipHtml(r);a&&this.tooltip.show(e,a)}},t.prototype.mergePointerDatum=function(e,r){if(r.point){var n=r.point,o=n.x,a=n.y,s=this.scene.canvas,l=r.series.group.inverseTransformPoint(o,a),u=s.element.getBoundingClientRect();return __assign$y(__assign$y({},e),{pageX:Math.round(u.left+window.scrollX+l.x),pageY:Math.round(u.top+window.scrollY+l.y),offsetX:Math.round(u.left+l.y),offsetY:Math.round(u.top+l.y)})}return e},t.prototype.changeHighlightDatum=function(e,r){var n=(r??{}).updateProcessing,o=n===void 0?!0:n,a=new Set,s=e||{},l=s.datum,u=(l===void 0?{}:l).series,c=u===void 0?void 0:u,f=s.datum,d=f===void 0?void 0:f,h=this.lastPick,p=(h===void 0?{}:h).datum,g=(p===void 0?{}:p).series,v=g===void 0?void 0:g;if(v&&a.add(v),c&&(a.add(c),this.element.style.cursor=c.cursor),this.lastPick=e,this.highlightedDatum=d,!!o){var m=c==null||v==null;m?this.update(ChartUpdateType.SERIES_UPDATE):this.update(ChartUpdateType.SERIES_UPDATE,{seriesToUpdate:a})}},t.prototype.waitForUpdate=function(e){return e===void 0&&(e=5e3),__awaiter$b(this,void 0,void 0,function(){var r;return __generator$b(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-r>e)throw new Error("waitForUpdate() timeout reached.");return[4,sleep(5)];case 2:return n.sent(),[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:return n.sent(),[2]}})})},__decorate$1m([Validate(BOOLEAN)],t.prototype,"_autoSize",void 0),t}(Observable$1),__extends$2h=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$x=function(){return __assign$x=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$x.apply(this,arguments)},__decorate$1l=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__values$f=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ClipRect=function(i){__extends$2h(t,i);function t(){var e=i.call(this)||this;return e.path=new Path2D$1,e.enabled=!0,e._dirtyPath=!0,e.x=0,e.y=0,e.width=10,e.height=10,e.isContainerNode=!0,e}return t.prototype.containsPoint=function(e,r){var n=this.transformPoint(e,r);return n.x>=this.x&&n.x<=this.x+this.width&&n.y>=this.y&&n.y<=this.y+this.height},t.prototype.updatePath=function(){var e=this,r=e.x,n=e.y,o=e.width,a=e.height,s=e.path;s.clear(),s.rect(r,n,o,a),this._dirtyPath=!1},t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,o=e.width,a=e.height;return new BBox$1(r,n,o,a)},t.prototype.render=function(e){var r,n,o=this,a=o.enabled,s=o.dirty,l=o._dirtyPath,u=o.children,c=e.ctx,f=e.forceRender,d=e.stats;if(s===RedrawType.NONE&&!f){d&&(d.nodesSkipped+=this.nodeCount.count);return}l&&this.updatePath(),a&&(c.save(),this.path.draw(c),c.clip());var h=a?this.computeBBox():void 0,p=__assign$x(__assign$x({},e),{clipBBox:h});try{for(var g=__values$f(u),v=g.next();!v.done;v=g.next()){var m=v.value;m.visible&&(f||m.dirty>RedrawType.NONE)?(c.save(),m.render(p),c.restore()):m.visible||m.markClean()}}catch(y){r={error:y}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}i.prototype.render.call(this,e),a&&c.restore()},t.className="ClipRect",__decorate$1l([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"enabled",void 0),__decorate$1l([ScenePathChangeDetection()],t.prototype,"x",void 0),__decorate$1l([ScenePathChangeDetection()],t.prototype,"y",void 0),__decorate$1l([ScenePathChangeDetection()],t.prototype,"width",void 0),__decorate$1l([ScenePathChangeDetection()],t.prototype,"height",void 0),t}(Node$1),__extends$2g=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1k=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RangeHandle$1=function(i){__extends$2g(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this,r=e.centerX,n=e.centerY,o=e.width,a=e.height,s=r-o/2,l=n-a/2;return new BBox$1(s,l,o,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return o.containsPoint(n.x,n.y)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.centerX,o=e.centerY,a=e.width,s=e.height;r.clear();var l=n-a/2,u=o-s/2,c=this.align(l),f=this.align(u),d=c+this.align(l,a),h=f+this.align(u,s);r.moveTo(c,f),r.lineTo(d,f),r.lineTo(d,h),r.lineTo(c,h),r.lineTo(c,f);var p=this.gripLineGap/2,g=this.gripLineLength/2;r.moveTo(this.align(n-p),this.align(o-g)),r.lineTo(this.align(n-p),this.align(o+g)),r.moveTo(this.align(n+p),this.align(o-g)),r.lineTo(this.align(n+p),this.align(o+g))},t.className="RangeHandle",__decorate$1k([Validate(COLOR_STRING)],t.prototype,"_fill",void 0),__decorate$1k([Validate(COLOR_STRING)],t.prototype,"_stroke",void 0),__decorate$1k([Validate(NUMBER(0))],t.prototype,"_strokeWidth",void 0),__decorate$1k([Validate(LINE_CAP)],t.prototype,"_lineCap",void 0),__decorate$1k([Validate(NUMBER(0))],t.prototype,"_width",void 0),__decorate$1k([Validate(NUMBER(0))],t.prototype,"_gripLineGap",void 0),__decorate$1k([Validate(NUMBER(0))],t.prototype,"_gripLineLength",void 0),__decorate$1k([Validate(NUMBER(0))],t.prototype,"_height",void 0),t}(Path$1),__extends$2f=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1j=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RangeMask=function(i){__extends$2f(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){var r,n;e=Math.min(Math.max(e,0),this.max-this.minRange),!isNaN(e)&&this._min!==e&&(this._min=e,this.dirtyPath=!0,(n=(r=this).onRangeChange)===null||n===void 0||n.call(r))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){var r,n;e=Math.max(Math.min(e,1),this.min+this.minRange),!isNaN(e)&&this._max!==e&&(this._max=e,this.dirtyPath=!0,(n=(r=this).onRangeChange)===null||n===void 0||n.call(r))},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this,r=e.x,n=e.y,o=e.width,a=e.height;return new BBox$1(r,n,o,a)},t.prototype.computeVisibleRangeBBox=function(){var e=this,r=e.x,n=e.y,o=e.width,a=e.height,s=e.min,l=e.max,u=r+o*s,c=r+o*l;return new BBox$1(u,n,c-u,a)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,o=e.y,a=e.width,s=e.height,l=e.min,u=e.max;r.clear();var c=this.align(n),f=this.align(o),d=c+this.align(n,a),h=f+this.align(o,s);r.moveTo(c,f),r.lineTo(d,f),r.lineTo(d,h),r.lineTo(c,h),r.lineTo(c,f);var p=this.align(n+a*l),g=this.align(n+a*u);r.moveTo(p,f),r.lineTo(p,h),r.lineTo(g,h),r.lineTo(g,f),r.lineTo(p,f)},t.className="RangeMask",__decorate$1j([Validate(COLOR_STRING)],t.prototype,"_stroke",void 0),__decorate$1j([Validate(NUMBER(0))],t.prototype,"_strokeWidth",void 0),__decorate$1j([Validate(COLOR_STRING)],t.prototype,"_fill",void 0),__decorate$1j([Validate(NUMBER(0,1))],t.prototype,"_fillOpacity",void 0),__decorate$1j([Validate(LINE_CAP)],t.prototype,"_lineCap",void 0),__decorate$1j([Validate(NUMBER(0))],t.prototype,"_width",void 0),__decorate$1j([Validate(NUMBER(0))],t.prototype,"_height",void 0),__decorate$1j([Validate(NUMBER())],t.prototype,"_min",void 0),__decorate$1j([Validate(NUMBER())],t.prototype,"_max",void 0),t}(Path$1),__extends$2e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$w=function(){return __assign$w=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$w.apply(this,arguments)},RangeSelector=function(i){__extends$2e(t,i);function t(){var e=i.call(this)||this;return e.minHandle=new RangeHandle$1,e.maxHandle=new RangeHandle$1,e.mask=function(){var r=t.defaults,n=r.x,o=r.y,a=r.width,s=r.height,l=r.min,u=r.max,c=new RangeMask;c.x=n,c.y=o,c.width=a,c.height=s,c.min=l,c.max=u;var f=e,d=f.minHandle,h=f.maxHandle;return d.centerX=n,h.centerX=n+a,d.centerY=h.centerY=o+s/2,e.append([c,d,h]),c.onRangeChange=function(){var p,g;e.updateHandles(),(g=(p=e).onRangeChange)===null||g===void 0||g.call(p)},c}(),e._x=t.defaults.x,e._y=t.defaults.y,e._width=t.defaults.width,e._height=t.defaults.height,e._min=t.defaults.min,e._max=t.defaults.max,e.isContainerNode=!0,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.mask.x},set:function(e){this.mask.x=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.mask.y},set:function(e){this.mask.y=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.mask.width},set:function(e){this.mask.width=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.mask.height},set:function(e){this.mask.height=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.mask.min},set:function(e){this.mask.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.mask.max},set:function(e){this.mask.max=e},enumerable:!0,configurable:!0}),t.prototype.updateHandles=function(){var e=this,r=e.minHandle,n=e.maxHandle,o=e.x,a=e.y,s=e.width,l=e.height,u=e.mask;r.centerX=o+s*u.min,n.centerX=o+s*u.max,r.centerY=n.centerY=a+l/2},t.prototype.computeBBox=function(){return this.mask.computeBBox()},t.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty===RedrawType.NONE&&!n){o&&o.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(r);var a=this,s=a.mask,l=a.minHandle,u=a.maxHandle;[s,l,u].forEach(function(c){c.visible&&(n||c.dirty>RedrawType.NONE)&&(r.save(),c.render(__assign$w(__assign$w({},e),{ctx:r,forceRender:n})),r.restore())}),this.markClean({force:!0}),o&&o.nodesRendered++},t.className="Range",t.defaults={x:0,y:0,width:200,height:30,min:0,max:1},t}(Group$1),NavigatorMask=function(){function i(t){this.rm=t}return Object.defineProperty(i.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!0,configurable:!0}),i}(),NavigatorHandle=function(){function i(t){this.rh=t}return Object.defineProperty(i.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!0,configurable:!0}),i}(),__decorate$1i=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Navigator=function(){function i(t){this.rs=new RangeSelector,this.mask=new NavigatorMask(this.rs.mask),this.minHandle=new NavigatorHandle(this.rs.minHandle),this.maxHandle=new NavigatorHandle(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.changedCursor=!1,this._margin=10,this.chart=t,t.scene.root.append(this.rs),this.rs.onRangeChange=function(){return t.update(ChartUpdateType.PERFORM_LAYOUT,{forceNodeDataRefresh:!0})}}return Object.defineProperty(i.prototype,"enabled",{get:function(){return this.rs.visible},set:function(t){this.rs.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.rs.x},set:function(t){this.rs.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.rs.y},set:function(t){this.rs.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.rs.width},set:function(t){this.rs.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.rs.height},set:function(t){this.rs.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this._margin},set:function(t){this._margin=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this.rs.min},set:function(t){this.rs.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this.rs.max},set:function(t){this.rs.max=t},enumerable:!0,configurable:!0}),i.prototype.onDragStart=function(t){if(this.enabled){var e=t.offsetX,r=t.offsetY,n=this.rs,o=n.minHandle,a=n.maxHandle,s=n.x,l=n.width,u=n.min,c=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,r)?this.minHandleDragging=!0:a.containsPoint(e,r)?this.maxHandleDragging=!0:c.containsPoint(e,r)&&(this.panHandleOffset=(e-s)/l-u))}},i.prototype.onDrag=function(t){if(!this.enabled)return;var e=this,r=e.rs,n=e.panHandleOffset,o=r.x,a=r.y,s=r.width,l=r.height,u=r.minHandle,c=r.maxHandle,f=this.chart.element.style,d=t.offsetX,h=t.offsetY,p=o+s*r.min,g=o+s*r.max,v=new BBox$1(p,a,g-p,l);function m(){return Math.min(Math.max((d-o)/s,0),1)}if(u.containsPoint(d,h)||c.containsPoint(d,h)?(this.changedCursor=!0,f.cursor="ew-resize"):v.containsPoint(d,h)?(this.changedCursor=!0,f.cursor="grab"):this.changedCursor&&(this.changedCursor=!1,f.cursor="default"),this.minHandleDragging)r.min=m();else if(this.maxHandleDragging)r.max=m();else if(!isNaN(n)){var y=r.max-r.min,b=Math.min(m()-n,1-y);b<=r.min?(r.min=b,r.max=r.min+y):(r.max=b+y,r.min=r.max-y)}},i.prototype.onDragStop=function(){this.stopHandleDragging()},i.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},__decorate$1i([Validate(NUMBER(0))],i.prototype,"_margin",void 0),i}(),__extends$2d=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$v=function(){return __assign$v=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$v.apply(this,arguments)},__awaiter$a=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$a=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__values$e=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$u=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},CartesianChart=function(i){__extends$2d(t,i);function t(e,r){var n;e===void 0&&(e=window.document);var o=i.call(this,e,r)||this;o.seriesRoot=new ClipRect,o.navigator=new Navigator(o),o._lastAxisWidths=(n={},n[ChartAxisPosition.Top]=0,n[ChartAxisPosition.Bottom]=0,n[ChartAxisPosition.Left]=0,n[ChartAxisPosition.Right]=0,n),o.scene.root.visible=!1;var a=o.scene.root;return a.append(o.seriesRoot),a.append(o.legend.group),o.navigator.enabled=!1,o}return t.prototype.performLayout=function(){return __awaiter$a(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g;return __generator$a(this,function(v){if(this.scene.root.visible=!0,e=this,r=e.width,n=e.height,o=e.legend,a=e.navigator,s=new BBox$1(0,0,r,n),l=this.positionCaptions().captionAutoPadding,u=l===void 0?0:l,this.positionLegend(u),o.enabled&&o.data.length)switch(c=this.legendAutoPadding,f=this.legend.spacing,s.x+=c.left,s.y+=c.top,s.width-=c.left+c.right,s.height-=c.top+c.bottom,this.legend.position){case"right":s.width-=f;break;case"bottom":s.height-=f;break;case"left":s.x+=f,s.width-=f;break;case"top":s.y+=f,s.height-=f;break}return d=this.padding,s.x+=d.left,s.width-=d.left+d.right,s.y+=d.top+u,s.height-=d.top+u+d.bottom,a.enabled&&(h=a.height+a.margin,s.height-=h,a.x=s.x,a.y=s.y+s.height+a.margin,a.width=s.width),p=this.updateAxes(s).seriesRect,this.seriesRect=p,this.series.forEach(function(m){m.group.translationX=Math.floor(p.x),m.group.translationY=Math.floor(p.y)}),g=this.seriesRoot,g.x=p.x,g.y=p.y,g.width=p.width,g.height=p.height,[2]})})},t.prototype.setupDomListeners=function(e){i.prototype.setupDomListeners.call(this,e),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this._onTouchCancel=this.onTouchCancel.bind(this),e.addEventListener("touchstart",this._onTouchStart,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),e.addEventListener("touchend",this._onTouchEnd,{passive:!0}),e.addEventListener("touchcancel",this._onTouchCancel,{passive:!0})},t.prototype.cleanupDomListeners=function(e){i.prototype.cleanupDomListeners.call(this,e),e.removeEventListener("touchstart",this._onTouchStart),e.removeEventListener("touchmove",this._onTouchMove),e.removeEventListener("touchend",this._onTouchEnd),e.removeEventListener("touchcancel",this._onTouchCancel)},t.prototype.getTouchOffset=function(e){var r=this.scene.canvas.element.getBoundingClientRect(),n=e.touches[0];return n?{offsetX:n.clientX-r.left,offsetY:n.clientY-r.top}:void 0},t.prototype.onTouchStart=function(e){var r=this.getTouchOffset(e);r&&this.navigator.onDragStart(r)},t.prototype.onTouchMove=function(e){var r=this.getTouchOffset(e);r&&this.navigator.onDrag(r)},t.prototype.onTouchEnd=function(e){this.navigator.onDragStop()},t.prototype.onTouchCancel=function(e){this.navigator.onDragStop()},t.prototype.onMouseDown=function(e){i.prototype.onMouseDown.call(this,e),this.navigator.onDragStart(e)},t.prototype.onMouseMove=function(e){i.prototype.onMouseMove.call(this,e),this.navigator.onDrag(e)},t.prototype.onMouseUp=function(e){i.prototype.onMouseUp.call(this,e),this.navigator.onDragStop()},t.prototype.onMouseOut=function(e){i.prototype.onMouseOut.call(this,e),this.navigator.onDragStop()},t.prototype.updateAxes=function(e){var r,n,o,a=__assign$v({},this._lastAxisWidths),s=this._axes.map(function(y){return y.position}).reduce(function(y,b){return y.add(b)},new Set);try{for(var l=__values$e(Object.keys(a)),u=l.next();!u.done;u=l.next()){var c=u.value;s.has(c)||delete a[c]}}catch(y){r={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}var f=function(y){return Object.entries(a).every(function(b){var C=__read$u(b,2),x=C[0],w=C[1],P=y[x];return w!=null||P!=null?w===P:!0})},d=function(y){return Object.entries(y).reduce(function(b,C){var x=__read$u(C,2),w=x[0],P=x[1];return P&&Math.abs(P)===1/0&&(P=0),b[w]=P!=null?Math.ceil(P):P,b},{})},h={},p=!1,g=(o=this.seriesRect)===null||o===void 0?void 0:o.clone(),v=0;do{Object.assign(a,h);var m=this.updateAxesPass(a,e.clone(),g);if(h=d(m.axisWidths),p=m.clipSeries,g=m.seriesRect,v++>10){console.warn("AG Charts - unable to find stable axis layout.");break}}while(!f(h));return this.seriesRoot.enabled=p,this._lastAxisWidths=a,{seriesRect:g}},t.prototype.updateAxesPass=function(e,r,n){var o=this,a=this.axes,s={},l={},u=!1,c={},f=n?this.buildCrossLinePadding(n,e):{},d=this.buildAxisBound(r,f),h=this.buildSeriesRect(d,e);return a.forEach(function(p){var g,v,m=p.position,y=o.calculateAxisDimensions({axis:p,seriesRect:h,axisWidths:e,newAxisWidths:l,primaryTickCounts:c,clipSeries:u,addInterAxisPadding:(g=s[m],(g??0)>0)}),b=y.clipSeries,C=y.axisThickness,x=y.axisOffset;s[m]=(v=s[m],(v??0)+1),u=u||b,o.positionAxis({axis:p,axisBound:d,axisOffset:x,axisThickness:C,axisWidths:e,primaryTickCounts:c,seriesRect:h})}),{clipSeries:u,seriesRect:h,axisWidths:l}},t.prototype.buildCrossLinePadding=function(e,r){var n,o,a,s={};this.axes.forEach(function(p){p.crossLines&&p.crossLines.forEach(function(g){g.calculatePadding(s,e)})});try{for(var l=__values$e(Object.entries(s)),u=l.next();!u.done;u=l.next()){var c=__read$u(u.value,2),f=c[0],d=c[1],h=d===void 0?0:d;s[f]=Math.max(h-(a=r[f],a??0),0)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return s},t.prototype.buildAxisBound=function(e,r){var n=e.clone(),o=r.top,a=o===void 0?0:o,s=r.right,l=s===void 0?0:s,u=r.bottom,c=u===void 0?0:u,f=r.left,d=f===void 0?0:f;return n.x+=d,n.y+=a,n.width-=d+l,n.height-=a+c,n},t.prototype.buildSeriesRect=function(e,r){var n=e.clone(),o=r.top,a=r.bottom,s=r.left,l=r.right;return n.x+=s??0,n.y+=o??0,n.width-=(s??0)+(l??0),n.height-=(o??0)+(a??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n},t.prototype.clampToOutsideSeriesRect=function(e,r,n,o){var a=e.x,s=e.y,l=e.width,u=e.height,c=[a,s,a+l,s+u],f=o===1?Math.min:Math.max,d=c[(n==="x"?0:1)+(o===1?0:2)];return f(r,d)},t.prototype.calculateAxisDimensions=function(e){var r,n,o,a,s,l=e.axis,u=e.seriesRect,c=e.axisWidths,f=e.newAxisWidths,d=e.primaryTickCounts,h=e.addInterAxisPadding,p=e.clipSeries,g=this.navigator,v=l.position,m=l.direction,y=function(D){return D instanceof CategoryAxis||D instanceof GroupedCategoryAxis?[0,u.height]:[u.height,0]};l.label.mirrored=["top","right"].includes(v);var b=(r=f[v],r??0);switch(v){case ChartAxisPosition.Top:case ChartAxisPosition.Bottom:l.range=[0,u.width],l.gridLength=u.height;break;case ChartAxisPosition.Right:case ChartAxisPosition.Left:l.range=y(l),l.gridLength=u.width;break}if(l.direction===ChartAxisDirection.X){var C=g.min,x=g.max,w=g.enabled;w?l.visibleRange=[C,x]:l.visibleRange=[0,1]}!p&&(l.visibleRange[0]>0||l.visibleRange[1]<1)&&(p=!0);var P=l.nice?d[m]:void 0;P=l.update(P),d[m]=(n=d[m],n??P);var S=0;if(l.thickness)S=l.thickness;else{var O=l.computeBBox();S=m===ChartAxisDirection.X?O.height:O.width}var E=15;return h&&(S+=E),S=Math.ceil(S),f[v]=(o=f[v],(o??0)+S),l.gridPadding=(a=c[v],(a??0)-(s=f[v],s??0)),{clipSeries:p,axisThickness:S,axisOffset:b}},t.prototype.positionAxis=function(e){var r,n,o,a,s=e.axis,l=e.axisBound,u=e.axisWidths,c=e.seriesRect,f=e.axisOffset,d=e.axisThickness,h=s.position;switch(h){case ChartAxisPosition.Top:s.translation.x=l.x+(r=u.left,r??0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+1+f+d,"y",1);break;case ChartAxisPosition.Bottom:s.translation.x=l.x+(n=u.left,n??0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+l.height+1-d-f,"y",-1);break;case ChartAxisPosition.Left:s.translation.y=l.y+(o=u.top,o??0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+f+d,"x",1);break;case ChartAxisPosition.Right:s.translation.y=l.y+(a=u.top,a??0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+l.width-d-f,"x",-1);break}s.updatePosition()},t.className="CartesianChart",t.type="cartesian",t}(Chart),__extends$2c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__awaiter$9=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$9=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},HierarchyChart=function(i){__extends$2c(t,i);function t(e,r){e===void 0&&(e=window.document);var n=i.call(this,e,r)||this;n._data={},n._seriesRoot=new ClipRect,n.scene.root.visible=!1;var o=n.scene.root;return o.append(n.seriesRoot),o.append(n.legend.group),n}return Object.defineProperty(t.prototype,"seriesRoot",{get:function(){return this._seriesRoot},enumerable:!0,configurable:!0}),t.prototype.performLayout=function(){return __awaiter$9(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d;return __generator$9(this,function(h){if(this.scene.root.visible=!0,e=this,r=e.width,n=e.height,o=e.legend,a=new BBox$1(0,0,r,n),s=this.positionCaptions().captionAutoPadding,l=s===void 0?0:s,this.positionLegend(l),o.enabled&&o.data.length)switch(u=this.legendAutoPadding,c=this.legend.spacing,a.x+=u.left,a.y+=u.top,a.width-=u.left+u.right,a.height-=u.top+u.bottom,this.legend.position){case"right":a.width-=c;break;case"bottom":a.height-=c;break;case"left":a.x+=c,a.width-=c;break;case"top":a.y+=c,a.height-=c;break}return f=this.padding,a.x+=f.left,a.width-=f.left+f.right,a.y+=f.top+l,a.height-=f.top+l+f.bottom,this.seriesRect=a,this.series.forEach(function(p){p.group.translationX=Math.floor(a.x),p.group.translationY=Math.floor(a.y),p.update({seriesRect:a})}),d=this.seriesRoot,d.x=a.x,d.y=a.y,d.width=a.width,d.height=a.height,[2]})})},t.className="HierarchyChart",t.type="hierarchy",t}(Chart),__extends$2b=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),GroupedCategoryChart=function(i){__extends$2b(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.className="GroupedCategoryChart",t.type="groupedCategory",t}(CartesianChart),__extends$2a=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PolarSeries=function(i){__extends$2a(t,i);function t(e){var r,n=e.useLabelLayer,o=n===void 0?!1:n,a=i.call(this,{useLabelLayer:o,pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this;return a.directionKeys=(r={},r[ChartAxisDirection.X]=["angleKey"],r[ChartAxisDirection.Y]=["radiusKey"],r),a.centerX=0,a.centerY=0,a.radius=0,a}return t.prototype.getLabelData=function(){return[]},t}(Series),__extends$29=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__awaiter$8=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$8=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},PolarChart=function(i){__extends$29(t,i);function t(e,r){e===void 0&&(e=window.document);var n=i.call(this,e,r)||this;return n.padding=new Padding$1(40),n.scene.root.append(n.legend.group),n}return Object.defineProperty(t.prototype,"seriesRoot",{get:function(){return this.scene.root},enumerable:!0,configurable:!0}),t.prototype.performLayout=function(){return __awaiter$8(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c;return __generator$8(this,function(f){if(e=new BBox$1(0,0,this.width,this.height),r=this.positionCaptions().captionAutoPadding,n=r===void 0?0:r,this.positionLegend(n),e.y+=n,e.height-=n,this.legend.enabled&&this.legend.data.length)switch(o=this.legendAutoPadding,e.x+=o.left,e.y+=o.top,e.width-=o.left+o.right,e.height-=o.top+o.bottom,a=this.legend.spacing,this.legend.position){case"right":e.width-=a;break;case"bottom":e.height-=a;break;case"left":e.x+=a,e.width-=a;break;case"top":e.y+=a,e.height-=a;break}return s=this.padding,e.x+=s.left,e.y+=s.top,e.width-=s.left+s.right,e.height-=s.top+s.bottom,this.seriesRect=e,l=e.x+e.width/2,u=e.y+e.height/2,c=Math.max(0,Math.min(e.width,e.height)/2),this.series.forEach(function(d){d instanceof PolarSeries&&(d.centerX=l,d.centerY=u,d.radius=c)}),[2]})})},t.className="PolarChart",t.type="polar",t}(Chart);function equal$1(i,t){if(i===t)return!0;if(i&&t&&typeof i=="object"&&typeof t=="object"){if(i.constructor!==t.constructor)return!1;var e,r=void 0;if(Array.isArray(i)){if(e=i.length,e!=t.length)return!1;for(r=e;r--!==0;)if(!equal$1(i[r],t[r]))return!1;return!0}if(i.constructor===RegExp)return i.source===t.source&&i.flags===t.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===t.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===t.toString();var n=Object.keys(i);if(e=n.length,e!==Object.keys(t).length)return!1;for(r=e;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=e;r--!==0;){var o=n[r];if(!equal$1(i[o],t[o]))return!1}return!0}return i!==i&&t!==t}var __read$t=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},interpolatePattern=/(#\{(.*?)\})/g;function interpolate(i,t,e){return i.replace(interpolatePattern,function(){var r=arguments[2],n=__read$t(r.split(":"),2),o=n[0],a=n[1],s=t[o];if(typeof s=="number"){var l=a&&e&&e[a];if(l){var u=l,c=u.locales,f=u.options;return s.toLocaleString(c,f)}return String(s)}if(s instanceof Date){var l=a&&e&&e[a];if(typeof l=="string"){var d=locale$1.format(l);return d(s)}return s.toDateString()}return typeof s=="string"||s&&s.toString?String(s):""})}var __decorate$1h=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Label$1=function(){function i(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return i.prototype.getFont=function(){return getFont$2(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},__decorate$1h([Validate(BOOLEAN)],i.prototype,"enabled",void 0),__decorate$1h([Validate(NUMBER(0))],i.prototype,"fontSize",void 0),__decorate$1h([Validate(STRING)],i.prototype,"fontFamily",void 0),__decorate$1h([Validate(OPT_FONT_STYLE)],i.prototype,"fontStyle",void 0),__decorate$1h([Validate(OPT_FONT_WEIGHT)],i.prototype,"fontWeight",void 0),__decorate$1h([Validate(COLOR_STRING)],i.prototype,"color",void 0),i}(),element=null;function sanitizeHtml(i){return element=element||document.createElement("div"),i?(element.textContent=i,element.innerHTML):""}var __extends$28=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1g=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$7=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$7=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__values$d=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$s=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$d=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$s(arguments[t]));return i},AreaSeriesLabel=function(i){__extends$28(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e}return __decorate$1g([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),t}(Label$1),AreaSeriesTooltip=function(i){__extends$28(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return __decorate$1g([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),__decorate$1g([Validate(OPT_STRING)],t.prototype,"format",void 0),t}(SeriesTooltip),AreaSeriesTag;(function(i){i[i.Fill=0]="Fill",i[i.Stroke=1]="Stroke",i[i.Marker=2]="Marker",i[i.Label=3]="Label"})(AreaSeriesTag||(AreaSeriesTag={}));var AreaSeries=function(i){__extends$28(t,i);function t(){var e=i.call(this,{pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],pickGroupIncludes:["markers"],features:["markers"],renderLayerPerSubSeries:!1})||this;e.tooltip=new AreaSeriesTooltip,e.xData=[],e.yData=[],e.yDomain=[],e.xDomain=[],e.directionKeys={x:["xKey"],y:["yKeys"]},e.marker=new CartesianSeriesMarker,e.label=new AreaSeriesLabel,e.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],e.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.fillOpacity=1,e.strokeOpacity=1,e.lineDash=[0],e.lineDashOffset=0,e._xKey="",e.xName="",e._yKeys=[],e._visibles=[],e.yNames=[],e.strokeWidth=2,e.shadow=void 0;var r=e,n=r.marker,o=r.label;return n.enabled=!1,o.enabled=!1,e}return Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e,this.xData=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKeys",{get:function(){return this._yKeys},set:function(e){equal$1(this._yKeys,e)||(this._yKeys=e,this.yData=[],this.processSeriesItemEnabled())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibles",{get:function(){return this._visibles},set:function(e){this._visibles=e,this.processSeriesItemEnabled()},enumerable:!0,configurable:!0}),t.prototype.processSeriesItemEnabled=function(){var e=this,r=e.seriesItemEnabled,n=e._visibles,o=n===void 0?[]:n;r.clear(),this._yKeys.forEach(function(a,s){var l;return r.set(a,(l=o[s],l??!0))})},t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r},Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var r=e?Math.abs(e):void 0;this._normalizedTo!==r&&(this._normalizedTo=r)},enumerable:!0,configurable:!0}),t.prototype.processData=function(){return __awaiter$7(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,B,R,F,I,$,B,V,G,U,H,N,j,W,z;return __generator$7(this,function(K){if(e=this,r=e.xKey,n=e.yKeys,o=e.seriesItemEnabled,a=e.xAxis,s=e.yAxis,l=e.normalizedTo,u=r&&n.length&&this.data?this.data:[],!a||!s)return[2];c=a.scale instanceof ContinuousScale$1,f=s.scale instanceof ContinuousScale$1,d=l&&isFinite(l),h=[],p=[],g=[],v=new Set(n),m=function(X){if(!(r in X))return doOnce$1(function(){return console.warn("AG Charts - The key '"+r+"' was not found in the data: ",X)},r+" not found in data"),"continue";var q=checkDatum(X[r],c);if(c&&q===void 0)return"continue";g.push(q),p.push({xDatum:q,seriesDatum:X}),n.forEach(function(Z,ee){var ue=h[ee]||(h[ee]=[]);if(!(Z in X)){ue.push(NaN);return}v.delete(Z);var ne=X[Z];if(!o.get(Z))ue.push(NaN);else{var Q=checkDatum(ne,f);ue.push(Q)}})};try{for(y=__values$d(u),b=y.next();!b.done;b=y.next())C=b.value,m(C)}catch(X){U={error:X}}finally{try{b&&!b.done&&(H=y.return)&&H.call(y)}finally{if(U)throw U.error}}for(v.size>0&&(x=JSON.stringify(__spread$d(v)),doOnce$1(function(){return console.log("AG Charts - yKeys "+x+" were not found in the data.")},x+" not found in data.")),this.yData=h,this.xData=p,this.xDomain=c?this.fixNumericExtent(extent$1(g,isContinuous$1),a):g,w=void 0,P=void 0,S=0;S<p.length;S++){O={sum:0,absSum:0};try{for(E=(N=void 0,__values$d(h)),D=E.next();!D.done;D=E.next())B=D.value,!(B[S]===void 0||isNaN(B[S]))&&(R=+B[S],O.absSum+=Math.abs(R),O.sum+=R,O.sum>=(P??0)?P=O.sum:O.sum<=(w??0)&&(w=O.sum))}catch(X){N={error:X}}finally{try{D&&!D.done&&(j=E.return)&&j.call(E)}finally{if(N)throw N.error}}if(d&&l){F=void 0;try{for(I=(W=void 0,__values$d(h)),$=I.next();!$.done;$=I.next()){if(B=$.value,V=+B[S]/O.absSum*l,B[S]=V,!isNaN(V))F=(F??0)+V;else continue;F>=(P??0)?P=F:F<=(w??0)&&(w=F)}}catch(X){W={error:X}}finally{try{$&&!$.done&&(z=I.return)&&z.call(I)}finally{if(W)throw W.error}}}}return d&&l&&(G=.5,w=(w??0)<-l*G?-l:w,P=(P??0)>l*G?l:P),this.yDomain=this.fixNumericExtent(w===void 0&&P===void 0?void 0:[w??0,P??0],s),[2]})})},t.prototype.getDomain=function(e){return e===ChartAxisDirection.X?this.xDomain:this.yDomain},t.prototype.createNodeData=function(){return __awaiter$7(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S=this;return __generator$7(this,function(O){return e=this,r=e.data,n=e.xAxis,o=e.yAxis,a=e.xData,s=e.yData,!r||!n||!o||!a.length||!s.length?[2,[]]:(l=[],u=this,c=u.yKeys,f=u.marker,d=u.label,h=u.fills,p=u.strokes,g=u.id,v=n.scale,m=o.scale,y=m instanceof ContinuousScale$1,b=(v.bandwidth||0)/2,C=new Array(a.length).fill(null).map(function(){return{left:0,right:0}}),x=new Array(a.length).fill(0),w=function(E,D,R,F){var I=v.convert(E)+b,$=C[R][F],B=C[R][F]+D,V=m.convert($,y?clamper$1:void 0),G=m.convert(B,y?clamper$1:void 0);return C[R][F]=B,[{x:I,y:G,size:f.size},{x:I,y:V,size:f.size}]},P=function(E,D,R,F){var I,$=S.normalizedTo&&isFinite(S.normalizedTo),B=$&&y&&isContinuous$1(F),V=!$&&!isNaN(F)||B;V&&(I=x[R]+=D);var G=v.convert(E)+b,U=m.convert(I,y?clamper$1:void 0);return{x:G,y:U,size:f.size}},s.forEach(function(E,D){var R=c[D],F=[],I=[],$={itemId:R,points:[],yValues:[]},B={itemId:R,points:[]};if(l[D]={itemId:R,fillSelectionData:B,labelData:F,nodeData:I,strokeSelectionData:$},!!S.seriesItemEnabled.get(R)){var V=B.points,G=[],U=$.points,H=$.yValues;E.forEach(function(j,W){var z,K=isNaN(j)?void 0:j,X=a[W],q=X.xDatum,Z=X.seriesDatum,ee=(z=a[W+1])===null||z===void 0?void 0:z.xDatum,ue=E[W+1],ne=isNaN(ue)?void 0:ue,Q=P(q,+K,W,Z[R]);f&&I.push({index:W,series:S,itemId:R,datum:Z,yValue:K,yKey:R,point:Q,fill:h[D%h.length],stroke:p[D%p.length]});var ie;d.formatter?ie=d.formatter({value:K,seriesId:g}):ie=isNumber$1(K)?Number(K).toFixed(2):String(K),d&&F.push({index:W,itemId:R,point:Q,label:S.seriesItemEnabled.get(R)&&ie?{text:ie,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0});var se=[q,ee],ae=[K,ne];if(!se.some(function(le){return le==null})){ae.some(function(le){return le==null})&&(ae[0]=0,ae[1]=0);var oe=w(se[0],+ae[0],W,"right");V.push(oe[0]),G.push(oe[1]);var fe=w(se[1],+ae[1],W,"left");V.push(fe[0]),G.push(fe[1]),U.push({x:NaN,y:NaN}),H.push(void 0),U.push(oe[0]),H.push(K),ne!==void 0&&(U.push(fe[0]),H.push(K))}});for(var N=G.length-1;N>=0;N--)V.push(G[N])}}),[2,l])})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.updatePaths=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a,s,l;return __generator$7(this,function(u){return r=e.contextData,n=r.fillSelectionData,o=r.strokeSelectionData,a=__read$s(e.paths,2),s=a[0],l=a[1],s.datum=n,s.tag=AreaSeriesTag.Fill,s.lineJoin="round",s.stroke=void 0,s.pointerEvents=PointerEvents$1.None,l.datum=o,l.tag=AreaSeriesTag.Stroke,l.fill=void 0,l.lineJoin=l.lineCap="round",l.pointerEvents=PointerEvents$1.None,[2]})})},t.prototype.updatePathNodes=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,y,x,w,g,v,O,m,y,b,C,x,w,P,S,O,E,D,R,F;return __generator$7(this,function(I){r=__read$s(e.paths,2),n=r[0],o=r[1],a=e.seriesIdx,s=e.itemId,l=this,u=l.strokes,c=l.fills,f=l.fillOpacity,d=l.strokeOpacity,h=l.strokeWidth,p=l.shadow;{y=n.datum.points,n.fill=c[a%c.length],n.fillOpacity=f,n.strokeOpacity=d,n.strokeWidth=h,n.lineDash=this.lineDash,n.lineDashOffset=this.lineDashOffset,n.fillShadow=p,x=n.path,x.clear({trackChanges:!0}),w=0;try{for(g=__values$d(y),v=g.next();!v.done;v=g.next())O=v.value,w++>0?x.lineTo(O.x,O.y):x.moveTo(O.x,O.y)}catch($){E={error:$}}finally{try{v&&!v.done&&(D=g.return)&&D.call(g)}finally{if(E)throw E.error}}x.closePath(),n.checkPathDirty()}{m=o.datum,y=m.points,b=m.yValues,C=!0,o.stroke=u[a%u.length],o.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:s}),o.strokeOpacity=d,o.lineDash=this.lineDash,o.lineDashOffset=this.lineDashOffset,x=o.path,x.clear({trackChanges:!0}),w=0;try{for(P=__values$d(y),S=P.next();!S.done;S=P.next())O=S.value,b[w++]===void 0?C=!0:C?(x.moveTo(O.x,O.y),C=!1):x.lineTo(O.x,O.y)}catch($){R={error:$}}finally{try{S&&!S.done&&(F=P.return)&&F.call(P)}finally{if(R)throw R.error}}o.checkPathDirty()}return[2]})})},t.prototype.updateMarkerSelection=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f;return __generator$7(this,function(d){return r=e.nodeData,n=e.markerSelection,o=this.marker,a=o.enabled,s=o.shape,l=a&&r?r:[],u=getMarker$1(s),this.marker.isDirty()&&(n=n.setData([]),n.exit.remove()),c=n.setData(l),c.exit.remove(),f=c.enter.append(u).each(function(h){h.tag=AreaSeriesTag.Marker}),[2,c.merge(f)]})})},t.prototype.updateMarkerNodes=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B;return __generator$7(this,function(V){return r=e.markerSelection,n=e.isHighlight,o=this,a=o.id,s=o.xKey,l=o.marker,u=o.seriesItemEnabled,c=o.yKeys,f=o.fills,d=o.strokes,h=o.fillOpacity,p=o.marker.fillOpacity,g=p===void 0?h:p,v=o.strokeOpacity,m=o.highlightStyle,y=m.fill,b=m.stroke,C=m.strokeWidth,x=m.item,w=x.fill,P=w===void 0?y:w,S=x.fillOpacity,O=S===void 0?g:S,E=x.stroke,D=E===void 0?b:E,R=x.strokeWidth,F=R===void 0?C:R,I=l.size,$=l.formatter,B=l.strokeWidth!==void 0?l.strokeWidth:this.strokeWidth,r.each(function(G,U){var H,N,j=c.indexOf(U.yKey),W=n&&P!==void 0?P:l.fill||f[j%f.length],z=n?O:g,K=n&&D!==void 0?D:l.stroke||d[j%f.length],X=n&&F!==void 0?F:B,q=void 0;$&&(q=$({datum:U.datum,xKey:s,yKey:U.yKey,fill:W,stroke:K,strokeWidth:X,size:I,highlighted:n,seriesId:a})),G.fill=q&&q.fill||W,G.stroke=q&&q.stroke||K,G.strokeWidth=q&&q.strokeWidth!==void 0?q.strokeWidth:X,G.fillOpacity=z??1,G.strokeOpacity=(N=(H=l.strokeOpacity,H??v),N??1),G.size=q&&q.size!==void 0?q.size:I,G.translationX=U.point.x,G.translationY=U.point.y,G.visible=G.size>0&&!!u.get(U.yKey)&&!isNaN(U.point.x)&&!isNaN(U.point.y)}),n||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a;return __generator$7(this,function(s){return r=e.labelData,n=e.labelSelection,o=n.setData(r),o.exit.remove(),a=o.enter.append(Text$1).each(function(l){l.tag=AreaSeriesTag.Label}),[2,o.merge(a)]})})},t.prototype.updateLabelNodes=function(e){return __awaiter$7(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c;return __generator$7(this,function(f){return r=e.labelSelection,n=this.label,o=n.enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,r.each(function(d,h){var p=h.point,g=h.label;g&&o?(d.fontStyle=a,d.fontWeight=s,d.fontSize=l,d.fontFamily=u,d.textAlign=g.textAlign,d.textBaseline=g.textBaseline,d.text=g.text,d.x=p.x,d.y=p.y-10,d.fill=c,d.visible=!0):d.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){return new CartesianSeriesNodeClickEvent(this.xKey,r.yKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,o=r.id,a=e.yKey;if(!(n&&a)||!this.seriesItemEnabled.get(a))return"";var s=e.datum,l=s[n],u=s[a],c=this,f=c.xAxis,d=c.yAxis;if(!(f&&d&&isNumber$1(u)))return"";var h=this,p=h.xName,g=h.yKeys,v=h.yNames,m=h.yData,y=h.fills,b=h.strokes,C=h.tooltip,x=h.marker,w=x.size,P=x.formatter,S=x.strokeWidth,O=x.fill,E=x.stroke,D=f.formatDatum(l),R=d.formatDatum(u),F=g.indexOf(a),I=m[F],$=I[e.index],B=v[F],V=sanitizeHtml(B),G=sanitizeHtml(D+": "+R),U=S!==void 0?S:this.strokeWidth,H=O||y[F%y.length],N=E||b[F%y.length],j=void 0;P&&(j=P({datum:s,xKey:n,yKey:a,fill:H,stroke:N,strokeWidth:U,size:w,highlighted:!1,seriesId:o}));var W=j&&j.fill||H,z={title:V,backgroundColor:W,content:G},K=C.renderer,X=C.format;if(X||K){var q={datum:s,xKey:n,xName:p,xValue:l,yKey:a,yValue:u,processedYValue:$,yName:B,color:W,title:V,seriesId:o};if(X)return toTooltipHtml$1({content:interpolate(X,q)},z);if(K)return toTooltipHtml$1(K(q),z)}return toTooltipHtml$1(z)},t.prototype.getLegendData=function(){var e,r,n=this,o=n.data,a=n.id,s=n.xKey,l=n.yKeys,u=n.yNames,c=n.seriesItemEnabled,f=n.marker,d=n.fills,h=n.strokes,p=n.fillOpacity,g=n.strokeOpacity;if(!o||!o.length||!s||!l.length)return[];for(var v=[],m=l.length-1;m>=0;m--){var y=l[m];v.push({id:a,itemId:y,seriesId:a,enabled:c.get(y)||!1,label:{text:u[m]||l[m]},marker:{shape:f.shape,fill:f.fill||d[m%d.length],stroke:f.stroke||h[m%h.length],fillOpacity:(e=f.fillOpacity,e??p),strokeOpacity:(r=f.strokeOpacity,r??g)}})}return v},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="AreaSeries",t.type="area",__decorate$1g([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0),__decorate$1g([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0),__decorate$1g([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0),__decorate$1g([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0),__decorate$1g([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0),__decorate$1g([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0),__decorate$1g([Validate(STRING)],t.prototype,"_xKey",void 0),__decorate$1g([Validate(STRING)],t.prototype,"xName",void 0),__decorate$1g([Validate(STRING_ARRAY)],t.prototype,"_yKeys",void 0),__decorate$1g([Validate(BOOLEAN_ARRAY)],t.prototype,"_visibles",void 0),__decorate$1g([Validate(STRING_ARRAY)],t.prototype,"yNames",void 0),__decorate$1g([Validate(NUMBER())],t.prototype,"_normalizedTo",void 0),__decorate$1g([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),t}(CartesianSeries),__extends$27=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1f=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$6=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$6=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$r=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$c=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$r(arguments[t]));return i},__values$c=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BAR_LABEL_PLACEMENTS=["inside","outside"],OPT_BAR_LABEL_PLACEMENT=function(i,t){return OPTIONAL(i,t,function(e){return BAR_LABEL_PLACEMENTS.includes(e)})},BarSeriesNodeTag;(function(i){i[i.Bar=0]="Bar",i[i.Label=1]="Label"})(BarSeriesNodeTag||(BarSeriesNodeTag={}));var BarLabelPlacement;(function(i){i.Inside="inside",i.Outside="outside"})(BarLabelPlacement||(BarLabelPlacement={}));var BarSeriesLabel=function(i){__extends$27(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e.placement=BarLabelPlacement.Inside,e}return __decorate$1f([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),__decorate$1f([Validate(OPT_BAR_LABEL_PLACEMENT)],t.prototype,"placement",void 0),t}(Label$1),BarSeriesTooltip=function(i){__extends$27(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e}return __decorate$1f([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),t}(SeriesTooltip);function flat(i,t){return t===void 0&&(t=[]),i.forEach(function(e){Array.isArray(e)?flat(e,t):t.push(e)}),t}function is2dArray$1(i){return i.length>0&&Array.isArray(i[0])}var BarSeries=function(i){__extends$27(t,i);function t(){var e,r=i.call(this,{pickGroupIncludes:["datumNodes"],pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH],pathsPerSeries:0})||this;return r.xData=[],r.yData=[],r.yDomain=[],r.label=new BarSeriesLabel,r.tooltip=new BarSeriesTooltip,r.flipXY=!1,r.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],r.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.formatter=void 0,r.groupScale=new BandScale$1,r.directionKeys=(e={},e[ChartAxisDirection.X]=["xKey"],e[ChartAxisDirection.Y]=["yKeys"],e),r._xKey="",r.xName="",r.cumYKeyCount=[],r.flatYKeys=void 0,r.hideInLegend=[],r._yKeys=[],r._visibles=[],r._grouped=!1,r._yNames={},r.strokeWidth=1,r.shadow=void 0,r.smallestDataInterval=void 0,r.label.enabled=!1,r}return t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,o=n&&n[this.flipXY?flipChartAxisDirection(e):e],a=[];return o&&o.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a=a.concat(flat(l)):a.push(l))}),a},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e,this.xData=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKeys",{get:function(){return this._yKeys},set:function(e){var r=this,n=void 0;if(is2dArray$1(e)||(n=e,e=this.grouped?n.map(function(l){return[l]}):[n]),!equal$1(this._yKeys,e)){this.flatYKeys=n||void 0,this._yKeys=e;var o=0;this.cumYKeyCount=[];var a=[];e.forEach(function(l,u){l.length>0&&a.push(String(u)),r.cumYKeyCount.push(o),o+=l.length}),this.yData=[],this.processSeriesItemEnabled();var s=this.groupScale;s.domain=a}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibles",{get:function(){return this._visibles},set:function(e){var r=function(n,o){return n.concat.apply(n,__spread$c(Array.isArray(o)?o:[o]))};this._visibles=e.reduce(r,[]),this.processSeriesItemEnabled()},enumerable:!0,configurable:!0}),t.prototype.processSeriesItemEnabled=function(){var e=this,r=e.seriesItemEnabled,n=e._visibles,o=n===void 0?[]:n;r.clear();var a=0;this._yKeys.forEach(function(s){s.forEach(function(l){var u,c;return r.set(l,(c=(u=o)===null||u===void 0?void 0:u[a++],c??!0))})})},Object.defineProperty(t.prototype,"grouped",{get:function(){return this._grouped},set:function(e){this._grouped!==e&&(this._grouped=e,this.flatYKeys&&(this.yKeys=this.flatYKeys))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yNames",{get:function(){return this._yNames},set:function(e){if(Array.isArray(e)&&this.flatYKeys){var r={};this.flatYKeys.forEach(function(n,o){r[n]=e[o]}),e=r}this._yNames=e},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r},Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var r=e?Math.abs(e):void 0;this._normalizedTo=r},enumerable:!0,configurable:!0}),t.prototype.processData=function(){return __awaiter$6(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w=this;return __generator$6(this,function(P){return e=this,r=e.xKey,n=e.yKeys,o=e.seriesItemEnabled,a=r&&n.length&&this.data?this.data:[],s=this.getCategoryAxis(),l=this.getValueAxis(),s&&l?(u=function(S,O){w.smallestDataInterval===void 0&&(w.smallestDataInterval={x:1/0,y:1/0});var E=w.smallestDataInterval.x,D=Math.abs(S-O);D>0&&D<E&&(w.smallestDataInterval.x=D)},c=s.scale instanceof ContinuousScale$1,f=l.scale instanceof ContinuousScale$1,d=!0,h=1/0,this.xData=a.map(function(S){d&&!(r in S)&&(d=!1,console.warn("The key '"+r+"' was not found in the data: ",S));var O=checkDatum(S[r],c);return c&&u(O,h),h=O,O}),this.yData=a.map(function(S){return n.map(function(O){return O.map(function(E){d&&!(E in S)&&(d=!1,console.warn("The key '"+E+"' was not found in the data: ",S));var D=checkDatum(S[E],f);return!o.get(E)||D===void 0?NaN:D})})}),p=this.yData.map(function(S){return S.map(function(O){return findMinMax(O)})}),g=this,v=g.yData,m=g.normalizedTo,y=this.yData.map(function(S){return S.map(function(O){return O.reduce(function(E,D){return E+=isNaN(D)?0:Math.abs(D),E},0)})}),b=this.findLargestMinMax(p),C=b.min,x=b.max,C===1/0&&x===-1/0?(this.yDomain=[],[2]):(m&&isFinite(m)&&(C=C<0?-m:0,x=x>0?m:0,v.forEach(function(S,O){S.forEach(function(E,D){E.forEach(function(R,F){E[F]=R/y[O][D]*m})})})),this.yDomain=this.fixNumericExtent([C,x],this.yAxis),[2])):[2]})})},t.prototype.findLargestMinMax=function(e){var r,n,o,a,s=1/0,l=-1/0;try{for(var u=__values$c(e),c=u.next();!c.done;c=u.next()){var f=c.value;try{for(var d=(o=void 0,__values$c(f)),h=d.next();!h.done;h=d.next()){var p=h.value,g=p.min,v=g===void 0?1/0:g,m=p.max,y=m===void 0?-1/0:m;v<s&&(s=v),y>l&&(l=y)}}catch(b){o={error:b}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}catch(b){r={error:b}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return{min:s,max:l}},t.prototype.getDomain=function(e){var r,n,o,a,s,l=this.flipXY;if(this.flipXY&&(e=flipChartAxisDirection(e)),e===ChartAxisDirection.X){if(!(((r=this.getCategoryAxis())===null||r===void 0?void 0:r.scale)instanceof ContinuousScale$1))return this.xData;var u=extent$1(this.xData,isContinuous$1,Number)||[NaN,NaN];return l?u[0]=u[0]-(o=(n=this.smallestDataInterval)===null||n===void 0?void 0:n.x,o??0):u[1]=u[1]+(s=(a=this.smallestDataInterval)===null||a===void 0?void 0:a.x,s??0),u}else return this.yDomain},t.prototype.getNodeClickEvent=function(e,r){return new CartesianSeriesNodeClickEvent(this.xKey,r.yKey,e,r,this)},t.prototype.getCategoryAxis=function(){return this.flipXY?this.yAxis:this.xAxis},t.prototype.getValueAxis=function(){return this.flipXY?this.xAxis:this.yAxis},t.prototype.calculateStep=function(e){var r,n,o=this.smallestDataInterval,a=this.getCategoryAxis();if(a){var s=a.dataDomain[1]-a.dataDomain[0],l=s/(n=(r=o)===null||r===void 0?void 0:r.x,n??1)+1,u=Math.floor(e),c=Math.min(l,u),f=e/Math.max(1,c);return f}},t.prototype.createNodeData=function(){return __awaiter$6(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U=this;return __generator$6(this,function(H){return e=this,r=e.chart,n=e.data,o=e.visible,a=this.getCategoryAxis(),s=this.getValueAxis(),r&&n&&o&&a&&s?(l=a.scale,u=s.scale,c=this,f=c.groupScale,d=c.yKeys,h=c.cumYKeyCount,p=c.fills,g=c.strokes,v=c.strokeWidth,m=c.seriesItemEnabled,y=c.xData,b=c.yData,C=c.label,x=c.flipXY,w=c.id,P=C.fontStyle,S=C.fontWeight,O=C.fontSize,E=C.fontFamily,D=C.color,R=C.formatter,F=C.placement,I=l.bandwidth,l instanceof ContinuousScale$1&&($=Math.max(a.range[0],a.range[1]),B=this.calculateStep($),I=B),f.range=[0,I],a instanceof CategoryAxis?f.padding=a.groupPaddingInner:a instanceof GroupedCategoryAxis?f.padding=.1:f.padding=0,f.padding===0?f.round=!1:f.round=!0,V=f.bandwidth>=1?f.bandwidth:f.rawBandwidth,G=[],y.forEach(function(N,j){for(var W,z,K=n[j],X=l.convert(N),q=b[j],Z=0;Z<q.length;Z++){var ee=q[Z];G[Z]=(W=G[Z],W??[]);for(var ue=0,ne=0,Q=0;Q<ee.length;Q++){var ie=+ee[Q],se=d[Z][Q],ae=X+f.convert(String(Z));if(G[Z][Q]=(z=G[Z][Q],z??{itemId:se,nodeData:[],labelData:[]}),!!a.inRange(ae,V)&&!isNaN(ie)){var oe=ie<0?ue:ne,fe=u instanceof ContinuousScale$1,le=u.convert(oe+ie,fe?clamper$1:void 0),Y=u.convert(oe,fe?clamper$1:void 0),re=K[se],he=void 0;R?he=R({value:isNumber$1(re)?re:void 0,seriesId:w}):he=isNumber$1(re)?re.toFixed(2):"";var de=void 0,ve=void 0;x?(ve=ae+V/2,F===BarLabelPlacement.Inside?de=le+(re>=0?-1:1)*Math.abs(Y-le)/2:de=le+(re>=0?1:-1)*4):(de=ae+V/2,F===BarLabelPlacement.Inside?ve=le+(re>=0?1:-1)*Math.abs(Y-le)/2:ve=le+(re>=0?-3:4));var me=void 0,ye=void 0;F===BarLabelPlacement.Inside?(me="center",ye="middle"):(me=x?re>=0?"start":"end":"center",ye=x?"middle":re>=0?"bottom":"top");var xe=h[Z]+Q,J={index:j,series:U,itemId:se,datum:K,yValue:re,yKey:se,x:x?Math.min(le,Y):ae,y:x?ae:Math.min(le,Y),width:x?Math.abs(Y-le):V,height:x?V:Math.abs(Y-le),colorIndex:xe,fill:p[xe%p.length],stroke:g[xe%g.length],strokeWidth:v,label:m.get(se)&&he?{text:he,fontStyle:P,fontWeight:S,fontSize:O,fontFamily:E,textAlign:me,textBaseline:ye,fill:D,x:de,y:ve}:void 0};G[Z][Q].nodeData.push(J),G[Z][Q].labelData.push(J),ie<0?ue+=ie:ne+=ie}}}}),[2,G.reduce(function(N,j){return N.concat.apply(N,__spread$c(j))},[])]):[2,[]]})})},t.prototype.updateDatumSelection=function(e){return __awaiter$6(this,void 0,void 0,function(){var r,n,o,a;return __generator$6(this,function(s){return r=e.nodeData,n=e.datumSelection,o=n.setData(r),o.exit.remove(),a=o.enter.append(Rect).each(function(l){l.tag=BarSeriesNodeTag.Bar}),[2,o.merge(a)]})})},t.prototype.updateDatumNodes=function(e){var r,n;return __awaiter$6(this,void 0,void 0,function(){var o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U=this;return __generator$6(this,function(H){return o=e.datumSelection,a=e.isHighlight,s=this,l=s.fills,u=s.strokes,c=s.fillOpacity,f=s.strokeOpacity,d=s.shadow,h=s.formatter,p=s.xKey,g=s.flipXY,v=s.highlightStyle,m=v.fill,y=v.stroke,b=v.strokeWidth,C=v.item,x=C.fill,w=x===void 0?m:x,P=C.fillOpacity,S=P===void 0?c:P,O=C.stroke,E=O===void 0?y:O,D=C.strokeWidth,R=D===void 0?b:D,F=s.id,I=__read$r((n=(r=this.xAxis)===null||r===void 0?void 0:r.visibleRange,n??[]),2),$=I[0],B=I[1],V=$!==0||B!==1,G=!V,o.each(function(N,j){var W=j.colorIndex,z=a&&w!==void 0?w:l[W%l.length],K=a&&E!==void 0?E:u[W%l.length],X=a&&R!==void 0?R:U.getStrokeWidth(U.strokeWidth,j),q=a?S:c,Z=void 0;h&&(Z=h({datum:j.datum,fill:z,stroke:K,strokeWidth:X,highlighted:a,xKey:p,yKey:j.yKey,seriesId:F})),N.crisp=G,N.x=j.x,N.y=j.y,N.width=j.width,N.height=j.height,N.fill=Z&&Z.fill||z,N.stroke=Z&&Z.stroke||K,N.strokeWidth=Z&&Z.strokeWidth!==void 0?Z.strokeWidth:X,N.fillOpacity=q,N.strokeOpacity=f,N.lineDash=U.lineDash,N.lineDashOffset=U.lineDashOffset,N.fillShadow=d,N.visible=g?j.width>0:j.height>0}),[2]})})},t.prototype.updateLabelSelection=function(e){return __awaiter$6(this,void 0,void 0,function(){var r,n,o,a,s,l;return __generator$6(this,function(u){return r=e.labelData,n=e.labelSelection,o=this.label.enabled,a=o?r:[],s=n.setData(a),s.exit.remove(),l=s.enter.append(Text$1).each(function(c){c.tag=BarSeriesNodeTag.Label,c.pointerEvents=PointerEvents$1.None}),[2,s.merge(l)]})})},t.prototype.updateLabelNodes=function(e){return __awaiter$6(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c;return __generator$6(this,function(f){return r=e.labelSelection,n=this.label,o=n.enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,r.each(function(d,h){var p=h.label;p&&o?(d.fontStyle=a,d.fontWeight=s,d.fontSize=l,d.fontFamily=u,d.textAlign=p.textAlign,d.textBaseline=p.textBaseline,d.text=p.text,d.x=p.x,d.y=p.y,d.fill=c,d.visible=!0):d.visible=!1}),[2]})})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,o=r.yKeys,a=r.yData,s=this.getCategoryAxis(),l=this.getValueAxis(),u=e.yKey;if(!a.length||!n||!u||!s||!l)return"";for(var c=a[e.index],f=0,d=0,h=0;h<o.length;h++){var p=o[h];if(d=p.indexOf(u),d>=0){f+=d;break}f+=p.length}var g=this,v=g.xName,m=g.yNames,y=g.fills,b=g.strokes,C=g.tooltip,x=g.formatter,w=g.id,P=C.renderer,S=e.datum,O=m[u],E=y[f%y.length],D=b[f%y.length],R=this.getStrokeWidth(this.strokeWidth),F=S[n],I=S[u],$=c[h][d],B=sanitizeHtml(s.formatDatum(F)),V=sanitizeHtml(l.formatDatum(I)),G=sanitizeHtml(O),U=B+": "+V,H=void 0;x&&(H=x({datum:S,fill:E,stroke:D,strokeWidth:R,highlighted:!1,xKey:n,yKey:u,seriesId:w}));var N=H&&H.fill||E,j={title:G,backgroundColor:N,content:U};return P?toTooltipHtml$1(P({datum:S,xKey:n,xValue:F,xName:v,yKey:u,yValue:I,processedYValue:$,yName:O,color:N,title:G,seriesId:w}),j):toTooltipHtml$1(j)},t.prototype.getLegendData=function(){var e=this,r=e.id,n=e.data,o=e.xKey,a=e.yKeys,s=e.yNames,l=e.cumYKeyCount,u=e.seriesItemEnabled,c=e.hideInLegend,f=e.fills,d=e.strokes,h=e.fillOpacity,p=e.strokeOpacity,g=e.flipXY;if(!n||!n.length||!o||!a.length)return[];var v=[];return this.yKeys.forEach(function(m,y){for(var b=g?0:m.length-1,C=g?1:-1,x=b,w=0;w<m.length;x+=C,w++){var P=m[x];if(c.indexOf(P)>=0)return;var S=l[y]+x;v.push({id:r,itemId:P,seriesId:r,enabled:u.get(P)||!1,label:{text:s[P]||P},marker:{fill:f[S%f.length],stroke:d[S%d.length],fillOpacity:h,strokeOpacity:p}})}}),v},t.prototype.toggleSeriesItem=function(e,r){i.prototype.toggleSeriesItem.call(this,e,r);var n=this.yKeys.map(function(a){return a.slice()});this.seriesItemEnabled.forEach(function(a,s){a||n.forEach(function(l){var u=l.indexOf(s);u>=0&&l.splice(u,1)})});var o=[];n.forEach(function(a,s){a.length>0&&o.push(String(s))}),this.groupScale.domain=o,this.nodeDataRefresh=!0},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="BarSeries",t.type="bar",__decorate$1f([Validate(BOOLEAN)],t.prototype,"flipXY",void 0),__decorate$1f([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0),__decorate$1f([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0),__decorate$1f([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0),__decorate$1f([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0),__decorate$1f([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0),__decorate$1f([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0),__decorate$1f([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),__decorate$1f([Validate(STRING)],t.prototype,"_xKey",void 0),__decorate$1f([Validate(STRING)],t.prototype,"xName",void 0),__decorate$1f([Validate(STRING_ARRAY)],t.prototype,"hideInLegend",void 0),__decorate$1f([Validate(BOOLEAN_ARRAY)],t.prototype,"_visibles",void 0),__decorate$1f([Validate(BOOLEAN)],t.prototype,"_grouped",void 0),__decorate$1f([Validate(OPT_NUMBER())],t.prototype,"_normalizedTo",void 0),__decorate$1f([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),t}(CartesianSeries),__extends$26=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1e=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$5=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$5=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__values$b=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$q=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},LineSeriesLabel=function(i){__extends$26(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e}return __decorate$1e([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),t}(Label$1),LineSeriesTooltip=function(i){__extends$26(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return __decorate$1e([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),__decorate$1e([Validate(OPT_STRING)],t.prototype,"format",void 0),t}(SeriesTooltip),LineSeries=function(i){__extends$26(t,i);function t(){var e=i.call(this,{pickGroupIncludes:["markers"],features:["markers"],pickModes:[SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this;e.xDomain=[],e.yDomain=[],e.pointsData=[],e.marker=new CartesianSeriesMarker,e.label=new LineSeriesLabel,e.title=void 0,e.stroke="#874349",e.lineDash=[0],e.lineDashOffset=0,e.strokeWidth=2,e.strokeOpacity=1,e.tooltip=new LineSeriesTooltip,e._xKey="",e.xName="",e._yKey="",e.yName="";var r=e,n=r.marker,o=r.label;return n.fill="#c16068",n.stroke="#874349",o.enabled=!1,e}return t.prototype.setColors=function(e,r){this.stroke=e[0],this.marker.stroke=r[0],this.marker.fill=e[0]},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e,this.pointsData.splice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey=e,this.pointsData.splice(0)},enumerable:!0,configurable:!0}),t.prototype.getDomain=function(e){return e===ChartAxisDirection.X?this.xDomain:this.yDomain},t.prototype.processData=function(){return __awaiter$5(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x;return __generator$5(this,function(w){if(e=this,r=e.xAxis,n=e.yAxis,o=e.xKey,a=e.yKey,s=e.pointsData,l=o&&a&&this.data?this.data:[],!r||!n)return[2];u=r.scale instanceof ContinuousScale$1,c=n.scale instanceof ContinuousScale$1,f=[],d=[],s.splice(0);try{for(h=__values$b(l),p=h.next();!p.done;p=h.next())g=p.value,v=g[o],m=g[a],y=checkDatum(v,u),!(u&&y===void 0)&&(b=checkDatum(m,c),f.push(y),d.push(b),s.push({xDatum:y,yDatum:b,datum:g}))}catch(P){C={error:P}}finally{try{p&&!p.done&&(x=h.return)&&x.call(h)}finally{if(C)throw C.error}}return this.xDomain=u?this.fixNumericExtent(extent$1(f,isContinuous$1),r):f,this.yDomain=c?this.fixNumericExtent(extent$1(d,isContinuous$1),n):d,[2]})})},t.prototype.createNodeData=function(){var e;return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U,H;return __generator$5(this,function(N){if(r=this,n=r.data,o=r.xAxis,a=r.yAxis,s=r.marker,l=s.enabled,u=s.size,c=s.strokeWidth,!n||!o||!a)return[2,[]];for(f=this,d=f.pointsData,h=f.label,p=f.yKey,g=f.id,v=o.scale,m=a.scale,y=(v.bandwidth||0)/2,b=(m.bandwidth||0)/2,C=new Array(n.length),x=l?u:0,w=!0,P=void 0,S=void 0,O=0,E=0;E<d.length;E++)if(D=S||d[E],D.yDatum===void 0)P=void 0,w=!0;else{if(R=D.xDatum,F=D.yDatum,I=D.datum,$=v.convert(R)+y,isNaN($)){P=void 0,w=!0;continue}if(B=(v.bandwidth||u*.5+(c||0))+1,S=((e=d[E+1])===null||e===void 0?void 0:e.yDatum)===void 0?void 0:d[E+1],V=o.inRangeEx($,0,B),G=S&&o.inRangeEx(v.convert(S.xDatum)+y,0,B),V===-1&&G===-1){w=!0;continue}if(V===1&&P===1){w=!0;continue}P=V,U=m.convert(F)+b,H=void 0,h.formatter?H=h.formatter({value:F,seriesId:g}):H=typeof F=="number"&&isFinite(F)?F.toFixed(2):F?String(F):"",C[O++]={series:this,datum:I,point:{x:$,y:U,moveTo:w,size:x},label:H?{text:H,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0},w=!1}return C.length=O,[2,[{itemId:p,nodeData:C,labelData:C}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.updatePaths=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f;return __generator$5(this,function(d){r=e.contextData.nodeData,n=__read$q(e.paths,1),o=n[0],a=o.path,o.fill=void 0,o.lineJoin="round",o.pointerEvents=PointerEvents$1.None,a.clear({trackChanges:!0});try{for(s=__values$b(r),l=s.next();!l.done;l=s.next())u=l.value,u.point.moveTo?a.moveTo(u.point.x,u.point.y):a.lineTo(u.point.x,u.point.y)}catch(h){c={error:h}}finally{try{l&&!l.done&&(f=s.return)&&f.call(s)}finally{if(c)throw c.error}}return o.checkPathDirty(),[2]})})},t.prototype.updatePathNodes=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n;return __generator$5(this,function(o){return r=__read$q(e.paths,1),n=r[0],n.stroke=this.stroke,n.strokeWidth=this.getStrokeWidth(this.strokeWidth),n.strokeOpacity=this.strokeOpacity,n.lineDash=this.lineDash,n.lineDashOffset=this.lineDashOffset,[2]})})},t.prototype.updateMarkerSelection=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c;return __generator$5(this,function(f){return r=e.nodeData,n=e.markerSelection,o=this.marker,a=o.shape,s=o.enabled,r=a&&s?r:[],l=getMarker$1(a),this.marker.isDirty()&&(n=n.setData([]),n.exit.remove()),u=n.setData(r),u.exit.remove(),c=u.enter.append(l),[2,u.merge(c)]})})},t.prototype.updateMarkerNodes=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R;return __generator$5(this,function(F){return r=e.markerSelection,n=e.isHighlight,o=this,a=o.marker,s=o.marker.fillOpacity,l=o.xKey,u=o.yKey,c=o.stroke,f=o.strokeOpacity,d=o.highlightStyle,h=d.fill,p=d.stroke,g=d.strokeWidth,v=d.item,m=v.fill,y=m===void 0?h:m,b=v.fillOpacity,C=b===void 0?s:b,x=v.stroke,w=x===void 0?p:x,P=v.strokeWidth,S=P===void 0?g:P,O=o.id,E=a.size,D=a.formatter,R=a.strokeWidth!==void 0?a.strokeWidth:this.strokeWidth,r.each(function(I,$){var B,V,G=n&&y!==void 0?y:a.fill,U=n?C:s,H=n&&w!==void 0?w:a.stroke||c,N=n&&S!==void 0?S:R,j=void 0;D&&(j=D({datum:$.datum,xKey:l,yKey:u,fill:G,stroke:H,strokeWidth:N,size:E,highlighted:n,seriesId:O})),I.fill=j&&j.fill||G,I.stroke=j&&j.stroke||H,I.strokeWidth=j&&j.strokeWidth!==void 0?j.strokeWidth:N,I.fillOpacity=U??1,I.strokeOpacity=(V=(B=a.strokeOpacity,B??f),V??1),I.size=j&&j.size!==void 0?j.size:E,I.translationX=$.point.x,I.translationY=$.point.y,I.visible=I.size>0&&!isNaN($.point.x)&&!isNaN($.point.y)}),n||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u;return __generator$5(this,function(c){return r=e.labelData,n=e.labelSelection,o=this.marker,a=o.shape,s=o.enabled,r=a&&s?r:[],l=n.setData(r),l.exit.remove(),u=l.enter.append(Text$1),[2,l.merge(u)]})})},t.prototype.updateLabelNodes=function(e){return __awaiter$5(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c;return __generator$5(this,function(f){return r=e.labelSelection,n=this.label,o=n.enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,r.each(function(d,h){var p=h.point,g=h.label;h&&g&&o?(d.fontStyle=a,d.fontWeight=s,d.fontSize=l,d.fontFamily=u,d.textAlign=g.textAlign,d.textBaseline=g.textBaseline,d.text=g.text,d.x=p.x,d.y=p.y-10,d.fill=c,d.visible=!0):d.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){return new CartesianSeriesNodeClickEvent(this.xKey,this.yKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,o=r.yKey,a=r.xAxis,s=r.yAxis;if(!n||!o||!a||!s)return"";var l=this,u=l.xName,c=l.yName,f=l.tooltip,d=l.marker,h=l.id,p=f.renderer,g=f.format,v=e.datum,m=v[n],y=v[o],b=a.formatDatum(m),C=s.formatDatum(y),x=sanitizeHtml(this.title||c),w=sanitizeHtml(b+": "+C),P=d.formatter,S=d.fill,O=d.stroke,E=d.strokeWidth,D=d.size,R=E!==void 0?E:this.strokeWidth,F=void 0;P&&(F=P({datum:v,xKey:n,yKey:o,fill:S,stroke:O,strokeWidth:R,size:D,highlighted:!1,seriesId:h}));var I=F&&F.fill||S,$={title:x,backgroundColor:I,content:w};if(g||p){var B={datum:v,xKey:n,xValue:m,xName:u,yKey:o,yValue:y,yName:c,title:x,color:I,seriesId:h};if(g)return toTooltipHtml$1({content:interpolate(g,B)},$);if(p)return toTooltipHtml$1(p(B),$)}return toTooltipHtml$1($)},t.prototype.getLegendData=function(){var e,r,n,o=this,a=o.id,s=o.data,l=o.xKey,u=o.yKey,c=o.yName,f=o.visible,d=o.title,h=o.marker,p=o.stroke,g=o.strokeOpacity;return s&&s.length&&l&&u?[{id:a,itemId:u,seriesId:a,enabled:f,label:{text:d||c||u},marker:{shape:h.shape,fill:h.fill||"rgba(0, 0, 0, 0)",stroke:h.stroke||p||"rgba(0, 0, 0, 0)",fillOpacity:(e=h.fillOpacity,e??1),strokeOpacity:(n=(r=h.strokeOpacity,r??g),n??1)}}]:[]},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="LineSeries",t.type="line",__decorate$1e([Validate(OPT_STRING)],t.prototype,"title",void 0),__decorate$1e([Validate(OPT_COLOR_STRING)],t.prototype,"stroke",void 0),__decorate$1e([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0),__decorate$1e([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0),__decorate$1e([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),__decorate$1e([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0),__decorate$1e([Validate(STRING)],t.prototype,"_xKey",void 0),__decorate$1e([Validate(STRING)],t.prototype,"xName",void 0),__decorate$1e([Validate(STRING)],t.prototype,"_yKey",void 0),__decorate$1e([Validate(STRING)],t.prototype,"yName",void 0),t}(CartesianSeries),__extends$25=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$u=function(){return __assign$u=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$u.apply(this,arguments)},__decorate$1d=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$4=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$4=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ScatterSeriesNodeClickEvent=function(i){__extends$25(t,i);function t(e,r,n,o,a,s){var l=i.call(this,r,n,o,a,s)||this;return l.sizeKey=e,l}return t}(CartesianSeriesNodeClickEvent),ScatterSeriesTooltip=function(i){__extends$25(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e}return __decorate$1d([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),t}(SeriesTooltip),ScatterSeries=function(i){__extends$25(t,i);function t(){var e=i.call(this,{pickGroupIncludes:["markers"],pickModes:[SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH],pathsPerSeries:0,features:["markers"]})||this;e.xDomain=[],e.yDomain=[],e.xData=[],e.yData=[],e.validData=[],e.sizeData=[],e.sizeScale=new LinearScale$1,e.marker=new CartesianSeriesMarker,e.label=new Label$1,e.fill="#c16068",e.stroke="#874349",e.strokeWidth=2,e.fillOpacity=1,e.strokeOpacity=1,e.title=void 0,e.labelKey=void 0,e.xName="",e.yName="",e.sizeName="Size",e.labelName="Label",e._xKey="",e._yKey="",e._sizeKey=void 0,e.tooltip=new ScatterSeriesTooltip;var r=e.label;return r.enabled=!1,e}return Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e,this.xData=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey=e,this.yData=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeKey",{get:function(){return this._sizeKey},set:function(e){this._sizeKey=e,this.sizeData=[]},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){this.marker.fill=e[0],this.marker.stroke=r[0]},t.prototype.processData=function(){return __awaiter$4(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h;return __generator$4(this,function(p){return e=this,r=e.xKey,n=e.yKey,o=e.sizeKey,a=e.xAxis,s=e.yAxis,l=e.marker,!a||!s?[2]:(u=r&&n&&this.data?this.data:[],c=a.scale,f=s.scale,d=c instanceof ContinuousScale$1,h=f instanceof ContinuousScale$1,this.validData=u.filter(function(g){return checkDatum(g[r],d)!==void 0&&checkDatum(g[n],h)!==void 0}),this.xData=this.validData.map(function(g){return g[r]}),this.yData=this.validData.map(function(g){return g[n]}),this.sizeData=o?this.validData.map(function(g){return g[o]}):[],this.sizeScale.domain=l.domain?l.domain:extent$1(this.sizeData,isContinuous$1)||[1,1],a.scale instanceof ContinuousScale$1?this.xDomain=this.fixNumericExtent(extent$1(this.xData,isContinuous$1),a):this.xDomain=this.xData,s.scale instanceof ContinuousScale$1?this.yDomain=this.fixNumericExtent(extent$1(this.yData,isContinuous$1),s):this.yDomain=this.yData,[2])})})},t.prototype.getDomain=function(e){return e===ChartAxisDirection.X?this.xDomain:this.yDomain},t.prototype.getNodeClickEvent=function(e,r){return new ScatterSeriesNodeClickEvent(this.sizeKey,this.xKey,this.yKey,e,r,this)},t.prototype.createNodeData=function(){return __awaiter$4(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V;return __generator$4(this,function(G){if(e=this,r=e.chart,n=e.data,o=e.visible,a=e.xAxis,s=e.yAxis,l=e.yKey,u=e.label,c=e.labelKey,!(r&&n&&o&&a&&s))return[2,[]];for(f=a.scale,d=s.scale,h=f instanceof ContinuousScale$1,p=d instanceof ContinuousScale$1,g=(f.bandwidth||0)/2,v=(d.bandwidth||0)/2,m=this,y=m.xData,b=m.yData,C=m.validData,x=m.sizeData,w=m.sizeScale,P=m.marker,S=new Array(y.length),w.range=[P.size,P.maxSize],O=u.getFont(),E=0,D=0;D<y.length;D++)R=this.checkDomainXY(y[D],b[D],h,p),R&&(F=f.convert(R[0])+g,I=d.convert(R[1])+v,this.checkRangeXY(F,I,a,s)&&($=c?String(C[D][c]):"",B=HdpiCanvas$1.getTextSize($,O),V=x.length?w.convert(x[D]):P.size,S[E++]={series:this,itemId:l,datum:C[D],point:{x:F,y:I,size:V},label:__assign$u({text:$},B)}));return S.length=E,[2,[{itemId:this.yKey,nodeData:S,labelData:S}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.getLabelData=function(){var e;return(e=this.contextNodeData)===null||e===void 0?void 0:e.reduce(function(r,n){return r.concat(n.labelData)},[])},t.prototype.updateMarkerSelection=function(e){return __awaiter$4(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f;return __generator$4(this,function(d){return r=e.nodeData,n=e.markerSelection,o=this.marker,a=o.enabled,s=o.shape,l=getMarker$1(s),this.marker.isDirty()&&(n=n.setData([]),n.exit.remove()),u=a?r:[],c=n.setData(u),c.exit.remove(),f=c.enter.append(l),[2,c.merge(f)]})})},t.prototype.updateMarkerNodes=function(e){return __awaiter$4(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U;return __generator$4(this,function(H){return r=e.markerSelection,n=e.isHighlight,o=this,a=o.marker,s=o.xKey,l=o.yKey,u=o.strokeWidth,c=o.fillOpacity,f=o.strokeOpacity,d=o.fill,h=o.stroke,p=o.sizeScale,g=o.marker,v=g.fillOpacity,m=v===void 0?c:v,y=g.strokeOpacity,b=y===void 0?f:y,C=o.highlightStyle,x=C.fill,w=C.stroke,P=C.strokeWidth,S=C.item,O=S.fill,E=O===void 0?x:O,D=S.fillOpacity,R=D===void 0?m:D,F=S.stroke,I=F===void 0?w:F,$=S.strokeWidth,B=$===void 0?P:$,V=o.id,G=a.strokeWidth!==void 0?a.strokeWidth:u,U=a.formatter,p.range=[a.size,a.maxSize],r.each(function(N,j){var W,z,K,X,q,Z,ee=n&&E!==void 0?E:a.fill||d,ue=n?R:m,ne=n&&I!==void 0?I:a.stroke||h,Q=b,ie=n&&B!==void 0?B:G,se=(z=(W=j.point)===null||W===void 0?void 0:W.size,z??0),ae=void 0;U&&(ae=U({datum:j.datum,xKey:s,yKey:l,fill:ee,stroke:ne,strokeWidth:ie,size:se,highlighted:n,seriesId:V})),N.fill=ae&&ae.fill||ee,N.stroke=ae&&ae.stroke||ne,N.strokeWidth=ae&&ae.strokeWidth!==void 0?ae.strokeWidth:ie,N.size=ae&&ae.size!==void 0?ae.size:se,N.fillOpacity=ue??1,N.strokeOpacity=Q??1,N.translationX=(X=(K=j.point)===null||K===void 0?void 0:K.x,X??0),N.translationY=(Z=(q=j.point)===null||q===void 0?void 0:q.y,Z??0),N.visible=N.size>0}),n||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){var r,n;return __awaiter$4(this,void 0,void 0,function(){var o,a,s,l,u,c;return __generator$4(this,function(f){return o=e.labelSelection,a=this.label.enabled,s=a?(n=(r=this.chart)===null||r===void 0?void 0:r.placeLabels().get(this),n??[]):[],l=s.map(function(d){return __assign$u(__assign$u({},d.datum),{point:{x:d.x,y:d.y,size:d.datum.point.size}})}),u=o.setData(l),u.exit.remove(),c=u.enter.append(Text$1),[2,u.merge(c)]})})},t.prototype.updateLabelNodes=function(e){return __awaiter$4(this,void 0,void 0,function(){var r,n;return __generator$4(this,function(o){return r=e.labelSelection,n=this.label,r.each(function(a,s){var l,u,c,f;a.text=s.label.text,a.fill=n.color,a.x=(u=(l=s.point)===null||l===void 0?void 0:l.x,u??0),a.y=(f=(c=s.point)===null||c===void 0?void 0:c.y,f??0),a.fontStyle=n.fontStyle,a.fontWeight=n.fontWeight,a.fontSize=n.fontSize,a.fontFamily=n.fontFamily,a.textAlign="left",a.textBaseline="top"}),[2]})})},t.prototype.getTooltipHtml=function(e){var r,n,o,a,s=this,l=s.xKey,u=s.yKey,c=s.xAxis,f=s.yAxis;if(!l||!u||!c||!f)return"";var d=this,h=d.fill,p=d.stroke,g=d.marker,v=d.tooltip,m=d.xName,y=d.yName,b=d.sizeKey,C=d.sizeName,x=d.labelKey,w=d.labelName,P=d.id,S=(r=g.fill,r??h),O=(n=g.stroke,n??p),E=this.getStrokeWidth(g.strokeWidth||this.strokeWidth),D=this.marker.formatter,R=void 0;D&&(R=D({datum:e,xKey:l,yKey:u,fill:S,stroke:O,strokeWidth:E,size:(a=(o=e.point)===null||o===void 0?void 0:o.size,a??0),highlighted:!1,seriesId:P}));var F=R&&R.fill||S||"gray",I=this.title||y,$=e.datum,B=$[l],V=$[u],G=sanitizeHtml(c.formatDatum(B)),U=sanitizeHtml(f.formatDatum(V)),H="<b>"+sanitizeHtml(m||l)+"</b>: "+G+"<br>"+("<b>"+sanitizeHtml(y||u)+"</b>: "+U);b&&(H+="<br><b>"+sanitizeHtml(C||b)+"</b>: "+sanitizeHtml($[b])),x&&(H="<b>"+sanitizeHtml(w||x)+"</b>: "+sanitizeHtml($[x])+"<br>"+H);var N={title:I,backgroundColor:F,content:H},j=v.renderer;return j?toTooltipHtml$1(j({datum:$,xKey:l,xValue:B,xName:m,yKey:u,yValue:V,yName:y,sizeKey:b,sizeName:C,labelKey:x,labelName:w,title:I,color:F,seriesId:P}),N):toTooltipHtml$1(N)},t.prototype.getLegendData=function(){var e=this,r=e.id,n=e.data,o=e.xKey,a=e.yKey,s=e.yName,l=e.title,u=e.visible,c=e.marker,f=e.fill,d=e.stroke,h=e.fillOpacity,p=e.strokeOpacity;return n&&n.length&&o&&a?[{id:r,itemId:a,seriesId:r,enabled:u,label:{text:l||s||a},marker:{shape:c.shape,fill:c.fill||f||"rgba(0, 0, 0, 0)",stroke:c.stroke||d||"rgba(0, 0, 0, 0)",fillOpacity:c.fillOpacity!==void 0?c.fillOpacity:h,strokeOpacity:c.strokeOpacity!==void 0?c.strokeOpacity:p}}]:[]},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="ScatterSeries",t.type="scatter",__decorate$1d([Deprecated("Use marker.fill instead.",{default:"#c16068"})],t.prototype,"fill",void 0),__decorate$1d([Deprecated("Use marker.stroke instead.",{default:"#874349"})],t.prototype,"stroke",void 0),__decorate$1d([Deprecated("Use marker.strokeWidth instead.",{default:2})],t.prototype,"strokeWidth",void 0),__decorate$1d([Deprecated("Use marker.fillOpacity instead.",{default:1})],t.prototype,"fillOpacity",void 0),__decorate$1d([Deprecated("Use marker.strokeOpacity instead.",{default:1})],t.prototype,"strokeOpacity",void 0),__decorate$1d([Validate(OPT_STRING)],t.prototype,"title",void 0),__decorate$1d([Validate(OPT_STRING)],t.prototype,"labelKey",void 0),__decorate$1d([Validate(STRING)],t.prototype,"xName",void 0),__decorate$1d([Validate(STRING)],t.prototype,"yName",void 0),__decorate$1d([Validate(OPT_STRING)],t.prototype,"sizeName",void 0),__decorate$1d([Validate(OPT_STRING)],t.prototype,"labelName",void 0),__decorate$1d([Validate(STRING)],t.prototype,"_xKey",void 0),__decorate$1d([Validate(STRING)],t.prototype,"_yKey",void 0),__decorate$1d([Validate(OPT_STRING)],t.prototype,"_sizeKey",void 0),t}(CartesianSeries),__extends$24=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1c=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$3=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$3=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$p=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$b=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$p(arguments[t]));return i},HISTOGRAM_AGGREGATIONS=["count","sum","mean"],HISTOGRAM_AGGREGATION=predicateWithMessage(function(i){return HISTOGRAM_AGGREGATIONS.includes(i)},"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean"),HistogramSeriesNodeTag;(function(i){i[i.Bin=0]="Bin",i[i.Label=1]="Label"})(HistogramSeriesNodeTag||(HistogramSeriesNodeTag={}));var HistogramSeriesLabel=function(i){__extends$24(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e}return __decorate$1c([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),t}(Label$1),defaultBinCount=10,aggregationFunctions={count:function(i){return i.data.length},sum:function(i,t){return i.data.reduce(function(e,r){return e+r[t]},0)},mean:function(i,t){return aggregationFunctions.sum(i,t)/aggregationFunctions.count(i,t)}},HistogramBin=function(){function i(t){var e=__read$p(t,2),r=e[0],n=e[1];this.data=[],this.aggregatedValue=0,this.frequency=0,this.domain=[r,n]}return i.prototype.addDatum=function(t){this.data.push(t),this.frequency++},Object.defineProperty(i.prototype,"domainWidth",{get:function(){var t=__read$p(this.domain,2),e=t[0],r=t[1];return r-e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relativeHeight",{get:function(){return this.aggregatedValue/this.domainWidth},enumerable:!0,configurable:!0}),i.prototype.calculateAggregatedValue=function(t,e){e||(t="count");var r=aggregationFunctions[t];this.aggregatedValue=r(this,e)},i.prototype.getY=function(t){return t?this.relativeHeight:this.aggregatedValue},i}(),HistogramSeriesTooltip=function(i){__extends$24(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e}return __decorate$1c([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),t}(SeriesTooltip),HistogramSeries=function(i){__extends$24(t,i);function t(){var e,r=i.call(this,{pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this;return r.binnedData=[],r.xDomain=[],r.yDomain=[],r.label=new HistogramSeriesLabel,r.tooltip=new HistogramSeriesTooltip,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.directionKeys=(e={},e[ChartAxisDirection.X]=["xKey"],e[ChartAxisDirection.Y]=["yKey"],e),r.xKey="",r.areaPlot=!1,r.bins=void 0,r.aggregation="count",r.binCount=void 0,r.xName="",r.yKey="",r.yName="",r.strokeWidth=1,r.shadow=void 0,r.label.enabled=!1,r}return t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,o=n&&n[e],a=[];return o&&o.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a.push.apply(a,__spread$b(l)):a.push(l))}),a},t.prototype.setColors=function(e,r){this.fill=e[0],this.stroke=r[0]},t.prototype.deriveBins=function(){var e=this,r=this.bins;if(!this.data)return[];var n=this.data.map(function(c){return c[e.xKey]}),o=this.fixNumericExtent(extent$1(n,isContinuous$1));if(this.binCount===void 0){if(r)return r;var a=ticks$1(o[0],o[1],defaultBinCount),s=tickStep$1(o[0],o[1],defaultBinCount),l=a[0],u=function(c){return[c,c+s]};return __spread$b([[l-s,l]],a.map(u))}else return this.calculateNiceBins(o,this.binCount)},t.prototype.calculateNiceBins=function(e,r){var n,o=Math.floor(e[0]),a=e[1],s,l=r||1;return n=this.calculateNiceStart(o,a,l),o=n.start,s=n.binSize,this.getBins(o,a,s,l)},t.prototype.getBins=function(e,r,n,o){for(var a=[],s=0;s<o;s++){var l=Math.round((e+s*n)*10)/10,u=Math.round((e+(s+1)*n)*10)/10;s===o-1&&(u=Math.max(u,r)),a[s]=[l,u]}return a},t.prototype.calculateNiceStart=function(e,r,n){var o=Math.abs(r-e)/n,a=Math.floor(Math.log10(o)),s=Math.pow(10,a),l=Math.floor(e/s)*s;return{start:l,binSize:o}},t.prototype.placeDataInBins=function(e){var r=this,n=this.xKey,o=this.deriveBins();this.bins=o;for(var a=e.slice().sort(function(f,d){return f[n]<d[n]?-1:f[n]>d[n]?1:0}),s=[new HistogramBin(o[0])],l=0,u=0;u<a.length&&l<o.length;u++){for(var c=a[u];c[n]>o[l][1]&&l<o.length;)l++,s.push(new HistogramBin(o[l]));l<o.length&&s[l].addDatum(c)}return s.forEach(function(f){return f.calculateAggregatedValue(r.aggregation,r.yKey)}),s},Object.defineProperty(t.prototype,"xMax",{get:function(){var e=this;return this.data&&this.data.reduce(function(r,n){return Math.max(r,n[e.xKey])},Number.NEGATIVE_INFINITY)},enumerable:!0,configurable:!0}),t.prototype.processData=function(){return __awaiter$3(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f=this;return __generator$3(this,function(d){return e=this,r=e.xKey,n=e.data,this.binnedData=this.placeDataInBins(r&&n?n:[]),o=this.binnedData.map(function(h){return h.getY(f.areaPlot)}),a=extent$1(o,isContinuous$1),this.yDomain=this.fixNumericExtent([0,a?a[1]:1]),s=this.binnedData[0],l=this.binnedData[this.binnedData.length-1],u=s.domain[0],c=l.domain[1],this.xDomain=[u,c],[2]})})},t.prototype.getDomain=function(e){return e===ChartAxisDirection.X?this.xDomain:this.yDomain},t.prototype.getNodeClickEvent=function(e,r){return new CartesianSeriesNodeClickEvent(this.xKey,this.yKey,e,r,this)},t.prototype.createNodeData=function(){return __awaiter$3(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w=this;return __generator$3(this,function(P){return e=this,r=e.xAxis,n=e.yAxis,!this.seriesItemEnabled||!r||!n?[2,[]]:(o=r.scale,a=n.scale,s=this,l=s.fill,u=s.stroke,c=s.strokeWidth,f=s.id,d=[],h=function(S){return String(S.value)},p=this.label,g=p.formatter,v=g===void 0?h:g,m=p.fontStyle,y=p.fontWeight,b=p.fontSize,C=p.fontFamily,x=p.color,this.binnedData.forEach(function(S){var O=S.aggregatedValue,E=S.frequency,D=__read$p(S.domain,2),R=D[0],F=D[1],I=S.relativeHeight,$=o.convert(R),B=o.convert(F),V=w.areaPlot?I:w.yKey?O:E,G=a.convert(0),U=a.convert(V),H=B-$,N=Math.abs(U-G),j=V!==0?{text:v({value:S.aggregatedValue,seriesId:f}),fontStyle:m,fontWeight:y,fontSize:b,fontFamily:C,fill:x,x:$+H/2,y:U+N/2}:void 0;d.push({series:w,datum:S,x:$,y:U,width:H,height:N,fill:l,stroke:u,strokeWidth:c,label:j})}),[2,[{itemId:this.yKey,nodeData:d,labelData:d}]])})})},t.prototype.updateDatumSelection=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n,o,a;return __generator$3(this,function(s){return r=e.nodeData,n=e.datumSelection,o=n.setData(r),o.exit.remove(),a=o.enter.append(Rect).each(function(l){l.tag=HistogramSeriesNodeTag.Bin,l.crisp=!0}),[2,o.merge(a)]})})},t.prototype.updateDatumNodes=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w=this;return __generator$3(this,function(P){return r=e.datumSelection,n=e.isHighlight,o=this,a=o.fillOpacity,s=o.strokeOpacity,l=o.shadow,u=o.highlightStyle,c=u.fill,f=u.stroke,d=u.strokeWidth,h=u.item,p=h.fill,g=p===void 0?c:p,v=h.fillOpacity,m=v===void 0?a:v,y=h.stroke,b=y===void 0?f:y,C=h.strokeWidth,x=C===void 0?d:C,r.each(function(S,O,E){var D=n&&x!==void 0?x:O.strokeWidth,R=n?m:a;S.x=O.x,S.y=O.y,S.width=O.width,S.height=O.height,S.fill=n&&g!==void 0?g:O.fill,S.stroke=n&&b!==void 0?b:O.stroke,S.fillOpacity=R,S.strokeOpacity=s,S.strokeWidth=D,S.lineDash=w.lineDash,S.lineDashOffset=w.lineDashOffset,S.fillShadow=l,S.zIndex=n?Series.highlightedZIndex:E,S.visible=O.height>0}),[2]})})},t.prototype.updateLabelSelection=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n,o,a;return __generator$3(this,function(s){return r=e.labelData,n=e.labelSelection,o=n.setData(r),o.exit.remove(),a=o.enter.append(Text$1).each(function(l){l.tag=HistogramSeriesNodeTag.Label,l.pointerEvents=PointerEvents$1.None,l.textAlign="center",l.textBaseline="middle"}),[2,o.merge(a)]})})},t.prototype.updateLabelNodes=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n;return __generator$3(this,function(o){return r=e.labelSelection,n=this.label.enabled,r.each(function(a,s){var l=s.label;l&&n?(a.text=l.text,a.x=l.x,a.y=l.y,a.fontStyle=l.fontStyle,a.fontWeight=l.fontWeight,a.fontSize=l.fontSize,a.fontFamily=l.fontFamily,a.fill=l.fill,a.visible=!0):a.visible=!1}),[2]})})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,o=r.yKey,a=r.xAxis,s=r.yAxis;if(!n||!a||!s)return"";var l=this,u=l.xName,c=l.yName,f=l.fill,d=l.tooltip,h=l.aggregation,p=l.id,g=d.renderer,v=e.datum,m=v.aggregatedValue,y=v.frequency,b=__read$p(v.domain,2),C=b[0],x=b[1],w=sanitizeHtml(u||n)+": "+a.formatDatum(C)+" - "+a.formatDatum(x),P=o?"<b>"+sanitizeHtml(c||o)+" ("+h+")</b>: "+s.formatDatum(m)+"<br>":"";P+="<b>Frequency</b>: "+y;var S={title:w,backgroundColor:f,content:P};return g?toTooltipHtml$1(g({datum:v,xKey:n,xValue:v.domain,xName:u,yKey:o,yValue:v.aggregatedValue,yName:c,color:f,title:w,seriesId:p}),S):toTooltipHtml$1(S)},t.prototype.getLegendData=function(){var e=this,r=e.id,n=e.data,o=e.xKey,a=e.yName,s=e.visible,l=e.fill,u=e.stroke,c=e.fillOpacity,f=e.strokeOpacity;return!n||n.length===0?[]:[{id:r,itemId:o,seriesId:r,enabled:s,label:{text:a||o||"Frequency"},marker:{fill:l||"rgba(0, 0, 0, 0)",stroke:u||"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:f}}]},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="HistogramSeries",t.type="histogram",__decorate$1c([Validate(OPT_COLOR_STRING)],t.prototype,"fill",void 0),__decorate$1c([Validate(OPT_COLOR_STRING)],t.prototype,"stroke",void 0),__decorate$1c([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0),__decorate$1c([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0),__decorate$1c([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0),__decorate$1c([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0),__decorate$1c([Validate(STRING)],t.prototype,"xKey",void 0),__decorate$1c([Validate(BOOLEAN)],t.prototype,"areaPlot",void 0),__decorate$1c([Validate(OPT_ARRAY())],t.prototype,"bins",void 0),__decorate$1c([Validate(HISTOGRAM_AGGREGATION)],t.prototype,"aggregation",void 0),__decorate$1c([Validate(OPT_NUMBER(0))],t.prototype,"binCount",void 0),__decorate$1c([Validate(STRING)],t.prototype,"xName",void 0),__decorate$1c([Validate(STRING)],t.prototype,"yKey",void 0),__decorate$1c([Validate(STRING)],t.prototype,"yName",void 0),__decorate$1c([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),t}(CartesianSeries),__extends$23=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),HierarchySeries=function(i){__extends$23(t,i);function t(){return i.call(this,{pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this}return t.prototype.getLabelData=function(){return[]},t}(Series),__extends$22=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1b=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DropShadow=function(i){__extends$22(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return __decorate$1b([ValidateAndChangeDetection({validatePredicate:BOOLEAN,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"enabled",void 0),__decorate$1b([ValidateAndChangeDetection({validatePredicate:COLOR_STRING,sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"color",void 0),__decorate$1b([ValidateAndChangeDetection({validatePredicate:NUMBER(),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"xOffset",void 0),__decorate$1b([ValidateAndChangeDetection({validatePredicate:NUMBER(),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"yOffset",void 0),__decorate$1b([ValidateAndChangeDetection({validatePredicate:NUMBER(0),sceneChangeDetectionOpts:{redraw:RedrawType.MAJOR}})],t.prototype,"blur",void 0),t}(ChangeDetectable);function slice(i,t,e,r,n){var o=i.children,a=i.value&&(n-e)/i.value;o.forEach(function(s){s.x0=t,s.x1=r,s.y0=e,s.y1=e+=s.value*a})}function dice(i,t,e,r,n){var o=i.children,a=i.value&&(r-t)/i.value;o.forEach(function(s){s.x0=t,s.x1=t+=s.value*a,s.y0=e,s.y1=n})}function roundNode(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function squarifyRatio(i,t,e,r,n,o){for(var a=[],s=t.children,l=s.length,u=t.value,c=0,f=0,d,h,p,g,v,m,y,b,C,x;c<l;){d=n-e,h=o-r;do g=s[f++].value;while(!g&&f<l);for(v=m=g,C=Math.max(h/d,d/h)/(u*i),x=g*g*C,b=Math.max(m/x,x/v);f<l;++f){if(p=s[f].value,g+=p,p<v&&(v=p),p>m&&(m=p),x=g*g*C,y=Math.max(m/x,x/v),y>b){g-=p;break}b=y}var w={value:g,dice:d<h,children:s.slice(c,f)};if(a.push(w),w.dice){var P=r,S=o;u&&(r+=h*g/u,S=r),dice(w,e,P,n,S)}else{var O=e,E=n;u&&(e+=d*g/u,E=e),slice(w,O,r,E,o)}u-=g,c=f}return a}var phi=(1+Math.sqrt(5))/2,squarify=function i(t){function e(r,n,o,a,s){squarifyRatio(t,r,n,o,a,s)}return e.ratio=function(r){return i((r=+r)>1?r:1)},e}(phi),Treemap=function(){function i(){this.paddingStack=[0],this.dx=1,this.dy=1,this.round=!0,this.tile=squarify,this.paddingInner=function(t){return 0},this.paddingTop=function(t){return 0},this.paddingRight=function(t){return 0},this.paddingBottom=function(t){return 0},this.paddingLeft=function(t){return 0}}return Object.defineProperty(i.prototype,"size",{get:function(){return[this.dx,this.dy]},set:function(t){this.dx=t[0],this.dy=t[1]},enumerable:!0,configurable:!0}),i.prototype.processData=function(t){return t.x0=0,t.y0=0,t.x1=this.dx,t.y1=this.dy,t.eachBefore(this.positionNode.bind(this)),this.paddingStack=[0],this.round&&t.eachBefore(roundNode),t},i.prototype.positionNode=function(t){var e=this.paddingStack[t.depth],r=t.x0+e,n=t.y0+e,o=t.x1-e,a=t.y1-e;o<r&&(r=o=(r+o)/2),a<n&&(n=a=(n+a)/2),t.x0=r,t.y0=n,t.x1=o,t.y1=a,t.children&&(e=this.paddingStack[t.depth+1]=this.paddingInner(t)/2,r+=this.paddingLeft(t)-e,n+=this.paddingTop(t)-e,o-=this.paddingRight(t)-e,a-=this.paddingBottom(t)-e,o<r&&(r=o=(r+o)/2),a<n&&(n=a=(n+a)/2),this.tile(t,r,n,o,a))},i}(),__values$a=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$o=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$a=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$o(arguments[t]));return i},HierarchyNode=function(){function i(t){this.value=0,this.depth=0,this.height=0,this.parent=void 0,this.children=void 0,this.datum=t}return i.prototype.countFn=function(t){var e=0,r=t.children;if(!r||!r.length)e=1;else for(var n=r.length;--n>=0;)e+=r[n].value;t.value=e},i.prototype.count=function(){return this.eachAfter(this.countFn)},i.prototype.each=function(t,e){var r=this,n=-1;return this.iterator(function(o){t.call(e,o,++n,r)}),this},i.prototype.eachAfter=function(t,e){for(var r=this,n=[r],o=[];r=n.pop();){o.push(r);var a=r.children;if(a)for(var s=0,l=a.length;s<l;++s)n.push(a[s])}for(var u=-1;r=o.pop();)t.call(e,r,++u,this);return this},i.prototype.eachBefore=function(t,e){for(var r=this,n=[r],o=-1;r=n.pop();){t.call(e,r,++o,this);var a=r.children;if(a)for(var s=a.length-1;s>=0;--s){var l=a[s];n.push(l)}}return this},i.prototype.find=function(t,e){var r=this,n=-1,o;return this.iterator(function(a){if(t.call(e,a,++n,r))return o=a,!1}),o},i.prototype.sum=function(t){return this.eachAfter(function(e){var r=+t(e.datum)||0,n=e.children;if(n)for(var o=n.length;--o>=0;)r+=n[o].value;e.value=r})},i.prototype.sort=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},i.prototype.path=function(t){for(var e=this,r=leastCommonAncestor(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var o=n.length;t!==r;)n.splice(o,0,t),t=t.parent;return n},i.prototype.ancestors=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},i.prototype.descendants=function(){var t=[];return this.iterator(function(e){return t.push(e)}),t},i.prototype.leaves=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},i.prototype.links=function(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e},i.prototype.iterator=function(t){var e,r,n=this.children,o=n===void 0?[]:n;if(t(this)===!1)return!1;try{for(var a=__values$a(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.iterator(t)===!1)return!1}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return!0},i}();function hierarchy(i,t){i instanceof Map?(i=[void 0,i],t===void 0&&(t=mapChildren)):t===void 0&&(t=objectChildren);for(var e=new HierarchyNode(i),r=[e],n=function(){var o=r.pop(),a=t(o.datum);if(!a)return"continue";var s=Array.from(a).map(function(l){return new HierarchyNode(l)});s.forEach(function(l){l.parent=o,l.depth=o.depth+1}),o.children=s,r.push.apply(r,__spread$a(s))};r.length>0;)n();return e.eachBefore(computeHeight)}function computeHeight(i){var t=0;do i.height=t,i=i.parent;while(i&&i.height<++t)}function mapChildren(i){return Array.isArray(i)?i[1]:void 0}function objectChildren(i){return i.children}function leastCommonAncestor(i,t){if(i&&t){if(i===t)return i;var e=i.ancestors(),r=t.ancestors(),n=void 0;for(i=e.pop(),t=r.pop();i===t;)n=i,i=e.pop(),t=r.pop();return n}}var __extends$21=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$1a=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$2=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$2=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__values$9=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},TreemapSeriesTooltip=function(i){__extends$21(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e}return __decorate$1a([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),t}(SeriesTooltip),TreemapSeriesNodeClickEvent=function(i){__extends$21(t,i);function t(e,r,n,o,a,s){var l=i.call(this,o,a,s)||this;return l.labelKey=e,l.sizeKey=r,l.colorKey=n,l}return t}(SeriesNodeClickEvent),TreemapSeriesLabel=function(i){__extends$21(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.padding=10,e}return __decorate$1a([Validate(NUMBER(0))],t.prototype,"padding",void 0),t}(Label$1),TextNodeTag;(function(i){i[i.Name=0]="Name",i[i.Value=1]="Value"})(TextNodeTag||(TextNodeTag={}));var TreemapSeries=function(i){__extends$21(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.groupSelection=Selection$1.select(e.pickGroup).selectAll(),e.highlightSelection=Selection$1.select(e.highlightGroup).selectAll(),e.layout=new Treemap,e.title=function(){var r=new TreemapSeriesLabel;return r.color="white",r.fontWeight="bold",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.padding=15,r}(),e.subtitle=function(){var r=new TreemapSeriesLabel;return r.color="white",r.fontSize=9,r.fontFamily="Verdana, sans-serif",r.padding=13,r}(),e.labels={large:function(){var r=new Label$1;return r.color="white",r.fontWeight="bold",r.fontSize=18,r}(),medium:function(){var r=new Label$1;return r.color="white",r.fontWeight="bold",r.fontSize=14,r}(),small:function(){var r=new Label$1;return r.color="white",r.fontWeight="bold",r.fontSize=10,r}(),color:function(){var r=new Label$1;return r.color="white",r}()},e._nodePadding=2,e.labelKey="label",e.sizeKey="size",e.colorKey="color",e.colorDomain=[-5,5],e.colorRange=["#cb4b3f","#6acb64"],e.colorParents=!1,e.gradient=!0,e.formatter=void 0,e.colorName="Change",e.rootName="Root",e.shadow=function(){var r=new DropShadow;return r.color="rgba(0, 0, 0, 0.4)",r.xOffset=1.5,r.yOffset=1.5,r}(),e.tooltip=new TreemapSeriesTooltip,e}return Object.defineProperty(t.prototype,"nodePadding",{get:function(){return this._nodePadding},set:function(e){this._nodePadding!==e&&(this._nodePadding=e,this.updateLayoutPadding())},enumerable:!0,configurable:!0}),t.prototype.updateLayoutPadding=function(){var e=this,r=e.title,n=e.subtitle,o=e.nodePadding,a=e.labelKey;this.layout.paddingRight=function(s){return o},this.layout.paddingBottom=function(s){return o},this.layout.paddingLeft=function(s){return o},this.layout.paddingTop=function(s){var l=s.datum[a]||"";s.children&&(l=l.toUpperCase());var u=s.depth>1?n:r,c=HdpiCanvas$1.getTextSize(l,[u.fontWeight,u.fontSize+"px",u.fontFamily].join(" ").trim()),f=s.x1-s.x0-o*2,d=s.depth>0&&s.children&&c.width<=f;return s.hasTitle=!!d,d?c.height+o*2:o}},t.prototype.processData=function(){return __awaiter$2(this,void 0,void 0,function(){function e(p,g){g===void 0&&(g=0);var v=p.children,m=p.datum,y=m[a],b=s?m[s]:g;Object.assign(p,{series:h}),p.fill=!v||c?d.convert(b):"#272931",p.colorValue=b,y?p.label=v?y.toUpperCase():y:p.label="",v&&v.forEach(function(C){return e(C,g+1)})}var r,n,o,a,s,l,u,c,f,d,h;return __generator$2(this,function(p){return this.data?(r=this,n=r.data,o=r.sizeKey,a=r.labelKey,s=r.colorKey,l=r.colorDomain,u=r.colorRange,c=r.colorParents,o?f=hierarchy(n).sum(function(g){return g.children?1:g[o]}):f=hierarchy(n).sum(function(g){return g.children?0:1}),this.dataRoot=f,d=new LinearScale$1,d.domain=l,d.range=u,h=this,e(this.dataRoot),[2]):[2]})})},t.prototype.getLabelCenterX=function(e){return(e.x0+e.x1)/2},t.prototype.getLabelCenterY=function(e){return(e.y0+e.y1)/2+2},t.prototype.createNodeData=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(e){return[2,[]]})})},t.prototype.update=function(){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(e){switch(e.label){case 0:return[4,this.updateSelections()];case 1:return e.sent(),[4,this.updateNodes()];case 2:return e.sent(),[2]}})})},t.prototype.updateSelections=function(){return __awaiter$2(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c;return __generator$2(this,function(f){return this.nodeDataRefresh?(this.nodeDataRefresh=!1,e=this,r=e.chart,n=e.dataRoot,!r||!n?[2]:(o=r.getSeriesRect(),o?(this.layout.size=[o.width,o.height],this.updateLayoutPadding(),a=this.layout.processData(n).descendants(),s=this,l=s.groupSelection,u=s.highlightSelection,c=function(d){var h=d.setData(a);h.exit.remove();var p=h.enter.append(Group$1);return p.append(Rect),p.append(Text$1).each(function(g){return g.tag=TextNodeTag.Name}),p.append(Text$1).each(function(g){return g.tag=TextNodeTag.Value}),h.merge(p)},this.groupSelection=c(l),this.highlightSelection=c(u),[2]):[2])):[2]})})},t.prototype.updateNodes=function(){return __awaiter$2(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R=this;return __generator$2(this,function(F){return this.chart?(e=this,r=e.nodePadding,n=e.labels,o=e.shadow,a=e.gradient,s=e.chart.highlightedDatum,l=e.highlightStyle,u=l.fill,c=l.stroke,f=l.strokeWidth,d=l.item,h=d.fill,p=h===void 0?u:h,g=d.fillOpacity,v=d.stroke,m=v===void 0?c:v,y=d.strokeWidth,b=y===void 0?f:y,C=e.formatter,x=e.colorKey,w=e.labelKey,P=e.sizeKey,S=this.buildLabelMeta(this.groupSelection.data),O=function(I,$,B){var V,G,U,H,N,j,W,z,K,X,q,Z=B&&p!==void 0?p:$.fill,ee=(V=B?g:1,V??1),ue=B&&m!==void 0?m:$.depth<2?void 0:"black",ne=B&&b!==void 0?b:1,Q;if(C&&(Q=C({datum:$.datum,colorKey:x,sizeKey:P,labelKey:w,fill:Z,stroke:ue,strokeWidth:ne,gradient:a,highlighted:B})),I.fill=(U=(G=Q)===null||G===void 0?void 0:G.fill,U??Z),I.fillOpacity=(N=(H=Q)===null||H===void 0?void 0:H.fillOpacity,N??ee),I.stroke=(W=(j=Q)===null||j===void 0?void 0:j.stroke,W??ue),I.strokeWidth=(K=(z=Q)===null||z===void 0?void 0:z.strokeWidth,K??ne),I.gradient=(q=(X=Q)===null||X===void 0?void 0:X.gradient,q??a),I.crisp=!0,I.x=$.x0,I.y=$.y0,I.width=$.x1-$.x0,I.height=$.y1-$.y0,B&&$.children){var ie=$.x0,se=$.x1,ae=$.y0,oe=$.y1,fe=R.layout.paddingLeft($),le=R.layout.paddingRight($),Y=R.layout.paddingTop($),re=R.layout.paddingBottom($);I.clipPath?I.clipPath.clear():I.clipPath=new Path2D$1,I.clipMode="punch-out",I.clipPath.moveTo(ie+fe,ae+Y),I.clipPath.lineTo(se-le,ae+Y),I.clipPath.lineTo(se-le,oe-re),I.clipPath.lineTo(ie+fe,oe-re),I.clipPath.lineTo(ie+fe,ae+Y),I.clipPath.closePath()}},this.groupSelection.selectByClass(Rect).each(function(I,$){return O(I,$,!1)}),this.highlightSelection.selectByClass(Rect).each(function(I,$){var B=$===s;I.visible=B,I.visible&&O(I,$,B)}),E=function(I,$,B,V){var G,U=$.hasTitle,H=(G=S[B],G??{}),N=H.label,j=H.nodeBaseline;N!=null&&j!=null?(I.textBaseline=j,I.fontWeight=N.fontWeight,I.fontSize=N.fontSize,I.fontFamily=N.fontFamily,I.textAlign=U?"left":"center",I.text=$.label,I.fill=V?"black":N.color,I.fillShadow=V?void 0:o,I.visible=!0):I.visible=!1,U?(I.x=$.x0+r,I.y=$.y0+r):(I.x=R.getLabelCenterX($),I.y=R.getLabelCenterY($))},this.groupSelection.selectByTag(TextNodeTag.Name).each(function(I,$,B){return E(I,$,B,!1)}),this.highlightSelection.selectByTag(TextNodeTag.Name).each(function(I,$,B){var V=$===s;I.visible=V,I.visible&&E(I,$,B,V)}),D=function(I,$,B,V){var G,U=(G=S[B],G??{}),H=U.valueBaseline,N=U.valueText,j=n.color;j.enabled&&H!=null&&N?(I.fontSize=j.fontSize,I.fontFamily=j.fontFamily,I.fontStyle=j.fontStyle,I.fontWeight=j.fontWeight,I.textBaseline=H,I.textAlign="center",I.text=N,I.fill=V?"black":j.color,I.fillShadow=V?void 0:o,I.visible=!0,I.x=R.getLabelCenterX($),I.y=R.getLabelCenterY($)):I.visible=!1},this.groupSelection.selectByTag(TextNodeTag.Value).each(function(I,$,B){return D(I,$,B,!1)}),this.highlightSelection.selectByTag(TextNodeTag.Value).each(function(I,$,B){var V=$===s;I.visible=V,I.visible&&D(I,$,B,V)}),[2]):[2]})})},t.prototype.buildLabelMeta=function(e){var r,n,o=this,a=o.labels,s=o.title,l=o.subtitle,u=o.nodePadding,c=o.colorKey,f=[];f.length=this.groupSelection.data.length;var d=new Text$1,h=0;try{for(var p=__values$9(e),g=p.next();!g.done;g=p.next()){var v=g.value,m=v.value,y=!v.children,b=v.x1-v.x0-u*2,C=v.y1-v.y0-u*2,x=v.hasTitle,w=void 0;if(y?b>40&&C>40?w=a.large:b>20&&C>20?w=a.medium:w=a.small:v.depth>1?w=l:w=s,!w.enabled){f[h++]=void 0;continue}d.fontWeight=w.fontWeight,d.fontSize=w.fontSize,d.fontFamily=w.fontFamily,d.textAlign=x?"left":"center",d.text=v.label;var P=d.computeBBox(),S=y&&!!P&&P.width<=b&&P.height*2+8<=C,O=typeof m=="number"&&isFinite(m)?String(toFixed(v.colorValue))+"%":"";d.fontSize=a.color.fontSize,d.fontFamily=a.color.fontFamily,d.fontStyle=a.color.fontStyle,d.fontWeight=a.color.fontWeight,d.text=O;var E=d.computeBBox(),D=y&&!!c&&S&&!!E&&E.width<b,R=D?"bottom":y?"middle":x?"top":"middle";f[h++]={label:w,nodeBaseline:x||S?R:void 0,valueBaseline:D?"top":void 0,valueText:O}}}catch(F){r={error:F}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return f},t.prototype.getDomain=function(e){return[0,1]},t.prototype.getNodeClickEvent=function(e,r){return new TreemapSeriesNodeClickEvent(this.labelKey,this.sizeKey,this.colorKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r=this,n=r.tooltip,o=r.sizeKey,a=r.labelKey,s=r.colorKey,l=r.colorName,u=r.rootName,c=r.id,f=e.datum,d=n.renderer,h=e.depth?f[a]:u||f[a],p=void 0,g=e.fill||"gray";if(s&&l){var v=f[s];typeof v=="number"&&isFinite(v)&&(p="<b>"+l+"</b>: "+toFixed(f[s]))}var m={title:h,backgroundColor:g,content:p};return d?toTooltipHtml$1(d({datum:e,sizeKey:o,labelKey:a,colorKey:s,title:h,color:g,seriesId:c}),m):toTooltipHtml$1(m)},t.prototype.getLegendData=function(){return[]},t.className="TreemapSeries",t.type="treemap",__decorate$1a([Validate(STRING)],t.prototype,"labelKey",void 0),__decorate$1a([Validate(OPT_STRING)],t.prototype,"sizeKey",void 0),__decorate$1a([Validate(OPT_STRING)],t.prototype,"colorKey",void 0),__decorate$1a([Validate(NUMBER_ARRAY)],t.prototype,"colorDomain",void 0),__decorate$1a([Validate(COLOR_STRING_ARRAY)],t.prototype,"colorRange",void 0),__decorate$1a([Validate(BOOLEAN)],t.prototype,"colorParents",void 0),__decorate$1a([Validate(BOOLEAN)],t.prototype,"gradient",void 0),__decorate$1a([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),__decorate$1a([Validate(STRING)],t.prototype,"colorName",void 0),__decorate$1a([Validate(STRING)],t.prototype,"rootName",void 0),t}(HierarchySeries),__extends$20=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$19=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Sector=function(i){__extends$20(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.centerX=0,e.centerY=0,e.centerOffset=0,e.innerRadius=10,e.outerRadius=20,e.startAngle=0,e.endAngle=Math.PI*2,e.angleOffset=0,e}return t.prototype.computeBBox=function(){var e=this.outerRadius;return new BBox$1(this.centerX-e,this.centerY-e,e*2,e*2)},t.prototype.isFullPie=function(){return isEqual(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle))},t.prototype.updatePath=function(){var e=this.path,r=this.angleOffset,n=Math.min(this.startAngle,this.endAngle)+r,o=Math.max(this.startAngle,this.endAngle)+r,a=(n+o)*.5,s=Math.min(this.innerRadius,this.outerRadius),l=Math.max(this.innerRadius,this.outerRadius),u=this.centerOffset,c=this.isFullPie(),f=this.centerX,d=this.centerY;if(e.clear(),u&&(f+=u*Math.cos(a),d+=u*Math.sin(a)),c||(e.moveTo(f+s*Math.cos(n),d+s*Math.sin(n)),e.lineTo(f+l*Math.cos(n),d+l*Math.sin(n))),e.cubicArc(f,d,l,l,0,n,o,0),c)e.moveTo(f+s*Math.cos(o),d+s*Math.sin(o));else{var h=f+s*Math.cos(o);e.lineTo(Math.abs(h)<1e-8?0:h,d+s*Math.sin(o))}e.cubicArc(f,d,s,s,0,o,n,1),e.closePath(),this.dirtyPath=!1},t.className="Sector",__decorate$19([ScenePathChangeDetection()],t.prototype,"centerX",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"centerY",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"centerOffset",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"innerRadius",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"outerRadius",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"startAngle",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"endAngle",void 0),__decorate$19([ScenePathChangeDetection()],t.prototype,"angleOffset",void 0),t}(Path$1),__extends$1$=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$t=function(){return __assign$t=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$t.apply(this,arguments)},__decorate$18=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__awaiter$1=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator$1=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$n=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$9=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$n(arguments[t]));return i},PieSeriesNodeClickEvent=function(i){__extends$1$(t,i);function t(e,r,n,o,a,s,l){var u=i.call(this,a,s,l)||this;return u.angleKey=e,u.calloutLabelKey=r,u.sectorLabelKey=n,u.radiusKey=o,u}return __decorate$18([DeprecatedAndRenamedTo("calloutLabelKey")],t.prototype,"labelKey",void 0),t}(SeriesNodeClickEvent),PieHighlightStyle=function(i){__extends$1$(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return __decorate$18([Validate(OPT_NUMBER(0))],t.prototype,"centerOffset",void 0),t}(HighlightStyle),PieNodeTag;(function(i){i[i.Sector=0]="Sector",i[i.Callout=1]="Callout",i[i.Label=2]="Label"})(PieNodeTag||(PieNodeTag={}));var PieSeriesCalloutLabel=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.offset=3,e.minAngle=20,e.formatter=void 0,e}return __decorate$18([Validate(NUMBER(0))],t.prototype,"offset",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"minAngle",void 0),__decorate$18([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),t}(Label$1),PieSeriesSectorLabel=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.positionOffset=0,e.positionRatio=.5,e.formatter=void 0,e}return __decorate$18([Validate(NUMBER())],t.prototype,"positionOffset",void 0),__decorate$18([Validate(NUMBER(0,1))],t.prototype,"positionRatio",void 0),__decorate$18([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),t}(Label$1),PieSeriesCalloutLine=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.colors=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.length=10,e.strokeWidth=1,e}return __decorate$18([Validate(COLOR_STRING_ARRAY)],t.prototype,"colors",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"length",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),t}(Observable$1),PieSeriesTooltip=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.renderer=void 0,e}return __decorate$18([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0),t}(SeriesTooltip),PieTitle=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.showInLegend=!1,e}return __decorate$18([Validate(BOOLEAN)],t.prototype,"showInLegend",void 0),t}(Caption),DoughnutInnerLabel=function(i){__extends$1$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.text="",e.margin=2,e}return __decorate$18([Validate(STRING)],t.prototype,"text",void 0),__decorate$18([Validate(NUMBER())],t.prototype,"margin",void 0),t}(Label$1),DoughnutInnerCircle=function(){function i(){this.fill="transparent",this.fillOpacity=1}return __decorate$18([Validate(COLOR_STRING)],i.prototype,"fill",void 0),__decorate$18([Validate(OPT_NUMBER(0,1))],i.prototype,"fillOpacity",void 0),i}();function isPointInArc(i,t,e){var r=Math.sqrt(Math.pow(i,2)+Math.pow(t,2)),n=e.innerRadius,o=e.outerRadius;if(r<Math.min(n,o)||r>Math.max(n,o))return!1;var a=Math.atan2(t,i);a<-Math.PI/2&&(a+=2*Math.PI);var s=e.startAngle,l=e.endAngle;return l===-Math.PI/2?a<s:s===3*Math.PI/2?a>l:a>=l&&a<=s}var PieSeries=function(i){__extends$1$(t,i);function t(){var e=i.call(this,{useLabelLayer:!0})||this;e.radiusScale=new LinearScale$1,e.groupSelection=Selection$1.select(e.pickGroup).selectAll(),e.highlightSelection=Selection$1.select(e.highlightGroup).selectAll(),e.groupSelectionData=[],e.sectorFormatData=[],e.angleScale=function(){var a=new LinearScale$1;return a.domain=[0,1],a.range=[-Math.PI,Math.PI].map(function(s){return s+Math.PI/2}),a}(),e.seriesItemEnabled=[],e.calloutLabel=new PieSeriesCalloutLabel,e.label=e.calloutLabel,e.sectorLabel=new PieSeriesSectorLabel,e.calloutLine=new PieSeriesCalloutLine,e.callout=e.calloutLine,e.tooltip=new PieSeriesTooltip,e.angleKey="",e.angleName="",e.innerLabels=[],e.radiusKey=void 0,e.radiusName=void 0,e.radiusMin=void 0,e.radiusMax=void 0,e.calloutLabelKey=void 0,e.calloutLabelName=void 0,e.labelKey=void 0,e.labelName=void 0,e.sectorLabelKey=void 0,e.sectorLabelName=void 0,e.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],e.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.fillOpacity=1,e.strokeOpacity=1,e.lineDash=[0],e.lineDashOffset=0,e.formatter=void 0,e.rotation=0,e.outerRadiusOffset=0,e.outerRadiusRatio=1,e.innerRadiusOffset=0,e.innerRadiusRatio=1,e.strokeWidth=1,e.shadow=void 0,e.highlightStyle=new PieHighlightStyle,e.datumSectorRefs=new WeakMap;var r=new Group$1,n=new Group$1,o=new Group$1;return e.labelGroup.append(r),e.labelGroup.append(n),e.labelGroup.append(o),e.calloutSelection=Selection$1.select(r).selectAll(),e.sectorLabelSelection=Selection$1.select(n).selectAll(),e.innerLabelsSelection=Selection$1.select(o).selectAll(),e}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){var r,n,o=this._title;o!==e&&(o&&((r=this.labelGroup)===null||r===void 0||r.removeChild(o.node)),e&&(e.node.textBaseline="bottom",(n=this.labelGroup)===null||n===void 0||n.appendChild(e.node)),this._title=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.processSeriesItemEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerCircle",{get:function(){return this._innerCircleConfig},set:function(e){var r,n=this._innerCircleConfig;if(n!==e){var o=this._innerCircleNode,a=void 0;o&&this.backgroundGroup.removeChild(o),e&&(a=new Circle$1,a.fill=e.fill,a.fillOpacity=(r=e.fillOpacity,r??1),this.backgroundGroup.appendChild(a)),this._innerCircleConfig=e,this._innerCircleNode=a}},enumerable:!0,configurable:!0}),t.prototype.visibleChanged=function(){this.processSeriesItemEnabled()},t.prototype.processSeriesItemEnabled=function(){var e,r=this,n=r.data,o=r.visible;this.seriesItemEnabled=((e=n)===null||e===void 0?void 0:e.map(function(){return o}))||[]},t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r,this.calloutLine.colors=r},t.prototype.getDomain=function(e){return e===ChartAxisDirection.X?this.angleScale.domain:this.radiusScale.domain},t.prototype.processData=function(){return __awaiter$1(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U,H,N=this;return __generator$1(this,function(j){return e=this,r=e.angleKey,n=e.radiusKey,o=e.seriesItemEnabled,a=e.angleScale,s=e.groupSelectionData,l=e.sectorFormatData,u=e.calloutLabel,c=e.sectorLabel,f=e.id,d=r&&this.data?this.data:[],h=d.map(function(W,z){return o[z]&&Math.abs(+W[r])||0}),p=h.reduce(function(W,z){return W+z},0),g=function(){var W=0;return h.map(function(z){return W+=z/p})}(),v=u.formatter,m=u.enabled?this.calloutLabelKey:void 0,y=c.enabled?this.sectorLabelKey:void 0,b=[],C=[],x=[],w=function(W){return{datum:W,angleKey:r,angleValue:W[r],angleName:N.angleName,radiusKey:n,radiusValue:n?W[n]:void 0,radiusName:N.radiusName,labelKey:m,labelValue:m?W[m]:void 0,labelName:N.calloutLabelName,calloutLabelKey:m,calloutLabelValue:m?W[m]:void 0,calloutLabelName:N.calloutLabelName,sectorLabelKey:y,sectorLabelValue:y?W[y]:void 0,sectorLabelName:N.sectorLabelName,seriesId:f}},m&&(v?(P=function(){return doOnce$1(function(){return console.warn("AG Charts - the use of { value } in the pie chart label formatter function is deprecated. Please use { datum, labelKey, ... } instead.")},'deprecated use of "value" property in pie chart label formatter')},b=d.map(function(W){var z=W[m],K=__assign$t(__assign$t({},w(W)),{get value(){return P(),z},set value(X){P(),z=X}});return v(K)})):b=d.map(function(W){return String(W[m])})),S=c.formatter,y&&(S?C=d.map(function(W){var z=w(W);return S(z)}):C=d.map(function(W){return String(W[y])})),n&&(O=this,E=O.radiusMin,D=O.radiusMax,R=d.map(function(W){return Math.abs(W[n])}),F=E??0,I=D||Math.max.apply(Math,__spread$9(R)),$=I-F,x=R.map(function(W){return $?(W-F)/$:1})),s.length=0,l.length=0,l.push.apply(l,__spread$9(d.map(function(W,z){return N.getSectorFormat(W,z,z,!1)}))),B=toRadians(this.rotation),V=Math.PI/2,G=0,U=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],H=0,g.forEach(function(W){if(!isNaN(W)){var z=n?x[G]:1,K=a.convert(W)+B,X=a.convert(H)+B,q=(K+X)/2,Z=Math.abs(X-K),ee=Math.cos(q),ue=Math.sin(q),ne=toRadians(u.minAngle),Q=m&&Z>ne,ie=normalizeAngle180(q),se=-3*Math.PI/4,ae=ie-se,oe=Math.floor(ae/V),fe=mod(oe,U.length),le=U[fe],Y=le.textAlign,re=le.textBaseline,he=d[G],de=G;s.push({series:N,datum:he,itemId:de,index:G,radius:z,startAngle:K,endAngle:X,midAngle:q,midCos:ee,midSin:ue,calloutLabel:Q?{text:b[G],textAlign:Y,textBaseline:re}:void 0,sectorLabel:y?{text:C[G]}:void 0,sectorFormat:l[G]}),G++,H=W}}),[2]})})},t.prototype.getSectorFormat=function(e,r,n,o){var a,s,l,u,c,f,d,h,p,g,v,m,y,b=this,C=b.angleKey,x=b.radiusKey,w=b.fills,P=b.strokes,S=b.fillOpacity,O=b.formatter,E=b.id,D=this.chart.highlightedDatum,R=o&&((a=D)===null||a===void 0?void 0:a.series)===this&&r===D.itemId,F=R?this.highlightStyle.item:null,I=((s=F)===null||s===void 0?void 0:s.fill)||w[n%w.length],$=(u=(l=F)===null||l===void 0?void 0:l.fillOpacity,u??S),B=((c=F)===null||c===void 0?void 0:c.stroke)||P[n%P.length],V=(d=(f=F)===null||f===void 0?void 0:f.strokeWidth,d??this.getStrokeWidth(this.strokeWidth)),G;return O&&(G=O({datum:e,angleKey:C,radiusKey:x,fill:I,stroke:B,strokeWidth:V,highlighted:R,seriesId:E})),{fill:((h=G)===null||h===void 0?void 0:h.fill)||I,fillOpacity:(g=(p=G)===null||p===void 0?void 0:p.fillOpacity,g??$),stroke:((v=G)===null||v===void 0?void 0:v.stroke)||B,strokeWidth:(y=(m=G)===null||m===void 0?void 0:m.strokeWidth,y??V)}},t.prototype.createNodeData=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){return[2,[]]})})},t.prototype.getInnerRadius=function(){var e=this,r=e.radius,n=e.innerRadiusRatio,o=e.innerRadiusOffset,a=r*(n??1)+(o||0);return a===r||a<0?0:a},t.prototype.getOuterRadius=function(){var e=this,r=e.radius,n=e.outerRadiusRatio,o=e.outerRadiusOffset,a=r*(n??1)+(o||0);return a<0?0:a},t.prototype.update=function(){return __awaiter$1(this,void 0,void 0,function(){var e,r,n,o,a;return __generator$1(this,function(s){switch(s.label){case 0:return e=this.title,r=this.getInnerRadius(),n=this.getOuterRadius(),this.radiusScale.range=[r,n],this.group.translationX=this.centerX,this.group.translationY=this.centerY,e&&(o=Math.max(0,this.radiusScale.range[1]),o===0?e.node.visible=!1:(a=2,e.node.translationY=-o-a,e.node.visible=e.enabled)),[4,this.updateSelections()];case 1:return s.sent(),[4,this.updateNodes()];case 2:return s.sent(),[2]}})})},t.prototype.updateSelections=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){switch(e.label){case 0:return[4,this.updateGroupSelection()];case 1:return e.sent(),[2]}})})},t.prototype.updateGroupSelection=function(){return __awaiter$1(this,void 0,void 0,function(){var e,r,n,o,a,s,l,u,c,f,d,h,p,g=this;return __generator$1(this,function(v){return e=this,r=e.groupSelection,n=e.highlightSelection,o=e.calloutSelection,a=e.sectorLabelSelection,s=e.innerLabelsSelection,l=function(m){var y=m.setData(g.groupSelectionData);y.exit.remove();var b=y.enter.append(Group$1);return b.append(Sector).each(function(C){return C.tag=PieNodeTag.Sector}),y.merge(b)},this.groupSelection=l(r),this.highlightSelection=l(n),u=o.setData(this.groupSelectionData),u.exit.remove(),c=u.enter.append(Group$1),c.append(Line$1).each(function(m){m.tag=PieNodeTag.Callout,m.pointerEvents=PointerEvents$1.None}),c.append(Text$1).each(function(m){m.tag=PieNodeTag.Label,m.pointerEvents=PointerEvents$1.None}),this.calloutSelection=u.merge(c),f=a.setData(this.groupSelectionData),f.exit.remove(),d=f.enter.append(Text$1),d.each(function(m){m.pointerEvents=PointerEvents$1.None}),this.sectorLabelSelection=f.merge(d),h=s.setData(this.innerLabels),h.exit.remove(),p=h.enter.append(Text$1),p.each(function(m){m.pointerEvents=PointerEvents$1.None}),this.innerLabelsSelection=h.merge(p),[2]})})},t.prototype.updateNodes=function(){var e,r;return __awaiter$1(this,void 0,void 0,function(){var n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w=this;return __generator$1(this,function(P){return this.chart?(n=this.seriesItemEnabled.indexOf(!0)>=0,this.group.visible=n,this.backgroundGroup.visible=n,this.seriesGroup.visible=n,this.highlightGroup.visible=n&&((r=(e=this.chart)===null||e===void 0?void 0:e.highlightedDatum)===null||r===void 0?void 0:r.series)===this,this.labelGroup.visible=n,this.seriesGroup.opacity=this.getOpacity(),this.updateInnerCircle(),o=this,a=o.radiusScale,s=o.calloutLine,l=o.chart.highlightedDatum,u=[],c=a.convert(0),f=function(S,O,E,D){var R,F=a.convert(O.radius,clamper$1),I=S.parent,$=(R=I)===null||R===void 0?void 0:R.parent;D&&I&&$&&($.removeChild(I),$.appendChild(I)),S.innerRadius=Math.max(0,c),S.outerRadius=Math.max(0,F),S.startAngle=O.startAngle,S.endAngle=O.endAngle;var B=w.getSectorFormat(O.datum,O.itemId,E,D);S.fill=B.fill,S.stroke=B.stroke,S.strokeWidth=B.strokeWidth,S.fillOpacity=B.fillOpacity,S.strokeOpacity=w.strokeOpacity,S.lineDash=w.lineDash,S.lineDashOffset=w.lineDashOffset,S.fillShadow=w.shadow,S.lineJoin="round",u.push(S.centerOffset),w.datumSectorRefs.set(O,S)},this.groupSelection.selectByTag(PieNodeTag.Sector).each(function(S,O,E){return f(S,O,E,!1)}),this.highlightSelection.selectByTag(PieNodeTag.Sector).each(function(S,O,E){var D,R=((D=l)===null||D===void 0?void 0:D.series)===w&&O.itemId===l.itemId;S.visible=R,S.visible&&f(S,O,E,R)}),d=s.colors,h=s.length,p=s.strokeWidth,this.calloutSelection.selectByTag(PieNodeTag.Callout).each(function(S,O,E){var D=a.convert(O.radius,clamper$1),R=Math.max(0,D);O.calloutLabel&&R!==0?(S.strokeWidth=p,S.stroke=d[E%d.length],S.x1=O.midCos*R,S.y1=O.midSin*R,S.x2=O.midCos*(R+h),S.y2=O.midSin*(R+h)):S.stroke=void 0}),g=this.calloutLabel,v=g.offset,m=g.fontStyle,y=g.fontWeight,b=g.fontSize,C=g.fontFamily,x=g.color,this.calloutSelection.selectByTag(PieNodeTag.Label).each(function(S,O,E){var D=O.calloutLabel,R=a.convert(O.radius,clamper$1),F=Math.max(0,R);if(D&&F!==0){var I=u[E]+F+h+v;S.fontStyle=m,S.fontWeight=y,S.fontSize=b,S.fontFamily=C,S.text=D.text,S.x=O.midCos*I,S.y=O.midSin*I,S.fill=x,S.textAlign=D.textAlign,S.textBaseline=D.textBaseline}else S.fill=void 0}),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),[2]):[2]})})},t.prototype.updateSectorLabelNodes=function(){var e=this,r=this.radiusScale,n=r.convert(0),o=this.sectorLabel,a=o.fontSize,s=o.fontStyle,l=o.fontWeight,u=o.fontFamily,c=o.positionOffset,f=o.positionRatio,d=o.color,h=n>0,p=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each(function(g,v){var m=v.sectorLabel,y=r.convert(v.radius,clamper$1),b=Math.max(0,y),C=!1;if(m&&b!==0){var x=n*(1-f)+y*f+c;g.fill=d,g.fontStyle=s,g.fontWeight=l,g.fontSize=a,g.fontFamily=u,g.text=m.text;var w=!h&&p;w?(g.x=0,g.y=0):(g.x=v.midCos*x,g.y=v.midSin*x),g.textAlign="center",g.textBaseline="middle";var P=e.datumSectorRefs.get(v);if(P){var S=g.computeBBox(),O=[[S.x,S.y],[S.x+S.width,S.y],[S.x+S.width,S.y+S.height],[S.x,S.y+S.height]],E=v.startAngle,D=v.endAngle,R={startAngle:E,endAngle:D,innerRadius:n,outerRadius:b};O.every(function(F){var I=__read$n(F,2),$=I[0],B=I[1];return isPointInArc($,B,R)})&&(C=!0)}}g.visible=C})},t.prototype.updateInnerCircle=function(){var e=this._innerCircleNode;if(e){var r=this.getInnerRadius();if(r===0)e.size=0;else{var n=Math.min(r,this.getOuterRadius()),o=1;e.size=Math.ceil(n*2+o)}}},t.prototype.updateInnerLabelNodes=function(){var e=[],r=[];this.innerLabelsSelection.each(function(v,m){var y=m.fontStyle,b=m.fontWeight,C=m.fontSize,x=m.fontFamily,w=m.color;v.fontStyle=y,v.fontWeight=b,v.fontSize=C,v.fontFamily=x,v.text=m.text,v.x=0,v.y=0,v.fill=w,v.textAlign="center",v.textBaseline="alphabetic",e.push(v.computeBBox()),r.push(m.margin)});for(var n=function(v){return v===0?0:r[v]},o=function(v){return v===r.length-1?0:r[v]},a=e.reduce(function(v,m,y){return v+m.height+n(y)+o(y)},0),s=Math.max.apply(Math,__spread$9(e.map(function(v){return v.width}))),l=this.getInnerRadius(),u=Math.sqrt(Math.pow(s/2,2)+Math.pow(a/2,2)),c=u<=(l>0?l:this.getOuterRadius()),f=[],d=0,h=-a/2;d<e.length;d++){var p=e[d],g=p.height+h+n(d);f.push(g),h=g+o(d)}this.innerLabelsSelection.each(function(v,m,y){v.y=f[y],v.visible=c})},t.prototype.getNodeClickEvent=function(e,r){return new PieSeriesNodeClickEvent(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r=this.angleKey;if(!r)return"";var n=this,o=n.tooltip,a=n.angleName,s=n.radiusKey,l=n.radiusName,u=n.calloutLabelKey,c=n.sectorLabelKey,f=n.calloutLabelName,d=n.sectorLabelName,h=n.id,p=o.renderer,g=e.sectorFormat.fill,v=e.datum,m=u?v[u]+": ":"",y=v[r],b=typeof y=="number"?toFixed(y):y.toString(),C=this.title?this.title.text:void 0,x=m+b,w={title:C,backgroundColor:g,content:x};return p?toTooltipHtml$1(p({datum:v,angleKey:r,angleValue:y,angleName:a,radiusKey:s,radiusValue:s?v[s]:void 0,radiusName:l,labelKey:u,labelName:f,calloutLabelKey:u,calloutLabelName:f,sectorLabelKey:c,sectorLabelName:d,title:C,color:g,seriesId:h}),w):toTooltipHtml$1(w)},t.prototype.getLegendData=function(){var e=this,r=this,n=r.calloutLabelKey,o=r.data,a=r.sectorFormatData;if(o&&o.length&&n){var s=this.id,l=[],u=this.title&&this.title.showInLegend&&this.title.text;return o.forEach(function(c,f){var d=[];u&&d.push(u),d.push(String(c[n])),l.push({id:s,itemId:f,seriesId:s,enabled:e.seriesItemEnabled[f],label:{text:d.join(" - ")},marker:{fill:a[f].fill,stroke:a[f].stroke,fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity}})}),l}return[]},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled[e]=r,this.nodeDataRefresh=!0},t.className="PieSeries",t.type="pie",__decorate$18([DeprecatedAndRenamedTo("calloutLabel")],t.prototype,"label",void 0),__decorate$18([DeprecatedAndRenamedTo("calloutLine")],t.prototype,"callout",void 0),__decorate$18([Validate(STRING)],t.prototype,"angleKey",void 0),__decorate$18([Validate(STRING)],t.prototype,"angleName",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"radiusKey",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"radiusName",void 0),__decorate$18([Validate(OPT_NUMBER(0))],t.prototype,"radiusMin",void 0),__decorate$18([Validate(OPT_NUMBER(0))],t.prototype,"radiusMax",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"calloutLabelKey",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"calloutLabelName",void 0),__decorate$18([DeprecatedAndRenamedTo("calloutLabelKey")],t.prototype,"labelKey",void 0),__decorate$18([DeprecatedAndRenamedTo("calloutLabelName")],t.prototype,"labelName",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"sectorLabelKey",void 0),__decorate$18([Validate(OPT_STRING)],t.prototype,"sectorLabelName",void 0),__decorate$18([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0),__decorate$18([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0),__decorate$18([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0),__decorate$18([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0),__decorate$18([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0),__decorate$18([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0),__decorate$18([Validate(NUMBER(-360,360))],t.prototype,"rotation",void 0),__decorate$18([Validate(NUMBER())],t.prototype,"outerRadiusOffset",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"outerRadiusRatio",void 0),__decorate$18([Validate(NUMBER())],t.prototype,"innerRadiusOffset",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"innerRadiusRatio",void 0),__decorate$18([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0),t}(PolarSeries);function floor$b(i){i.setUTCSeconds(0,0)}function offset$b(i,t){i.setTime(i.getTime()+t*durationMinute$1)}function count$b(i,t){return(t.getTime()-i.getTime())/durationMinute$1}function field$9(i){return i.getUTCMinutes()}new CountableTimeInterval$1(floor$b,offset$b,count$b,field$9);function floor$a(i){i.setUTCMinutes(0,0,0)}function offset$a(i,t){i.setTime(i.getTime()+t*durationHour$1)}function count$a(i,t){return(t.getTime()-i.getTime())/durationHour$1}function field$8(i){return i.getUTCHours()}new CountableTimeInterval$1(floor$a,offset$a,count$a,field$8);function floor$9(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)}function offset$9(i,t){i.setUTCMonth(i.getUTCMonth()+t)}function count$9(i,t){return t.getUTCMonth()-i.getUTCMonth()+(t.getUTCFullYear()-i.getUTCFullYear())*12}function field$7(i){return i.getUTCMonth()}new CountableTimeInterval$1(floor$9,offset$9,count$9,field$7);var __assign$s=function(){return __assign$s=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$s.apply(this,arguments)},__read$m=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},palette$8={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]};function arrayMerge(i,t,e){return t}function isMergeableObject(i){return defaultIsMergeableObject$1(i)&&!(i instanceof TimeInterval$1)}var mergeOptions={arrayMerge,isMergeableObject},BOLD="bold",INSIDE="inside",RIGHT="right",ChartTheme=function(){function i(t){t=deepMerge$1({},t||{},mergeOptions);var e=t.overrides,r=e===void 0?null:e,n=t.palette,o=n===void 0?null:n,a=this.createChartConfigPerSeries(this.getDefaults());if(r){var s=r.common,l=r.cartesian,u=r.polar,c=r.hierarchy,f=function(h,p,g){g&&(a[h]=deepMerge$1(a[h],g,mergeOptions),p.forEach(function(v){a[v]=deepMerge$1(a[v],g,mergeOptions)}))};f("common",Object.keys(a),s),f("cartesian",i.cartesianSeriesTypes,l),f("polar",i.polarSeriesTypes,u),f("hierarchy",i.hierarchySeriesTypes,c);var d={};i.seriesTypes.forEach(function(h){var p=r[h];p&&(p.series&&(d[h]=p.series,p.series=d),a[h]=deepMerge$1(a[h],p,mergeOptions))})}this.palette=o??this.getPalette(),this.config=Object.freeze(a)}return i.prototype.getPalette=function(){return palette$8},i.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:BOLD,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}},i.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,cursor:"default",highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1}}}},i.getBarSeriesDefaults=function(){return __assign$s(__assign$s({},this.getSeriesDefaults()),{flipXY:!1,fillOpacity:1,strokeOpacity:1,xKey:"",xName:"",normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:INSIDE},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},i.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return __assign$s(__assign$s({},t),{tooltip:__assign$s(__assign$s({},t.tooltip),{format:void 0})})},i.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},i.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:BOLD,fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)"},legend:{enabled:!0,position:RIGHT,spacing:20,item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1},tooltip:{enabled:!0,tracking:!0,delay:0,class:DEFAULT_TOOLTIP_CLASS}}},i.prototype.createChartConfigPerSeries=function(t){var e={cartesian:i.cartesianSeriesTypes,polar:i.polarSeriesTypes,hierarchy:i.hierarchySeriesTypes,groupedCategory:[]};return Object.entries(e).forEach(function(r){var n=__read$m(r,2),o=n[0],a=n[1];a.forEach(function(s){t[s]||(t[s]=deepMerge$1({},t[o],mergeOptions))})}),t},i.prototype.getConfig=function(t,e){var r=getValue(this.config,t,e);return Array.isArray(r)?deepMerge$1([],r,mergeOptions):isObject(r)?deepMerge$1({},r,mergeOptions):r},i.prototype.getDefaults=function(){return deepMerge$1({},i.defaults,mergeOptions)},i.prototype.mergeWithParentDefaults=function(t,e){return deepMerge$1(t,e,mergeOptions)},i.fontFamily="Verdana, sans-serif",i.cartesianDefaults=__assign$s(__assign$s({},i.getChartDefaults()),{axes:{number:__assign$s({},i.getAxisDefaults()),log:__assign$s(__assign$s({},i.getAxisDefaults()),{base:10}),category:__assign$s(__assign$s({},i.getAxisDefaults()),{groupPaddingInner:.1,label:__assign$s(__assign$s({},i.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:__assign$s({},i.getAxisDefaults()),time:__assign$s({},i.getAxisDefaults())},series:{column:__assign$s(__assign$s({},i.getBarSeriesDefaults()),{flipXY:!1}),bar:__assign$s(__assign$s({},i.getBarSeriesDefaults()),{flipXY:!0}),line:__assign$s(__assign$s({},i.getLineSeriesDefaults()),{title:void 0,xKey:"",xName:"",yKey:"",yName:"",strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:__assign$s(__assign$s({},i.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:__assign$s(__assign$s({},i.getSeriesDefaults()),{title:void 0,xKey:"",yKey:"",sizeKey:void 0,labelKey:void 0,xName:"",yName:"",sizeName:"Size",labelName:"Label",strokeWidth:2,fillOpacity:1,strokeOpacity:1,marker:__assign$s({},i.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)"}}),area:__assign$s(__assign$s({},i.getSeriesDefaults()),{xKey:"",xName:"",normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:__assign$s(__assign$s({},i.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:__assign$s(__assign$s({},i.getSeriesDefaults()),{xKey:"",yKey:"",xName:"",yName:"",strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})},navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}),i.polarDefaults=__assign$s(__assign$s({},i.getChartDefaults()),{series:{pie:__assign$s(__assign$s({},i.getSeriesDefaults()),{title:{enabled:!0,text:"",fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)"},angleKey:"",angleName:"",radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:20},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:i.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),i.hierarchyDefaults=__assign$s(__assign$s({},i.getChartDefaults()),{series:{treemap:__assign$s(__assign$s({},i.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],colorParents:!1,gradient:!0,nodePadding:2,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:15},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:13},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white"},color:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}})}}),i.defaults={cartesian:i.cartesianDefaults,groupedCategory:i.cartesianDefaults,polar:i.polarDefaults,hierarchy:i.hierarchyDefaults},i.cartesianSeriesTypes=["line","area","bar","column","scatter","histogram"],i.polarSeriesTypes=["pie"],i.hierarchySeriesTypes=["treemap"],i.seriesTypes=i.cartesianSeriesTypes.concat(i.polarSeriesTypes).concat(i.hierarchySeriesTypes),i}(),__extends$1_=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$r=function(){return __assign$r=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$r.apply(this,arguments)},DarkTheme=function(i){__extends$1_(t,i);function t(e){return i.call(this,e)||this}return t.prototype.getDefaults=function(){var e="rgb(200, 200, 200)",r="rgb(150, 150, 150)",n={title:{color:e},label:{color:e},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},o={label:{color:e}},a={axes:{number:__assign$r({},n),category:__assign$r({},n),time:__assign$r({},n)}},s={background:{fill:"rgb(34, 38, 41)"},title:{color:e},subtitle:{color:r},legend:{item:{label:{color:e}}}};return this.mergeWithParentDefaults(i.prototype.getDefaults.call(this),{cartesian:__assign$r(__assign$r(__assign$r({},s),a),{series:{bar:__assign$r({},o),column:__assign$r({},o),histogram:__assign$r({},o)}}),groupedCategory:__assign$r(__assign$r(__assign$r({},s),a),{series:{bar:__assign$r({},o),column:__assign$r({},o),histogram:__assign$r({},o)}}),polar:__assign$r(__assign$r({},s),{series:{pie:{calloutLabel:{color:e},sectorLabel:{color:e},title:{color:e},innerLabels:{color:e}}}}),hierarchy:__assign$r(__assign$r({},s),{series:{treemap:{title:{color:e},subtitle:{color:r},labels:{large:{color:e},medium:{color:e},small:{color:e},color:{color:e}}}}})})},t}(ChartTheme),__extends$1Z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$7={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},MaterialLight=function(i){__extends$1Z(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$7},t}(ChartTheme),__extends$1Y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$6={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},MaterialDark=function(i){__extends$1Y(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$6},t}(DarkTheme),__extends$1X=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$5={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},PastelLight=function(i){__extends$1X(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$5},t}(ChartTheme),__extends$1W=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$4={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},PastelDark=function(i){__extends$1W(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$4},t}(DarkTheme),__extends$1V=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$3={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},SolarLight=function(i){__extends$1V(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$3},t}(ChartTheme),__extends$1U=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$2={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},SolarDark=function(i){__extends$1U(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$2},t}(DarkTheme),__extends$1T=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette$1={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},VividLight=function(i){__extends$1T(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette$1},t}(ChartTheme),__extends$1S=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),palette={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},VividDark=function(i){__extends$1S(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getPalette=function(){return palette},t}(DarkTheme),__assign$q=function(){return __assign$q=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$q.apply(this,arguments)},lightTheme=new ChartTheme,darkTheme=new DarkTheme,lightThemes={undefined:lightTheme,null:lightTheme,"ag-default":lightTheme,"ag-material":new MaterialLight,"ag-pastel":new PastelLight,"ag-solar":new SolarLight,"ag-vivid":new VividLight},darkThemes={undefined:darkTheme,null:darkTheme,"ag-default-dark":darkTheme,"ag-material-dark":new MaterialDark,"ag-pastel-dark":new PastelDark,"ag-solar-dark":new SolarDark,"ag-vivid-dark":new VividDark},themes=__assign$q(__assign$q({},darkThemes),lightThemes);function getChartTheme(i){if(i instanceof ChartTheme)return i;var t=themes[i];if(t)return t;if(i=i,i.baseTheme||i.overrides||i.palette){var e=getChartTheme(i.baseTheme);return new e.constructor(i)}return lightTheme}function getIntegratedChartTheme(i){var t=getChartTheme(i),e=t.config;for(var r in e){var n=e[r].axes;for(var o in n)delete n[o].crossLines}return t}var __extends$1R=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$17=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$l=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},identity$3=function(i){return i},LogScale=function(i){__extends$1R(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="log",e._domain=[1,10],e.baseLog=identity$3,e.basePow=identity$3,e._base=10,e}return t.prototype.setDomain=function(e){var r=e[0],n=e[e.length-1];(r===0||n===0||r<0&&n>0||r>0&&n<0)&&(console.warn("Log scale domain should not start at, end at or cross zero."),r===0&&n>0?r=Number.EPSILON:n===0&&r<0?n=-Number.EPSILON:r<0&&n>0?Math.abs(n)>=Math.abs(r)?r=Number.EPSILON:n=-Number.EPSILON:r>0&&n<0&&(Math.abs(n)>=Math.abs(r)?r=-Number.EPSILON:n=Number.EPSILON),e=e.slice(),e[0]=r,e[e.length-1]=n),i.prototype.setDomain.call(this,e)},t.prototype.getDomain=function(){return i.prototype.getDomain.call(this)},Object.defineProperty(t.prototype,"base",{get:function(){return this._base},set:function(e){this._base!==e&&(this._base=e,this.rescale())},enumerable:!0,configurable:!0}),t.prototype.rescale=function(){var e=this.base,r=t.makeLogFn(e),n=t.makePowFn(e);this.domain[0]<0?(r=this.reflect(r),n=this.reflect(n),this.transform=function(o){return-Math.log(-o)},this.untransform=function(o){return-Math.exp(-o)}):(this.transform=function(o){return Math.log(o)},this.untransform=function(o){return Math.exp(o)}),this.baseLog=r,this.basePow=n,i.prototype.rescale.call(this)},t.prototype.reflect=function(e){return function(r){return-e(-r)}},t.prototype.nice=function(){var e,r,n=this.domain,o=0,a=n.length-1,s=n[o],l=n[a];l<s&&(e=__read$l([a,o],2),o=e[0],a=e[1],r=__read$l([l,s],2),s=r[0],l=r[1]),n[o]=this.basePow(Math.floor(this.baseLog(s))),n[a]=this.basePow(Math.ceil(this.baseLog(l))),this.domain=n},t.pow10=function(e){return isFinite(e)?+("1e"+e):e<0?0:e},t.makePowFn=function(e){return e===10?t.pow10:e===Math.E?Math.exp:function(r){return Math.pow(e,r)}},t.makeLogFn=function(e){if(e===Math.E)return Math.log;if(e===10)return Math.log10;if(e===2)return Math.log2;var r=Math.log(e);return function(n){return Math.log(n)/r}},t.prototype.ticks=function(e){var r;e===void 0&&(e=10);var n=e==null?10:+e,o=this.base,a=this.domain,s=a[0],l=a[a.length-1],u=l<s;u&&(r=__read$l([l,s],2),s=r[0],l=r[1]);var c=this.baseLog(s),f=this.baseLog(l),d=[];if(!(o%1)&&f-c<n){if(c=Math.round(c)-1,f=Math.round(f)+1,s>0)for(;c<f;++c)for(var h=1,p=this.basePow(c);h<o;++h){var g=p*h;if(!(g<s)){if(g>l)break;d.push(g)}}else for(;c<f;++c)for(var h=o-1,p=this.basePow(c);h>=1;--h){var g=p*h;if(!(g<s)){if(g>l)break;d.push(g)}}d.length*2<n&&(d=ticks$1(s,l,n))}else d=ticks$1(c,f,Math.min(f-c,n)).map(this.basePow);return u?d.reverse():d},t.prototype.tickFormat=function(e){var r=this,n=e.count,o=e.specifier,a=this.base;if(o==null&&(o=a===10?".0e":","),typeof o!="function"&&(o=format$1(o)),n===1/0)return o;n==null&&(n=10);var s=Math.max(1,a*n/this.ticks().length);return function(l){var u=l/r.basePow(Math.round(r.baseLog(l)));return u*a<a-.5&&(u*=a),u<=s?o(l):""}},__decorate$17([Validate(NUMBER(0))],t.prototype,"_base",void 0),t}(ContinuousScale$1),__extends$1Q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LogAxis=function(i){__extends$1Q(t,i);function t(){var e=i.call(this,new LogScale)||this;return e.scale.clamper=filter,e}return Object.defineProperty(t.prototype,"base",{get:function(){return this.scale.base},set:function(e){this.scale.base=e},enumerable:!0,configurable:!0}),t.className="LogAxis",t.type="log",t}(NumberAxis),DEFAULT_CARTESIAN_CHART_OVERRIDES={type:"cartesian",axes:[{type:NumberAxis.type,position:ChartAxisPosition.Left},{type:CategoryAxis.type,position:ChartAxisPosition.Bottom}]},DEFAULT_BAR_CHART_OVERRIDES={axes:[{type:"number",position:ChartAxisPosition.Bottom},{type:"category",position:ChartAxisPosition.Left}]},DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES={axes:[{type:"number",position:ChartAxisPosition.Bottom},{type:"number",position:ChartAxisPosition.Left}]},__assign$p=function(){return __assign$p=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$p.apply(this,arguments)};function transform(i,t){var e={};for(var r in i){var n=t[r]||function(o){return o};e[r]=n(i[r],i)}return e}function is2dArray(i){return i!=null&&i instanceof Array&&i[0]instanceof Array}function yNamesMapping(i,t){if(i==null)return{};if(!(i instanceof Array))return i;var e=t.yKeys;if(e==null||is2dArray(e))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");var r={};return e.forEach(function(n,o){r[n]=i[o]}),r}function yKeysMapping(i,t){return i==null?[[]]:is2dArray(i)?i:t.grouped?i.map(function(e){return[e]}):[i]}function labelMapping(i){if(i!=null){var t=i.placement;return __assign$p(__assign$p({},i),{placement:t==="inside"?BarLabelPlacement.Inside:t==="outside"?BarLabelPlacement.Outside:void 0})}}function barSeriesTransform(i){var t=__assign$p(__assign$p({},i),{yKeys:i.yKeys||[i.yKey]});return delete t.yKey,transform(t,{yNames:yNamesMapping,yKeys:yKeysMapping,label:labelMapping})}function identityTransform(i){return i}var SERIES_TRANSFORMS={area:identityTransform,bar:barSeriesTransform,column:barSeriesTransform,histogram:identityTransform,line:identityTransform,pie:identityTransform,scatter:identityTransform,treemap:identityTransform};function applySeriesTransform(i){var t=i.type,e=SERIES_TRANSFORMS[t||"line"];return e(i)}var __assign$o=function(){return __assign$o=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$o.apply(this,arguments)},__values$8=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$k=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$8=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$k(arguments[t]));return i};function groupSeriesByType(i){var t,e,r={},n=[];try{for(var o=__values$8(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.type!=="column"&&s.type!=="bar"&&(s.type!=="area"||s.stacked!==!0)){n.push([s]);continue}var l=s.type||"line",u=s.stacked?"stacked":s.grouped?"grouped":s.yKeys?"stacked":"grouped",c=l+"-"+s.xKey+"-"+u;r[c]==null&&(r[c]=[],n.push(r[c])),r[c].push(s)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n}var FAIL=Symbol(),SKIP=Symbol(),ARRAY_REDUCER=function(i){return function(t,e){var r;return t.concat.apply(t,__spread$8((r=e[i],r??[])))}},BOOLEAN_OR_REDUCER=function(i,t){return function(e,r){return typeof r[i]=="boolean"?(e??!1)||r[i]:e??t}},DEFAULTING_ARRAY_REDUCER=function(i,t){return function(e,r,n,o){var a,s=t===SKIP||t===FAIL,l=(a=r[i],a??t);if(l===FAIL)throw new Error("AG Charts - missing value for property ["+i+"] on series config.");if(l===SKIP)return e;if(e.length===0&&!s)for(;e.length<o;)e=e.concat(t);return s?e.concat(l):(e[n]=l,e)}},YKEYS_REDUCER=function(i,t){return function(e,r){return r[i]===t?e.concat.apply(e,__spread$8(r.yKey?[r.yKey]:r.yKeys)):e}},REDUCE_CONFIG={yKeys:{outputProp:"yKeys",reducer:ARRAY_REDUCER("yKeys"),start:[]},fills:{outputProp:"fills",reducer:ARRAY_REDUCER("fills"),start:[]},strokes:{outputProp:"strokes",reducer:ARRAY_REDUCER("strokes"),start:[]},yNames:{outputProp:"yNames",reducer:ARRAY_REDUCER("yNames"),start:[]},hideInChart:{outputProp:"hideInChart",reducer:ARRAY_REDUCER("hideInChart"),start:[]},hideInLegend:{outputProp:"hideInLegend",reducer:ARRAY_REDUCER("hideInLegend"),start:[]},yKey:{outputProp:"yKeys",reducer:DEFAULTING_ARRAY_REDUCER("yKey",SKIP),start:[]},fill:{outputProp:"fills",reducer:DEFAULTING_ARRAY_REDUCER("fill",SKIP),start:[]},stroke:{outputProp:"strokes",reducer:DEFAULTING_ARRAY_REDUCER("stroke",SKIP),start:[]},yName:{outputProp:"yNames",reducer:DEFAULTING_ARRAY_REDUCER("yName",SKIP),start:[]},visible:{outputProp:"visibles",reducer:DEFAULTING_ARRAY_REDUCER("visible",!0),start:[]},grouped:{outputProp:"grouped",reducer:BOOLEAN_OR_REDUCER("grouped"),seriesType:["bar","column"],start:void 0},showInLegend:{outputProp:"hideInLegend",reducer:YKEYS_REDUCER("showInLegend",!1),seriesType:["bar","column"],start:[]}};function reduceSeries(i){var t={};return i.forEach(function(e,r){Object.keys(e).forEach(function(n){var o,a=REDUCE_CONFIG[n],s=function(){var g,v;t[n]=(v=(g=e[n],g??t[n]),v??void 0)};if(!a){s();return}var l=a.outputProp,u=a.reducer,c=a.start,f=c===void 0?void 0:c,d=a.seriesType,h=d===void 0?[e.type]:d;if(!h.includes(e.type)){s();return}var p=u((o=t[l],o??f),e,r,i.length);p!==void 0&&(t[l]=p)})}),t}function processSeriesOptions(i){var t,e,r=[],n=i.map(function(l){return(l.type==="bar"||l.type==="column")&&l.yKey!=null&&!l.stacked?__assign$o(__assign$o({},l),{grouped:l.grouped!=null?l.grouped:!0}):l});try{for(var o=__values$8(groupSeriesByType(n)),a=o.next();!a.done;a=o.next()){var s=a.value;switch(s[0].type){case"column":case"bar":case"area":r.push(reduceSeries(s));break;case"line":default:s.length>1&&console.warn("AG Charts - unexpected grouping of series type: "+s[0].type),r.push(s[0]);break}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r}var __assign$n=function(){return __assign$n=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$n.apply(this,arguments)},__values$7=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$j=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$7=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$j(arguments[t]));return i};function optionsType(i){var t,e,r,n;return n=(t=i.type,t??((r=(e=i.series)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.type)),n??"line"}function isAgCartesianChartOptions(i){var t=optionsType(i);if(t==null)return!0;switch(t){case"cartesian":case"area":case"bar":case"column":case"groupedCategory":case"histogram":case"line":case"scatter":return!0;default:return!1}}function isAgHierarchyChartOptions(i){var t=optionsType(i);if(t==null)return!1;switch(i.type){case"hierarchy":case"treemap":return!0;default:return!1}}function isAgPolarChartOptions(i){var t=optionsType(i);if(t==null)return!1;switch(i.type){case"polar":case"pie":return!0;default:return!1}}function isSeriesOptionType(i){return i==null?!1:["line","bar","column","histogram","scatter","area","pie","treemap"].indexOf(i)>=0}function countArrayElements(i){var t,e,r=0;try{for(var n=__values$7(i),o=n.next();!o.done;o=n.next()){var a=o.value;a instanceof Array&&(r+=countArrayElements(a)),a!=null&&r++}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r}function takeColours(i,t,e){for(var r=[],n=0;n<e;n++)r.push(t[(n+i.colourIndex)%t.length]);return r}var noDataCloneMergeOptions={avoidDeepClone:["data"]};function prepareOptions(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r,n=jsonMerge(__spread$7(t,[i]),noDataCloneMergeOptions);sanityCheckOptions(n);var o=n.type,a=optionsType(n);n=__assign$n(__assign$n({},n),{type:a});var s=isAgCartesianChartOptions(n)?"line":isAgHierarchyChartOptions(n)?"treemap":isAgPolarChartOptions(n)?"pie":"line",l=a==="bar"?DEFAULT_BAR_CHART_OVERRIDES:a==="scatter"||a==="histogram"?DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES:isAgCartesianChartOptions(n)?DEFAULT_CARTESIAN_CHART_OVERRIDES:{},u=prepareMainOptions(l,n),c=u.context,f=u.mergedOptions,d=u.axesThemes,h=u.seriesThemes;return f.series=processSeriesOptions((f.series||[]).map(function(p){var g=p.type?p.type:isSeriesOptionType(o)?o:s,v=jsonMerge([h[g]||{},__assign$n(__assign$n({},p),{type:g})],noDataCloneMergeOptions);return g==="pie"&&preparePieOptions(h.pie,p,v),v})).map(function(p){return prepareSeries(c,p)}),isAgCartesianChartOptions(f)&&(f.axes=(r=f.axes)===null||r===void 0?void 0:r.map(function(p){var g,v=(g=p.type,g??"number"),m=__assign$n(__assign$n({},p),{type:v}),y=jsonMerge([d[v],d[v][p.position||"unknown"]||{}]);return prepareAxis(m,y)})),prepareEnabledOptions(n,f),f}function sanityCheckOptions(i){var t,e;!((t=i.series)===null||t===void 0)&&t.some(function(r){return r.yKeys!=null&&r.yKey!=null})&&console.warn("AG Charts - series options yKeys and yKey are mutually exclusive, please only use yKey for future compatibility."),!((e=i.series)===null||e===void 0)&&e.some(function(r){return r.yNames!=null&&r.yName!=null})&&console.warn("AG Charts - series options yNames and yName are mutually exclusive, please only use yName for future compatibility.")}function prepareMainOptions(i,t){var e=prepareTheme(t),r=e.theme,n=e.cleanedTheme,o=e.axesThemes,a=e.seriesThemes,s={colourIndex:0,palette:r.palette},l=jsonMerge([i,n,t],noDataCloneMergeOptions);return{context:s,mergedOptions:l,axesThemes:o,seriesThemes:a}}function prepareTheme(i){var t=getChartTheme(i.theme),e=t.getConfig(optionsType(i)||"cartesian");return{theme:t,axesThemes:e.axes||{},seriesThemes:e.series||{},cleanedTheme:jsonMerge([e,{axes:DELETE,series:DELETE}])}}function prepareSeries(i,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var n=calculateSeriesPalette(i,t),o={stacked:DELETE},a=jsonMerge(__spread$7(e,[n,t,o]),noDataCloneMergeOptions);return applySeriesTransform(a)}function calculateSeriesPalette(i,t){var e={},r=i.palette,n=r.fills,o=r.strokes,a=t,s=countArrayElements(a.yKeys||[])||1;switch(t.type){case"pie":s=Math.max(n.length,o.length);case"area":case"bar":case"column":e.fills=takeColours(i,n,s),e.strokes=takeColours(i,o,s);break;case"histogram":e.fill=takeColours(i,n,1)[0],e.stroke=takeColours(i,o,1)[0];break;case"scatter":e.marker={stroke:takeColours(i,o,1)[0],fill:takeColours(i,n,1)[0]};break;case"line":e.stroke=takeColours(i,n,1)[0],e.marker={stroke:takeColours(i,o,1)[0],fill:takeColours(i,n,1)[0]};break;case"treemap":break;default:throw new Error("AG Charts - unknown series type: "+t.type)}return i.colourIndex+=s,e}function prepareAxis(i,t){var e={top:DELETE,bottom:DELETE,left:DELETE,right:DELETE};if(i.crossLines){Array.isArray(i.crossLines)||(console.warn("AG Charts - axis[].crossLines should be an array."),i.crossLines=[]);var r=t.crossLines;i.crossLines=i.crossLines.map(function(o){return jsonMerge([r,o])})}var n={crossLines:DELETE};return jsonMerge([t,n,i,e],noDataCloneMergeOptions)}function prepareEnabledOptions(i,t){jsonWalk(i,function(e,r,n){n&&"enabled"in n&&r.enabled==null&&(n.enabled=!0)},{skip:["data"]},t)}function preparePieOptions(i,t,e){Array.isArray(t.innerLabels)?e.innerLabels=t.innerLabels.map(function(r){return jsonMerge([i.innerLabels,r])}):e.innerLabels=DELETE}var horizontalCrosslineTranslationDirections={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},verticalCrossLineTranslationDirections={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}},calculateLabelTranslation=function(i){var t=i.yDirection,e=i.padding,r=e===void 0?0:e,n=i.position,o=i.bbox,a,s=t?horizontalCrosslineTranslationDirections:verticalCrossLineTranslationDirections,l=(a=s[n],a??s.top),u=l.xTranslationDirection,c=l.yTranslationDirection,f=t?o.width:o.height,d=t?o.height:o.width,h=u*(r+f/2),p=c*(r+d/2);return{xTranslation:h,yTranslation:p}},POSITION_TOP_COORDINATES=function(i){var t=i.yDirection,e=i.xEnd,r=i.yStart,n=i.yEnd;return t?{x:e/2,y:r}:{x:e,y:isNaN(n)?r:(r+n)/2}},POSITION_LEFT_COORDINATES=function(i){var t=i.yDirection,e=i.xStart,r=i.xEnd,n=i.yStart,o=i.yEnd;return t?{x:e,y:isNaN(o)?n:(n+o)/2}:{x:r/2,y:n}},POSITION_RIGHT_COORDINATES=function(i){var t=i.yDirection,e=i.xEnd,r=i.yStart,n=i.yEnd;return t?{x:e,y:isNaN(n)?r:(r+n)/2}:{x:e/2,y:isNaN(n)?r:n}},POSITION_BOTTOM_COORDINATES=function(i){var t=i.yDirection,e=i.xStart,r=i.xEnd,n=i.yStart,o=i.yEnd;return t?{x:r/2,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:(n+o)/2}},POSITION_INSIDE_COORDINATES=function(i){var t=i.xEnd,e=i.yStart,r=i.yEnd;return{x:t/2,y:isNaN(r)?e:(e+r)/2}},POSITION_TOP_LEFT_COORDINATES=function(i){var t=i.yDirection,e=i.xStart,r=i.xEnd,n=i.yStart;return t?{x:e/2,y:n}:{x:r,y:n}},POSITION_BOTTOM_LEFT_COORDINATES=function(i){var t=i.yDirection,e=i.xStart,r=i.yStart,n=i.yEnd;return t?{x:e,y:isNaN(n)?r:n}:{x:e,y:r}},POSITION_TOP_RIGHT_COORDINATES=function(i){var t=i.yDirection,e=i.xEnd,r=i.yStart,n=i.yEnd;return t?{x:e,y:r}:{x:e,y:isNaN(n)?r:n}},POSITION_BOTTOM_RIGHT_COORDINATES=function(i){var t=i.yDirection,e=i.xStart,r=i.xEnd,n=i.yStart,o=i.yEnd;return t?{x:r,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:o}},labeldDirectionHandling={top:{c:POSITION_TOP_COORDINATES},bottom:{c:POSITION_BOTTOM_COORDINATES},left:{c:POSITION_LEFT_COORDINATES},right:{c:POSITION_RIGHT_COORDINATES},topLeft:{c:POSITION_TOP_LEFT_COORDINATES},topRight:{c:POSITION_TOP_RIGHT_COORDINATES},bottomLeft:{c:POSITION_BOTTOM_LEFT_COORDINATES},bottomRight:{c:POSITION_BOTTOM_RIGHT_COORDINATES},inside:{c:POSITION_INSIDE_COORDINATES},insideLeft:{c:POSITION_LEFT_COORDINATES},insideRight:{c:POSITION_RIGHT_COORDINATES},insideTop:{c:POSITION_TOP_COORDINATES},insideBottom:{c:POSITION_BOTTOM_COORDINATES},insideTopLeft:{c:POSITION_TOP_LEFT_COORDINATES},insideBottomLeft:{c:POSITION_BOTTOM_LEFT_COORDINATES},insideTopRight:{c:POSITION_TOP_RIGHT_COORDINATES},insideBottomRight:{c:POSITION_BOTTOM_RIGHT_COORDINATES}},__extends$1P=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$m=function(){return __assign$m=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$m.apply(this,arguments)},__decorate$16=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Range=function(i){__extends$1P(t,i);function t(){var e=i.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.startLine=!1,e.endLine=!1,e.isRange=!1,e.restoreOwnStyles(),e}return t.prototype.computeBBox=function(){return new BBox$1(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,a=e.stats;if(this.dirty===RedrawType.NONE&&!o){a&&(a.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(n);var s=this,l=s.x1,u=s.y1,c=s.x2,f=s.y2;l=this.align(l),u=this.align(u),c=this.align(c),f=this.align(f);var d=this,h=d.fill,p=d.opacity,g=d.isRange,v=!!(g&&h);if(v){var m=this.fillOpacity;n.fillStyle=h,n.globalAlpha=p*m,n.beginPath(),n.moveTo(l,u),n.lineTo(c,u),n.lineTo(c,f),n.lineTo(l,f),n.closePath(),n.fill()}var y=this,b=y.stroke,C=y.strokeWidth,x=y.startLine,w=y.endLine,P=!!((x||w)&&b&&C);if(P){var S=this,O=S.strokeOpacity,E=S.lineDash,D=S.lineDashOffset,R=S.lineCap,F=S.lineJoin;n.strokeStyle=b,n.globalAlpha=p*O,n.lineWidth=C,E&&n.setLineDash(E),D&&(n.lineDashOffset=D),R&&(n.lineCap=R),F&&(n.lineJoin=F),n.beginPath(),x&&(n.moveTo(l,u),n.lineTo(c,u)),w&&(n.moveTo(c,f),n.lineTo(l,f)),n.stroke()}(r=this.fillShadow)===null||r===void 0||r.markClean(),i.prototype.render.call(this,e)},t.className="Range",t.defaultStyles=__assign$m(__assign$m({},Shape$1.defaultStyles),{strokeWidth:1}),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"x1",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"y1",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"x2",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"y2",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"startLine",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"endLine",void 0),__decorate$16([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"isRange",void 0),t}(Shape$1),__decorate$15=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$i=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},CROSSLINE_LABEL_POSITIONS=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],OPT_CROSSLINE_LABEL_POSITION=predicateWithMessage(function(i,t){return OPTIONAL(i,t,function(e){return CROSSLINE_LABEL_POSITIONS.includes(e)})},"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),OPT_CROSSLINE_TYPE=predicateWithMessage(function(i,t){return OPTIONAL(i,t,function(e){return e==="range"||e==="line"})},"expecting a crossLine type keyword such as 'range' or 'line'"),CrossLineLabel=function(){function i(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}return __decorate$15([Validate(OPT_BOOLEAN)],i.prototype,"enabled",void 0),__decorate$15([Validate(OPT_STRING)],i.prototype,"text",void 0),__decorate$15([Validate(OPT_FONT_STYLE)],i.prototype,"fontStyle",void 0),__decorate$15([Validate(OPT_FONT_WEIGHT)],i.prototype,"fontWeight",void 0),__decorate$15([Validate(NUMBER(0))],i.prototype,"fontSize",void 0),__decorate$15([Validate(STRING)],i.prototype,"fontFamily",void 0),__decorate$15([Validate(NUMBER(0))],i.prototype,"padding",void 0),__decorate$15([Validate(OPT_COLOR_STRING)],i.prototype,"color",void 0),__decorate$15([Validate(OPT_CROSSLINE_LABEL_POSITION)],i.prototype,"position",void 0),__decorate$15([Validate(OPT_NUMBER(-360,360))],i.prototype,"rotation",void 0),__decorate$15([Validate(OPT_BOOLEAN)],i.prototype,"parallel",void 0),i}(),CrossLine=function(){function i(){this.id=createId$1(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new CrossLineLabel,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ChartAxisDirection.X,this.group=new Group$1({name:""+this.id,layer:!0,zIndex:i.LINE_LAYER_ZINDEX}),this.crossLineRange=new Range,this.crossLineLabel=new Text$1,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;var t=this,e=t.group,r=t.crossLineRange,n=t.crossLineLabel;e.append([r,n]),r.pointerEvents=PointerEvents$1.None}return i.prototype.update=function(t){if(this.enabled&&(this.group.visible=t,!!t)){var e=this.createNodeData();if(!e){this.group.visible=!1;return}this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)}},i.prototype.updateNodes=function(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())},i.prototype.createNodeData=function(){var t,e,r,n,o,a,s,l,u=this,c=u.scale,f=u.gridLength,d=u.sideFlag,h=u.direction,p=u.label.position,g=p===void 0?"top":p,v=u.clippedRange,m=u.strokeWidth,y=m===void 0?0:m;if(!c)return!1;var b=c instanceof ContinuousScale$1,C=(s=c.bandwidth,s??0),x=clamper$1(v),w,P,S,O,E,D;t=__read$i([0,d*f],2),w=t[0],P=t[1],e=__read$i(this.getRange(),2),S=e[0],O=e[1],r=__read$i([Number(c.convert(S,b?clamper$1:void 0)),c.convert(O,b?clamper$1:void 0)+C],2),E=r[0],D=r[1],E=x(E),D=x(D),n=__read$i([Number(c.convert(S)),c.convert(O)+C],2),S=n[0],O=n[1];var R=!isNaN(E)&&!isNaN(D)&&(S===E||O===D||E!==D)&&Math.abs(D-E)>0;if(R){var F=E!==Math.min(E,D);F&&(o=__read$i([Math.min(E,D),Math.max(E,D)],2),E=o[0],D=o[1],a=__read$i([O,S],2),S=a[0],O=a[1])}if(this.isRange=R,this.startLine=!isNaN(S)&&y>0&&S===E,this.endLine=!isNaN(O)&&y>0&&O===D,!R&&!this.startLine&&!this.endLine)return!1;if(this.data=[E,D],this.label.enabled){var I=h===ChartAxisDirection.Y,$=(l=labeldDirectionHandling[g],l??{}).c,B=$===void 0?POSITION_TOP_COORDINATES:$,V=B({yDirection:I,xStart:w,xEnd:P,yStart:E,yEnd:D}),G=V.x,U=V.y;this.labelPoint={x:G,y:U}}return!0},i.prototype.updateRangeNode=function(){var t,e=this,r=e.crossLineRange,n=e.sideFlag,o=e.gridLength,a=e.data,s=e.startLine,l=e.endLine,u=e.isRange,c=e.fill,f=e.fillOpacity,d=e.stroke,h=e.strokeWidth,p=e.lineDash;r.x1=0,r.x2=n*o,r.y1=a[0],r.y2=a[1],r.startLine=s,r.endLine=l,r.isRange=u,r.fill=c,r.fillOpacity=f??1,r.stroke=d,r.strokeWidth=h??1,r.strokeOpacity=(t=this.strokeOpacity,t??1),r.lineDash=p},i.prototype.updateLabel=function(){var t=this,e=t.crossLineLabel,r=t.label;r.text&&(e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.fontSize=r.fontSize,e.fontFamily=r.fontFamily,e.fill=r.color,e.text=r.text)},i.prototype.positionLabel=function(){var t=this,e=t.crossLineLabel,r=t.labelPoint,n=r===void 0?{}:r,o=n.x,a=o===void 0?void 0:o,s=n.y,l=s===void 0?void 0:s,u=t.label,c=u.parallel,f=u.rotation,d=u.position,h=d===void 0?"top":d,p=u.padding,g=p===void 0?0:p,v=t.direction,m=t.parallelFlipRotation,y=t.regularFlipRotation;if(!(a===void 0||l===void 0)){var b=f?normalizeAngle360(toRadians(f)):0,C=!b&&m>=0&&m<=Math.PI?-1:1,x=!b&&y>=0&&y<=Math.PI?-1:1,w=c?C*Math.PI/2:x===-1?Math.PI:0;e.rotation=w+b,e.textBaseline="middle",e.textAlign="center";var P=this.computeLabelBBox();if(P){var S=v===ChartAxisDirection.Y,O=calculateLabelTranslation({yDirection:S,padding:g,position:h,bbox:P}),E=O.xTranslation,D=O.yTranslation;e.translationX=a+E,e.translationY=l+D}}},i.prototype.getZIndex=function(t){return t===void 0&&(t=!1),t?i.RANGE_LAYER_ZINDEX:i.LINE_LAYER_ZINDEX},i.prototype.getRange=function(){var t,e=this,r=e.value,n=e.range,o=e.scale,a=o instanceof ContinuousScale$1,s=__read$i(n??[r,void 0],2),l=s[0],u=s[1];return!a&&u===void 0&&(u=l),t=__read$i([checkDatum(l,a),checkDatum(u,a)],2),l=t[0],u=t[1],a&&l===u&&(u=void 0),l===void 0&&u!==void 0&&(l=u,u=void 0),[l,u]},i.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()},i.prototype.calculatePadding=function(t,e){var r,n,o,a,s,l,u,c,f,d,h=this,p=h.isRange,g=h.startLine,v=h.endLine;if(!(!p&&!g&&!v)){var m=this.computeLabelBBox(),y=(r=m)===null||r===void 0?void 0:r.x,b=(n=m)===null||n===void 0?void 0:n.y;if(!(y==null||b==null)){var C=(a=(o=m)===null||o===void 0?void 0:o.width,a??0),x=(l=(s=m)===null||s===void 0?void 0:s.height,l??0);if(y+C>=e.x+e.width){var w=y+C-(e.x+e.width);t.right=(u=t.right,(u??0)>=w?t.right:w)}else if(y<=e.x){var P=e.x-y;t.left=(c=t.left,(c??0)>=P?t.left:P)}if(b+x>=e.y+e.height){var S=b+x-(e.y+e.height);t.bottom=(f=t.bottom,(f??0)>=S?t.bottom:S)}else if(b<=e.y){var O=e.y-b;t.top=(d=t.top,(d??0)>=O?t.top:O)}}}},i.LINE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_LINE_ZINDEX,i.RANGE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_RANGE_ZINDEX,i.className="CrossLine",__decorate$15([Validate(OPT_BOOLEAN)],i.prototype,"enabled",void 0),__decorate$15([Validate(OPT_CROSSLINE_TYPE)],i.prototype,"type",void 0),__decorate$15([Validate(OPT_ARRAY(2))],i.prototype,"range",void 0),__decorate$15([Validate(OPT_COLOR_STRING)],i.prototype,"fill",void 0),__decorate$15([Validate(OPT_NUMBER(0,1))],i.prototype,"fillOpacity",void 0),__decorate$15([Validate(OPT_COLOR_STRING)],i.prototype,"stroke",void 0),__decorate$15([Validate(OPT_NUMBER())],i.prototype,"strokeWidth",void 0),__decorate$15([Validate(OPT_NUMBER(0,1))],i.prototype,"strokeOpacity",void 0),__decorate$15([Validate(OPT_LINE_DASH)],i.prototype,"lineDash",void 0),i}(),__assign$l=function(){return __assign$l=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$l.apply(this,arguments)},__awaiter=function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((r=r.apply(i,t||[])).next())})},__generator=function(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(i,e)}catch(c){u=[6,c],n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},__read$h=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$6=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$h(arguments[t]));return i},__values$6=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function chartType(i){if(isAgCartesianChartOptions(i))return"cartesian";if(isAgPolarChartOptions(i))return"polar";if(isAgHierarchyChartOptions(i))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+i.type)}var AgChart=function(){function i(){}return i.createComponent=function(t,e){if(e.indexOf(".series")>=0){var r=__assign$l(__assign$l({},t),{type:t.type||e.split(".")[0]});return createSeries([r])[0]}return null},i.create=function(t,e,r){return AgChartV2.create(t)},i.update=function(t,e,r,n){return AgChartV2.update(t,e)},i.download=function(t,e){return AgChartV2.download(t,e)},i}(),AgChartV2=function(){function i(){}return i.create=function(t){var e=this;debug("user options",t);var r={};i.DEBUG()&&(r.debug=!0);var n=t.overrideDevicePixelRatio;delete t.overrideDevicePixelRatio;var o=prepareOptions(t,r),a=isAgCartesianChartOptions(o)?o.type==="groupedCategory"?new GroupedCategoryChart(document,n):new CartesianChart(document,n):isAgHierarchyChartOptions(o)?new HierarchyChart(document,n):isAgPolarChartOptions(o)?new PolarChart(document,n):void 0;if(!a)throw new Error("AG Charts - couldn't apply configuration, check type of options: "+o.type);return a.requestFactoryUpdate(function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:return a.destroyed?[2]:[4,i.updateDelta(a,o,t)];case 1:return s.sent(),[2]}})})}),a},i.update=function(t,e){var r=this;debug("user options",e);var n={};i.DEBUG()&&(n.debug=!0),t.requestFactoryUpdate(function(){return __awaiter(r,void 0,void 0,function(){var o,a;return __generator(this,function(s){switch(s.label){case 0:return t.destroyed?[2]:(o=prepareOptions(e,t.userOptions,n),chartType(o)!==chartType(t.options)?(t.destroy(),console.warn("AG Charts - options supplied require a different type of chart, please recreate the chart."),[2]):(a=jsonDiff(t.options,o),a==null?[2]:[4,i.updateDelta(t,a,e)]));case 1:return s.sent(),[2]}})})})},i.download=function(t,e){var r=e||{},n=r.width,o=r.height,a=r.fileName,s=r.fileFormat,l=t.width,u=t.height,c=n===void 0&&o===void 0||t.scene.canvas.pixelRatio===1&&l===n&&u===o;if(c){t.scene.download(a,s);return}n=n??l,o=o??u;var f=__assign$l(__assign$l({},t.userOptions),{container:document.createElement("div"),width:n,height:o,autoSize:!1,overrideDevicePixelRatio:1}),d=i.create(f);d.waitForUpdate().then(function(){d.scene.download(a,s),d.destroy()})},i.updateDelta=function(t,e,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return e.type==null&&(e=__assign$l(__assign$l({},e),{type:t.options.type||optionsType(e)})),debug("delta update",e),[4,t.awaitUpdateCompletion()];case 1:return n.sent(),applyChartOptions(t,e,r),[2]}})})},i.DEBUG=function(){var t;return t=windowValue("agChartsDebug"),t??!1},i}();function debug(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];AgChartV2.DEBUG()&&console.log.apply(console,__spread$6([i],t))}function applyChartOptions(i,t,e){var r,n;if(isAgCartesianChartOptions(t))applyOptionValues(i,t,{skip:["type","data","series","axes","autoSize","listeners","theme"]});else if(isAgPolarChartOptions(t))applyOptionValues(i,t,{skip:["type","data","series","autoSize","listeners","theme"]});else if(isAgHierarchyChartOptions(t))applyOptionValues(i,t,{skip:["type","data","series","autoSize","listeners","theme"]});else throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+t.type);var o=!1;if(t.series&&t.series.length>0&&(applySeries(i,t),o=!0),isAgCartesianChartOptions(t)&&t.axes){var a=applyAxes(i,t);a&&(o=!0)}var s=t.series,l=!!t.data||((r=s)===null||r===void 0?void 0:r.some(function(f){return f.data!=null})),u=t.legend||t.title||t.subtitle;o=o||l||!!u,t.data&&(i.data=t.data),t.autoSize!=null&&(i.autoSize=t.autoSize),t.listeners&&registerListeners(i,t.listeners),!((n=t.legend)===null||n===void 0)&&n.listeners&&Object.assign(i.legend.listeners,t.legend.listeners),i.options=jsonMerge([i.options||{},t],noDataCloneMergeOptions),i.userOptions=jsonMerge([i.userOptions||{},e],noDataCloneMergeOptions);var c=o?ChartUpdateType.PROCESS_DATA:ChartUpdateType.PERFORM_LAYOUT;i.update(c,{forceNodeDataRefresh:o})}function applySeries(i,t){var e=t.series;if(e){var r=i.series.length===e.length&&i.series.every(function(n,o){var a;return n.type===((a=e[o])===null||a===void 0?void 0:a.type)});if(r){i.series.forEach(function(n,o){var a,s,l=((s=(a=i.options)===null||a===void 0?void 0:a.series)===null||s===void 0?void 0:s[o])||{},u=jsonDiff(l,e[o]||{});u&&(debug("applying series diff idx "+o,u),applySeriesValues(n,u,{path:"series["+o+"]"}),n.markNodeDataDirty())});return}i.series=createSeries(e)}}function applyAxes(i,t){var e=t.axes;if(!e)return!1;var r=i.axes.length===e.length&&i.axes.every(function(o,a){return o.type===e[a].type});if(r){var n=i.options;if(isAgCartesianChartOptions(n))return i.axes.forEach(function(o,a){var s,l=((s=n.axes)===null||s===void 0?void 0:s[a])||{},u=jsonDiff(l,e[a]);debug("applying axis diff idx "+a,u);var c="axes["+a+"]",f=["axes[].type"];applyOptionValues(o,u,{path:c,skip:f})}),!0}return i.axes=createAxis(e),!0}function createSeries(i){var t,e,r=[],n=0;try{for(var o=__values$6(i||[]),a=o.next();!a.done;a=o.next()){var s=a.value,l="series["+n+++"]";switch(s.type){case"area":r.push(applySeriesValues(new AreaSeries,s,{path:l}));break;case"bar":case"column":r.push(applySeriesValues(new BarSeries,s,{path:l}));break;case"histogram":r.push(applySeriesValues(new HistogramSeries,s,{path:l}));break;case"line":r.push(applySeriesValues(new LineSeries,s,{path:l}));break;case"scatter":r.push(applySeriesValues(new ScatterSeries,s,{path:l}));break;case"pie":r.push(applySeriesValues(new PieSeries,s,{path:l}));break;case"treemap":r.push(applySeriesValues(new TreemapSeries,s,{path:l}));break;default:throw new Error("AG Charts - unknown series type: "+s.type)}}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r}function createAxis(i){var t,e,r=[],n=0;try{for(var o=__values$6(i||[]),a=o.next();!a.done;a=o.next()){var s=a.value,l="axes["+n+++"]",u=["axes[].type"];switch(s.type){case"number":r.push(applyOptionValues(new NumberAxis,s,{path:l,skip:u}));break;case LogAxis.type:r.push(applyOptionValues(new LogAxis,s,{path:l,skip:u}));break;case CategoryAxis.type:r.push(applyOptionValues(new CategoryAxis,s,{path:l,skip:u}));break;case GroupedCategoryAxis.type:r.push(applyOptionValues(new GroupedCategoryAxis,s,{path:l,skip:u}));break;case TimeAxis.type:r.push(applyOptionValues(new TimeAxis,s,{path:l,skip:u}));break;default:throw new Error("AG Charts - unknown axis type: "+s.type)}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r}function registerListeners(i,t){i.clearEventListeners();for(var e in t)i.addEventListener(e,t[e])}var JSON_APPLY_OPTIONS={constructors:{title:Caption,subtitle:Caption,shadow:DropShadow,innerCircle:DoughnutInnerCircle,"axes[].crossLines[]":CrossLine,"series[].innerLabels[]":DoughnutInnerLabel},allowedTypes:{"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function applyOptionValues(i,t,e){var r=e===void 0?{}:e,n=r.skip,o=r.path,a=__assign$l(__assign$l(__assign$l({},JSON_APPLY_OPTIONS),{skip:n}),o?{path:o}:{});return jsonApply(i,t,a)}function applySeriesValues(i,t,e){var r=(e===void 0?{}:e).path,n,o,a=["series[].listeners"],s=((n=JSON_APPLY_OPTIONS)===null||n===void 0?void 0:n.constructors)||{},l={constructors:__assign$l(__assign$l({},s),{title:i.type==="pie"?PieTitle:s.title})},u=__assign$l(__assign$l(__assign$l(__assign$l({},JSON_APPLY_OPTIONS),l),{skip:__spread$6(["series[].type"],a||[])}),r?{path:r}:{}),c=jsonApply(i,t,u),f=(o=t)===null||o===void 0?void 0:o.listeners;return f!=null&&registerListeners(i,f),c}function getSeriesType(i){switch(i){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var __extends$1O=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$14=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartController=function(i){__extends$1O(t,i);function t(e){var r=i.call(this)||this;return r.model=e,r}return t.prototype.init=function(){var e=this;this.setChartRange(),this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,function(r){r.id&&r.id===e.model.chartId&&e.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},t.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.setChartRange())},t.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},t.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.updateForPanelChange=function(e){this.model.updateCellRanges(e),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.getChartUpdateParams=function(){var e=this.getSelectedValueColState(),r=e.map(function(a){return{colId:a.colId,displayName:a.displayName}}),n=this.getChartData(),o=this.getSelectedDimension();return{data:n,grouping:this.isGrouping(),category:{id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)},fields:r,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes()}},t.prototype.getChartModel=function(){var e=this.model.pivotChart?"pivot":"range",r=this.isComboChart()?this.model.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:r}},t.prototype.getChartId=function(){return this.model.chartId},t.prototype.getChartData=function(){return this.model.chartData},t.prototype.getChartType=function(){return this.model.chartType},t.prototype.setChartType=function(e){this.model.chartType=e,this.model.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.setChartThemeName=function(e){this.model.chartThemeName=e,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.getChartThemeName=function(){return this.model.chartThemeName},t.prototype.isPivotChart=function(){return this.model.pivotChart},t.prototype.isPivotMode=function(){return this.model.isPivotMode()},t.prototype.isGrouping=function(){return this.model.isGrouping()},t.prototype.getThemes=function(){return this.gridOptionsWrapper.getChartThemes()},t.prototype.getPalettes=function(){var e=this,r=this.gridOptionsWrapper.getChartThemes();return r.map(function(n){var o=e.chartProxy.isStockTheme(n),a=o?n:e.chartProxy.lookupCustomChartTheme(n);return getChartTheme(a).palette})},t.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},t.prototype.getSelectedValueColState=function(){return this.getValueColState().filter(function(e){return e.selected})},t.prototype.getDimensionColState=function(){return this.model.dimensionColState},t.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},t.prototype.displayNameMapper=function(e){var r=this.model.columnNames[e.colId];return e.displayName=r?r.join(" - "):this.model.getColDisplayName(e.column),e},t.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},t.prototype.isDefaultCategorySelected=function(){return this.model.getSelectedDimension().colId===ChartDataModel.DEFAULT_CATEGORY},t.prototype.setChartRange=function(e){e===void 0&&(e=!1),this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()},t.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},t.prototype.setChartProxy=function(e){this.chartProxy=e},t.prototype.getChartProxy=function(){return this.chartProxy},t.prototype.isActiveXYChart=function(){return _.includes(["scatter","bubble"],this.getChartType())},t.prototype.isChartLinked=function(){return!this.model.unlinked},t.prototype.customComboExists=function(){return this.model.savedCustomSeriesChartTypes&&this.model.savedCustomSeriesChartTypes.length>0},t.prototype.getSeriesChartTypes=function(){return this.model.seriesChartTypes},t.prototype.isComboChart=function(){return this.model.isComboChart()},t.prototype.updateSeriesChartType=function(e,r,n){var o=this.model.seriesChartTypes.find(function(l){return l.colId===e});if(o){var a=this.model.chartType!=="customCombo";a&&(this.model.chartType="customCombo");var s=o.chartType;r!=null&&(o.chartType=r),n!=null&&(o.secondaryAxis=n),this.model.savedCustomSeriesChartTypes=this.model.seriesChartTypes,this.model.updateSeriesChartTypes(),this.updateForDataChange(),a&&this.dispatchEvent(Object.freeze({type:t.EVENT_CHART_TYPE_CHANGED})),s!==r&&this.dispatchEvent(Object.freeze({type:t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}))}},t.prototype.getActiveSeriesChartTypes=function(){var e=this.getSelectedValueColState().map(function(r){return r.colId});return this.getSeriesChartTypes().filter(function(r){return e.includes(r.colId)})},t.prototype.getChartSeriesTypes=function(){var e=["line","column","area"];return this.isComboChart()?e:[getSeriesType(this.getChartType())]},t.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(function(e){return e})},t.prototype.getCellRangeParams=function(){var e=this.getCellRanges(),r=e[0],n=r&&r.startRow||null,o=r&&r.endRow||null;return{rowStartIndex:n&&n.rowIndex,rowStartPinned:n&&n.rowPinned,rowEndIndex:o&&o.rowIndex,rowEndPinned:o&&o.rowPinned,columns:e.reduce(function(a,s){return a.concat(s.columns.map(function(l){return l.getId()}))},[])}},t.prototype.raiseChartModelUpdateEvent=function(){var e=Object.freeze({type:t.EVENT_CHART_MODEL_UPDATE});this.dispatchEvent(e)},t.prototype.raiseChartUpdatedEvent=function(){var e=Object.freeze({type:t.EVENT_CHART_UPDATED});this.dispatchEvent(e)},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),r=e.chartId,n=e.chartType,o=Object.freeze({type:Events.EVENT_CHART_OPTIONS_CHANGED,chartId:r,chartType:n,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions()});this.eventService.dispatchEvent(o)},t.prototype.raiseChartRangeSelectionChangedEvent=function(){var e=Object.freeze({type:Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()});this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},t.EVENT_CHART_UPDATED="chartUpdated",t.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",t.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",__decorate$14([Autowired("rangeService")],t.prototype,"rangeService",void 0),__decorate$14([PostConstruct],t.prototype,"init",null),t}(BeanStub),__extends$1N=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$13=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$g=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$5=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$g(arguments[t]));return i},__values$5=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ChartDataPanel=function(i){__extends$1N(t,i);function t(e,r){var n=i.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.columnComps=new Map,n}return t.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},t.prototype.destroy=function(){this.clearComponents(),i.prototype.destroy.call(this)},t.prototype.updatePanels=function(){var e=this,r=this.chartType,n=this.chartController.getColStateForMenu(),o=n.dimensionCols,a=n.valueCols,s=o.map(function(c){return c.colId}).concat(a.map(function(c){return c.colId}));this.chartType=this.chartController.getChartType();var l=this.getGroupExpandedState();if(_.areEqual(_.keys(this.columnComps),s)&&this.chartType===r){if(__spread$5(o,a).forEach(function(c){e.columnComps.get(c.colId).setValue(c.selected,!0)}),this.chartController.isActiveXYChart()){var u=this.generateGetSeriesLabel();a.forEach(function(c){e.columnComps.get(c.colId).setLabel(u(c))})}_.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.createSeriesChartTypeGroup(a)}else this.clearComponents(),this.createCategoriesGroup(o),this.createSeriesGroup(a),this.createSeriesChartTypeGroup(a);this.restoreGroupExpandedState(l)},t.prototype.getGroupExpandedState=function(){return[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].map(function(e){return e?e.isExpanded():!0})},t.prototype.restoreGroupExpandedState=function(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach(function(r,n){r&&r.toggleGroupExpand(e[n])})},t.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.addComponent=function(e,r,n){var o=document.createElement("div");o.id=n,o.className="ag-chart-data-section",o.appendChild(r.getGui()),e.appendChild(o)},t.prototype.addChangeListener=function(e,r){var n=this;this.addManagedListener(e,AgAbstractField.EVENT_CHANGED,function(){r.selected=e.getValue(),n.chartController.updateForPanelChange(r)})},t.prototype.createCategoriesGroup=function(e){var r=this;this.categoriesGroupComp=this.createBean(new AgGroupComponent({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n="chartDimension"+this.getCompId();e.forEach(function(o){var a=r.categoriesGroupComp.createManagedBean(new AgRadioButton);a.setLabel(_.escapeString(o.displayName)),a.setValue(o.selected),a.setInputName(n),r.addChangeListener(a,o),r.categoriesGroupComp.addItem(a),r.columnComps.set(o.colId,a)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},t.prototype.createSeriesGroup=function(e){var r=this;if(this.seriesGroupComp=this.createManagedBean(new AgGroupComponent({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var n=this.seriesGroupComp.createManagedBean(new AgToggleButton);n.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(function(s){r.chartOptionsService.setPairedMode(!!s),r.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(n)}var o=this.generateGetSeriesLabel();e.forEach(function(s){var l=r.seriesGroupComp.createManagedBean(new AgCheckbox);l.addCssClass("ag-data-select-checkbox");var u=o(s);l.setLabel(u),l.setValue(s.selected),r.addChangeListener(l,s),r.seriesGroupComp.addItem(l),r.columnComps.set(s.colId,l),r.addDragHandle(l,s)}),this.addComponent(this.getGui(),this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return DragAndDropService.ICON_MOVE},getContainer:function(){return r.seriesGroupComp.getGui()},onDragging:function(s){return r.onDragging(s)},onDragLeave:function(){return r.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a)},t.prototype.createSeriesChartTypeGroup=function(e){var r=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();e.forEach(function(o){if(o.selected){var a=n.filter(function(d){return d.colId===o.colId})[0];if(a){var s=r.seriesChartTypeGroupComp.createManagedBean(new AgGroupComponent({title:o.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),l=r.seriesChartTypeGroupComp.createManagedBean(new AgCheckbox).setLabel(r.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(a.chartType)).setValue(!!a.secondaryAxis).onValueChange(function(d){return r.chartController.updateSeriesChartType(o.colId,void 0,d)});s.addItem(l);var u=function(d,h){return r.chartTranslationService.translate(d,h)},c=[{value:"line",text:u("line","Line")},{value:"area",text:u("area","Area")},{value:"stackedArea",text:u("stackedArea","StackedArea")},{value:"groupedColumn",text:u("groupedColumn","Grouped Column")},{value:"stackedColumn",text:u("stackedColumn","Stacked Column")}],f=s.createManagedBean(new AgSelect);f.setLabelAlignment("left").setLabelWidth("flex").addOptions(c).setValue(a.chartType).onValueChange(function(d){return r.chartController.updateSeriesChartType(o.colId,d)}),s.addItem(f),r.seriesChartTypeGroupComp.addItem(s)}}}),this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup")}},t.prototype.addDragHandle=function(e,r){var n=this,o=_.createIconNoSpan("columnDrag",this.gridOptionsWrapper);o.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",o);var a={type:DragSourceType.ChartPanel,eElement:o,dragItemName:r.displayName,getDragItem:function(){return{columns:[r.column]}},onDragStopped:function(){return n.onDragStop()}};this.dragAndDropService.addDragSource(a,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(a)})},t.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(a){return _.escapeString(a.displayName)};var e=this.chartType==="bubble",r=this.isInPairedMode(),n=0,o=new Map;return o.set(0,"X"),o.set(1,"Y"),o.set(2,"size"),function(a){var s=_.escapeString(a.displayName);if(!a.selected)return s;var l;return r?l=o.get(n%(e?3:2)):n===0?l="X":l=e&&n%2===0?"size":"Y",n++,s+" ("+l+")"}},t.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},t.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},t.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},t.prototype.clearComponents=function(){_.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},t.prototype.onDragging=function(e){var r=this.checkHoveredItem(e);if(r){this.lastDraggedColumn=e.dragItem.columns[0];var n=r.comp,o=r.position,a=this.lastHoveredItem||{},s=a.comp,l=a.position;if(!(n===s&&o===l)){this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:n,position:o};var u=n.getGui();u.classList.add("ag-list-item-hovered","ag-item-highlight-"+o)}}},t.prototype.checkHoveredItem=function(e){var r,n;if(_.missing(e.vDirection))return null;var o=e.event;try{for(var a=__values$5(this.columnComps.values()),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.getGui();if(u.querySelector(".ag-chart-data-column-drag-handle")){var c=u.getBoundingClientRect(),f=o.clientY>=c.top&&o.clientY<=c.bottom;if(f){var d=u.clientHeight,h=o.clientY>c.top+d/2?"bottom":"top";return{comp:l,position:h}}}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return null},t.prototype.onDragLeave=function(){this.clearHoveredItems()},t.prototype.onDragStop=function(){var e=this;if(this.lastHoveredItem){var r=this.chartController.getColStateForMenu(),n=r.dimensionCols,o=r.valueCols,a=__spread$5(n,o).find(function(l){return l.column===e.lastDraggedColumn});if(a){var s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);this.lastHoveredItem.position==="bottom"&&s++,a.order=s,this.chartController.updateForPanelChange(a)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.columnComps.forEach(function(e){e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0},t.prototype.isInterestedIn=function(e){return e===DragSourceType.ChartPanel},t.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',__decorate$13([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),__decorate$13([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$13([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1M=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$12=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FontPanel=function(i){__extends$1M(t,i);function t(e){var r=i.call(this)||this;return r.activeComps=[],r.params=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{fontGroup:e}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},t.prototype.addCompToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.setEnabled=function(e){this.fontGroup.setEnabled(e)},t.prototype.initGroup=function(){var e=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(function(r){e.params.setEnabled&&e.params.setEnabled(r)})},t.prototype.initFontFamilySelect=function(){var e=this,r=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.params.initialFont.family,o=r[0];if(n){var a=r.map(function(c){return c.toLowerCase()}),s=a.indexOf(n.toLowerCase());if(s>=0)o=r[s];else{var l=_.capitalise(n);r.push(l),o=l}}var u=r.sort().map(function(c){return{value:c,text:c}});this.familySelect.addOptions(u).setInputWidth("flex").setValue(""+o).onValueChange(function(c){return e.params.setFont({family:c})})},t.prototype.initFontSizeSelect=function(){var e=this,r=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.params.initialFont.size;_.includes(r,n)||r.push(n);var o=r.sort(function(a,s){return a-s}).map(function(a){return{value:""+a,text:""+a}});this.sizeSelect.addOptions(o).setInputWidth("flex").setValue(""+n).onValueChange(function(a){return e.params.setFont({size:parseInt(a,10)})}),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},t.prototype.initFontWeightStyleSelect=function(){var e=this,r=this.params.initialFont,n=r.weight,o=n===void 0?"normal":n,a=r.style,s=a===void 0?"normal":a,l=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],u=l.find(function(f){return f.weight===o&&f.style===s});u||(u={name:"predefined",weight:o,style:s},l.unshift(u));var c=l.map(function(f){return{value:f.name,text:e.chartTranslationService.translate(f.name)}});this.weightStyleSelect.addOptions(c).setInputWidth("flex").setValue(u.name).onValueChange(function(f){var d=l.find(function(h){return h.name===f});e.params.setFont({weight:d.weight,style:d.style})})},t.prototype.initFontColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange(function(r){return e.params.setFont({color:r})})},t.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActiveComps(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-font-panel">
            <ag-group-component ref="fontGroup">
                <ag-select ref="familySelect"></ag-select>
                <ag-select ref="weightStyleSelect"></ag-select>
                <div class="ag-charts-font-size-color">
                    <ag-select ref="sizeSelect"></ag-select>
                    <ag-color-picker ref="colorPicker"></ag-color-picker>
                </div>
            </ag-group-component>
        </div>`,__decorate$12([RefSelector("fontGroup")],t.prototype,"fontGroup",void 0),__decorate$12([RefSelector("familySelect")],t.prototype,"familySelect",void 0),__decorate$12([RefSelector("weightStyleSelect")],t.prototype,"weightStyleSelect",void 0),__decorate$12([RefSelector("sizeSelect")],t.prototype,"sizeSelect",void 0),__decorate$12([RefSelector("colorPicker")],t.prototype,"colorPicker",void 0),__decorate$12([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$12([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1L=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$11=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},LegendPanel=function(i){__extends$1L(t,i);function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=n===void 0?!1:n,a=i.call(this)||this;return a.activePanels=[],a.chartOptionsService=r,a.isExpandedOnInit=o,a}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{legendGroup:e}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},t.prototype.initLegendGroup=function(){var e=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(function(r){e.chartOptionsService.setChartOption("legend.enabled",r),e.legendGroup.toggleGroupExpand(!0)})},t.prototype.initLegendPosition=function(){var e=this,r=[LegendPosition.Top,LegendPosition.Right,LegendPosition.Bottom,LegendPosition.Left];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(r.map(function(n){return{value:n,text:e.chartTranslationService.translate(n)}})).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.position",n)})},t.prototype.initLegendPadding=function(){var e=this,r=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(getMaxValue(r,200)).setValue(""+r).setTextFieldWidth(45).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.spacing",n)})},t.prototype.initLegendItems=function(){var e=this,r=function(n,o,a,s){var l=e.chartOptionsService.getChartOption("legend."+n);a.setLabel(e.chartTranslationService.translate(o)).setMaxValue(getMaxValue(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){e.chartOptionsService.setChartOption("legend."+n,u)})};r("item.marker.size","markerSize",this.markerSizeSlider,40),r("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),r("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),r("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),r("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},t.prototype.initLabelPanel=function(){var e=this,r=this.chartOptionsService,n={family:r.getChartOption("legend.item.label.fontFamily"),style:r.getChartOption("legend.item.label.fontStyle"),weight:r.getChartOption("legend.item.label.fontWeight"),size:r.getChartOption("legend.item.label.fontSize"),color:r.getChartOption("legend.item.label.color")},o=function(l){var u=e.chartOptionsService;l.family&&u.setChartOption("legend.item.label.fontFamily",l.family),l.weight&&u.setChartOption("legend.item.label.fontWeight",l.weight),l.style&&u.setChartOption("legend.item.label.fontStyle",l.style),l.size&&u.setChartOption("legend.item.label.fontSize",l.size),l.color&&u.setChartOption("legend.item.label.color",l.color)},a={enabled:!0,suppressEnabledCheckbox:!0,initialFont:n,setFont:o},s=this.createBean(new FontPanel(a));this.legendGroup.addItem(s),this.activePanels.push(s)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="legendGroup">
                <ag-select ref="legendPositionSelect"></ag-select>
                <ag-slider ref="legendPaddingSlider"></ag-slider>
                <ag-slider ref="markerSizeSlider"></ag-slider>
                <ag-slider ref="markerStrokeSlider"></ag-slider>
                <ag-slider ref="markerPaddingSlider"></ag-slider>
                <ag-slider ref="itemPaddingXSlider"></ag-slider>
                <ag-slider ref="itemPaddingYSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$11([RefSelector("legendGroup")],t.prototype,"legendGroup",void 0),__decorate$11([RefSelector("legendPositionSelect")],t.prototype,"legendPositionSelect",void 0),__decorate$11([RefSelector("legendPaddingSlider")],t.prototype,"legendPaddingSlider",void 0),__decorate$11([RefSelector("markerSizeSlider")],t.prototype,"markerSizeSlider",void 0),__decorate$11([RefSelector("markerStrokeSlider")],t.prototype,"markerStrokeSlider",void 0),__decorate$11([RefSelector("markerPaddingSlider")],t.prototype,"markerPaddingSlider",void 0),__decorate$11([RefSelector("itemPaddingXSlider")],t.prototype,"itemPaddingXSlider",void 0),__decorate$11([RefSelector("itemPaddingYSlider")],t.prototype,"itemPaddingYSlider",void 0),__decorate$11([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$11([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1K=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$10=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AxisTicksPanel=function(i){__extends$1K(t,i);function t(e){var r=i.call(this)||this;return r.chartOptionsService=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{axisTicksGroup:e}),this.initAxisTicks()},t.prototype.initAxisTicks=function(){var e=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("tick.color",n)});var r=function(n,o,a,s){var l=e.chartOptionsService.getAxisProperty(n);o.setLabel(a).setMaxValue(getMaxValue(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setAxisProperty(n,u)})};r("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),r("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},t.TEMPLATE=`<div>
            <ag-group-component ref="axisTicksGroup">
                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>
                <ag-slider ref="axisTicksWidthSlider"></ag-slider>
                <ag-slider ref="axisTicksSizeSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$10([RefSelector("axisTicksGroup")],t.prototype,"axisTicksGroup",void 0),__decorate$10([RefSelector("axisTicksColorPicker")],t.prototype,"axisTicksColorPicker",void 0),__decorate$10([RefSelector("axisTicksWidthSlider")],t.prototype,"axisTicksWidthSlider",void 0),__decorate$10([RefSelector("axisTicksSizeSlider")],t.prototype,"axisTicksSizeSlider",void 0),__decorate$10([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$10([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1J=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$$=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AxisPanel=function(i){__extends$1J(t,i);function t(e){var r=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,a=o===void 0?!1:o,s=i.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=r,s.chartOptionsService=n,s.isExpandedOnInit=a,s}return t.prototype.init=function(){var e=this,r={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{axisGroup:r}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();var n=function(){return e.axisLabelUpdateFuncs.forEach(function(o){return o()})};this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,n)},t.prototype.initAxis=function(){var e=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.color",n)});var r=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(getMaxValue(r,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+r).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.width",n)})},t.prototype.initAxisTicks=function(){var e=this.createBean(new AxisTicksPanel(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)},t.prototype.initAxisLabels=function(){var e=this,r={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},n=function(s){s.family&&e.chartOptionsService.setAxisProperty("label.fontFamily",s.family),s.weight&&e.chartOptionsService.setAxisProperty("label.fontWeight",s.weight),s.style&&e.chartOptionsService.setAxisProperty("label.fontStyle",s.style),s.size&&e.chartOptionsService.setAxisProperty("label.fontSize",s.size),s.color&&e.chartOptionsService.setAxisProperty("label.color",s.color)},o={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:r,setFont:n},a=this.createBean(new FontPanel(o));this.axisGroup.addItem(a),this.activePanels.push(a),this.addAdditionalLabelComps(a)},t.prototype.addAdditionalLabelComps=function(e){this.addLabelPadding(e);var r=this.createRotationWidgets(),n=r.xRotationComp,o=r.yRotationComp,a=this.initLabelRotations(n,o);e.addCompToPanel(a),e.addCompToPanel(n),e.addCompToPanel(o)},t.prototype.initLabelRotations=function(e,r){var n=this,o=function(f){return n.chartOptionsService.getLabelRotation(f)},a=function(f,d){n.chartOptionsService.setLabelRotation(f,d)},s=function(f){n.chartOptionsService.setAxisProperty("label.autoRotate",f),f?(n.prevXRotation=o("xAxis"),n.prevYRotation=o("yAxis"),a("xAxis",void 0),a("yAxis",void 0)):(a("xAxis",n.prevXRotation),a("yAxis",n.prevYRotation)),e.setDisabled(f),r.setDisabled(f)},l=function(){var f=o("xAxis"),d=o("yAxis");return f==null&&d==null?n.chartOptionsService.getAxisProperty("label.autoRotate"):!1},u=l(),c=this.createBean(new AgCheckbox).setLabel(this.translate("autoRotate")).setValue(u).onValueChange(s);return e.setDisabled(u),r.setDisabled(u),c},t.prototype.createRotationWidgets=function(){var e=this,r=String.fromCharCode(176),n=function(o,a){var s=e.chartTranslationService.translate(o)+" "+r,l=e.chartOptionsService.getLabelRotation(a),u=new AgAngleSelect().setLabel(s).setLabelWidth("flex").setValue(l||0).onValueChange(function(c){return e.chartOptionsService.setLabelRotation(a,c)});return e.axisLabelUpdateFuncs.push(function(){var c=e.chartOptionsService.getLabelRotation(a);u.setValue(c||0)}),e.createBean(u)};return{xRotationComp:n("xRotation","xAxis"),yRotationComp:n("yRotation","yAxis")}},t.prototype.addLabelPadding=function(e){var r=this,n=this.createBean(new AgSlider),o=this.chartOptionsService.getAxisProperty("label.padding");n.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(getMaxValue(o,30)).setValue(""+o).setTextFieldWidth(45).onValueChange(function(a){return r.chartOptionsService.setAxisProperty("label.padding",a)}),e.addCompToPanel(n)},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="axisGroup">
                <ag-color-picker ref="axisColorInput"></ag-color-picker>
                <ag-slider ref="axisLineWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$$([RefSelector("axisGroup")],t.prototype,"axisGroup",void 0),__decorate$$([RefSelector("axisColorInput")],t.prototype,"axisColorInput",void 0),__decorate$$([RefSelector("axisLineWidthSlider")],t.prototype,"axisLineWidthSlider",void 0),__decorate$$([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$$([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1I=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$_=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NavigatorPanel=function(i){__extends$1I(t,i);function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=n===void 0?!1:n,a=i.call(this)||this;return a.chartOptionsService=r,a.isExpandedOnInit=o,a}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{navigatorGroup:e}),this.initNavigator()},t.prototype.initNavigator=function(){var e=this,r=this.chartTranslationService;this.navigatorGroup.setTitle(r.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(function(o){e.chartOptionsService.setChartOption("navigator.enabled",o),e.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);var n=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(r.translate("height")).setMinValue(10).setMaxValue(getMaxValue(n,60)).setTextFieldWidth(45).setValue(""+(n||30)).onValueChange(function(o){return e.chartOptionsService.setChartOption("navigator.height",o)})},t.prototype.destroy=function(){i.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="navigatorGroup">
                <ag-slider ref="navigatorHeightSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$_([RefSelector("navigatorGroup")],t.prototype,"navigatorGroup",void 0),__decorate$_([RefSelector("navigatorHeightSlider")],t.prototype,"navigatorHeightSlider",void 0),__decorate$_([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$_([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1H=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$Z=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},PaddingPanel=function(i){__extends$1H(t,i);function t(e){var r=i.call(this)||this;return r.chartOptionsService=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{chartPaddingGroup:e}),this.initGroup(),this.initChartPaddingItems()},t.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},t.prototype.initChartPaddingItems=function(){var e=this,r=function(n,o){var a=e.chartOptionsService.getChartOption("padding."+n);o.setLabel(e.chartTranslationService.translate(n)).setMaxValue(getMaxValue(a,200)).setValue(""+a).setTextFieldWidth(45).onValueChange(function(s){return e.chartOptionsService.setChartOption("padding."+n,s)})};r("top",this.paddingTopSlider),r("right",this.paddingRightSlider),r("bottom",this.paddingBottomSlider),r("left",this.paddingLeftSlider)},t.TEMPLATE=`<div>
            <ag-group-component ref="chartPaddingGroup">
                <ag-slider ref="paddingTopSlider"></ag-slider>
                <ag-slider ref="paddingRightSlider"></ag-slider>
                <ag-slider ref="paddingBottomSlider"></ag-slider>
                <ag-slider ref="paddingLeftSlider"></ag-slider>
            </ag-group-component>
        <div>`,__decorate$Z([RefSelector("chartPaddingGroup")],t.prototype,"chartPaddingGroup",void 0),__decorate$Z([RefSelector("paddingTopSlider")],t.prototype,"paddingTopSlider",void 0),__decorate$Z([RefSelector("paddingRightSlider")],t.prototype,"paddingRightSlider",void 0),__decorate$Z([RefSelector("paddingBottomSlider")],t.prototype,"paddingBottomSlider",void 0),__decorate$Z([RefSelector("paddingLeftSlider")],t.prototype,"paddingLeftSlider",void 0),__decorate$Z([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$Z([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1G=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$Y=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},BackgroundPanel=function(i){__extends$1G(t,i);function t(e){var r=i.call(this)||this;return r.chartOptionsService=e,r}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{chartBackgroundGroup:e}),this.initGroup(),this.initColorPicker()},t.prototype.initGroup=function(){var e=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(r){return e.chartOptionsService.setChartOption("background.visible",r)})},t.prototype.initColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(function(r){return e.chartOptionsService.setChartOption("background.fill",r)})},t.TEMPLATE=`<div>
            <ag-group-component ref="chartBackgroundGroup">
                <ag-color-picker ref="colorPicker"></ag-color-picker>
            </ag-group-component>
        <div>`,__decorate$Y([RefSelector("chartBackgroundGroup")],t.prototype,"group",void 0),__decorate$Y([RefSelector("colorPicker")],t.prototype,"colorPicker",void 0),__decorate$Y([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$Y([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1F=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$X=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TitlePanel=function(i){__extends$1F(t,i);function t(e){var r=i.call(this,t.TEMPLATE)||this;return r.chartOptionsService=e,r.activePanels=[],r}return t.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},t.prototype.hasTitle=function(){var e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0},t.prototype.initFontPanel=function(){var e=this,r=this.hasTitle,n=function(l){l.family&&e.setOption("title.fontFamily",l.family),l.weight&&e.setOption("title.fontWeight",l.weight),l.style&&e.setOption("title.fontStyle",l.style),l.size&&e.setOption("title.fontSize",l.size),l.color&&e.setOption("title.color",l.color)},o={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};r||n(o);var a={name:this.chartTranslationService.translate("title"),enabled:this.hasTitle(),suppressEnabledCheckbox:!1,initialFont:o,setFont:n,setEnabled:function(l){e.setOption("title.enabled",l);var u=e.getOption("title.text");l&&u==="Title"&&e.setOption("title.text",e.titlePlaceholder)}},s=this.createBean(new FontPanel(a));this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",function(){s.setEnabled(e.hasTitle())})},t.prototype.getOption=function(e){return this.chartOptionsService.getChartOption(e)},t.prototype.setOption=function(e,r){this.chartOptionsService.setChartOption(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),i.prototype.destroy.call(this)},t.TEMPLATE="<div></div>",__decorate$X([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$X([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1E=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$W=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartPanel=function(i){__extends$1E(t,i);function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=n===void 0?!1:n,a=i.call(this)||this;return a.activePanels=[],a.chartOptionsService=r,a.isExpandedOnInit=o,a}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{chartGroup:e}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},t.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},t.prototype.initTitles=function(){var e=this.createBean(new TitlePanel(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initPaddingPanel=function(){var e=this.createBean(new PaddingPanel(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initBackgroundPanel=function(){var e=this.createBean(new BackgroundPanel(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="chartGroup"></ag-group-component>
        </div>`,__decorate$W([RefSelector("chartGroup")],t.prototype,"chartGroup",void 0),__decorate$W([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$W([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1D=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$V=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ShadowPanel=function(i){__extends$1D(t,i);function t(e,r){var n=i.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(t.TEMPLATE,{shadowGroup:e}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},t.prototype.initSeriesShadow=function(){var e=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.enabled",n,e.getSelectedSeries())}),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.color",n,e.getSelectedSeries())});var r=function(n,o,a,s){var l=e.chartOptionsService.getSeriesOption("shadow."+o,e.getSelectedSeries());n.setLabel(e.chartTranslationService.translate(o)).setMinValue(a).setMaxValue(getMaxValue(l,s)).setValue(""+l).onValueChange(function(u){return e.chartOptionsService.setSeriesOption("shadow."+o,u,e.getSelectedSeries())})};r(this.shadowBlurSlider,"blur",0,20),r(this.shadowXOffsetSlider,"xOffset",-10,10),r(this.shadowYOffsetSlider,"yOffset",-10,10)},t.TEMPLATE=`<div>
            <ag-group-component ref="shadowGroup">
                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>
                <ag-slider ref="shadowBlurSlider"></ag-slider>
                <ag-slider ref="shadowXOffsetSlider"></ag-slider>
                <ag-slider ref="shadowYOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$V([RefSelector("shadowGroup")],t.prototype,"shadowGroup",void 0),__decorate$V([RefSelector("shadowColorPicker")],t.prototype,"shadowColorPicker",void 0),__decorate$V([RefSelector("shadowBlurSlider")],t.prototype,"shadowBlurSlider",void 0),__decorate$V([RefSelector("shadowXOffsetSlider")],t.prototype,"shadowXOffsetSlider",void 0),__decorate$V([RefSelector("shadowYOffsetSlider")],t.prototype,"shadowYOffsetSlider",void 0),__decorate$V([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$V([PostConstruct],t.prototype,"init",null),t}(Component);function initFontPanelParams(i,t,e){var r=function(u){var c=e()==="pie"?"calloutLabel":"label";return c+"."+u},n=function(u){var c=r(u);return t.getSeriesOption(c,e())},o=function(u,c){var f=r(u);t.setSeriesOption(f,c,e())},a={family:n("fontFamily"),style:n("fontStyle"),weight:n("fontWeight"),size:n("fontSize"),color:n("color")},s=function(u){u.family&&o("fontFamily",u.family),u.weight&&o("fontWeight",u.weight),u.style&&o("fontStyle",u.style),u.size&&o("fontSize",u.size),u.color&&o("color",u.color)},l={name:i.translate("labels"),enabled:n("enabled")||!1,setEnabled:function(u){return o("enabled",u)},suppressEnabledCheckbox:!1,initialFont:a,setFont:s};return l}var __extends$1C=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$U=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MarkersPanel=function(i){__extends$1C(t,i);function t(e,r){var n=i.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesMarkersGroup:e}),this.initMarkers()},t.prototype.initMarkers=function(){var e=this,r=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];this.seriesMarkerShapeSelect.addOptions(r).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(function(s){return e.setSeriesOption("marker.shape",s)});var n=this.chartOptionsService.getChartType(),o=_.includes(["scatter","bubble"],n);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(o).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(function(s){return e.setSeriesOption("marker.enabled",s)});var a=function(s,l,u,c){var f=e.getSeriesOption(s);l.setLabel(e.chartTranslationService.translate(u)).setMaxValue(getMaxValue(f,c)).setValue(""+f).setTextFieldWidth(45).onValueChange(function(d){return e.setSeriesOption(s,d)})};n==="bubble"?(a("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),a("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),a("marker.size",this.seriesMarkerSizeSlider,"size",60)),a("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.getSelectedSeries())},t.TEMPLATE=`<div>
            <ag-group-component ref="seriesMarkersGroup">
                <ag-select ref="seriesMarkerShapeSelect"></ag-select>
                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>
                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$U([RefSelector("seriesMarkersGroup")],t.prototype,"seriesMarkersGroup",void 0),__decorate$U([RefSelector("seriesMarkerShapeSelect")],t.prototype,"seriesMarkerShapeSelect",void 0),__decorate$U([RefSelector("seriesMarkerSizeSlider")],t.prototype,"seriesMarkerSizeSlider",void 0),__decorate$U([RefSelector("seriesMarkerMinSizeSlider")],t.prototype,"seriesMarkerMinSizeSlider",void 0),__decorate$U([RefSelector("seriesMarkerStrokeWidthSlider")],t.prototype,"seriesMarkerStrokeWidthSlider",void 0),__decorate$U([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$U([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1B=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$T=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},CalloutPanel=function(i){__extends$1B(t,i);function t(e,r){var n=i.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{calloutGroup:e}),this.initCalloutOptions()},t.prototype.initCalloutOptions=function(){var e=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var r=function(n,o,a,s){var l=e.chartOptionsService.getSeriesOption(n,e.getSelectedSeries());o.setLabel(e.chartTranslationService.translate(a)).setMaxValue(getMaxValue(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setSeriesOption(n,u,e.getSelectedSeries())})};r("calloutLine.length",this.calloutLengthSlider,"length",40),r("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),r("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},t.TEMPLATE=`<div>
            <ag-group-component ref="calloutGroup">
                <ag-slider ref="calloutLengthSlider"></ag-slider>
                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>
                <ag-slider ref="labelOffsetSlider"></ag-slider>
            </ag-group-component>
        </div>`,__decorate$T([RefSelector("calloutGroup")],t.prototype,"calloutGroup",void 0),__decorate$T([RefSelector("calloutLengthSlider")],t.prototype,"calloutLengthSlider",void 0),__decorate$T([RefSelector("calloutStrokeWidthSlider")],t.prototype,"calloutStrokeWidthSlider",void 0),__decorate$T([RefSelector("labelOffsetSlider")],t.prototype,"labelOffsetSlider",void 0),__decorate$T([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$T([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1A=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$S=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SeriesPanel=function(i){__extends$1A(t,i);function t(e){var r=e.chartController,n=e.chartOptionsService,o=e.seriesType,a=e.isExpandedOnInit,s=a===void 0?!1:a,l=i.call(this)||this;return l.activePanels=[],l.widgetFuncs={lineWidth:function(){return l.initLineWidth()},strokeWidth:function(){return l.initStrokeWidth()},lineDash:function(){return l.initLineDash()},lineOpacity:function(){return l.initLineOpacity()},fillOpacity:function(){return l.initFillOpacity()},markers:function(){return l.initMarkers()},labels:function(){return l.initLabels()},shadow:function(){return l.initShadow()},tooltips:function(){return l.initTooltips()},bins:function(){return l.initBins()}},l.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},l.chartController=r,l.chartOptionsService=n,l.seriesType=o||l.getChartSeriesType(),l.isExpandedOnInit=s,l}return t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesGroup:e}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},t.prototype.refreshWidgets=function(){var e=this;this.destroyActivePanels();var r=this.chartController.getChartProxy().getChart();r.waitForUpdate().then(function(){e.chartController.isComboChart()&&(e.updateSeriesType(),e.initSeriesSelect()),e.seriesWidgetMappings[e.seriesType].forEach(function(n){return e.widgetFuncs[n]()})})},t.prototype.initSeriesSelect=function(){var e=this,r=this.seriesGroup.createManagedBean(new AgSelect);r.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange(function(n){e.seriesType=n,e.refreshWidgets()}),this.seriesGroup.addItem(r),this.activePanels.push(r)},t.prototype.initTooltips=function(){var e=this,r=this.createBean(new AgToggleButton);r.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(function(n){return e.setSeriesOption("tooltip.enabled",n)}),this.addWidget(r)},t.prototype.initStrokeWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new AgSlider);n.setLabel(this.translate("strokeWidth")).setMaxValue(getMaxValue(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(o){return e.setSeriesOption("strokeWidth",o)}),this.addWidget(n)},t.prototype.initLineWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new AgSlider);n.setLabel(this.translate("lineWidth")).setMaxValue(getMaxValue(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(o){return e.setSeriesOption("strokeWidth",o)}),this.addWidget(n)},t.prototype.initLineDash=function(){var e=this,r=this.getSeriesOption("lineDash"),n=r?r[0]:0,o=this.createBean(new AgSlider);o.setLabel(this.translate("lineDash")).setMaxValue(getMaxValue(n,30)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("lineDash",[a])}),this.addWidget(o)},t.prototype.initLineOpacity=function(){var e=this,r=this.getSeriesOption("strokeOpacity"),n=this.createBean(new AgSlider);n.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(getMaxValue(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(o){return e.setSeriesOption("strokeOpacity",o)}),this.addWidget(n)},t.prototype.initFillOpacity=function(){var e=this,r=this.getSeriesOption("fillOpacity"),n=this.createBean(new AgSlider);n.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(getMaxValue(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(o){return e.setSeriesOption("fillOpacity",o)}),this.addWidget(n)},t.prototype.initLabels=function(){var e=this,r=initFontPanelParams(this.chartTranslationService,this.chartOptionsService,function(){return e.seriesType}),n=this.createBean(new FontPanel(r));if(this.seriesType==="pie"){var o=this.createBean(new CalloutPanel(this.chartOptionsService,function(){return e.seriesType}));n.addCompToPanel(o),this.activePanels.push(o)}this.addWidget(n)},t.prototype.initShadow=function(){var e=this,r=this.createBean(new ShadowPanel(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initMarkers=function(){var e=this,r=this.createBean(new MarkersPanel(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initBins=function(){var e=this,r=this.getSeriesOption("bins").length,n=this.createBean(new AgSlider);n.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(getMaxValue(r,20)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(o){return e.setSeriesOption("binCount",o)}),this.addWidget(n)},t.prototype.addWidget=function(e){this.seriesGroup.addItem(e),this.activePanels.push(e)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.seriesType)},t.prototype.getChartSeriesType=function(){if(this.chartController.getSeriesChartTypes().length===0)return"column";var e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":getSeriesType(e)},t.prototype.getSeriesSelectOptions=function(){var e=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var r=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(function(n){var o=getSeriesType(n.chartType);r.add(e.seriesSelectOptions.get(o))}),Array.from(r)},t.prototype.updateSeriesType=function(){var e=this.chartController.getActiveSeriesChartTypes().map(function(n){return getSeriesType(n.chartType)}),r=!e.includes(this.seriesType);r&&e.length>0&&(this.seriesType=e[0])},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div>
            <ag-group-component ref="seriesGroup">
            </ag-group-component>
        </div>`,__decorate$S([RefSelector("seriesGroup")],t.prototype,"seriesGroup",void 0),__decorate$S([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$S([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$R=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function getMaxValue(i,t){return Math.max(i,t)}var DefaultFormatPanelDef={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},FormatPanel=function(i){__extends$1z(t,i);function t(e,r){var n=i.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.panels=[],n.isGroupPanelShownInSeries=function(o,a){var s=["chart","legend","series"];if(s.includes(o))return!0;var l=["axis","navigator"],u=["bar","column","line","area","scatter","histogram","cartesian"];return!!(l.includes(o)&&u.includes(a))},n}return t.prototype.init=function(){this.createPanels(),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,this.createPanels.bind(this))},t.prototype.createPanels=function(){var e=this,r,n=this.chartController.getChartType(),o=this.chartController.isGrouping(),a=getSeriesType(n);n===this.chartType&&o===this.isGrouping||(this.destroyPanels(),(r=this.getFormatPanelDef().groups)===null||r===void 0||r.forEach(function(s){var l=s.type;if(e.isGroupPanelShownInSeries(l,a)){var u={chartController:e.chartController,chartOptionsService:e.chartOptionsService,isExpandedOnInit:s.isOpen,seriesType:a};l==="chart"?e.addComponent(new ChartPanel(u)):l==="legend"?e.addComponent(new LegendPanel(u)):l==="axis"?e.addComponent(new AxisPanel(u)):l==="series"?e.addComponent(new SeriesPanel(u)):l==="navigator"?e.addComponent(new NavigatorPanel(u)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+s.type+"'")}}),this.chartType=n,this.isGrouping=o)},t.prototype.getFormatPanelDef=function(){var e,r=(e=this.gridOptionsWrapper.getChartToolPanelsDef())===null||e===void 0?void 0:e.formatPanel;return r||DefaultFormatPanelDef},t.prototype.addComponent=function(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())},t.prototype.destroyPanels=function(){var e=this;this.panels.forEach(function(r){_.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyPanels(),i.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',__decorate$R([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$Q=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MiniChart=function(i){__extends$1y(t,i);function t(e,r){var n=i.call(this)||this;n.size=58,n.padding=5,n.root=new Group$1;var o=new Scene$1({document:window.document,width:n.size,height:n.size});return o.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),o.root=n.root,o.container=e,n.scene=o,n.tooltipName=r,n}return t.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render()},__decorate$Q([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$Q([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1x=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$P=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MiniChartWithAxes=function(i){__extends$1x(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return t.prototype.addAxes=function(){var e=this.size,r=this.padding,n=new Line$1;n.x1=r,n.y1=r,n.x2=r,n.y2=e-r+this.axisOvershoot,n.stroke=this.stroke;var o=new Line$1;o.x1=r-this.axisOvershoot+1,o.y1=e-r,o.x2=e-r+1,o.y2=e-r,o.stroke=this.stroke;var a=this.root;a.append(n),a.append(o)},__decorate$P([PostConstruct],t.prototype,"addAxes",null),t}(MiniChart);function createColumnRects(i){var t=i.stacked,e=i.size,r=i.padding,n=i.xScalePadding,o=i.xScaleDomain,a=i.yScaleDomain,s=new BandScale$1;s.domain=o,s.range=[r,e-r],s.paddingInner=n,s.paddingOuter=n;var l=new LinearScale$1;l.domain=a,l.range=[e-r,r];var u=function(c,f,d){return c.map(function(h,p){var g=d.convert(h),v=new Rect;return v.x=f.convert(p),v.y=g,v.width=f.bandwidth,v.height=d.convert(0)-g,v.strokeWidth=1,v.crisp=!0,v})};return t?i.data.map(function(c){return u(c,s,l)}):u(i.data,s,l)}function createLinePaths(i,t,e,r){var n=new LinearScale$1;n.domain=[0,4],n.range=[r,e-r];var o=new LinearScale$1;o.domain=[0,10],o.range=[e-r,r];var a=t.map(function(l){var u=new Path$1;return u.strokeWidth=3,u.lineCap="round",u.fill=void 0,l.forEach(function(c,f){u.path[f>0?"lineTo":"moveTo"](n.convert(f),o.convert(c))}),u}),s=new ClipRect;return s.x=s.y=r,s.width=s.height=e-r*2,s.append(a),i.append(s),a}var __extends$1w=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniColumn=function(i){__extends$1w(t,i);function t(e,r,n){var o=i.call(this,e,"groupedColumnTooltip")||this;o.columnData=[2,3,4];var a=o,s=a.root,l=a.columnData,u=a.size,c=a.padding;return o.columns=createColumnRects({stacked:!1,root:s,data:l,size:u,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(o.columns),o.updateColors(r,n),o}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]})},t.chartType="groupedColumn",t}(MiniChartWithAxes),__extends$1v=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniStackedColumn=function(i){__extends$1v(t,i);function t(e,r,n,o,a,s){o===void 0&&(o=t.data),a===void 0&&(a=[0,16]),s===void 0&&(s="stackedColumnTooltip");var l=i.call(this,e,s)||this,u=l,c=u.root,f=u.size,d=u.padding;return l.stackedColumns=createColumnRects({stacked:!0,root:c,data:o,size:f,padding:d,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],l.stackedColumns)),l.updateColors(r,n),l}return t.prototype.updateColors=function(e,r){this.stackedColumns.forEach(function(n,o){return n.forEach(function(a){a.fill=e[o],a.stroke=r[o]})})},t.chartType="stackedColumn",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(MiniChartWithAxes),__extends$1u=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniNormalizedColumn=function(i){__extends$1u(t,i);function t(e,r,n){return i.call(this,e,r,n,t.data,[0,10],"normalizedColumnTooltip")||this}return t.chartType="normalizedColumn",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(MiniStackedColumn),__extends$1t=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniBar=function(i){__extends$1t(t,i);function t(e,r,n){var o=i.call(this,e,"groupedBarTooltip")||this,a=o.padding,s=o.size,l=[2,3,4],u=new BandScale$1;u.domain=[0,1,2],u.range=[a,s-a],u.paddingInner=.3,u.paddingOuter=.3;var c=new LinearScale$1;c.domain=[0,4],c.range=[s-a,a];var f=c.convert(0),d=u.bandwidth;return o.bars=l.map(function(h,p){var g=new Rect;return g.x=a,g.y=u.convert(p),g.width=f-c.convert(h),g.height=d,g.strokeWidth=1,g.crisp=!0,g}),o.updateColors(r,n),o.root.append(o.bars),o}return t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]})},t.chartType="groupedBar",t}(MiniChartWithAxes),__extends$1s=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniStackedBar=function(i){__extends$1s(t,i);function t(e,r,n,o,a,s){o===void 0&&(o=t.data),a===void 0&&(a=[0,16]),s===void 0&&(s="stackedBarTooltip");var l=i.call(this,e,s)||this,u=l.size,c=l.padding,f=new BandScale$1;f.domain=[0,1,2],f.range=[c,u-c],f.paddingInner=.3,f.paddingOuter=.3;var d=new LinearScale$1;d.domain=a,d.range=[u-c,c];var h=d.convert(0),p=f.bandwidth;return l.bars=o.map(function(g){return g.map(function(v,m){var y=new Rect;return y.x=c,y.y=f.convert(m),y.width=h-d.convert(v),y.height=p,y.strokeWidth=1,y.crisp=!0,y})}),l.updateColors(r,n),l.root.append([].concat.apply([],l.bars)),l}return t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,o){return n.forEach(function(a){a.fill=e[o],a.stroke=r[o]})})},t.chartType="stackedBar",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(MiniChartWithAxes),__extends$1r=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniNormalizedBar=function(i){__extends$1r(t,i);function t(e,r,n){return i.call(this,e,r,n,t.data,[0,10],"normalizedBarTooltip")||this}return t.chartType="normalizedBar",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(MiniStackedBar),__extends$1q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__read$f=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},MiniDoughnut=function(i){__extends$1q(t,i);function t(e,r,n,o,a){o===void 0&&(o=.6),a===void 0&&(a="doughnutTooltip");var s=i.call(this,e,a)||this,l=(s.size-s.padding*2)/2,u=l+s.padding,c=[[toRadians(-90),toRadians(30)],[toRadians(30),toRadians(120)],[toRadians(120),toRadians(180)],[toRadians(180),toRadians(210)],[toRadians(210),toRadians(240)],[toRadians(240),toRadians(270)]];return s.sectors=c.map(function(f){var d=__read$f(f,2),h=d[0],p=d[1],g=new Sector;return g.centerX=u,g.centerY=u,g.innerRadius=l*o,g.outerRadius=l,g.startAngle=h,g.endAngle=p,g.stroke=void 0,g.strokeWidth=1,g}),s.updateColors(r,n),s.root.append(s.sectors),s}return t.prototype.updateColors=function(e,r){this.sectors.forEach(function(n,o){n.fill=e[o%e.length],n.stroke=r[o%r.length]})},t.chartType="doughnut",t}(MiniChart),__extends$1p=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniPie=function(i){__extends$1p(t,i);function t(e,r,n){return i.call(this,e,r,n,0,"pieTooltip")||this}return t.chartType="pie",t}(MiniDoughnut),__extends$1o=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniLine=function(i){__extends$1o(t,i);function t(e,r,n){var o=i.call(this,e,"lineTooltip")||this;return o.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],o.lines=createLinePaths(o.root,o.data,o.size,o.padding),o.updateColors(r,n),o}return t.prototype.updateColors=function(e,r){this.lines.forEach(function(n,o){n.stroke=e[o]})},t.chartType="line",t}(MiniChartWithAxes),__extends$1n=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__read$e=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},MiniScatter=function(i){__extends$1n(t,i);function t(e,r,n){var o=i.call(this,e,"scatterTooltip")||this,a=o.size,s=o.padding,l=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],u=new LinearScale$1;u.domain=[-.5,4],u.range=[s*2,a-s];var c=new LinearScale$1;c.domain=[-.5,3.5],c.range=[a-s,s];var f=[];l.forEach(function(h){h.forEach(function(p){var g=__read$e(p,2),v=g[0],m=g[1],y=new Arc;y.strokeWidth=1,y.centerX=u.convert(v),y.centerY=c.convert(m),y.radiusX=y.radiusY=2.5,f.push(y)})}),o.points=f,o.updateColors(r,n);var d=new ClipRect;return d.x=d.y=s,d.width=d.height=a-s*2,d.append(o.points),o.root.append(d),o}return t.prototype.updateColors=function(e,r){this.points.forEach(function(n,o){n.stroke=r[o%r.length],n.fill=e[o%e.length]})},t.chartType="scatter",t}(MiniChartWithAxes),__extends$1m=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__read$d=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},MiniBubble=function(i){__extends$1m(t,i);function t(e,r,n){var o=i.call(this,e,"bubbleTooltip")||this,a=o.size,s=o.padding,l=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],u=new LinearScale$1;u.domain=[0,1],u.range=[s*2,a-s];var c=new LinearScale$1;c.domain=[0,1],c.range=[a-s,s];var f=[];l.forEach(function(h){h.forEach(function(p){var g=__read$d(p,3),v=g[0],m=g[1],y=g[2],b=new Arc;b.strokeWidth=1,b.centerX=u.convert(v),b.centerY=c.convert(m),b.radiusX=b.radiusY=y,b.fillOpacity=.7,f.push(b)})}),o.points=f,o.updateColors(r,n);var d=new ClipRect;return d.x=s,d.y=s,d.width=a-s*2,d.height=a-s*2,d.append(o.points),o.root.append(d),o}return t.prototype.updateColors=function(e,r){this.points.forEach(function(n,o){n.stroke=r[o%r.length],n.fill=e[o%e.length]})},t.chartType="bubble",t}(MiniChartWithAxes),__extends$1l=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniArea=function(i){__extends$1l(t,i);function t(e,r,n,o){o===void 0&&(o=t.data);var a=i.call(this,e,"groupedAreaTooltip")||this,s=a.size,l=a.padding,u=new BandScale$1;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[l+.5,s-l-.5];var c=new LinearScale$1;c.domain=[0,6],c.range=[s-l+.5,l];var f=o.length,d=f*2-1,h=[],p=c.convert(0);return o.forEach(function(g,v){var m=u.convert(v);g.forEach(function(y,b){var C=c.convert(y),x=h[b]||(h[b]=[]);x[v]={x:m,y:C},x[d-v]={x:m,y:p}})}),a.areas=h.reverse().map(function(g){var v=new Path$1;v.strokeWidth=1,v.fillOpacity=.7;var m=v.path;return m.clear(),g.forEach(function(y,b){return m[b>0?"lineTo":"moveTo"](y.x,y.y)}),m.closePath(),v}),a.updateColors(r,n),a.root.append(a.areas),a}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]})},t.chartType="area",t.data=[[1,3,5],[2,6,4],[5,3,1]],t}(MiniChartWithAxes),__extends$1k=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniStackedArea=function(i){__extends$1k(t,i);function t(e,r,n,o,a){o===void 0&&(o=t.data),a===void 0&&(a="stackedAreaTooltip");var s=i.call(this,e,a)||this,l=s.size,u=s.padding,c=new BandScale$1;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[u+.5,l-u-.5];var f=new LinearScale$1;f.domain=[0,16],f.range=[l-u+.5,u+.5];var d=o.length,h=d*2-1,p=[];return o.forEach(function(g,v){var m=c.convert(v),y=0;g.forEach(function(b,C){var x=f.convert(y+b),w=p[C]||(p[C]=[]);w[v]={x:m,y:x},w[h-v]={x:m,y:f.convert(y)},y+=b})}),s.areas=p.map(function(g){var v=new Path$1;v.strokeWidth=1;var m=v.path;return m.clear(),g.forEach(function(y,b){return m[b>0?"lineTo":"moveTo"](y.x,y.y)}),m.closePath(),v}),s.updateColors(r,n),s.root.append(s.areas),s}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]})},t.chartType="stackedArea",t.data=[[2,3,2],[3,6,5],[6,2,2]],t}(MiniChartWithAxes),__extends$1j=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniNormalizedArea=function(i){__extends$1j(t,i);function t(e,r,n,o){return o===void 0&&(o=t.data),i.call(this,e,r,n,o,"normalizedAreaTooltip")||this}return t.chartType="normalizedArea",t.data=MiniStackedArea.data.map(function(e){var r=e.reduce(function(n,o){return n+o},0);return e.map(function(n){return n/r*16})}),t}(MiniStackedArea),__extends$1i=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__read$c=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},MiniHistogram=function(i){__extends$1i(t,i);function t(e,r,n){var o=i.call(this,e,"histogramTooltip")||this,a=o.padding,s=o.size,l=[2,5,11,13,10,6,1],u=new LinearScale$1;u.domain=[0,l.length],u.range=[a,s-a];var c=new LinearScale$1;c.domain=[0,l.reduce(function(d,h){return Math.max(d,h)},0)],c.range=[s-a,a];var f=c.convert(0);return o.bars=l.map(function(d,h){var p=c.convert(d),g=u.convert(h),v=u.convert(h+1),m=new Rect;return m.x=g,m.y=p,m.width=v-g,m.height=f-p,m.strokeWidth=1,m.crisp=!0,m}),o.updateColors(r,n),o.root.append(o.bars),o}return t.prototype.updateColors=function(e,r){var n=__read$c(e,1),o=n[0],a=__read$c(r,1),s=a[0];this.bars.forEach(function(l){l.fill=o,l.stroke=s})},t.chartType="histogram",t}(MiniChartWithAxes),__extends$1h=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniColumnLineCombo=function(i){__extends$1h(t,i);function t(e,r,n){var o=i.call(this,e,"columnLineComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var a=o,s=a.root,l=a.columnData,u=a.lineData,c=a.size,f=a.padding;return o.columns=createColumnRects({stacked:!1,root:s,data:l,size:c,padding:f,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(o.columns),o.lines=createLinePaths(s,u,c,f),o.updateColors(r,n),o}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]}),this.lines.forEach(function(n,o){n.stroke=e[o+2]})},t.chartType="columnLineCombo",t}(MiniChartWithAxes),__extends$1g=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniAreaColumnCombo=function(i){__extends$1g(t,i);function t(e,r,n){var o=i.call(this,e,"areaColumnComboTooltip")||this;o.columnData=[3,4.5],o.areaData=[[5,4,6,5,4]];var a=o,s=a.root,l=a.columnData,u=a.areaData,c=a.size,f=a.padding;o.columns=createColumnRects({stacked:!1,root:s,data:l,size:c,padding:f,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var d=new BandScale$1;d.range=[f,c-f],d.domain=[0,1,2,3,4],d.paddingInner=1,d.paddingOuter=0;var h=new LinearScale$1;h.range=[c-f,f],h.domain=[0,6];var p=[],g=h.convert(0),v=d.convert(0);return u.forEach(function(m,y){var b=p[y]||(p[y]=[]);m.forEach(function(x,w){var P=x,S=w,O=d.convert(S),E=h.convert(P);b[w]={x:O,y:E}});var C=d.convert(m.length-1);p[y].push({x:C,y:g},{x:v,y:g})}),o.areas=p.map(function(m){var y=new Path$1;y.strokeWidth=1,y.fillOpacity=.8;var b=y.path;return m.forEach(function(C,x){return b[x>0?"lineTo":"moveTo"](C.x,C.y)}),y}),s.append(o.areas),s.append([].concat.apply([],o.columns)),o.updateColors(r,n),o}return t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]}),this.columns.forEach(function(n,o){n.fill=e[o+1],n.stroke=r[o+1]})},t.chartType="areaColumnCombo",t}(MiniChartWithAxes),__extends$1f=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MiniCustomCombo=function(i){__extends$1f(t,i);function t(e,r,n){var o=i.call(this,e,"customComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var a=o,s=a.root,l=a.columnData,u=a.lineData,c=a.size,f=a.padding;o.columns=createColumnRects({stacked:!1,root:s,data:l,size:c,padding:f,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(o.columns),o.lines=createLinePaths(s,u,c,f);var d="grey",h=3,p=new Line$1;p.x1=f,p.y1=f,p.x2=f,p.y2=c-f+h,p.stroke=d;var g=new Line$1;g.x1=f-h+1,g.y1=c-f,g.x2=c-f+1,g.y2=c-f,g.stroke=d;var v=new Path$1;return o.buildPenIconPath(v),v.fill="whitesmoke",v.stroke="darkslategrey",v.strokeWidth=1,s.append([g,p,v]),o.updateColors(r,n),o}return t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,o){n.fill=e[o],n.stroke=r[o]}),this.lines.forEach(function(n,o){n.stroke=e[o+2]})},t.prototype.buildPenIconPath=function(e){var r=e.path;r.moveTo(25.76,43.46),r.lineTo(31.27,48.53),r.moveTo(49.86,22),r.lineTo(49.86,22),r.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),r.lineTo(46.86,21.41),r.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),r.lineTo(25.51,43.8),r.lineTo(25.43,43.89),r.lineTo(23.01,51.89),r.lineTo(22.83,52.46),r.lineTo(31.02,48.86),r.lineTo(49.02,28.52),r.lineTo(49.02,28.52),r.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),r.lineTo(50.75,24.93),r.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),r.closePath(),r.moveTo(41.76,25.5),r.lineTo(47.34,30.5),r.moveTo(40.74,26.65),r.lineTo(46.25,31.71)},t.chartType="customCombo",t}(MiniChart),__extends$1e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$k=function(){return __assign$k=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$k.apply(this,arguments)},__decorate$O=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},miniChartMapping={columnGroup:{column:MiniColumn,stackedColumn:MiniStackedColumn,normalizedColumn:MiniNormalizedColumn},barGroup:{bar:MiniBar,stackedBar:MiniStackedBar,normalizedBar:MiniNormalizedBar},pieGroup:{pie:MiniPie,doughnut:MiniDoughnut},lineGroup:{line:MiniLine},scatterGroup:{scatter:MiniScatter,bubble:MiniBubble},areaGroup:{area:MiniArea,stackedArea:MiniStackedArea,normalizedArea:MiniNormalizedArea},histogramGroup:{histogram:MiniHistogram},combinationGroup:{columnLineCombo:MiniColumnLineCombo,areaColumnCombo:MiniAreaColumnCombo,customCombo:MiniCustomCombo}},MiniChartsContainer=function(i){__extends$1e(t,i);function t(e,r,n,o){o===void 0&&(o=DEFAULT_CHART_GROUPS);var a=i.call(this,t.TEMPLATE)||this;return a.wrappers={},a.chartController=e,a.fills=r,a.strokes=n,a.chartGroups=__assign$k({},o),a}return t.prototype.init=function(){var e=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(function(n){return n!=="customCombo"}));var r=this.getGui();Object.keys(this.chartGroups).forEach(function(n){var o=e.chartGroups[n],a=e.createBean(new AgGroupComponent({title:e.chartTranslationService.translate(n),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));o.forEach(function(s){var l=miniChartMapping[n][s];if(!l){console.warn("AG Grid - invalid chart type '"+s+"' in group '"+n+"'");return}var u=document.createElement("div");u.classList.add("ag-chart-mini-thumbnail");var c=l.chartType;e.addManagedListener(u,"click",function(){e.chartController.setChartType(c),e.updateSelectedMiniChart()}),e.wrappers[c]=u,e.createBean(new l(u,e.fills,e.strokes)),a.addItem(u)}),r.appendChild(a.getGui())}),this.updateSelectedMiniChart()},t.prototype.updateSelectedMiniChart=function(){var e=this.chartController.getChartType();for(var r in this.wrappers){var n=this.wrappers[r],o=r===e;n.classList.toggle("ag-selected",o)}},t.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',__decorate$O([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$O([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1d=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$N=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartSettingsPanel=function(i){__extends$1d(t,i);function t(e){var r=i.call(this,t.TEMPLATE)||this;return r.miniCharts=[],r.cardItems=[],r.activePaletteIndex=0,r.palettes=[],r.themes=[],r.chartController=e,r}return t.prototype.postConstruct=function(){var e=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",_.createIconNoSpan("previous",this.gridOptionsWrapper)),this.eNextBtn.insertAdjacentElement("afterbegin",_.createIconNoSpan("next",this.gridOptionsWrapper)),this.addManagedListener(this.ePrevBtn,"click",function(){return e.setActivePalette(e.getPrev(),"left")}),this.addManagedListener(this.eNextBtn,"click",function(){return e.setActivePalette(e.getNext(),"right")}),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_TYPE_CHANGED,function(){return e.resetPalettes(!0)}),this.scrollSelectedIntoView()},t.prototype.scrollSelectedIntoView=function(){var e=this;setTimeout(function(){var r=e.miniCharts.find(function(o){return!o.getGui().classList.contains("ag-hidden")}),n=r.getGui().querySelector(".ag-selected");n&&n.scrollIntoView({block:"nearest"})},250)},t.prototype.resetPalettes=function(e){var r=this,n,o,a=this.chartController.getPalettes(),s=(o=(n=this.gridOptionsWrapper.getChartToolPanelsDef())===null||n===void 0?void 0:n.settingsPanel)===null||o===void 0?void 0:o.chartGroupsDef;_.shallowCompare(a,this.palettes)&&!e||this.isAnimating||(this.palettes=a,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(function(l){return l===r.chartController.getChartThemeName()}),this.cardItems=[],_.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach(function(l,u){var c=r.activePaletteIndex===u,f=l.fills,d=l.strokes,h=r.createBean(new MiniChartsContainer(r.chartController,f,d,s));r.miniCharts.push(h),r.eMiniChartsContainer.appendChild(h.getGui()),r.addCardLink(u),c?h.updateSelectedMiniChart():h.addCssClass("ag-hidden")}),this.eNavBar.classList.toggle("ag-hidden",this.palettes.length<=1),_.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},t.prototype.addCardLink=function(e){var r=this,n=document.createElement("div");n.classList.add("ag-chart-settings-card-item"),this.addManagedListener(n,"click",function(){r.setActivePalette(e,e<r.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(n),this.cardItems.push(n)},t.prototype.getPrev=function(){var e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e},t.prototype.getNext=function(){var e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e},t.prototype.setActivePalette=function(e,r){var n=this;if(!(this.isAnimating||this.activePaletteIndex===e)){_.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var o=this.miniCharts[this.activePaletteIndex],a=o.getGui(),s=this.miniCharts[e],l=s.getGui();o.updateSelectedMiniChart(),s.updateSelectedMiniChart();var u=r==="left"?-1:1,c=l.style.left=_.getAbsoluteWidth(this.getGui())*u+"px";this.activePaletteIndex=e,this.isAnimating=!0;var f="ag-animating";s.removeCssClass("ag-hidden"),o.addCssClass(f),s.addCssClass(f),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(function(){a.style.left=-parseFloat(c)+"px",l.style.left="0px"},0),window.setTimeout(function(){n.isAnimating=!1,o.removeCssClass(f),s.removeCssClass(f),o.addCssClass("ag-hidden")},300)}},t.prototype.destroyMiniCharts=function(){_.clearElement(this.eMiniChartsContainer),this.miniCharts=this.destroyBeans(this.miniCharts)},t.prototype.destroy=function(){this.destroyMiniCharts(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-chart-settings-wrapper">
            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
            <div ref="eNavBar" class="ag-chart-settings-nav-bar">
                <div ref="ePrevBtn" class="ag-chart-settings-prev">
                    <button type="button" class="ag-chart-settings-prev-button"></button>
                </div>
                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
                <div ref="eNextBtn" class="ag-chart-settings-next">
                    <button type="button" class="ag-chart-settings-next-button"></button>
                </div>
            </div>
        </div>`,__decorate$N([Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0),__decorate$N([RefSelector("eMiniChartsContainer")],t.prototype,"eMiniChartsContainer",void 0),__decorate$N([RefSelector("eNavBar")],t.prototype,"eNavBar",void 0),__decorate$N([RefSelector("eCardSelector")],t.prototype,"eCardSelector",void 0),__decorate$N([RefSelector("ePrevBtn")],t.prototype,"ePrevBtn",void 0),__decorate$N([RefSelector("eNextBtn")],t.prototype,"eNextBtn",void 0),__decorate$N([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$1c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$M=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TabbedChartMenu=function(i){__extends$1c(t,i);function t(e){var r=i.call(this)||this;r.tabs=[];var n=e.controller,o=e.panels,a=e.chartOptionsService;return r.chartController=n,r.chartOptionsService=a,r.panels=o,r}return t.prototype.init=function(){var e=this;this.panels.forEach(function(r){var n=r.replace("chart","").toLowerCase(),o=e.createTab(r,n,e.getPanelClass(n)),a=o.comp,s=o.tab;e.tabs.push(s),e.addDestroyFunc(function(){return e.destroyBean(a)})}),this.tabbedLayout=new TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},t.prototype.createTab=function(e,r,n){var o=document.createElement("div");o.classList.add("ag-chart-tab","ag-chart-"+r);var a=new n(this.chartController,this.chartOptionsService);this.getContext().createBean(a),o.appendChild(a.getGui());var s=document.createElement("div"),l=this.chartTranslationService.translate(r);return s.innerText=l,{comp:a,tab:{title:s,titleLabel:l,bodyPromise:AgPromise.resolve(o),getScrollableContainer:function(){var u=o.querySelector(".ag-scrollable-container");return u||o},name:e}}},t.prototype.showTab=function(e){var r=this.tabs[e];this.tabbedLayout.showItem(r)},t.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},t.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),i.prototype.destroy.call(this)},t.prototype.getPanelClass=function(e){switch(e){case t.TAB_DATA:return ChartDataPanel;case t.TAB_FORMAT:return FormatPanel;default:return ChartSettingsPanel}},t.TAB_DATA="data",t.TAB_FORMAT="format",__decorate$M([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$M([PostConstruct],t.prototype,"init",null),t}(Component),__extends$1b=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$L=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$b=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$4=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$b(arguments[t]));return i},ChartMenu=function(i){__extends$1b(t,i);function t(e,r,n,o){var a=i.call(this,t.TEMPLATE)||this;return a.eChartContainer=e,a.eMenuPanelContainer=r,a.chartController=n,a.chartOptionsService=o,a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(s){return a.toggleDetached(s)}],chartUnlink:["unlinked",function(s){return a.toggleDetached(s)}],chartDownload:["save",function(){return a.saveChart()}]},a.panels=[],a.menuVisible=!1,a}return t.prototype.postConstruct=function(){var e=this;this.createButtons(),this.addManagedListener(this.eventService,Events.EVENT_CHART_CREATED,function(r){var n;if(r.chartId===e.chartController.getChartId()){var o=Boolean((n=e.gridOptionsWrapper.getChartToolPanelsDef())===null||n===void 0?void 0:n.defaultToolPanel);o&&e.showMenu(e.defaultPanel,!1)}}),this.refreshMenuClasses(),this.gridOptionsWrapper.isEnableChartToolPanelsButton()&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this)))},t.prototype.isVisible=function(){return this.menuVisible},t.prototype.getToolbarOptions=function(){var e=this,r,n,o,a=Boolean(this.gridOptionsWrapper.getChartToolPanelsDef());if(a){var s=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],l=this.gridOptionsWrapper.getChartToolbarItemsFunc(),u={defaultItems:s},c=l?l(u).filter(function(g){if(!CHART_TOOLBAR_ALLOW_LIST.includes(g)){var v=CHART_TOOL_PANEL_ALLOW_LIST.includes(g)?"AG Grid: '"+g+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+g+"' is not a valid Chart Toolbar Option";return console.warn(v),!1}return!0}):s,f=(n=(r=this.gridOptionsWrapper.getChartToolPanelsDef())===null||r===void 0?void 0:r.panels)===null||n===void 0?void 0:n.map(function(g){var v=CHART_TOOL_PANEL_MENU_OPTIONS[g];return v||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+g+"'"),v}).filter(function(g){return Boolean(g)});this.panels=f||Object.values(CHART_TOOL_PANEL_MENU_OPTIONS),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(function(g){return g!=="chartData"}));var d=(o=this.gridOptionsWrapper.getChartToolPanelsDef())===null||o===void 0?void 0:o.defaultToolPanel;return this.defaultPanel=d&&CHART_TOOL_PANEL_MENU_OPTIONS[d]||this.panels[0],this.panels.length>0?__spread$4([this.panels[0]],c):c}else{var h=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],l=this.gridOptionsWrapper.getChartToolbarItemsFunc();if(l){var u={defaultItems:h};h=l(u).filter(function(m){return e.buttons[m]?!0:(console.warn("AG Grid: '"+m+"' is not a valid Chart Toolbar Option"),!1)})}this.chartController.isPivotChart()&&(h=h.filter(function(v){return v!=="chartData"}));var p=["chartUnlink","chartLink","chartDownload"];return this.panels=h.filter(function(v){return p.indexOf(v)===-1}),this.defaultPanel=this.panels[0],h.filter(function(v){return p.indexOf(v)!==-1||e.panels.length&&v===e.panels[0]})}},t.prototype.toggleDetached=function(e){var r=e.target,n=r.classList.contains("ag-icon-linked");r.classList.toggle("ag-icon-linked",!n),r.classList.toggle("ag-icon-unlinked",n);var o=n?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",a=this.chartTranslationService.translate(o);a&&(r.title=a),this.chartController.detachChartRange()},t.prototype.createButtons=function(){var e=this,r=this.getToolbarOptions(),n=this.eMenu;r.forEach(function(o){var a=e.buttons[o],s=__read$b(a,2),l=s[0],u=s[1],c=_.createIconNoSpan(l,e.gridOptionsWrapper,void 0,!0);c.classList.add("ag-chart-menu-icon");var f=e.chartTranslationService.translate(o+"ToolbarTooltip");f&&(c.title=f),e.addManagedListener(c,"click",u),n.appendChild(c)})},t.prototype.saveChart=function(){var e={type:t.EVENT_DOWNLOAD_CHART};this.dispatchEvent(e)},t.prototype.createMenuPanel=function(e){var r=this,n=this.gridOptionsWrapper.chartMenuPanelWidth(),o=this.menuPanel=this.createBean(new AgPanel({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return o.setParentComponent(this),this.eMenuPanelContainer.appendChild(o.getGui()),this.tabbedMenu=this.createBean(new TabbedChartMenu({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(o,Component.EVENT_DESTROYED,function(){return r.destroyBean(r.tabbedMenu)}),new AgPromise(function(a){window.setTimeout(function(){o.setBodyComponent(r.tabbedMenu),r.tabbedMenu.showTab(e),r.addManagedListener(r.eChartContainer,"click",function(s){r.getGui().contains(s.target)||r.menuVisible&&r.hideMenu()}),a(o)},100)})},t.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},t.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},t.prototype.showMenu=function(e,r){var n=this;r===void 0&&(r=!0),r||this.eMenuPanelContainer.classList.add("ag-no-transition");var o=e||this.defaultPanel,a=this.panels.indexOf(o);a<0&&(console.warn("AG Grid: '"+e+"' is not a valid Chart Tool Panel name"),a=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(a),this.showContainer()):this.createMenuPanel(a).then(this.showContainer.bind(this)),r||setTimeout(function(){n.isAlive()&&n.eMenuPanelContainer.classList.remove("ag-no-transition")},500)},t.prototype.hideMenu=function(){var e=this;this.hideParent(),window.setTimeout(function(){e.menuVisible=!1,e.refreshMenuClasses()},500)},t.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsWrapper.isEnableChartToolPanelsButton()&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},t.prototype.showParent=function(e){this.eMenuPanelContainer.style.minWidth=e+"px"},t.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel)},t.EVENT_DOWNLOAD_CHART="downloadChart",t.TEMPLATE=`<div>
        <div class="ag-chart-menu" ref="eMenu"></div>
        <button class="ag-chart-menu-close" ref="eHideButton">
            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>
        </button>
    </div>`,__decorate$L([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$L([RefSelector("eMenu")],t.prototype,"eMenu",void 0),__decorate$L([RefSelector("eHideButton")],t.prototype,"eHideButton",void 0),__decorate$L([RefSelector("eHideButtonIcon")],t.prototype,"eHideButtonIcon",void 0),__decorate$L([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$1a=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$j=function(){return __assign$j=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$j.apply(this,arguments)},__decorate$K=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TitleEdit=function(i){__extends$1a(t,i);function t(e){var r=i.call(this,t.TEMPLATE)||this;return r.chartMenu=e,r}return t.prototype.init=function(){var e=this;this.addManagedListener(this.getGui(),"keypress",function(r){r.key==="Enter"&&e.endEditing()}),this.addManagedListener(this.getGui(),"blur",this.endEditing.bind(this))},t.prototype.refreshTitle=function(e,r){var n=this;this.chartController=e,this.chartOptionsService=r;var o=this.chartController.getChartProxy();if(o){for(var a=0;a++;a<this.destroyableChartListeners.length)this.destroyableChartListeners[a]();this.destroyableChartListeners=[]}var s=o.getChart(),l=s.scene.canvas.element,u=this.addManagedListener(l,"dblclick",function(d){var h=s.title;if(h&&h.node.containsPoint(d.offsetX,d.offsetY)){var p=h.node.computeBBox(),g=h.node.inverseTransformPoint(p.x,p.y);n.startEditing(__assign$j(__assign$j({},p),g))}}),c=!1,f=this.addManagedListener(l,"mousemove",function(d){var h=s.title,p=!!(h&&h.enabled&&h.node.containsPoint(d.offsetX,d.offsetY));c!==p&&(l.style.cursor=p?"pointer":""),c=p});this.destroyableChartListeners=[u,f]},t.prototype.startEditing=function(e){if(!(this.chartMenu&&this.chartMenu.isVisible())){var r=300,n=this.chartController.getChartProxy().getChart().width,o=Math.max(Math.min(e.width+20,n),r),a=this.getGui();a.classList.add("currently-editing");var s=a.style;s.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),s.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),s.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),s.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",s.color=this.chartOptionsService.getChartOption("title.color");var l=this.chartOptionsService.getChartOption("title.text"),u=l===this.chartTranslationService.translate("titlePlaceholder");a.value=u?"":l;var c=a.getBoundingClientRect();s.left=Math.round(e.x+e.width/2-o/2)+"px",s.top=Math.round(e.y+e.height/2-c.height/2)+"px",s.width=Math.round(o)+"px",a.focus()}},t.prototype.endEditing=function(){var e=this.getGui().value;this.chartOptionsService.setChartOption("title.text",e),this.eventService.dispatchEvent({type:"chartTitleEdit"}),this.getGui().classList.remove("currently-editing")},t.TEMPLATE=`<input
            class="ag-chart-title-edit"
            style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center;" />
        `,__decorate$K([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$K([PostConstruct],t.prototype,"init",null),t}(Component);function emptyTarget(i){return Array.isArray(i)?[]:{}}function cloneUnlessOtherwiseSpecified(i,t){return t.clone!==!1&&t.isMergeableObject(i)?deepMerge(emptyTarget(i),i,t):i}function defaultArrayMerge(i,t,e){return i.concat(t).map(function(r){return cloneUnlessOtherwiseSpecified(r,e)})}function getMergeFunction(i,t){if(!t.customMerge)return deepMerge;var e=t.customMerge(i);return typeof e=="function"?e:deepMerge}function getEnumerableOwnPropertySymbols(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(t){return i.propertyIsEnumerable(t)}):[]}function getKeys(i){return Object.keys(i).concat(getEnumerableOwnPropertySymbols(i))}function propertyIsOnObject(i,t){try{return t in i}catch{return!1}}function propertyIsUnsafe(i,t){return propertyIsOnObject(i,t)&&!(Object.hasOwnProperty.call(i,t)&&Object.propertyIsEnumerable.call(i,t))}function mergeObject(i,t,e){var r={};return e.isMergeableObject(i)&&getKeys(i).forEach(function(n){r[n]=cloneUnlessOtherwiseSpecified(i[n],e)}),getKeys(t).forEach(function(n){propertyIsUnsafe(i,n)||(propertyIsOnObject(i,n)&&e.isMergeableObject(t[n])?r[n]=getMergeFunction(n,e)(i[n],t[n],e):r[n]=cloneUnlessOtherwiseSpecified(t[n],e))}),r}function defaultIsMergeableObject(i){return isNonNullObject(i)&&!isSpecial(i)}function isNonNullObject(i){return!!i&&typeof i=="object"}function isSpecial(i){var t=Object.prototype.toString.call(i);return t==="[object RegExp]"||t==="[object Date]"}function deepMerge(i,t,e){e=e||{},e.arrayMerge=e.arrayMerge||defaultArrayMerge,e.isMergeableObject=e.isMergeableObject||defaultIsMergeableObject,e.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var r=Array.isArray(t),n=Array.isArray(i),o=r===n;return o?r?e.arrayMerge(i,t,e):mergeObject(i,t,e):cloneUnlessOtherwiseSpecified(t,e)}var __assign$i=function(){return __assign$i=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$i.apply(this,arguments)},ChartProxy=function(){function i(t){if(this.chartProxyParams=t,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=getSeriesType(this.chartType),this.chartProxyParams.chartOptionsToRestore){this.chartOptions=this.chartProxyParams.chartOptionsToRestore,this.chartPalette=this.chartProxyParams.chartPaletteToRestore;var e={overrides:this.chartOptions,palette:this.chartPalette};this.chartTheme=getIntegratedChartTheme(__assign$i({baseTheme:this.getSelectedTheme()},e));return}this.chartTheme=this.createChartTheme(),this.chartOptions=this.convertConfigToOverrides(this.chartTheme.config),this.chartPalette=this.chartTheme.palette}return i.prototype.recreateChart=function(){var t=this;if(this.chart&&this.destroyChart(),this.chart=this.createChart(),this.crossFiltering){var e=!0;this.chart.addEventListener("click",function(r){return t.crossFilterCallback(r,e)})}},i.prototype.getChart=function(){return this.chart},i.prototype.createChartTheme=function(){var t=this,e=this.getSelectedTheme(),r=this.isStockTheme(e),n=this.chartProxyParams.getGridOptionsChartThemeOverrides(),o=this.chartProxyParams.apiChartThemeOverrides;if(n||o){var a={overrides:i.mergeThemeOverrides(n,o)},s=function(){return deepMerge(t.lookupCustomChartTheme(e),a)};return getIntegratedChartTheme(r?__assign$i({baseTheme:e},a):s())}return getIntegratedChartTheme(r?e:this.lookupCustomChartTheme(e))},i.prototype.isStockTheme=function(t){return _.includes(Object.keys(themes),t)},i.prototype.getSelectedTheme=function(){var t=this.chartProxyParams.getChartThemeName(),e=this.chartProxyParams.getChartThemes();return _.includes(e,t)||(t=e[0]),t},i.prototype.lookupCustomChartTheme=function(t){var e=this.chartProxyParams.customChartThemes,r=e&&e[t];return r||console.warn("AG Grid: no stock theme exists with the name '"+t+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),r},i.mergeThemeOverrides=function(t,e){return t?e?deepMerge(t,e):t:e},i.prototype.downloadChart=function(t,e,r){var n=this.chart,o=e||(n.title?n.title.text:"chart"),a=t||{},s=a.width,l=a.height;AgChart.download(n,{width:s,height:l,fileName:o,fileFormat:r})},i.prototype.getChartImageDataURL=function(t){return this.chart.scene.getDataURL(t)},i.prototype.getChartOptions=function(){return this.chartOptions},i.prototype.getChartPalette=function(){return this.chartPalette},i.prototype.transformData=function(t,e,r){return r?t.map(function(n,o){var a=n[e],s=a&&a.toString?a.toString():"",l=__assign$i({},n);return l[e]={id:o,value:a,toString:function(){return s}},l}):t},i.prototype.getCommonChartOptions=function(){var t=this,e=function(r){return _.get(t.chartOptions,t.standaloneChartType+"."+r,void 0)};return{padding:e("padding"),background:e("background"),title:e("title"),subtitle:e("subtitle"),tooltip:e("tooltip"),legend:e("legend"),navigator:e("navigator")}},i.prototype.convertConfigToOverrides=function(t){var e=["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType),r=e?["line","area","column","cartesian"]:[this.standaloneChartType],n={};return r.forEach(function(o){var a=deepMerge({},t[o]);a.series=a.series[o],o==="scatter"&&(a.paired=!0),n[o]=a}),n},i.prototype.destroy=function(){this.destroyChart()},i.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},i}(),__extends$19=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$h=function(){return __assign$h=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$h.apply(this,arguments)},CartesianChartProxy=function(i){__extends$19(t,i);function t(e){var r=i.call(this,e)||this;return r.supportsAxesUpdates=!0,r.axisTypeToClassMap={number:NumberAxis,category:CategoryAxis,groupedCategory:GroupedCategoryAxis,time:TimeAxis},r.crossFilteringAllPoints=new Set,r.crossFilteringSelectedPoints=[],r}return t.prototype.createChart=function(){return AgChart.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme})},t.prototype.update=function(e){this.supportsAxesUpdates&&this.updateAxes(e);var r=__assign$h(__assign$h({},this.getCommonChartOptions()),{data:this.getData(e),axes:this.getAxes(e),series:this.getSeries(e)});this.crossFiltering&&(r=this.addCrossFilterOptions(r)),AgChart.update(this.chart,r)},t.prototype.getDataTransformedData=function(e){var r=this.xAxisType==="category";return this.transformData(e.data,e.category.id,r)},t.prototype.addCrossFilterOptions=function(e){var r=this,n=this.extractSeriesOverrides();return e.tooltip=__assign$h(__assign$h({},e.tooltip),{delay:500}),e.legend=__assign$h(__assign$h(__assign$h({},e.legend),n.legend),{listeners:{legendItemClick:function(o){r.chart.series.forEach(function(a){a.toggleSeriesItem(o.itemId,o.enabled),a.toggleSeriesItem(o.itemId+"-filtered-out",o.enabled)})}}}),e},t.prototype.extractSeriesOverrides=function(e){var r=this.chartOptions[e||this.standaloneChartType].series;return delete r.yKeys,delete r.yNames,r},t.prototype.updateAxes=function(e){if(e.grouping){this.axisTypeToClassMap[this.xAxisType]!==GroupedCategoryAxis&&(this.xAxisType="groupedCategory",this.recreateChart());return}var r=t.isTimeAxis(e)?"time":"category";r!==this.xAxisType&&(this.xAxisType=r,this.recreateChart())},t.prototype.getAxesOptions=function(e){return e===void 0&&(e=this.standaloneChartType),this.chartOptions[e].axes},t.isTimeAxis=function(e){if(e.category&&e.category.chartDataType)return e.category.chartDataType==="time";var r=e.data[0];return(r&&r[e.category.id])instanceof Date},t.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},t.prototype.crossFilteringPointSelected=function(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)},t.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},t.prototype.extractLineAreaCrossFilterSeries=function(e,r){var n=this,o=function(a){if(n.standaloneChartType==="area"){var s=r.getCrossFilteringContext().lastSelectedChartId;return s===r.chartId?a+"-total":a}return a+"-total"};return e.map(function(a){var s=n.extractSeriesOverrides();return a.yKey=o(a.yKey),a.listeners=__assign$h(__assign$h({},s.listeners),{nodeClick:function(l){var u=l.datum[a.xKey],c=l.event.metaKey||l.event.ctrlKey;n.crossFilteringAddSelectedPoint(c,u),n.crossFilterCallback(l)}}),a.marker={formatter:function(l){var u=l.datum[r.category.id];return{fill:l.highlighted?"yellow":l.fill,size:l.highlighted?14:n.crossFilteringPointSelected(u)?8:0}}},n.standaloneChartType==="area"&&(a.fillOpacity=n.crossFilteringDeselectedPoints()?.3:1),n.standaloneChartType==="line"&&(a.strokeOpacity=n.crossFilteringDeselectedPoints()?.3:1),a})},t.prototype.getLineAreaCrossFilterData=function(e){var r=this;this.crossFilteringAllPoints.clear();var n=e.fields[0].colId,o=n+"-filtered-out",a=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(function(s){var l=s[e.category.id];r.crossFilteringAllPoints.add(l);var u=r.crossFilteringPointSelected(l);return r.standaloneChartType==="area"&&a===e.chartId&&(s[n+"-total"]=u?s[n]:s[n]+s[o]),r.standaloneChartType==="line"&&(s[n+"-total"]=u?s[n]:s[n]+s[o]),s})},t.prototype.crossFilteringAddSelectedPoint=function(e,r){e?this.crossFilteringSelectedPoints.push(r):this.crossFilteringSelectedPoints=[r]},t}(ChartProxy);function hexToRGBA(i,t){var e=parseInt(i.slice(1,3),16),r=parseInt(i.slice(3,5),16),n=parseInt(i.slice(5,7),16);return t?"rgba("+e+", "+r+", "+n+", "+t+")":"rgba("+e+", "+r+", "+n+")"}function changeOpacity(i,t){return i.map(function(e){var r=Color$2.fromString(e);return new Color$2(r.r,r.g,r.b,t).toHexString()})}var __extends$18=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$g=function(){return __assign$g=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$g.apply(this,arguments)},BarChartProxy=function(i){__extends$18(t,i);function t(e){var r=i.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.getDataTransformedData(e)},t.prototype.getAxes=function(){var e=this.standaloneChartType==="bar",r=this.getAxesOptions(),n=[__assign$g(__assign$g({},deepMerge(r[this.xAxisType],r[this.xAxisType].bottom)),{type:this.xAxisType,position:e?ChartAxisPosition.Left:ChartAxisPosition.Bottom}),__assign$g(__assign$g({},deepMerge(r[this.yAxisType],r[this.yAxisType].left)),{type:this.yAxisType,position:e?ChartAxisPosition.Bottom:ChartAxisPosition.Left})];if(this.isNormalised()){var o=n[1];o.label=__assign$g(__assign$g({},o.label),{formatter:function(a){return Math.round(a.value)+"%"}})}return n},t.prototype.getSeries=function(e){var r=this,n=["groupedColumn","groupedBar"],o=!this.crossFiltering&&_.includes(n,this.chartType),a=e.fields.map(function(s){return __assign$g(__assign$g({},r.extractSeriesOverrides()),{type:r.standaloneChartType,grouped:o,normalizedTo:r.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:s.colId,yName:s.displayName})});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.extractCrossFilterSeries=function(e){for(var r=this,n=this.chartTheme.palette,o=function(c,f){return __assign$g(__assign$g({},c),{highlightStyle:{item:{fill:void 0}},fill:n.fills[f],stroke:n.strokes[f],listeners:__assign$g(__assign$g({},r.extractSeriesOverrides().listeners),{nodeClick:r.crossFilterCallback})})},a=function(c){var f=c.yKey+"-filtered-out";return __assign$g(__assign$g({},deepMerge({},c)),{yKey:f,fill:hexToRGBA(c.fill,"0.3"),stroke:hexToRGBA(c.stroke,"0.3"),hideInLegend:[f]})},s=[],l=0;l<e.length;l++){var u=o(e[l],l);s.push(u),s.push(a(u))}return s},t.prototype.isNormalised=function(){var e=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&_.includes(e,this.chartType)},t}(CartesianChartProxy),__extends$17=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$f=function(){return __assign$f=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$f.apply(this,arguments)},AreaChartProxy=function(i){__extends$17(t,i);function t(e){var r=i.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.crossFiltering?this.getLineAreaCrossFilterData(e):this.getDataTransformedData(e)},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[__assign$f(__assign$f({},deepMerge(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$f(__assign$f({},deepMerge(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(o){return __assign$f(__assign$f({},r.extractSeriesOverrides()),{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:o.colId,yName:o.displayName,normalizedTo:r.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(r.chartType)})});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t}(CartesianChartProxy),__extends$16=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$e=function(){return __assign$e=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$e.apply(this,arguments)},LineChartProxy=function(i){__extends$16(t,i);function t(e){var r=i.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.crossFiltering?this.getLineAreaCrossFilterData(e):this.getDataTransformedData(e)},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[__assign$e(__assign$e({},deepMerge(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$e(__assign$e({},deepMerge(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(o){return __assign$e(__assign$e({},r.extractSeriesOverrides()),{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:o.colId,yName:o.displayName})});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t}(CartesianChartProxy),__extends$15=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$d=function(){return __assign$d=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$d.apply(this,arguments)},PieChartProxy=function(i){__extends$15(t,i);function t(e){var r=i.call(this,e)||this;return r.recreateChart(),r}return t.prototype.createChart=function(){return AgChart.create({type:"pie",container:this.chartProxyParams.parentElement,theme:this.chartTheme})},t.prototype.update=function(e){var r=e.data,n=e.category,o=__assign$d(__assign$d({},this.getCommonChartOptions()),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(r,n.id),series:this.getSeries(e)});this.crossFiltering&&(o=this.getCrossFilterChartOptions(o)),AgChart.update(this.chart,o)},t.prototype.getSeries=function(e){var r=this,n=e.fields.length,o={currentOffset:0,offsetAmount:n>1?20:40},a=this.getFields(e).map(function(s){var l=r.extractSeriesOverrides(),u=__assign$d(__assign$d({},l),{type:r.standaloneChartType,angleKey:s.colId,angleName:s.displayName,calloutLabelKey:e.category.id,calloutLabelName:e.category.name});if(r.chartType==="doughnut"){var c=t.calculateOffsets(o),f=c.outerRadiusOffset,d=c.innerRadiusOffset;return __assign$d(__assign$d({},u),{outerRadiusOffset:f,innerRadiusOffset:d,title:__assign$d(__assign$d({},l.title),{text:l.title.text||s.displayName,showInLegend:n>1}),calloutLine:__assign$d(__assign$d({},l.calloutLine),{colors:r.chartTheme.palette.strokes})})}return u});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.getCrossFilterChartOptions=function(e){var r=this,n=this.extractSeriesOverrides();return __assign$d(__assign$d({},e),{tooltip:__assign$d(__assign$d({},n.tooltip),{delay:500}),legend:__assign$d(__assign$d({},n.legend),{listeners:{legendItemClick:function(o){r.chart.series.forEach(function(a){return a.toggleSeriesItem(o.itemId,o.enabled)})}}})})},t.prototype.getCrossFilterData=function(e){var r=e.fields[0].colId,n=r+"-filtered-out";return e.data.map(function(o){var a=o[r]+o[n];return o[r+"-total"]=a,o[n]=1,o[r]=o[r]/a,o})},t.prototype.extractCrossFilterSeries=function(e){var r=this,n=this.chartTheme.palette,o=this.extractSeriesOverrides(),a=function(f){return __assign$d(__assign$d({},f),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:f.angleKey,angleKey:f.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:__assign$d(__assign$d({},o.listeners),{nodeClick:r.crossFilterCallback}),tooltip:__assign$d(__assign$d({},o.tooltip),{renderer:r.getCrossFilterTooltipRenderer(""+f.angleName)})})},s=function(f,d){var h,p,g;return __assign$d(__assign$d({},deepMerge({},c)),{radiusKey:d+"-filtered-out",calloutLabel:o.calloutLabel,calloutLine:o.calloutLine&&__assign$d(__assign$d({},o.calloutLine),{colors:(h=o.calloutLine.colors,h??n.strokes)}),fills:changeOpacity((p=f.fills,p??n.fills),.3),strokes:changeOpacity((g=f.strokes,g??n.strokes),.3),showInLegend:!1})},l=e[0],u=l.angleKey,c=a(l);return[s(l,u),c]},t.calculateOffsets=function(e){var r=e.currentOffset;e.currentOffset-=e.offsetAmount;var n=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:r,innerRadiusOffset:n}},t.prototype.getFields=function(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields},t.prototype.getCrossFilterTooltipRenderer=function(e){return function(r){var n=r.datum[r.calloutLabelKey],o=r.datum[r.radiusKey],a=r.angleValue;return{title:e,content:n+": "+a*o}}},t.prototype.extractSeriesOverrides=function(){return this.chartOptions[this.standaloneChartType].series},t.prototype.crossFilteringReset=function(){},t}(ChartProxy),__extends$14=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$c=function(){return __assign$c=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$c.apply(this,arguments)},__values$4=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$a=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$3=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$a(arguments[t]));return i},ScatterChartProxy=function(i){__extends$14(t,i);function t(e){var r=i.call(this,e)||this;return r.supportsAxesUpdates=!1,r.xAxisType="number",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.getDataTransformedData(e)},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[__assign$c(__assign$c({},deepMerge(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$c(__assign$c({},deepMerge(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},t.prototype.getSeries=function(e){var r=this,n=this.chartOptions[this.standaloneChartType].paired,o=this.getSeriesDefinitions(e.fields,n),a=e.category.id===ChartDataModel.DEFAULT_CATEGORY?void 0:e.category,s=o.map(function(l){return __assign$c(__assign$c({},r.extractSeriesOverrides()),{type:r.standaloneChartType,xKey:l.xField.colId,xName:l.xField.displayName,yKey:l.yField.colId,yName:l.yField.displayName,title:l.yField.displayName+" vs "+l.xField.displayName,sizeKey:l.sizeField?l.sizeField.colId:void 0,sizeName:l.sizeField?l.sizeField.displayName:void 0,labelKey:a?a.id:l.yField.colId,labelName:a?a.name:void 0})});return this.crossFiltering?this.extractCrossFilterSeries(s,e):s},t.prototype.extractCrossFilterSeries=function(e,r){var n=this,o=r.data,a=this.chartTheme.palette,s=function(d){return d+"-filtered-out"},l=function(d,h){var p,g,v,m=[1/0,-1/0];if(h!=null)try{for(var y=__values$4(d),b=y.next();!b.done;b=y.next()){var C=b.value,x=(v=C[h],v??C[s(h)]);x<m[0]&&(m[0]=x),x>m[1]&&(m[1]=x)}}catch(w){p={error:w}}finally{try{b&&!b.done&&(g=y.return)&&g.call(y)}finally{if(p)throw p.error}}if(m[0]<=m[1])return m},u=function(d,h){var p=d.sizeKey,g=a.fills[h],v=a.strokes[h],m=l(o,p),y=__assign$c(__assign$c({},d.marker),{fill:g,stroke:v,domain:m});return __assign$c(__assign$c({},d),{marker:y,highlightStyle:{item:{fill:"yellow"}},listeners:__assign$c(__assign$c({},d.listeners),{nodeClick:n.crossFilterCallback})})},c=function(d){var h=d.sizeKey,p=d.yKey,g=d.xKey;return h!=null&&(h=s(h)),__assign$c(__assign$c({},d),{yKey:s(p),xKey:s(g),marker:__assign$c(__assign$c({},d.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:h,showInLegend:!1,listeners:__assign$c(__assign$c({},d.listeners),{nodeClick:function(v){var m,y=v.datum[s(g)],b=__assign$c(__assign$c({},v),{xKey:g,datum:__assign$c(__assign$c({},v.datum),(m={},m[g]=y,m))});n.crossFilterCallback(b)}})})},f=e.map(u);return __spread$3(f,f.map(c))},t.prototype.getSeriesDefinitions=function(e,r){if(e.length<2)return[];var n=this.chartType==="bubble";if(r)return n?e.map(function(a,s){return s%3===0?{xField:a,yField:e[s+1],sizeField:e[s+2]}:null}).filter(function(a){return a&&a.yField&&a.sizeField}):e.map(function(a,s){return s%2===0?{xField:a,yField:e[s+1]}:null}).filter(function(a){return a&&a.yField});var o=e[0];return n?e.map(function(a,s){return s%2===1?{xField:o,yField:a,sizeField:e[s+1]}:null}).filter(function(a){return a&&a.sizeField}):e.filter(function(a,s){return s>0}).map(function(a){return{xField:o,yField:a}})},t}(CartesianChartProxy),__extends$13=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$b=function(){return __assign$b=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$b.apply(this,arguments)},HistogramChartProxy=function(i){__extends$13(t,i);function t(e){var r=i.call(this,e)||this;return r.supportsAxesUpdates=!1,r.xAxisType="number",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.getDataTransformedData(e)},t.prototype.getSeries=function(e){var r=e.fields[0];return[__assign$b(__assign$b({},this.extractSeriesOverrides()),{type:this.standaloneChartType,xKey:r.colId,xName:r.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1})]},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[__assign$b(__assign$b({},deepMerge(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:ChartAxisPosition.Bottom}),__assign$b(__assign$b({},deepMerge(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:ChartAxisPosition.Left})]},t}(CartesianChartProxy),__extends$12=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$J=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartOptionsService=function(i){__extends$12(t,i);function t(e){var r=i.call(this)||this;return r.chartController=e,r}return t.prototype.getChartOption=function(e){return _.get(this.getChart(),e,void 0)},t.prototype.setChartOption=function(e,r){var n=this,o=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&o.push("cartesian"),o.forEach(function(a){var s=_.get(n.getChartOptions(),""+a,void 0);_.set(s,e,r)}),this.updateChart(),this.raiseChartOptionsChangedEvent()},t.prototype.getAxisProperty=function(e){return _.get(this.getChart().axes[0],e,void 0)},t.prototype.setAxisProperty=function(e,r){var n=this,o=this.getChart();o.axes.forEach(function(a){n.updateAxisOptions(a,e,r)}),this.updateChart(),this.raiseChartOptionsChangedEvent()},t.prototype.getLabelRotation=function(e){var r=this.getAxis(e);return _.get(r,"label.rotation",void 0)},t.prototype.setLabelRotation=function(e,r){var n=this.getAxis(e);n&&(this.updateAxisOptions(n,"label.rotation",r),this.updateChart(),this.raiseChartOptionsChangedEvent())},t.prototype.getSeriesOption=function(e,r){var n=this.getChart().series.find(function(o){return t.isMatchingSeries(r,o)});return _.get(n,e,void 0)},t.prototype.setSeriesOption=function(e,r,n){var o=this.getChartOptions();o[n]||(o[n]={}),_.set(o[n].series,e,r),this.updateChart(),this.raiseChartOptionsChangedEvent()},t.prototype.getPairedMode=function(){var e=getSeriesType(this.getChartType());return _.get(this.getChartOptions(),e+".paired",void 0)},t.prototype.setPairedMode=function(e){var r=getSeriesType(this.getChartType()),n=_.get(this.getChartOptions(),""+r,void 0);_.set(n,"paired",e)},t.prototype.getAxis=function(e){var r=this.getChart();if(!(!r.axes||r.axes.length<1))return e==="xAxis"?r.axes&&r.axes[0].direction==="x"?r.axes[0]:r.axes[1]:r.axes&&r.axes[1].direction==="y"?r.axes[1]:r.axes[0]},t.prototype.updateAxisOptions=function(e,r,n){var o=getSeriesType(this.getChartType()),a=this.getChartOptions()[o].axes;e instanceof NumberAxis?_.set(a.number,r,n):e instanceof CategoryAxis?_.set(a.category,r,n):e instanceof TimeAxis?_.set(a.time,r,n):e instanceof GroupedCategoryAxis&&_.set(a.groupedCategory,r,n)},t.prototype.getChartType=function(){return this.chartController.getChartType()},t.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},t.prototype.getChartOptions=function(){return this.chartController.getChartProxy().getChartOptions()},t.prototype.updateChart=function(){var e=this.chartController.getChartUpdateParams();this.chartController.getChartProxy().update(e)},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel(),r=Object.freeze({type:Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:e.chartThemeName,chartOptions:e.chartOptions});this.eventService.dispatchEvent(r)},t.isMatchingSeries=function(e,r){return e==="area"&&r instanceof AreaSeries||e==="bar"&&r instanceof BarSeries||e==="column"&&r instanceof BarSeries||e==="histogram"&&r instanceof HistogramSeries||e==="line"&&r instanceof LineSeries||e==="pie"&&r instanceof PieSeries?!0:e==="scatter"&&r instanceof ScatterSeries},t.prototype.destroy=function(){i.prototype.destroy.call(this)},__decorate$J([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$J([Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(BeanStub),__extends$11=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$a=function(){return __assign$a=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$a.apply(this,arguments)},ComboChartProxy=function(i){__extends$11(t,i);function t(e){var r=i.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return t.prototype.getData=function(e){return this.getDataTransformedData(e)},t.prototype.getAxes=function(e){var r=this,n,o=e?e.fields:[],a=new Map(o.map(function(g){return[g.colId,g]})),s=this.getYKeys(o,e.seriesChartTypes),l=s.primaryYKeys,u=s.secondaryYKeys,c=this.getAxisOptions(),f=c.bottomOptions,d=c.leftOptions,h=c.rightOptions,p=[__assign$a(__assign$a({},f),{type:this.xAxisType,position:ChartAxisPosition.Bottom,gridStyle:[{stroke:void 0}]})];return l.length>0&&p.push(__assign$a(__assign$a({},d),{type:this.yAxisType,keys:l,position:ChartAxisPosition.Left,title:__assign$a({},deepMerge(d.title,{enabled:(n=d.title)===null||n===void 0?void 0:n.enabled,text:l.map(function(g){var v=a.get(g);return v?v.displayName:g}).join(" / ")}))})),u.length>0&&u.forEach(function(g,v){var m,y=a.get(g),b=y&&y.colId===g;if(b){var C=__assign$a(__assign$a({},h),{type:r.yAxisType,keys:[g],position:ChartAxisPosition.Right,title:__assign$a({},deepMerge(h.title,{enabled:(m=h.title)===null||m===void 0?void 0:m.enabled,text:y?y.displayName:g}))}),x=l.some(function(P){return!!a.get(P)}),w=v===u.length-1;!x&&w||(C.gridStyle=[{stroke:void 0}]),p.push(C)}}),p},t.prototype.getSeries=function(e){var r=this,n=e.fields,o=e.category,a=e.seriesChartTypes;return n.map(function(s){var l=a.find(function(c){return c.colId===s.colId});if(l){var u=l.chartType;return __assign$a(__assign$a({},r.extractSeriesOverrides(getSeriesType(l.chartType))),{type:getSeriesType(u),xKey:o.id,yKey:s.colId,yName:s.displayName,grouped:["groupedColumn","groupedBar","groupedArea"].includes(u),stacked:["stackedArea","stackedColumn"].includes(u)})}})},t.prototype.getAxisOptions=function(){var e=this.getAxesOptions("cartesian");return{bottomOptions:deepMerge(e[this.xAxisType],e[this.xAxisType].bottom),leftOptions:deepMerge(e[this.yAxisType],e[this.yAxisType].left),rightOptions:deepMerge(e[this.yAxisType],e[this.yAxisType].right)}},t.prototype.getYKeys=function(e,r){var n=[],o=[];return e.forEach(function(a){var s=a.colId,l=r.find(function(u){return u.colId===s});l&&(l.secondaryAxis?o.push(s):n.push(s))}),{primaryYKeys:n,secondaryYKeys:o}},t}(CartesianChartProxy),__extends$10=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$I=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},GridChartComp=function(i){__extends$10(t,i);function t(e){var r=i.call(this,t.TEMPLATE)||this;return r.params=e,r}return t.prototype.init=function(){var e=this,r=this.gridOptionsWrapper.getChartThemes();if(r.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var n=this.params.chartThemeName;_.includes(r,n)||(n=r[0]);var o={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:n,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},a=this.gridOptionsWrapper.isEnableRtl();this.addCssClass(a?"ag-rtl":"ag-ltr");var s=this.createBean(new ChartDataModel(o));this.chartController=this.createManagedBean(new ChartController(s)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,ChartMenu.EVENT_DOWNLOAD_CHART,function(){return e.downloadChart()}),this.update(),this.raiseChartCreatedEvent()},t.prototype.validateCustomThemes=function(){var e=this.gridOptionsWrapper.getChartThemes(),r=this.gridOptionsWrapper.getCustomChartThemes();r&&_.getAllKeysInObjects([r]).forEach(function(n){_.includes(e,n)||console.warn("AG Grid: a custom chart theme with the name '"+n+"' has been supplied but not added to the 'chartThemes' list")})},t.prototype.createChart=function(){var e=this;this.chartProxy&&this.chartProxy.destroy();var r=function(s,l){var u=e.params.crossFilteringContext;u.lastSelectedChartId=l?"":e.chartController.getChartId(),l&&e.params.crossFilteringResetCallback(),e.crossFilterService.filter(s,l)},n=this.chartController.getChartType(),o={chartType:n,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsWrapper.getCustomChartThemes(),getGridOptionsChartThemeOverrides:this.getGridOptionsChartThemeOverrides.bind(this),apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:r,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(s,l){return e.chartTranslationService.translate(s,l)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=t.createChartProxy(o),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",o.chartType);return}var a=this.eChart.querySelector("canvas");a&&a.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new ChartOptionsService(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},t.prototype.getChartThemes=function(){return this.chartController.getThemes()},t.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsWrapper.getChartThemeOverrides()},t.createChartProxy=function(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new BarChartProxy(e);case"pie":case"doughnut":return new PieChartProxy(e);case"area":case"stackedArea":case"normalizedArea":return new AreaChartProxy(e);case"line":return new LineChartProxy(e);case"scatter":case"bubble":return new ScatterChartProxy(e);case"histogram":return new HistogramChartProxy(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ComboChartProxy(e);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+e.chartType+"' was supplied."}},t.prototype.addDialog=function(){var e=this,r=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),n=this.getBestDialogSize(),o=n.width,a=n.height;this.chartDialog=new AgDialog({resizable:!0,movable:!0,maximizable:!0,title:r,width:o,height:a,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(AgDialog.EVENT_DESTROYED,function(){return e.destroy()})},t.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent(),r=_.getAbsoluteWidth(e)*.75,n=_.getAbsoluteHeight(e)*.75,o=.553,a=this.chartProxy.getChart(),s=this.params.insideDialog?850:a.width,l=this.params.insideDialog?470:a.height;return(s>r||l>n)&&(s=Math.min(s,r),l=Math.round(s*o),l>n&&(l=n,s=Math.min(s,Math.round(l/o)))),{width:s,height:l}},t.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new ChartMenu(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},t.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new TitleEdit(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.update=function(){this.shouldRecreateChart()&&this.createChart(),this.updateChart()},t.prototype.shouldRecreateChart=function(){return this.chartType!==this.chartController.getChartType()||this.chartThemeName!==this.chartController.getChartThemeName()},t.prototype.getCurrentChartType=function(){return this.chartType},t.prototype.getChartModel=function(){return this.chartController.getChartModel()},t.prototype.getChartImageDataURL=function(e){return this.chartProxy.getChartImageDataURL(e)},t.prototype.updateChart=function(){var e=this,r=this.chartProxy,n=this.chartController.getSelectedValueColState(),o=n.map(function(u){return{colId:u.colId,displayName:u.displayName}}),a=this.chartController.getChartData(),s=this.handleEmptyChart(a,o);if(!s){var l=this.chartController.getChartUpdateParams();r.update(l),this.chartProxy.getChart().waitForUpdate().then(function(){e.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},t.prototype.handleEmptyChart=function(e,r){var n=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),o=1;this.chartController.isActiveXYChart()&&(o=this.chartController.getChartType()==="bubble"?3:2);var a=r.length<o||e.length===0;if(this.eChart){var s=n||a;_.setDisplayed(this.eChart,!s),_.setDisplayed(this.eEmpty,s)}return n?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):a?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1},t.prototype.downloadChart=function(e,r,n){this.chartProxy.downloadChart(e,r,n)},t.prototype.openChartToolPanel=function(e){var r=e&&CHART_TOOL_PANEL_MENU_OPTIONS[e];this.chartMenu.showMenu(r)},t.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},t.prototype.getChartId=function(){return this.chartController.getChartId()},t.prototype.getUnderlyingChart=function(){return this.chartProxy.getChart()},t.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},t.prototype.setActiveChartCellRange=function(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},t.prototype.raiseChartCreatedEvent=function(){var e=this,r=Object.freeze({type:Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()});this.chartProxy.getChart().waitForUpdate().then(function(){e.eventService.dispatchEvent(r)})},t.prototype.raiseChartDestroyedEvent=function(){var e=Object.freeze({type:Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()});this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();_.clearElement(e),_.removeFromParent(e),this.raiseChartDestroyedEvent()},t.TEMPLATE=`<div class="ag-chart" tabindex="-1">
            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
            </div>
            <div ref="eTitleEditContainer"></div>
            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>
        </div>`,__decorate$I([RefSelector("eChart")],t.prototype,"eChart",void 0),__decorate$I([RefSelector("eChartContainer")],t.prototype,"eChartContainer",void 0),__decorate$I([RefSelector("eMenuContainer")],t.prototype,"eMenuContainer",void 0),__decorate$I([RefSelector("eEmpty")],t.prototype,"eEmpty",void 0),__decorate$I([RefSelector("eTitleEditContainer")],t.prototype,"eTitleEditContainer",void 0),__decorate$I([Autowired("chartCrossFilterService")],t.prototype,"crossFilterService",void 0),__decorate$I([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),__decorate$I([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$I([Autowired("popupService")],t.prototype,"popupService",void 0),__decorate$I([PostConstruct],t.prototype,"init",null),t}(Component),ALL_AXIS_TYPES=["number","category","groupedCategory","log","time"];function getLegacyAxisType(i){switch(i){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}var __assign$9=function(){return __assign$9=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$9.apply(this,arguments)},__rest=function(i,t){var e={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(e[r[n]]=i[r[n]]);return e},__read$9=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__values$3=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CURRENT_VERSION="28.2.0";function upgradeChartModel(i){return i.version,i.version==null&&(i.version=heuristicVersionDetection(i)),i=migrateIfBefore("23.0.0",i,migrateV23),i=migrateIfBefore("24.0.0",i,migrateV24),i=migrateIfBefore("25.1.0",i,migrateV25_1),i=migrateIfBefore("26.0.0",i,migrateV26),i=migrateIfBefore("26.1.0",i,migrateV26_1),i=migrateIfBefore("26.2.0",i,migrateV26_2),i=migrateIfBefore("28.0.0",i,migrateV28),i=migrateIfBefore("28.2.0",i,migrateV28_2),i=cleanup(i),i=migrateIfBefore(CURRENT_VERSION,i,function(t){return t}),i}function migrateV23(i){return i=jsonRename("chartOptions.legend.item.marker.type","shape",i),i=jsonRename("chartOptions.seriesDefaults.marker.type","shape",i),i=jsonRename("chartOptions.legend.padding","spacing",i),i}function migrateV24(i){var t,e;i=jsonDelete("chartOptions.seriesDefaults.marker.minSize",i);var r=i,n=r.chartType,o=r.chartPalette,a=r.chartOptions,s=a.xAxis,l=a.yAxis,u=__rest(a,["xAxis","yAxis"]),c=__rest(r,["chartType","chartPalette","chartOptions"]),f=getLegacyAxisType(n),d=(t=f)===null||t===void 0?void 0:t.map(function(h,p){return __assign$9({type:h},p===0?s:l)});return __assign$9({chartType:n,chartThemeName:(e=LEGACY_PALETTES[o],e??"ag-default"),chartOptions:__assign$9(__assign$9({},u),{axes:d,xAxis:s,yAxis:l})},c)}function migrateV25_1(i){return i=jsonRename("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",i),i}function migrateV26(i){var t=function(e){var r=e.dimOpacity,n=__rest(e,["dimOpacity"]);return __assign$9(__assign$9({},n),r!=null?{series:{dimOpacity:r}}:{})};return i=jsonMutate("chartOptions.seriesDefaults.highlightStyle",i,t),i=jsonDelete("chart",i),i=jsonDelete("chartOptions.seriesDefaults.tooltipClass",i),i=jsonDelete("chartOptions.seriesDefaults.tooltipTracking",i),i=jsonDeleteDefault("chartOptions.axes[].label.rotation",0,i),i=jsonDeleteDefault("chartOptions.axes[].label.rotation",335,i),i}function migrateV26_1(i){var t=function(e){var r=e.item,n=e.series,o=__rest(e,["item","series"]);return __assign$9({item:__assign$9(__assign$9({},o),r)},n?{series:n}:{})};return i=jsonMutate("chartOptions.seriesDefaults.highlightStyle",i,t),i=jsonMutate("chartOptions.series[].highlightStyle",i,t),i}function migrateV26_2(i){i=jsonMove("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",i),i=jsonMove("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",i),i=jsonMove("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",i),i=jsonDelete("chartOptions.seriesDefaults.fill",i),i=jsonDelete("chartOptions.seriesDefaults.stroke",i),i=jsonDelete("chartOptions.seriesDefaults.callout.colors",i),i=jsonDelete("chartOptions.xAxis",i),i=jsonDelete("chartOptions.yAxis",i);var t=i,e=t.chartType,r=t.chartOptions,n=r.axes;r.series;var o=r.seriesDefaults,a=__rest(r,["axes","series","seriesDefaults"]),s=__rest(t,["chartType","chartOptions"]),l=[getSeriesType(e)],u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}},f=n.map(function(h){var p,g=h.type,v=__rest(h,["type"]);return p={},p[g]=__assign$9(__assign$9({},c),v),p}).reduce(merge,{});ALL_AXIS_TYPES.filter(function(h){return f[h]==null}).forEach(function(h){f[h]=__assign$9({},c)}),u.axes=f}var d=l.map(function(h){var p;return p={},p[h]=__assign$9(__assign$9(__assign$9({},u),{series:o}),a),p}).reduce(merge,{});return i=__assign$9(__assign$9({},s),{chartType:e,chartOptions:d}),i}function migrateV28(i){return i=jsonDelete("chartOptions.*.title.padding",i),i=jsonDelete("chartOptions.*.subtitle.padding",i),i=jsonDelete("chartOptions.*.axes.*.title.padding",i),i=jsonBackfill("chartOptions.*.axes.*.title.enabled",!1,i),i}function migrateV28_2(i){return i=jsonRename("chartOptions.pie.series.callout","calloutLine",i),i=jsonRename("chartOptions.pie.series.label","calloutLabel",i),i}function cleanup(i){return i=jsonDelete("chartOptions.*.width",i),i=jsonDelete("chartOptions.*.height",i),i=jsonBackfill("chartOptions.*.axes.category.label.autoRotate",!0,i),i}function heuristicVersionDetection(i){var t,e,r,n,o,a,s,l,u=i;if(i.version!=null)return i.version;var c=function(b){for(var C=[],x=1;x<arguments.length;x++)C[x-1]=arguments[x];return Object.keys(b||{}).some(function(w){return C.includes(w)})},f=u.chartOptions,d=c(f,"seriesDefaults")?(t=f)===null||t===void 0?void 0:t.seriesDefaults:(e=f)===null||e===void 0?void 0:e[Object.keys(f)[0]],h={"27.0.0":c(u,"seriesChartTypes"),"26.2.0":!c(f,"seriesDefaults"),"26.1.0":c((r=d)===null||r===void 0?void 0:r.highlightStyle,"item"),"26.0.0":c((n=d)===null||n===void 0?void 0:n.highlightStyle,"series"),"25.1.0":c((o=d)===null||o===void 0?void 0:o.label,"minAngle"),"25.0.0":c(u,"modelType","aggFunc","unlinkChart","suppressChartRanges")||c(d,"lineDash","lineDashOffset"),"24.0.0":c(u,"chartThemeName","chart")||c(f,"series"),"23.2.0":c(f,"navigator"),"23.0.0":c((l=(s=(a=f)===null||a===void 0?void 0:a.legend)===null||s===void 0?void 0:s.item)===null||l===void 0?void 0:l.marker,"shape"),"22.1.0":c(u,"chartPalette","chartType")},p="27.1.0",g=Object.entries(h).filter(function(b){var C=__read$9(b,2);C[0];var x=C[1];return x}),v=__read$9(g[0],1),m=v[0],y=m===void 0?p:m;return y}function migrateIfBefore(i,t,e){if(versionNumber(i)>versionNumber(t.version)){var r=e(t);return r.version=i,r}return t}function versionParts(i){var t=typeof i=="string"?i.split(".").map(function(e){return Number(e)}):[];if(t.length!==3||t.some(function(e){return isNaN(e)}))throw new Error("AG Grid - Illegal version string: "+i);return{major:t[0],minor:t[1],patch:t[2]}}function versionNumber(i){var t=versionParts(i),e=t.major,r=t.minor,n=t.patch;return e*1e4+r*100+n}function jsonDeleteDefault(i,t,e){return jsonMutateProperty(i,!0,e,function(r,n){r[n]===t&&delete r[n]})}function jsonBackfill(i,t,e){return jsonMutateProperty(i,!1,e,function(r,n){r[n]==null&&(r[n]=t)})}function jsonMove(i,t,e){var r=void 0,n=!1;return e=jsonMutateProperty(i,!0,e,function(o,a){n=!0,r=o[a],delete o[a]}),n?jsonMutateProperty(t,!1,e,function(o,a){o[a]=r}):e}function jsonRename(i,t,e){return jsonMutateProperty(i,!0,e,function(r,n){r[t]=r[n],delete r[n]})}function jsonDelete(i,t){return jsonMutateProperty(i,!0,t,function(e,r){return delete e[r]})}function jsonMutateProperty(i,t,e,r){var n=i instanceof Array?i:i.split("."),o=n.slice(0,n.length-1),a=n[n.length-1];return jsonMutate(o,e,function(s){var l=Object.keys(s).includes(a);if(t&&!l)return s;var u=__assign$9({},s);return r(u,a),u})}function jsonMutate(i,t,e){var r,n,o=i instanceof Array?i:i.split(".");if(t=__assign$9({},t),o.length===0)return e(t);if(o[0].startsWith("{")){var a=o[0].substring(1,o[0].lastIndexOf("}")).split(",");try{for(var s=__values$3(a),l=s.next();!l.done;l=s.next()){var u=l.value;t[u]!=null&&(t[u]=jsonMutate(o.slice(1),t[u],e))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}else if(o[0].endsWith("[]")){var c=o[0].substring(0,i[0].indexOf("["));t[c]instanceof Array&&(t[c]=t[c].map(function(d){return jsonMutate(o.slice(1),d,e)}))}else if(o[0]==="*")for(var f in t)t[f]=jsonMutate(o.slice(1),t[f],e);else t[o[0]]!=null&&(t[o[0]]=jsonMutate(o.slice(1),t[o[0]],e));return t}var merge=function(i,t){return __assign$9(__assign$9({},i),t)},LEGACY_PALETTES={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},__extends$$=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$8=function(){return __assign$8=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$8.apply(this,arguments)},__decorate$H=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartService=function(i){__extends$$(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return t.prototype.getChartModels=function(){var e=[],r=function(n){return __assign$8(__assign$8({},n),{version:CURRENT_VERSION})};return this.activeChartComps.forEach(function(n){return e.push(r(n.getChartModel()))}),e},t.prototype.getChartRef=function(e){var r;return this.activeCharts.forEach(function(n){n.chartId===e&&(r=n)}),r},t.prototype.getChartImageDataURL=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e.chartId&&(r=n.getChartImageDataURL(e.fileFormat))}),r},t.prototype.downloadChart=function(e){var r,n=Array.from(this.activeChartComps).find(function(o){return o.getChartId()===e.chartId});(r=n)===null||r===void 0||r.downloadChart(e.dimensions,e.fileName,e.fileFormat)},t.prototype.openChartToolPanel=function(e){var r,n=Array.from(this.activeChartComps).find(function(o){return o.getChartId()===e.chartId});(r=n)===null||r===void 0||r.openChartToolPanel(e.panel)},t.prototype.closeChartToolPanel=function(e){var r,n=Array.from(this.activeChartComps).find(function(o){return o.getChartId()===e});(r=n)===null||r===void 0||r.closeChartToolPanel()},t.prototype.createChartFromCurrentRange=function(e){e===void 0&&(e="groupedColumn");var r=this.getSelectedRange();return this.createChart(r,e)},t.prototype.restoreChart=function(e,r){var n=this;if(!e){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}e.version!==CURRENT_VERSION&&(e=upgradeChartModel(e));var o={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:r,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},a=function(f){return n.rangeService?n.rangeService.createCellRangeFromCellRangeParams(f):void 0};if(e.modelType==="pivot"){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var s=this.columnModel.getAllDisplayedColumns().map(function(f){return f.getColId()}),l={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:s},u=a(l);if(!u){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(u,o.chartType,o.chartThemeName,!0,!0,o.chartContainer,void 0,void 0,o.unlinkChart,!1,e.chartOptions)}var c=a(o.cellRange);if(!c){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(c,o.chartType,o.chartThemeName,!1,o.suppressChartRanges,o.chartContainer,o.aggFunc,void 0,o.unlinkChart,!1,e.chartOptions,e.chartPalette,o.seriesChartTypes)},t.prototype.createRangeChart=function(e){var r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):void 0;if(!r){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(r,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes)},t.prototype.createPivotChart=function(e){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var r={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(function(o){return o.getColId()})},n=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(r):void 0;if(!n){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(n,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart)},t.prototype.createCrossFilterChart=function(e){var r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):void 0;if(!r){console.warn("AG Grid - unable to create chart as no range is selected");return}var n=!0,o=typeof e.suppressChartRanges<"u"&&e.suppressChartRanges!==null,a=o?e.suppressChartRanges:!0;return this.createChart(r,e.chartType,e.chartThemeName,!1,a,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,n)},t.prototype.createChart=function(e,r,n,o,a,s,l,u,c,f,d,h,p){var g=this;o===void 0&&(o=!1),a===void 0&&(a=!1),c===void 0&&(c=!1),f===void 0&&(f=!1);var v=this.gridOptionsWrapper.getCreateChartContainerFunc(),m={chartId:this.generateId(),pivotChart:o,cellRange:e,chartType:r,chartThemeName:n,insideDialog:!(s||v),suppressChartRanges:a,aggFunc:l,chartThemeOverrides:u,unlinkChart:c,crossFiltering:f,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:d,chartPaletteToRestore:h,seriesChartTypes:p,crossFilteringResetCallback:function(){return g.activeChartComps.forEach(function(x){return x.crossFilteringReset()})}},y=new GridChartComp(m);this.context.createBean(y);var b=this.createChartRef(y);if(s){s.appendChild(y.getGui());var C=this.environment.getTheme();C.el&&!C.el.contains(s)&&s.classList.add(C.theme)}else v?v(b):y.addEventListener(GridChartComp.EVENT_DESTROYED,function(){g.activeChartComps.delete(y),g.activeCharts.delete(b)});return b},t.prototype.createChartRef=function(e){var r=this,n={destroyChart:function(){r.activeCharts.has(n)&&(r.context.destroyBean(e),r.activeChartComps.delete(e),r.activeCharts.delete(n))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(n),this.activeChartComps.add(e),n},t.prototype.getSelectedRange=function(){var e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}},t.prototype.generateId=function(){return"id-"+Math.random().toString(36).substr(2,16)},t.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach(function(e){return e.destroyChart()})},__decorate$H([Optional("rangeService")],t.prototype,"rangeService",void 0),__decorate$H([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$H([Autowired("environment")],t.prototype,"environment",void 0),__decorate$H([PreDestroy],t.prototype,"destroyAllActiveCharts",null),t=__decorate$H([Bean("chartService")],t),t}(BeanStub),__extends$_=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$G=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartTranslationService=function(i){__extends$_(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}e=t,t.prototype.translate=function(r,n){var o=this.gridOptionsWrapper.getLocaleTextFunc(),a=e.DEFAULT_TRANSLATIONS[r]||n;return o(r,a)};var e;return t.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},t=e=__decorate$G([Bean("chartTranslationService")],t),t}(BeanStub),__extends$Z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$F=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ChartCrossFilterService=function(i){__extends$Z(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}e=t,t.prototype.filter=function(r,n){n===void 0&&(n=!1);var o=this.gridApi.getFilterModel();if(n){this.resetFilters(o);return}var a=e.extractFilterColId(r);this.isValidColumnFilter(a)?this.updateFilters(o,r,a):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+a+"'")},t.prototype.resetFilters=function(r){var n=Object.keys(r).length>0;n&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},t.prototype.updateFilters=function(r,n,o){var a,s=e.extractFilterColId(n),l=n.datum[s];if(l!==void 0){var u=l.toString();if(n.event.metaKey||n.event.ctrlKey){var c=this.getCurrentGridValuesForCategory(o),f=_.includes(c,u),d=void 0;f?d=c.filter(function(h){return h!==u}):(d=c,d.push(u)),r[o]=this.getUpdatedFilterModel(o,d)}else{var d=[u];r=(a={},a[o]=this.getUpdatedFilterModel(o,d),a)}this.gridApi.setFilterModel(r)}},t.prototype.getUpdatedFilterModel=function(r,n){var o=this.getColumnFilterType(r);return o==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:n}]}:{filterType:"set",values:n}},t.prototype.getCurrentGridValuesForCategory=function(r){var n=this,o=[],a=this.getColumnById(r);return this.gridApi.forEachNodeAfterFilter(function(s){if(a&&!s.group){var l=n.valueService.getValue(a,s)+"";o.includes(l)||o.push(l)}}),o},t.extractFilterColId=function(r){return r.xKey||r.calloutLabelKey},t.prototype.isValidColumnFilter=function(r){r.indexOf("-filtered-out")&&(r=r.replace("-filtered-out",""));var n=this.getColumnFilterType(r);return typeof n=="boolean"?n:_.includes(["agSetColumnFilter","agMultiColumnFilter"],n)},t.prototype.getColumnFilterType=function(r){var n=this.getColumnById(r);if(n){var o=n.getColDef();return o.filter!=null?o.filter:o.filterFramework}},t.prototype.getColumnById=function(r){return this.columnModel.getGridColumn(r)};var e;return __decorate$F([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$F([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$F([Autowired("valueService")],t.prototype,"valueService",void 0),t=e=__decorate$F([Bean("chartCrossFilterService")],t),t}(BeanStub),__extends$Y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$7=function(){return __assign$7=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$7.apply(this,arguments)},__decorate$E=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$8=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$2=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$8(arguments[t]));return i},__values$2=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},RangeService=function(i){__extends$Y(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(function(){var r=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new AutoScrollService({scrollContainer:r.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return r.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(n){return r.getScrollFeature().setVerticalScrollPosition(n)},getHorizontalPosition:function(){return r.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(n){return r.getScrollFeature().setHorizontalScrollPosition(n)},shouldSkipVerticalScroll:function(){return e.gridOptionsWrapper.getDomLayout()!==Constants.DOM_LAYOUT_NORMAL},shouldSkipHorizontalScroll:function(){return r.getScrollFeature().isHorizontalScrollShowing()}})})},t.prototype.onColumnsChanged=function(){var e=this;this.refreshLastRangeStart();var r=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(function(o){var a=o.columns;o.columns=o.columns.filter(function(l){return l.isVisible()&&r.indexOf(l)!==-1});var s=!_.areEqual(a,o.columns);s&&e.dispatchChangedEvent(!1,!0,o.id)});var n=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(function(o){return o.columns.length>0}),n>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},t.prototype.refreshLastRangeStart=function(){var e=_.last(this.cellRanges);e&&this.refreshRangeStart(e)},t.prototype.isContiguousRange=function(e){var r=e.columns;if(!r.length)return!1;var n=this.columnModel.getAllDisplayedColumns(),o=r.map(function(a){return n.indexOf(a)}).sort(function(a,s){return a-s});return _.last(o)-o[0]+1===r.length},t.prototype.getRangeStartRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow;var r=this.pinnedRowModel.getPinnedTopRowCount()>0?Constants.PINNED_TOP:null;return{rowIndex:0,rowPinned:r}},t.prototype.getRangeEndRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;var r=this.pinnedRowModel.getPinnedBottomRowCount(),n=r>0;return n?{rowIndex:r-1,rowPinned:Constants.PINNED_BOTTOM}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},t.prototype.setRangeToCell=function(e,r){if(r===void 0&&(r=!1),!!this.gridOptionsWrapper.isEnableRangeSelection()){var n=this.calculateColumnsBetween(e.column,e.column);if(n){var o=this.gridOptionsWrapper.isSuppressMultiRangeSelection();(o||!r||_.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var a={rowIndex:e.rowIndex,rowPinned:e.rowPinned},s={startRow:a,endRow:a,columns:n,startColumn:e.column};this.cellRanges.push(s),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},t.prototype.extendLatestRangeToCell=function(e){if(!(this.isEmpty()||!this.newestRangeStartCell)){var r=_.last(this.cellRanges);this.updateRangeEnd(r,e)}},t.prototype.updateRangeEnd=function(e,r,n){n===void 0&&(n=!1);var o=r.column,a=this.calculateColumnsBetween(e.startColumn,o);!a||this.isLastCellOfRange(e,r)||(e.columns=a,e.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},n||this.dispatchChangedEvent(!0,!0,e.id))},t.prototype.refreshRangeStart=function(e){var r=e.startColumn,n=e.columns,o=function(f,d){var h=e.columns.filter(function(p){return p!==f});f?(e.startColumn=f,e.columns=d?__spread$2([f],h):__spread$2(h,[f])):e.columns=h},a=this.getRangeEdgeColumns(e),s=a.left,l=a.right,u=r===n[0]&&r!==s;if(u){o(s,!0);return}var c=r===_.last(n)&&r===l;if(c){o(l,!1);return}},t.prototype.getRangeEdgeColumns=function(e){var r=this.columnModel.getAllDisplayedColumns(),n=e.columns.map(function(o){return r.indexOf(o)}).filter(function(o){return o>-1}).sort(function(o,a){return o-a});return{left:r[n[0]],right:r[_.last(n)]}},t.prototype.extendLatestRangeInDirection=function(e){if(!(this.isEmpty()||!this.newestRangeStartCell)){var r=e.key,n=e.ctrlKey||e.metaKey,o=_.last(this.cellRanges),a=this.newestRangeStartCell,s=o.columns[0],l=_.last(o.columns),u=o.endRow.rowIndex,c=o.endRow.rowPinned,f=a.column===s?l:s,d={column:f,rowIndex:u,rowPinned:c},h=this.cellNavigationService.getNextCellToFocus(r,d,n);if(h)return this.setCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:h.rowIndex,rowEndPinned:h.rowPinned,columnStart:a.column,columnEnd:h.column}),h}},t.prototype.setCellRange=function(e){this.gridOptionsWrapper.isEnableRangeSelection()&&(this.removeAllCellRanges(!0),this.addCellRange(e))},t.prototype.setCellRanges=function(e){var r=this;_.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(function(n){n.columns&&n.startRow&&r.setNewestRangeStartCell({rowIndex:n.startRow.rowIndex,rowPinned:n.startRow.rowPinned,column:n.columns[0]}),r.cellRanges.push(n)}),this.dispatchChangedEvent(!1,!0))},t.prototype.setNewestRangeStartCell=function(e){this.newestRangeStartCell=e},t.prototype.clearCellRangeCellValues=function(e){var r=this;e||(e=this.cellRanges),e.forEach(function(n){r.forEachRowInRange(n,function(o){var a=r.rowPositionUtils.getRowNode(o);if(a)for(var s=0;s<n.columns.length;s++){var l=r.columnModel.getGridColumn(n.columns[s]);if(!l||!l.isCellEditable(a))return;a.setDataValue(l,null,"rangeService")}})})},t.prototype.createCellRangeFromCellRangeParams=function(e){var r=this,n,o=!1;if(e.columns)n=e.columns.map(function(c){return r.columnModel.getColumnWithValidation(c)}).filter(function(c){return c});else{var a=this.columnModel.getColumnWithValidation(e.columnStart),s=this.columnModel.getColumnWithValidation(e.columnEnd);if(!a||!s)return;n=this.calculateColumnsBetween(a,s),n&&n.length&&(o=n[0]!==a)}if(n){var l=e.rowStartIndex!=null?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,u=e.rowEndIndex!=null?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0;return{startRow:l,endRow:u,columns:n,startColumn:o?_.last(n):n[0]}}},t.prototype.addCellRange=function(e){if(this.gridOptionsWrapper.isEnableRangeSelection()){var r=this.createCellRangeFromCellRangeParams(e);r&&(r.startRow&&this.setNewestRangeStartCell({rowIndex:r.startRow.rowIndex,rowPinned:r.startRow.rowPinned,column:r.startColumn}),this.cellRanges.push(r),this.dispatchChangedEvent(!1,!0,r.id))}},t.prototype.getCellRanges=function(){return this.cellRanges},t.prototype.isEmpty=function(){return this.cellRanges.length===0},t.prototype.isMoreThanOneCell=function(){var e=this.cellRanges.length;if(e===0)return!1;if(e>1)return!0;var r=this.cellRanges[0],n=this.getRangeStartRow(r),o=this.getRangeEndRow(r);return n.rowPinned!==o.rowPinned||n.rowIndex!==o.rowIndex||r.columns.length!==1},t.prototype.areAllRangesAbleToMerge=function(){var e,r,n=this,o=new Map,a=this.cellRanges.length;if(a<=1)return!0;this.cellRanges.forEach(function(d){n.forEachRowInRange(d,function(h){var p=(h.rowPinned||"normal")+"_"+h.rowIndex,g=o.get(p),v=d.columns.map(function(y){return y.getId()});if(g){var m=v.filter(function(y){return g.indexOf(y)===-1});g.push.apply(g,__spread$2(m))}else o.set(p,v)})});var s;try{for(var l=__values$2(o.values()),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.sort().join();if(s===void 0){s=f;continue}if(s!==f)return!1}}catch(d){e={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return!0},t.prototype.forEachRowInRange=function(e,r){for(var n=this.getRangeStartRow(e),o=this.getRangeEndRow(e),a=n;a&&(r(a),!this.rowPositionUtils.sameRow(a,o));)a=this.cellNavigationService.getRowBelow(a)},t.prototype.removeAllCellRanges=function(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))},t.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},t.prototype.isCellInAnyRange=function(e){return this.getCellRangeCount(e)>0},t.prototype.isCellInSpecificRange=function(e,r){var n=r.columns!==null&&_.includes(r.columns,e.column),o=this.isRowInRange(e.rowIndex,e.rowPinned,r);return n&&o},t.prototype.isLastCellOfRange=function(e,r){var n=e.startRow,o=e.endRow,a=this.rowPositionUtils.before(n,o)?o:n,s=r.rowIndex===a.rowIndex&&r.rowPinned===a.rowPinned,l=e.columns[0],u=_.last(e.columns),c=e.startColumn===l?u:l,f=r.column===c;return f&&s},t.prototype.isBottomRightCell=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),o=e.columns.map(function(f){return n.indexOf(f)}).sort(function(f,d){return f-d}),a=e.startRow,s=e.endRow,l=this.rowPositionUtils.before(a,s)?s:a,u=n.indexOf(r.column)===_.last(o),c=r.rowIndex===l.rowIndex&&_.makeNull(r.rowPinned)===_.makeNull(l.rowPinned);return u&&c},t.prototype.getCellRangeCount=function(e){var r=this;return this.isEmpty()?0:this.cellRanges.filter(function(n){return r.isCellInSpecificRange(e,n)}).length},t.prototype.isRowInRange=function(e,r,n){var o=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s={rowIndex:e,rowPinned:r||null},l=s.rowIndex===o.rowIndex&&s.rowPinned==o.rowPinned,u=s.rowIndex===a.rowIndex&&s.rowPinned==a.rowPinned;if(l||u)return!0;var c=!this.rowPositionUtils.before(s,o),f=this.rowPositionUtils.before(s,a);return c&&f},t.prototype.getDraggingRange=function(){return this.draggingRange},t.prototype.onDragStart=function(e){if(this.gridOptionsWrapper.isEnableRangeSelection()){var r=e.ctrlKey,n=e.metaKey,o=e.shiftKey,a=r||n,s=!this.gridOptionsWrapper.isSuppressMultiRangeSelection(),l=s?a:!1,u=o&&_.existsAndNotEmpty(this.cellRanges);if(!l&&(!u||_.exists(_.last(this.cellRanges).type))&&this.removeAllCellRanges(!0),this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),this.updateValuesOnMove(e),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=l&&this.getCellRangeCount(this.lastCellHovered)>1,u||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=_.last(this.cellRanges);else{var c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},t.prototype.intersectLastRange=function(e){var r=this;if(!(e&&this.dragging)&&!this.gridOptionsWrapper.isSuppressMultiRangeSelection()&&!this.isEmpty()){var n=_.last(this.cellRanges),o=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s=[];this.cellRanges.slice(0,-1).forEach(function(l){var u=r.getRangeStartRow(l),c=r.getRangeEndRow(l),f=l.columns,d=f.filter(function(v){return n.columns.indexOf(v)===-1});if(d.length===f.length){s.push(l);return}if(r.rowPositionUtils.before(a,u)||r.rowPositionUtils.before(c,o)){s.push(l);return}var h=s.length;if(r.rowPositionUtils.before(u,o)){var p={columns:__spread$2(f),startColumn:n.startColumn,startRow:__assign$7({},u),endRow:r.cellNavigationService.getRowAbove(o)};s.push(p)}if(d.length>0){var g={columns:d,startColumn:_.includes(d,n.startColumn)?n.startColumn:d[0],startRow:r.rowPositionUtils.rowMax([__assign$7({},o),__assign$7({},u)]),endRow:r.rowPositionUtils.rowMin([__assign$7({},a),__assign$7({},c)])};s.push(g)}r.rowPositionUtils.before(a,c)&&s.push({columns:__spread$2(f),startColumn:n.startColumn,startRow:r.cellNavigationService.getRowBelow(a),endRow:__assign$7({},c)}),s.length-h===1&&(s[s.length-1].id=l.id)}),this.cellRanges=s,e&&this.dispatchChangedEvent(!1,!0)}},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);this.cellHasChanged=!1,!(!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=r)},t.prototype.onDragging=function(e){var r=this;if(!(!this.dragging||!e)){this.lastMouseEvent=e;var n=this.lastCellHovered,o=function(l){return n&&n.rowPinned===l&&r.newestRangeStartCell.rowPinned===l},a=o("top")||o("bottom");if(this.autoScrollService.check(e,a),!!this.cellHasChanged){var s=this.calculateColumnsBetween(this.newestRangeStartCell.column,n.column);s&&(this.draggingRange.endRow={rowIndex:n.rowIndex,rowPinned:n.rowPinned},this.draggingRange.columns=s,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},t.prototype.onDragStop=function(){if(this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0),!!this.dragging){var e=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}},t.prototype.dispatchChangedEvent=function(e,r,n){var o=Object.freeze({type:Events.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:r,id:n});this.eventService.dispatchEvent(o)},t.prototype.calculateColumnsBetween=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),o=e===r,a=n.indexOf(e);if(a<0){console.warn("AG Grid: column "+e.getId()+" is not visible");return}var s=o?a:n.indexOf(r);if(s<0){console.warn("AG Grid: column "+r.getId()+" is not visible");return}if(o)return[e];for(var l=Math.min(a,s),u=l===a?s:a,c=[],f=l;f<=u;f++)c.push(n[f]);return c},__decorate$E([Autowired("rowModel")],t.prototype,"rowModel",void 0),__decorate$E([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$E([Autowired("mouseEventService")],t.prototype,"mouseEventService",void 0),__decorate$E([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),__decorate$E([Autowired("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),__decorate$E([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),__decorate$E([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),__decorate$E([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),__decorate$E([PostConstruct],t.prototype,"init",null),t=__decorate$E([Bean("rangeService")],t),t}(BeanStub),__extends$X=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$D=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AbstractSelectionHandle=function(i){__extends$X(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return t.prototype.init=function(){var e=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(r){e.dragging=!0,e.rangeService.autoScrollService.check(r),e.changedCalculatedValues&&(e.onDrag(r),e.changedCalculatedValues=!1)},onDragStop:function(r){e.dragging=!1,e.onDragEnd(r),e.clearValues(),e.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(e.getDraggingCssClass()),e.shouldDestroyOnEndDragging&&e.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},t.prototype.isDragging=function(){return this.dragging},t.prototype.getCellCtrl=function(){return this.cellCtrl},t.prototype.setCellCtrl=function(e){this.cellCtrl=e},t.prototype.getCellRange=function(){return this.cellRange},t.prototype.setCellRange=function(e){this.cellRange=e},t.prototype.getRangeStartRow=function(){return this.rangeStartRow},t.prototype.setRangeStartRow=function(e){this.rangeStartRow=e},t.prototype.getRangeEndRow=function(){return this.rangeEndRow},t.prototype.setRangeEndRow=function(e){this.rangeEndRow=e},t.prototype.getLastCellHovered=function(){return this.lastCellHovered},t.prototype.preventRangeExtension=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},t.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===SelectionHandleType.FILL?"fill":"range")+"-handle"},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered=r,this.changedCalculatedValues=!0)},t.prototype.getType=function(){return this.type},t.prototype.refresh=function(e){var r=this.getCellCtrl(),n=this.getGui(),o=_.last(this.rangeService.getCellRanges()),a=o.startRow,s=o.endRow;if(a&&s){var l=this.rowPositionUtils.before(s,a);l?(this.setRangeStartRow(s),this.setRangeEndRow(a)):(this.setRangeStartRow(a),this.setRangeEndRow(s))}if(r!==e||!_.isVisible(n)){this.setCellCtrl(e);var u=e.getComp().getParentOfValue();u&&u.appendChild(n)}this.setCellRange(o)},t.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},t.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},t.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){_.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,i.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},__decorate$D([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$D([Autowired("dragService")],t.prototype,"dragService",void 0),__decorate$D([Autowired("rangeService")],t.prototype,"rangeService",void 0),__decorate$D([Autowired("mouseEventService")],t.prototype,"mouseEventService",void 0),__decorate$D([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$D([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),__decorate$D([Autowired("navigationService")],t.prototype,"navigationService",void 0),__decorate$D([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),__decorate$D([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),__decorate$D([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),__decorate$D([PostConstruct],t.prototype,"init",null),t}(Component),__extends$W=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$6=function(){return __assign$6=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$6.apply(this,arguments)},__decorate$C=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__read$7=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread$1=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$7(arguments[t]));return i},FillHandle=function(i){__extends$W(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.markedCells=[],e.cellValues=[],e.isUp=!1,e.isLeft=!1,e.isReduce=!1,e.type=SelectionHandleType.FILL,e}return t.prototype.updateValuesOnMove=function(e){i.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var r=this.initialXY,n=r.x,o=r.y,a=this.mouseEventService.getNormalisedPosition(e),s=a.x,l=a.y,u=Math.abs(n-s),c=Math.abs(o-l),f=this.gridOptionsWrapper.getFillHandleDirection(),d;f==="xy"?d=u>c?"x":"y":d=f,d!==this.dragAxis&&(this.dragAxis=d,this.changedCalculatedValues=!0)},t.prototype.onDrag=function(e){if(!this.initialPosition){var r=this.getCellCtrl();if(!r)return;this.initialPosition=r.getCellPosition()}var n=this.getLastCellHovered();n&&this.markPathFrom(this.initialPosition,n)},t.prototype.onDragEnd=function(e){if(this.initialXY=null,!!this.markedCells.length){var r=this.dragAxis==="x",n=this.getCellRange(),o=n.columns.length,a=this.getRangeStartRow(),s=this.getRangeEndRow(),l;if(!this.isUp&&!this.isLeft)l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:n.columns[0],rowEndIndex:r?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[o-1]});else{var u=r?a:this.lastCellMarked;l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:u.rowIndex,rowStartPinned:u.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:n.columns[o-1]})}l&&(this.raiseFillStartEvent(),this.handleValueChanged(n,l,e),this.rangeService.setCellRanges([l]),this.raiseFillEndEvent(n,l))}},t.prototype.raiseFillStartEvent=function(){var e={type:Events.EVENT_FILL_START};this.eventService.dispatchEvent(e)},t.prototype.raiseFillEndEvent=function(e,r){var n={type:Events.EVENT_FILL_END,initialRange:e,finalRange:r};this.eventService.dispatchEvent(n)},t.prototype.handleValueChanged=function(e,r,n){var o=this,a=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),l=this.rangeService.getRangeEndRow(r),u=this.rangeService.getRangeStartRow(r),c=this.dragAxis==="y";if(this.isReduce&&!this.gridOptionsWrapper.isSuppressClearOnFillReduction()){var f=c?e.columns:e.columns.filter(function(C){return r.columns.indexOf(C)<0}),d=c?this.cellNavigationService.getRowBelow(l):u;d&&this.clearCellsInRange(d,a,f);return}var h=!0,p=[],g=[],v=0,m=function(){p.length=0,g.length=0,v=0},y=function(C,x){var w=o.isUp?a:s,P=!1;c&&(h=!0,m());for(var S=function(){var E=o.rowPositionUtils.getRowNode(w);if(!E)return"break";c&&C?b(p,C,E,function(){return!o.rowPositionUtils.sameRow(w,o.isUp?s:a)}):x&&(h=!0,m(),x.forEach(function(D){return b(p,D,E,function(){return D!==(o.isLeft?e.columns[0]:_.last(e.columns))})})),P=o.rowPositionUtils.sameRow(w,o.isUp?u:l),w=o.isUp?o.cellNavigationService.getRowAbove(w):o.cellNavigationService.getRowBelow(w)};!P&&w;){var O=S();if(O==="break")break}},b=function(C,x,w,P){var S,O=!1;if(h)S=o.getValueFromObject(o.valueService.getValue(x,w)),g.push(S),h=P();else{var E=o.processValues(n,C,g,x,w,v++),D=E.value,R=E.fromUserFunction;if(S=D,x.isCellEditable(w)){var F=o.getValueFromObject(o.valueService.getValue(x,w));!R||F!==S?w.setDataValue(x,S,"rangeService"):O=!0}}O||C.push(S)};if(c)e.columns.forEach(function(C){y(C)});else{var f=this.isLeft?__spread$1(r.columns).reverse():r.columns;y(void 0,f)}},t.prototype.clearCellsInRange=function(e,r,n){var o={startRow:e,endRow:r,columns:n,startColumn:n[0]};this.rangeService.clearCellRangeCellValues([o])},t.prototype.processValues=function(e,r,n,o,a,s){var l=this.gridOptionsWrapper.getFillOperation(),u=this.dragAxis==="y",c;if(u?c=this.isUp?"up":"down":c=this.isLeft?"left":"right",l){var f={event:e,values:r,initialValues:n,currentIndex:s,currentCellValue:this.valueService.getValue(o,a),direction:c,column:o,rowNode:a},d=l(f);if(d!==!1)return{value:d,fromUserFunction:!0}}var h=r.map(this.getValueFromObject),p=!h.some(function(v){var m=parseFloat(v);return isNaN(m)||m.toString()!==v.toString()});if(e.altKey||!p){if(p&&n.length===1){var g=this.isUp||this.isLeft?-1:1;return{value:parseFloat(_.last(h))+1*g,fromUserFunction:!1}}return{value:h[s%h.length],fromUserFunction:!1}}return{value:_.last(_.findLineByLeastSquares(h.map(Number))),fromUserFunction:!1}},t.prototype.getValueFromObject=function(e){return e!=null&&typeof e=="object"?e.toString():e},t.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,i.prototype.clearValues.call(this)},t.prototype.clearMarkedPath=function(){this.markedCells.forEach(function(e){if(e.isAlive()){var r=e.getComp();r.addOrRemoveCssClass("ag-selection-fill-top",!1),r.addOrRemoveCssClass("ag-selection-fill-right",!1),r.addOrRemoveCssClass("ag-selection-fill-bottom",!1),r.addOrRemoveCssClass("ag-selection-fill-left",!1)}}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},t.prototype.clearCellValues=function(){this.cellValues.length=0},t.prototype.markPathFrom=function(e,r){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(r,e))return;var n=this.rowPositionUtils.before(r,e),o=this.getRangeStartRow(),a=this.getRangeEndRow();n&&(r.rowPinned==o.rowPinned&&r.rowIndex>=o.rowIndex||o.rowPinned!=a.rowPinned&&r.rowPinned==a.rowPinned&&r.rowIndex<=a.rowIndex)?(this.reduceVertical(e,r),this.isReduce=!0):(this.extendVertical(e,r,n),this.isReduce=!1)}else{var s=e.column,l=r.column;if(s===l)return;var u=this.columnModel.getAllDisplayedColumns(),c=u.indexOf(s),f=u.indexOf(l);f<=c&&f>=u.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,r),this.isReduce=!0):(this.extendHorizontal(e,r,f<c),this.isReduce=!1)}this.lastCellMarked=r},t.prototype.extendVertical=function(e,r,n){var o=this,a=o.navigationService,s=o.rangeService,l=e;do{for(var u=this.getCellRange(),c=u.columns.length,f=0;f<c;f++){var d=u.columns[f],h={rowIndex:l.rowIndex,rowPinned:l.rowPinned},p=__assign$6(__assign$6({},h),{column:d}),g=s.isCellInSpecificRange(p,u),v=this.rowPositionUtils.sameRow(l,e);if(n&&(this.isUp=!0),!v){var m=a.getCellByPosition(p);if(m){this.markedCells.push(m);var y=m.getComp();g||(y.addOrRemoveCssClass("ag-selection-fill-left",f===0),y.addOrRemoveCssClass("ag-selection-fill-right",f===c-1)),y.addOrRemoveCssClass(n?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(l,r))}}}if(this.rowPositionUtils.sameRow(l,r))break}while(l=n?this.cellNavigationService.getRowAbove(l):this.cellNavigationService.getRowBelow(l))},t.prototype.reduceVertical=function(e,r){var n=e;do{for(var o=this.getCellRange(),a=o.columns.length,s=this.rowPositionUtils.sameRow(n,r),l=0;l<a;l++){var u={rowIndex:n.rowIndex,rowPinned:n.rowPinned},c=__assign$6(__assign$6({},u),{column:o.columns[l]}),f=this.navigationService.getCellByPosition(c);if(f){this.markedCells.push(f);var d=f.getComp();d.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,r))}}if(s)break}while(n=this.cellNavigationService.getRowAbove(n))},t.prototype.extendHorizontal=function(e,r,n){var o=this,a=this.columnModel.getAllDisplayedColumns(),s=a.indexOf(n?r.column:e.column),l=a.indexOf(n?this.getCellRange().columns[0]:r.column),u=n?0:1,c=a.slice(s+u,l+u),f=this.getRangeStartRow(),d=this.getRangeEndRow();c.forEach(function(h){var p=f,g=!1;do{g=o.rowPositionUtils.sameRow(p,d);var v=o.navigationService.getCellByPosition({rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:h});if(v){o.markedCells.push(v);var m=v.getComp();m.addOrRemoveCssClass("ag-selection-fill-top",o.rowPositionUtils.sameRow(p,f)),m.addOrRemoveCssClass("ag-selection-fill-bottom",o.rowPositionUtils.sameRow(p,d)),n?(o.isLeft=!0,m.addOrRemoveCssClass("ag-selection-fill-left",h===c[0])):m.addOrRemoveCssClass("ag-selection-fill-right",h===_.last(c))}p=o.cellNavigationService.getRowBelow(p)}while(!g)})},t.prototype.reduceHorizontal=function(e,r){var n=this,o=this.columnModel.getAllDisplayedColumns(),a=o.indexOf(r.column),s=o.indexOf(e.column),l=o.slice(a,s),u=this.getRangeStartRow(),c=this.getRangeEndRow();l.forEach(function(f){var d=u,h=!1;do{h=n.rowPositionUtils.sameRow(d,c);var p=n.navigationService.getCellByPosition({rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:f});if(p){n.markedCells.push(p);var g=p.getComp();g.addOrRemoveCssClass("ag-selection-fill-right",f===l[0])}d=n.cellNavigationService.getRowBelow(d)}while(!h)})},t.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0],n=!r.startRow||!r.endRow;if(n){this.destroy();return}i.prototype.refresh.call(this,e)},t.TEMPLATE='<div class="ag-fill-handle"></div>',__decorate$C([Autowired("valueService")],t.prototype,"valueService",void 0),t}(AbstractSelectionHandle),__extends$V=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$5=function(){return __assign$5=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$5.apply(this,arguments)},RangeHandle=function(i){__extends$V(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.type=SelectionHandleType.RANGE,e.rangeFixed=!1,e}return t.prototype.onDrag=function(e){var r=this.getLastCellHovered();if(r){var n=this.rangeService.getCellRanges(),o=_.last(n);if(this.rangeFixed||(this.fixRangeStartEnd(o),this.rangeFixed=!0),this.endPosition={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column},n.length===2&&n[0].type===CellRangeType.DIMENSION&&o.type===CellRangeType.VALUE){var a=!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(o));a&&this.rangeService.updateRangeEnd(n[0],__assign$5(__assign$5({},this.endPosition),{column:n[0].columns[0]}),!0)}this.rangeService.extendLatestRangeToCell(this.endPosition)}},t.prototype.onDragEnd=function(e){var r=_.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(r),this.rangeFixed=!1},t.prototype.fixRangeStartEnd=function(e){var r=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e),o=e.columns[0];e.startRow=r,e.endRow=n,e.startColumn=o},t.TEMPLATE='<div class="ag-range-handle"></div>',t}(AbstractSelectionHandle),__extends$U=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$B=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SelectionHandleFactory=function(i){__extends$U(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.createSelectionHandle=function(e){return this.createBean(e===SelectionHandleType.RANGE?new RangeHandle:new FillHandle)},t=__decorate$B([Bean("selectionHandleFactory")],t),t}(BeanStub),RangeSelectionModule={moduleName:ModuleNames.RangeSelectionModule,beans:[RangeService,SelectionHandleFactory],agStackComponents:[{componentName:"AgFillHandle",componentClass:FillHandle},{componentName:"AgRangeHandle",componentClass:RangeHandle}],dependantModules:[EnterpriseCoreModule]},GridChartsModule={moduleName:ModuleNames.GridChartsModule,beans:[ChartService,ChartTranslationService,ChartCrossFilterService],dependantModules:[RangeSelectionModule,EnterpriseCoreModule]},__extends$T=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$4=function(){return __assign$4=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$4.apply(this,arguments)},__decorate$A=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DetailCellRendererCtrl=function(i){__extends$T(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.loadRowDataVersion=0,e.needRefresh=!1,e}return t.prototype.init=function(e,r){var n=this;this.params=r,this.comp=e;var o=r.pinned!=null;o||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(r.node.parent,RowNode.EVENT_DATA_CHANGED,function(){n.needRefresh=!0}),this.addManagedListener(this.eventService,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},t.prototype.onFullWidthRowFocused=function(e){var r=this.params,n={rowIndex:r.node.rowIndex,rowPinned:r.node.rowPinned},o={rowIndex:e.rowIndex,rowPinned:e.rowPinned},a=this.rowPositionUtils.sameRow(n,o);a&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},t.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),r=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",n=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(r,!0),this.comp.addOrRemoveDetailGridCssClass(n,!0)},t.prototype.setupRefreshStrategy=function(){if(this.params.suppressRefresh){console.warn("AG Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead."),this.refreshStrategy="nothing";return}var e=this.params.refreshStrategy,r=e=="everything"||e=="nothing"||e=="rows";if(r){this.refreshStrategy=e;return}e!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"},t.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},t.prototype.createDetailGrid=function(){if(_.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),r=__assign$4({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)},t.prototype.registerDetailWithMaster=function(e,r){var n=this.params.node.id,o=this.params.api,a={id:n,api:e,columnApi:r},s=this.params.node;o.addDetailGridInfo(n,a),s.detailGridInfo=a,this.addDestroyFunc(function(){s.detailGridInfo===a&&(o.removeDetailGridInfo(n),s.detailGridInfo=null)})},t.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var r=this.loadRowDataVersion,n=this.params.getDetailRowData;if(!n){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}var o=function(s){var l=e.loadRowDataVersion===r;l&&e.comp.setRowData(s)},a={node:this.params.node,data:this.params.node.data,successCallback:o,context:this.gridOptionsWrapper.getContext()};n(a)},t.prototype.refresh=function(){var e=!1,r=!0,n=!this.needRefresh||this.refreshStrategy==="nothing";return n?r:(this.needRefresh=!1,this.refreshStrategy==="everything"?e:(this.loadRowData(),r))},__decorate$A([Autowired("environment")],t.prototype,"environment",void 0),__decorate$A([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),__decorate$A([Autowired("focusService")],t.prototype,"focusService",void 0),t}(BeanStub),__extends$S=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$z=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},DetailCellRenderer=function(i){__extends$S(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.init=function(e){var r=this;this.params=e,this.selectAndSetTemplate();var n={addOrRemoveCssClass:function(o,a){return r.addOrRemoveCssClass(o,a)},addOrRemoveDetailGridCssClass:function(o,a){return r.eDetailGrid.classList.toggle(o,a)},setDetailGrid:function(o){return r.setDetailGrid(o)},setRowData:function(o){return r.setRowData(o)},getGui:function(){return r.eDetailGrid}};this.ctrl=this.createManagedBean(new DetailCellRendererCtrl),this.ctrl.init(n,e)},t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},t.prototype.destroy=function(){i.prototype.destroy.call(this)},t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}var r=function(){e.setTemplate(t.TEMPLATE)};if(_.missing(this.params.template))r();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){var n=this.params.template,o=n(this.params);this.setTemplate(o)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')},t.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),n=r?_.cloneObject(r):void 0,o=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides();new Grid(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:n,frameworkComponentWrapper:o}}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc(function(){e.api&&e.api.destroy()})}},t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},t.TEMPLATE=`<div class="ag-details-row" role="gridcell">
            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
        </div>`,__decorate$z([RefSelector("eDetailGrid")],t.prototype,"eDetailGrid",void 0),t}(Component),MasterDetailModule={moduleName:ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:DetailCellRenderer}],controllers:[{controllerName:"detailCellRenderer",controllerClass:DetailCellRendererCtrl}],dependantModules:[EnterpriseCoreModule]},__extends$R=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$y=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EnterpriseMenuFactory=function(i){__extends$R(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,r,n){var o=this;this.showMenu(e,function(a){var s=a.getGui();o.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:r,ePopup:s}),n&&a.showTab(n)},"columnMenu",n,void 0,r.target)},t.prototype.showMenuAfterButtonClick=function(e,r,n,o,a){var s=this,l=-1,u="left";this.gridOptionsWrapper.isEnableRtl()&&(l=1,u="right"),this.showMenu(e,function(c){var f=c.getGui();s.popupService.positionPopupUnderComponent({type:n,column:e,eventSource:r,ePopup:f,alignSide:u,nudgeX:9*l,nudgeY:-23,keepWithinBounds:!0}),o&&c.showTab(o)},n,o,a,r)},t.prototype.showMenu=function(e,r,n,o,a,s){var l=this,u=this.createBean(new EnterpriseMenu(e,this.lastSelectedTab,a)),c=u.getGui(),f=this.focusService.getFocusedHeader(),d=this.columnModel.getAllDisplayedColumns().indexOf(e),h=s||this.ctrlsService.getGridBodyCtrl().getGui(),p=[];p.push(function(y){l.destroyBean(u),e.setMenuVisible(!1,"contextMenu");var b=y instanceof KeyboardEvent;if(b&&s){if(_.isVisible(s)){var C=l.focusService.findTabbableParent(s);C&&(e&&l.headerNavigationService.scrollToColumn(e),C.focus())}else if(f&&d!==-1){var x=l.columnModel.getAllDisplayedColumns(),w=x[d]||_.last(x);w&&l.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:f.headerRowIndex,column:w}})}}});var g=this.gridOptionsWrapper.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:function(y){p.forEach(function(b){return b(y)})},afterGuiAttached:function(y){return u.afterGuiAttached(Object.assign({},{container:n},y))},positionCallback:function(){return r(u)},anchorToElement:h,ariaLabel:g("ariaLabelColumnMenu","Column Menu")});if(v){var m=v.stopAnchoringPromise;m&&m.then(function(y){e.addEventListener(Column.EVENT_LEFT_CHANGED,y),e.addEventListener(Column.EVENT_VISIBLE_CHANGED,y),p.push(function(){e.removeEventListener(Column.EVENT_LEFT_CHANGED,y),e.removeEventListener(Column.EVENT_VISIBLE_CHANGED,y)})})}o||(u.showTabBasedOnPreviousSelection(),r(u)),u.addEventListener(EnterpriseMenu.EVENT_TAB_SELECTED,function(y){l.lastSelectedTab=y.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=u,u.addEventListener(BeanStub.EVENT_DESTROYED,function(){l.activeMenu===u&&(l.activeMenu=null)})},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).length>0},__decorate$y([Autowired("popupService")],t.prototype,"popupService",void 0),__decorate$y([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$y([Autowired("headerNavigationService")],t.prototype,"headerNavigationService",void 0),__decorate$y([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),__decorate$y([Autowired("columnModel")],t.prototype,"columnModel",void 0),t=__decorate$y([Bean("menuFactory")],t),t}(BeanStub),EnterpriseMenu=function(i){__extends$R(t,i);function t(e,r,n){var o=i.call(this)||this;return o.tabFactories={},o.includeChecks={},o.column=e,o.initialSelection=r,o.tabFactories[t.TAB_GENERAL]=o.createMainPanel.bind(o),o.tabFactories[t.TAB_FILTER]=o.createFilterPanel.bind(o),o.tabFactories[t.TAB_COLUMNS]=o.createColumnsPanel.bind(o),o.includeChecks[t.TAB_GENERAL]=function(){return!0},o.includeChecks[t.TAB_FILTER]=function(){return e.isFilterAllowed()},o.includeChecks[t.TAB_COLUMNS]=function(){return!0},o.restrictTo=n,o}return t.prototype.init=function(){var e=this,r=this.getTabsToCreate().map(function(n){return e.createTab(n)});this.tabbedLayout=new TabbedLayout({items:r,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout)},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter(function(r){return e.isValidMenuTabItem(r)}).filter(function(r){return e.isNotSuppressed(r)}).filter(function(r){return e.isModuleLoaded(r)})},t.prototype.isModuleLoaded=function(e){return e===t.TAB_COLUMNS?ModuleRegistry.isRegistered(ModuleNames.ColumnToolPanelModule):!0},t.prototype.isValidMenuTabItem=function(e){var r=!0,n=t.TABS_DEFAULT;return this.restrictTo!=null&&(r=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),r=r&&t.TABS_DEFAULT.indexOf(e)>-1,r||console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var r=null;switch(e.item){case this.tabItemColumns:r=t.TAB_COLUMNS;break;case this.tabItemFilter:r=t.TAB_FILTER;break;case this.tabItemGeneral:r=t.TAB_GENERAL;break}r&&this.activateTab(r)},t.prototype.activateTab=function(e){var r={type:t.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(r)},t.prototype.getMenuItems=function(){var e=this.getDefaultMenuOptions(),r,n=this.gridOptionsWrapper.getMainMenuItemsFunc();return n?r=n({column:this.column,defaultItems:e}):r=e,_.removeRepeatsFromArray(r,t.MENU_ITEM_SEPARATOR),r},t.prototype.getDefaultMenuOptions=function(){var e=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,o=n>0,a=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,s=this.column.isAllowValue(),l=this.column.isAllowRowGroup(),u=this.column.isPrimary(),c=this.columnModel.isPivotMode(),f=this.rowModel.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE,d=this.gridOptionsWrapper.isTreeData(),h=u&&o&&s||!u;r&&e.push("pinSubMenu"),h&&e.push("valueAggSubMenu"),(r||h)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),l&&this.column.isPrimary()&&(a?e.push("rowUnGroup"):e.push("rowGroup")),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns");var p=f&&(d||n>(c?1:0));return p&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new AgMenuList);var e=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:_.createIconNoSpan("menu",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:AgPromise.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(e){var r;e&&e.event&&e.event instanceof KeyboardEvent&&(r=e.event),this.hidePopupFunc(r&&{keyboardEvent:r});var n=this.focusService.getFocusedCell(),o=this.gridOptionsWrapper.getDocument();if(o.activeElement===o.body&&n){var a=n.rowIndex,s=n.rowPinned,l=n.column;this.focusService.setFocusedCell({rowIndex:a,column:l,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},t.prototype.createFilterPanel=function(){var e,r=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!r)throw new Error("AG Grid - Unable to instantiate filter");var n=function(o){var a;!((a=r)===null||a===void 0)&&a.filterPromise&&r.filterPromise.then(function(s){s&&s.afterGuiAttached&&s.afterGuiAttached(o)})};return this.tabItemFilter={title:_.createIconNoSpan("filter",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:(e=r)===null||e===void 0?void 0:e.guiPromise,afterAttachedCallback:n,name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper"),this.columnSelectPanel=this.createManagedBean(new PrimaryColsPanel);var r=this.column.getColDef().columnsMenuParams;r||(r={}),this.columnSelectPanel.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!r.contractColumnSelection,suppressColumnExpandAll:!!r.suppressColumnExpandAll,suppressColumnFilter:!!r.suppressColumnFilter,suppressColumnSelectAll:!!r.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!r.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},"columnMenu");var n=this.columnSelectPanel.getGui();return n.classList.add("ag-menu-column-select"),e.appendChild(n),this.tabItemColumns={title:_.createIconNoSpan("columns",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:AgPromise.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var r=e.container,n=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:r,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TAB_GENERAL="generalMenuTab",t.TAB_COLUMNS="columnsMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL,t.TAB_FILTER,t.TAB_COLUMNS],t.MENU_ITEM_SEPARATOR="separator",__decorate$y([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$y([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$y([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$y([Autowired("columnApi")],t.prototype,"columnApi",void 0),__decorate$y([Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0),__decorate$y([Autowired("rowModel")],t.prototype,"rowModel",void 0),__decorate$y([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$y([PostConstruct],t.prototype,"init",null),t}(BeanStub),__extends$Q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$x=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},CSS_MENU="ag-menu",CSS_CONTEXT_MENU_OPEN="ag-context-menu-open",ContextMenuFactory=function(i){__extends$Q(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,r,n){var o=[];if(_.exists(e)&&ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)&&r&&o.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator"),this.gridOptionsWrapper.isEnableCharts()&&ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule)&&ModuleRegistry.isRegistered(ModuleNames.GridChartsModule)&&(this.columnModel.isPivotMode()&&o.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&o.push("chartRange")),_.exists(e)){var a=!ModuleRegistry.isRegistered(ModuleNames.CsvExportModule),s=!ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule),l=this.gridOptionsWrapper.isSuppressExcelExport()||s,u=this.gridOptionsWrapper.isSuppressCsvExport()||a,c=_.isIOSUserAgent(),f=!c&&(!l||!u);f&&o.push("export")}if(this.gridOptionsWrapper.getContextMenuItemsFunc()){var d=this.gridOptionsWrapper.getContextMenuItemsFunc(),h={node:e,column:r,value:n,defaultItems:o.length?o:void 0};return d?d(h):void 0}return o},t.prototype.onContextMenu=function(e,r,n,o,a,s){if(!(!this.gridOptionsWrapper.isAllowContextMenuWithControlKey()&&e&&(e.ctrlKey||e.metaKey))&&(e&&this.blockMiddleClickScrollsIfNeeded(e),!this.gridOptionsWrapper.isSuppressContextMenu())){var l=e||r.touches[0];if(this.showMenu(n,o,a,l,s)){var u=e||r;u.preventDefault()}}},t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var r=this.gridOptionsWrapper,n=e.which;r.isSuppressMiddleClickScrolls()&&n===2&&e.preventDefault()},t.prototype.showMenu=function(e,r,n,o,a){var s=this,l=this.getMenuItems(e,r,n),u=this.ctrlsService.getGridBodyCtrl().getGui();if(l===void 0||_.missingOrEmpty(l))return!1;var c=new ContextMenu(l);this.createBean(c);var f=c.getGui(),d={column:r,rowNode:e,type:"contextMenu",mouseEvent:o,ePopup:f,nudgeY:1},h=this.gridOptionsWrapper.getLocaleTextFunc(),p=this.popupService.addPopup({modal:!0,eChild:f,closeOnEsc:!0,closedCallback:function(){u.classList.remove(CSS_CONTEXT_MENU_OPEN),s.destroyBean(c)},click:o,positionCallback:function(){s.popupService.positionPopupUnderMouseEvent(Object.assign({},{nudgeX:s.gridOptionsWrapper.isEnableRtl()?(f.offsetWidth+1)*-1:1},d))},anchorToElement:a,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return p&&(u.classList.add(CSS_CONTEXT_MENU_OPEN),c.afterGuiAttached({container:"contextMenu",hidePopup:p.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(BeanStub.EVENT_DESTROYED,function(){s.activeMenu===c&&(s.activeMenu=null)}),p&&c.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,p.hideFunc),!0},__decorate$x([Autowired("popupService")],t.prototype,"popupService",void 0),__decorate$x([Optional("rangeService")],t.prototype,"rangeService",void 0),__decorate$x([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),__decorate$x([Autowired("columnModel")],t.prototype,"columnModel",void 0),t=__decorate$x([Bean("contextMenuFactory")],t),t}(BeanStub),ContextMenu=function(i){__extends$Q(t,i);function t(e){var r=i.call(this,'<div class="'+CSS_MENU+'" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return t.prototype.addMenuItems=function(){var e=this,r=this.createManagedBean(new AgMenuList),n=this.menuItemMapper.mapWithStockItems(this.menuItems,null);r.addMenuItems(n),this.appendChild(r),this.menuList=r,r.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,function(o){return e.dispatchEvent(o)})},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var r=this.focusedCell,n=r.rowIndex,o=r.rowPinned,a=r.column,s=this.gridOptionsWrapper.getDocument();s.activeElement===s.body&&this.focusService.setFocusedCell({rowIndex:n,column:a,rowPinned:o,forceBrowserFocus:!0})}},t.prototype.destroy=function(){this.restoreFocusedCell(),i.prototype.destroy.call(this)},__decorate$x([Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0),__decorate$x([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$x([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),__decorate$x([PostConstruct],t.prototype,"addMenuItems",null),t}(Component),__extends$P=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$w=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MenuItemMapper=function(i){__extends$P(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.mapWithStockItems=function(e,r){var n=this;if(!e)return[];var o=[];return e.forEach(function(a){var s;if(typeof a=="string"?s=n.getStockMenuItem(a,r):s=a,!!s){var l=s,u=l.subMenu;u&&u instanceof Array&&(l.subMenu=n.mapWithStockItems(l.subMenu,r)),s!=null&&o.push(s)}}),o},t.prototype.getStockMenuItem=function(e,r){var n=this,o=this.gridOptionsWrapper.getLocaleTextFunc(),a=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();switch(e){case"pinSubMenu":return{name:o("pinColumn","Pin Column"),icon:_.createIconNoSpan("menuPin",this.gridOptionsWrapper,null),subMenu:["pinLeft","pinRight","clearPinned"]};case"pinLeft":return{name:o("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(r,Constants.PINNED_LEFT,"contextMenu")},checked:!!r&&r.isPinnedLeft()};case"pinRight":return{name:o("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(r,Constants.PINNED_RIGHT,"contextMenu")},checked:!!r&&r.isPinnedRight()};case"clearPinned":return{name:o("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(r,null,"contextMenu")},checked:!!r&&!r.isPinned()};case"valueAggSubMenu":return ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Aggregation from Menu")?{name:o("valueAggregation","Value Aggregation"),icon:_.createIconNoSpan("menuValue",this.gridOptionsWrapper,null),subMenu:this.createAggregationSubMenu(r)}:null;case"autoSizeThis":return{name:o("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(r,a,"contextMenu")}};case"autoSizeAll":return{name:o("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(a,"contextMenu")}};case"rowGroup":return{name:o("groupBy","Group by")+" "+_.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),action:function(){return n.columnModel.addRowGroupColumn(r,"contextMenu")},icon:_.createIconNoSpan("menuAddRowGroup",this.gridOptionsWrapper,null)};case"rowUnGroup":return{name:o("ungroupBy","Un-Group by")+" "+_.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),action:function(){return n.columnModel.removeRowGroupColumn(r,"contextMenu")},icon:_.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsWrapper,null)};case"resetColumns":return{name:o("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:o("expandAll","Expand All"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:o("collapseAll","Collapse All"),action:function(){return n.gridApi.collapseAll()}};case"copy":return ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy from Menu")?{name:o("copy","Copy"),shortcut:o("ctrlC","Ctrl+C"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy with Headers from Menu")?{name:o("copyWithHeaders","Copy with Headers"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy with Group Headers from Menu")?{name:o("copyWithGroupHeaders","Copy with Group Headers"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"paste":return ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Paste from Clipboard")?{name:o("paste","Paste"),shortcut:o("ctrlV","Ctrl+V"),disabled:!0,icon:_.createIconNoSpan("clipboardPaste",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var s=[],l=ModuleRegistry.isRegistered(ModuleNames.CsvExportModule),u=ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule);return!this.gridOptionsWrapper.isSuppressCsvExport()&&l&&s.push("csvExport"),!this.gridOptionsWrapper.isSuppressExcelExport()&&u&&s.push("excelExport"),{name:o("export","Export"),subMenu:s,icon:_.createIconNoSpan("save",this.gridOptionsWrapper,null)};case"csvExport":return{name:o("csvExport","CSV Export"),icon:_.createIconNoSpan("csvExport",this.gridOptionsWrapper,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:o("excelExport","Excel Export"),icon:_.createIconNoSpan("excelExport",this.gridOptionsWrapper,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";default:var c=this.getChartItems(e);return c||(console.warn("AG Grid: unknown menu item type "+e),null)}},t.prototype.getChartItems=function(e){var r=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),o=function(s,l,u){return{name:n(s,l),action:function(){return r.chartService.createPivotChart({chartType:u})}}},a=function(s,l,u){return{name:n(s,l),action:function(){return r.chartService.createChartFromCurrentRange(u)}}};switch(e){case"pivotChart":return{name:n("pivotChart","Pivot Chart"),subMenu:["pivotColumnChart","pivotBarChart","pivotPieChart","pivotLineChart","pivotXYChart","pivotAreaChart"],icon:_.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"chartRange":return{name:n("chartRange","Chart Range"),subMenu:["rangeColumnChart","rangeBarChart","rangePieChart","rangeLineChart","rangeXYChart","rangeAreaChart","rangeHistogramChart","rangeCombinationChart"],icon:_.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"pivotColumnChart":return{name:n("columnChart","Column"),subMenu:["pivotGroupedColumn","pivotStackedColumn","pivotNormalizedColumn"]};case"pivotGroupedColumn":return o("groupedColumn","Grouped&lrm;","groupedColumn");case"pivotStackedColumn":return o("stackedColumn","Stacked&lrm;","stackedColumn");case"pivotNormalizedColumn":return o("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"rangeColumnChart":return{name:n("columnChart","Column"),subMenu:["rangeGroupedColumn","rangeStackedColumn","rangeNormalizedColumn"]};case"rangeGroupedColumn":return a("groupedColumn","Grouped&lrm;","groupedColumn");case"rangeStackedColumn":return a("stackedColumn","Stacked&lrm;","stackedColumn");case"rangeNormalizedColumn":return a("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"pivotBarChart":return{name:n("barChart","Bar"),subMenu:["pivotGroupedBar","pivotStackedBar","pivotNormalizedBar"]};case"pivotGroupedBar":return o("groupedBar","Grouped&lrm;","groupedBar");case"pivotStackedBar":return o("stackedBar","Stacked&lrm;","stackedBar");case"pivotNormalizedBar":return o("normalizedBar","100% Stacked&lrm;","normalizedBar");case"rangeBarChart":return{name:n("barChart","Bar"),subMenu:["rangeGroupedBar","rangeStackedBar","rangeNormalizedBar"]};case"rangeGroupedBar":return a("groupedBar","Grouped&lrm;","groupedBar");case"rangeStackedBar":return a("stackedBar","Stacked&lrm;","stackedBar");case"rangeNormalizedBar":return a("normalizedBar","100% Stacked&lrm;","normalizedBar");case"pivotPieChart":return{name:n("pieChart","Pie"),subMenu:["pivotPie","pivotDoughnut"]};case"pivotPie":return o("pie","Pie&lrm;","pie");case"pivotDoughnut":return o("doughnut","Doughnut&lrm;","doughnut");case"rangePieChart":return{name:n("pieChart","Pie"),subMenu:["rangePie","rangeDoughnut"]};case"rangePie":return a("pie","Pie&lrm;","pie");case"rangeDoughnut":return a("doughnut","Doughnut&lrm;","doughnut");case"pivotLineChart":return o("line","Line&lrm;","line");case"rangeLineChart":return a("line","Line&lrm;","line");case"pivotXYChart":return{name:n("xyChart","X Y (Scatter)"),subMenu:["pivotScatter","pivotBubble"]};case"pivotScatter":return o("scatter","Scatter&lrm;","scatter");case"pivotBubble":return o("bubble","Bubble&lrm;","bubble");case"rangeXYChart":return{name:n("xyChart","X Y (Scatter)"),subMenu:["rangeScatter","rangeBubble"]};case"rangeScatter":return a("scatter","Scatter&lrm;","scatter");case"rangeBubble":return a("bubble","Bubble&lrm;","bubble");case"pivotAreaChart":return{name:n("areaChart","Area"),subMenu:["pivotArea","pivotStackedArea","pivotNormalizedArea"]};case"pivotArea":return o("area","Area&lrm;","area");case"pivotStackedArea":return o("stackedArea","Stacked&lrm;","stackedArea");case"pivotNormalizedArea":return o("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeAreaChart":return{name:n("areaChart","Area"),subMenu:["rangeArea","rangeStackedArea","rangeNormalizedArea"]};case"rangeArea":return a("area","Area&lrm;","area");case"rangeStackedArea":return a("stackedArea","Stacked&lrm;","stackedArea");case"rangeNormalizedArea":return a("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeHistogramChart":return a("histogramChart","Histogram&lrm;","histogram");case"rangeColumnLineCombo":return a("columnLineCombo","Column & Line&lrm;","columnLineCombo");case"rangeAreaColumnCombo":return a("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo");case"rangeCombinationChart":return{name:n("combinationChart","Combination"),subMenu:["rangeColumnLineCombo","rangeAreaColumnCombo"]};default:return null}},t.prototype.createAggregationSubMenu=function(e){var r=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),o;if(e.isPrimary())o=e;else{var a=e.getColDef().pivotValueColumn;o=_.exists(a)?a:void 0}var s=[];if(o){var l=o.isValueActive(),u=this.aggFuncService.getFuncNames(o);u.forEach(function(c){s.push({name:n(c,c),action:function(){r.columnModel.setColumnAggFunc(o,c,"contextMenu"),r.columnModel.addValueColumn(o,"contextMenu")},checked:l&&o.getAggFunc()===c})})}return s},__decorate$w([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$w([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$w([Optional("clipboardService")],t.prototype,"clipboardService",void 0),__decorate$w([Optional("aggFuncService")],t.prototype,"aggFuncService",void 0),__decorate$w([Optional("chartService")],t.prototype,"chartService",void 0),t=__decorate$w([Bean("menuItemMapper")],t),t}(BeanStub),MenuModule={moduleName:ModuleNames.MenuModule,beans:[EnterpriseMenuFactory,ContextMenuFactory,MenuItemMapper],dependantModules:[EnterpriseCoreModule]},__extends$O=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$3=function(){return __assign$3=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$3.apply(this,arguments)},__decorate$v=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MultiFilter=function(i){__extends$O(t,i);function t(){var e=i.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onFocusIn:function(r){return e.onFocusIn(r)}})},t.getFilterDefs=function(e){var r=e.filters;return r&&r.length>0?r:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},t.prototype.init=function(e){var r=this;this.params=e,this.filterDefs=t.getFilterDefs(e);var n=e.column,o=e.filterChangedCallback;this.column=n,this.filterChangedCallback=o;var a=[];return this.filterDefs.forEach(function(s,l){var u=r.createFilter(s,l);u!=null&&a.push(u)}),AgPromise.all(a).then(function(s){r.filters=s,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach(function(l){return l()}),r.afterFiltersReadyFuncs.length=0})},t.prototype.refreshGui=function(e){var r=this;e!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach(function(n,o){o>0&&r.appendChild(_.loadTemplate('<div class="ag-filter-separator"></div>'));var a=r.filterDefs[o],s=r.getFilterTitle(n,a),l;if(a.display==="subMenu"&&e!=="toolPanel"){var u=r.insertFilterMenu(n,s);l=u.getGui()}else if(a.display==="subMenu"||a.display==="accordion"){var c=r.insertFilterGroup(n,s);l=c.getGui()}else l=n.getGui();r.appendChild(l)}),this.lastOpenedInContainer=e)},t.prototype.getFilterTitle=function(e,r){if(r.title!=null)return r.title;var n=e;return typeof n.getFilterTitle=="function"?n.getFilterTitle():"Filter"},t.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach(function(e){return e()}),this.guiDestroyFuncs.length=0},t.prototype.insertFilterMenu=function(e,r){var n=this,o=this.createBean(new AgMenuItemComponent({name:r,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return o.setParentComponent(this),this.guiDestroyFuncs.push(function(){return n.destroyBean(o)}),this.addManagedListener(o,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,function(a){n.lastActivatedMenuItem&&n.lastActivatedMenuItem!==a.menuItem&&n.lastActivatedMenuItem.deactivate(),n.lastActivatedMenuItem=a.menuItem}),o.addGuiEventListener("focusin",function(){return o.activate()}),o.addGuiEventListener("focusout",function(){o.isSubMenuOpen()||o.deactivate()}),o},t.prototype.insertFilterGroup=function(e,r){var n=this,o=this.createBean(new AgGroupComponent({title:r,cssIdentifier:"multi-filter"}));if(this.guiDestroyFuncs.push(function(){return n.destroyBean(o)}),o.addItem(e.getGui()),o.toggleGroupExpand(!1),e.afterGuiAttached){var a={container:this.lastOpenedInContainer,suppressFocus:!0};o.addManagedListener(o,AgGroupComponent.EVENT_EXPANDED,function(){return e.afterGuiAttached(a)})}return o},t.prototype.isFilterActive=function(){return this.filters.some(function(e){return e.isFilterActive()})},t.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},t.prototype.doesFilterPass=function(e,r){var n=!0;return this.filters.forEach(function(o){!n||o===r||!o.isFilterActive()||(n=o.doesFilterPass(e))}),n},t.prototype.getFilterType=function(){return"multi"},t.prototype.getModelFromUi=function(){var e={filterType:this.getFilterType(),filterModels:this.filters.map(function(r){var n=r;return typeof n.getModelFromUi=="function"?n.getModelFromUi():null})};return e},t.prototype.getModel=function(){if(!this.isFilterActive())return null;var e={filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return r.isFilterActive()?r.getModel():null})};return e},t.prototype.setModel=function(e){var r=this,n=function(a,s){return new AgPromise(function(l){var u=a.setModel(s);u?u.then(function(){return l()}):l()})},o=[];return e==null?o=this.filters.map(function(a,s){var l=n(a,null);return r.updateActiveList(s),l}):this.filters.forEach(function(a,s){var l=e.filterModels.length>s?e.filterModels[s]:null,u=n(a,l);o.push(u),r.updateActiveList(s)}),AgPromise.all(o).then(function(){})},t.prototype.applyModel=function(){var e=!1;return this.filters.forEach(function(r){r instanceof ProvidedFilter&&(e=r.applyModel()||e)}),e},t.prototype.getChildFilterInstance=function(e){return this.filters[e]},t.prototype.afterGuiAttached=function(e){e&&this.refreshGui(e.container);var r=this.params.filters,n=r&&r.some(function(s){return s.display&&s.display!=="inline"});this.executeFunctionIfExists("afterGuiAttached",__assign$3(__assign$3({},e||{}),{suppressFocus:n}));var o=this.gridOptionsWrapper.getDocument(),a=o.activeElement;n&&(a===o.body||this.getGui().contains(a))&&this.forceFocusOutOfContainer(!0)},t.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},t.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},t.prototype.destroy=function(){var e=this;this.filters.forEach(function(r){r.setModel(null),e.destroyBean(r)}),this.filters.length=0,this.destroyChildren(),i.prototype.destroy.call(this)},t.prototype.executeFunctionIfExists=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];_.forEachReverse(this.filters,function(o){var a=o[e];typeof a=="function"&&a.apply(o,r)})},t.prototype.createFilter=function(e,r){var n=this,o=this.params,a=o.filterModifiedCallback,s=o.doesRowPassOtherFilter,l,u=__assign$3(__assign$3({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:a,filterChangedCallback:function(d){n.executeWhenAllFiltersReady(function(){return n.filterChanged(r,d)})},doesRowPassOtherFilter:function(d){return s(d)&&n.doesFilterPass({node:d,data:d.data},l)}}),c=this.userComponentFactory.getFilterDetails(e,u,"agTextColumnFilter");if(!c)return null;var f=c.newAgStackInstance();return f&&f.then(function(d){return l=d}),f},t.prototype.executeWhenAllFiltersReady=function(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)},t.prototype.updateActiveList=function(e){var r=this.filters[e];_.removeFromArray(this.activeFilterIndices,e),r.isFilterActive()&&this.activeFilterIndices.push(e)},t.prototype.filterChanged=function(e,r){this.updateActiveList(e),this.filterChangedCallback(r);var n=this.filters[e];this.filters.forEach(function(o){o!==n&&typeof o.onAnyFilterChanged=="function"&&o.onAnyFilterChanged()})},t.prototype.onFocusIn=function(e){return this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},__decorate$v([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$v([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),__decorate$v([PostConstruct],t.prototype,"postConstruct",null),t}(TabGuardComp),__extends$N=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign$2=function(){return __assign$2=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$2.apply(this,arguments)},__decorate$u=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},MultiFloatingFilterComp=function(i){__extends$N(t,i);function t(){var e=i.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e}return t.prototype.init=function(e){var r=this;this.params=e;var n=e.filterParams,o=[];return MultiFilter.getFilterDefs(n).forEach(function(a,s){var l=__assign$2(__assign$2({},e),{parentFilterInstance:function(c){r.parentMultiFilterInstance(function(f){var d=f.getChildFilterInstance(s);d!=null&&c(d)})}}),u=r.createFloatingFilter(a,l);u!=null&&o.push(u)}),AgPromise.all(o).then(function(a){a.forEach(function(s,l){r.floatingFilters.push(s);var u=s.getGui();r.appendChild(u),l>0&&_.setDisplayed(u,!1)})})},t.prototype.onParentModelChanged=function(e,r){var n=this;r&&r.afterFloatingFilter||this.parentMultiFilterInstance(function(o){if(e==null)n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(null,r),_.setDisplayed(s.getGui(),l===0)});else{var a=o.getLastActiveFilterIndex();n.floatingFilters.forEach(function(s,l){var u=e.filterModels.length>l?e.filterModels[l]:null;s.onParentModelChanged(u,r);var c=a==null?l===0:l===a;_.setDisplayed(s.getGui(),c)})}})},t.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,i.prototype.destroy.call(this)},t.prototype.createFloatingFilter=function(e,r){var n=this.userComponentFactory.getDefaultFloatingFilterType(e)||"agTextColumnFloatingFilter",o=this.userComponentFactory.getFloatingFilterCompDetails(e,r,n);return o?o.newAgStackInstance():null},t.prototype.parentMultiFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof MultiFilter))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as it's parent");e(r)})},__decorate$u([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(Component),MultiFilterModule={moduleName:ModuleNames.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:MultiFilter},{componentName:"agMultiColumnFloatingFilter",componentClass:MultiFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]},__extends$M=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$t=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RichSelectRow=function(i){__extends$M(t,i);function t(e){var r=i.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return r.params=e,r}return t.prototype.setState=function(e,r,n){var o=this.populateWithRenderer(e,r);o||this.populateWithoutRenderer(e,r),this.updateSelected(n)},t.prototype.updateSelected=function(e){this.addOrRemoveCssClass("ag-rich-select-row-selected",e)},t.prototype.populateWithoutRenderer=function(e,r){var n=r!=null,o=n?r:e;_.exists(o)&&o!==""?this.getGui().textContent=o.toString():this.getGui().innerHTML="&nbsp;"},t.prototype.populateWithRenderer=function(e,r){var n=this,o={value:e,valueFormatted:r,api:this.gridOptionsWrapper.getApi()},a=this.userComponentFactory.getCellRendererDetails(this.params,o),s=a?a.newAgStackInstance():void 0;return s!=null?_.bindCellRendererToHtmlElement(s,this.getGui()):this.getGui().innerText=o.valueFormatted!=null?o.valueFormatted:o.value,s?(s.then(function(l){n.addDestroyFunc(function(){n.getContext().destroyBean(l)})}),!0):!1},__decorate$t([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(Component),__extends$L=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$s=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RichSelectCellEditor=function(i){__extends$L(t,i);function t(){var e=i.call(this,t.TEMPLATE)||this;return e.selectionConfirmed=!1,e.searchString="",e}return t.prototype.init=function(e){this.params=e,this.selectedValue=e.value,this.originalSelectedValue=e.value,this.focusAfterAttached=e.cellStartedEdit;var r=_.createIconNoSpan("smallDown",this.gridOptionsWrapper);if(r.classList.add("ag-rich-select-value-icon"),this.eValue.appendChild(r),this.virtualList=this.createManagedBean(new VirtualList("rich-select")),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),_.exists(this.params.cellHeight)&&this.virtualList.setRowHeight(this.params.cellHeight),this.renderSelectedValue(),_.missing(e.values)){console.warn("AG Grid: richSelectCellEditor requires values for it to work");return}var n=e.values;this.virtualList.setModel({getRowCount:function(){return n.length},getRow:function(s){return n[s]}}),this.addGuiEventListener("keydown",this.onKeyDown.bind(this));var o=this.virtualList.getGui();this.addManagedListener(o,"click",this.onClick.bind(this)),this.addManagedListener(o,"mousemove",this.onMouseMove.bind(this));var a=_.exists(e.searchDebounceDelay)?e.searchDebounceDelay:300;this.clearSearchString=_.debounce(this.clearSearchString,a),_.exists(e.charPress)&&this.searchText(e.charPress)},t.prototype.onKeyDown=function(e){var r=e.key;switch(e.preventDefault(),r){case KeyCode.ENTER:this.onEnterKeyDown();break;case KeyCode.TAB:this.confirmSelection();break;case KeyCode.DOWN:case KeyCode.UP:this.onNavigationKeyPressed(e,r);break;default:this.searchText(e)}},t.prototype.confirmSelection=function(){this.selectionConfirmed=!0},t.prototype.onEnterKeyDown=function(){this.confirmSelection(),this.params.stopEditing()},t.prototype.onNavigationKeyPressed=function(e,r){e.preventDefault();var n=this.params.values.indexOf(this.selectedValue),o=r===KeyCode.UP?n-1:n+1;if(o>=0&&o<this.params.values.length){var a=this.params.values[o];this.setSelectedValue(a)}},t.prototype.searchText=function(e){if(typeof e!="string"){var r=e.key;if(r===KeyCode.BACKSPACE)this.searchString=this.searchString.slice(0,-1),r="";else if(!_.isEventFromPrintableCharacter(e))return;this.searchText(r);return}this.searchString+=e,this.runSearch(),this.clearSearchString()},t.prototype.runSearch=function(){var e=this,r=this.params.values,n;if((typeof r[0]=="number"||typeof r[0]=="string")&&(n=r.map(String)),typeof r[0]=="object"&&this.params.colDef.keyCreator&&(n=r.map(function(l){var u={value:l,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsWrapper.getApi(),columnApi:e.gridOptionsWrapper.getColumnApi(),context:e.gridOptionsWrapper.getContext()};return e.params.colDef.keyCreator(u)})),!!n){var o=_.fuzzySuggestions(this.searchString,n,!0,!0)[0];if(o){var a=n.indexOf(o),s=r[a];this.setSelectedValue(s)}}},t.prototype.clearSearchString=function(){this.searchString=""},t.prototype.renderSelectedValue=function(){var e=this,r=this.params.formatValue(this.selectedValue),n=this.eValue,o={value:this.selectedValue,valueFormatted:r,api:this.gridOptionsWrapper.getApi()},a=this.userComponentFactory.getCellRendererDetails(this.params,o),s=a?a.newAgStackInstance():void 0;s?(_.bindCellRendererToHtmlElement(s,n),s.then(function(l){e.addDestroyFunc(function(){return e.getContext().destroyBean(l)})})):_.exists(this.selectedValue)?n.innerText=r:_.clearElement(n)},t.prototype.setSelectedValue=function(e){if(this.selectedValue!==e){var r=this.params.values.indexOf(e);r!==-1&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(r),this.virtualList.forEachRenderedRow(function(n,o){n.updateSelected(r===o)}),this.virtualList.focusRow(r))}},t.prototype.createRowComponent=function(e){var r=this.params.formatValue(e),n=new RichSelectRow(this.params);return this.getContext().createBean(n),n.setState(e,r,e===this.selectedValue),n},t.prototype.onMouseMove=function(e){var r=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),o=e.clientY-r.top+n,a=Math.floor(o/this.virtualList.getRowHeight()),s=this.params.values[a];s!==void 0&&this.setSelectedValue(s)},t.prototype.onClick=function(){this.confirmSelection(),this.params.stopEditing()},t.prototype.afterGuiAttached=function(){var e=this.params.values.indexOf(this.selectedValue);if(this.virtualList.refresh(),e>=0&&this.virtualList.ensureIndexVisible(e),this.virtualList.refresh(),this.focusAfterAttached){var r=e!==-1?e:0;this.params.values.length?this.virtualList.focusRow(r):this.getGui().focus()}},t.prototype.getValue=function(){return this.selectionConfirmed?this.selectedValue:this.originalSelectedValue},t.TEMPLATE=`<div class="ag-rich-select" tabindex="-1">
            <div ref="eValue" class="ag-rich-select-value"></div>
            <div ref="eList" class="ag-rich-select-list"></div>
        </div>`,__decorate$s([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),__decorate$s([RefSelector("eValue")],t.prototype,"eValue",void 0),__decorate$s([RefSelector("eList")],t.prototype,"eList",void 0),t}(PopupComponent),RichSelectModule={moduleName:ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:RichSelectCellEditor},{componentName:"agRichSelectCellEditor",componentClass:RichSelectCellEditor}],dependantModules:[EnterpriseCoreModule]},__extends$K=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$r=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ServerSideRowModel=function(i){__extends$K(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=_.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e}return t.prototype.ensureRowHeightsValid=function(){return!1},t.prototype.start=function(){this.started=!0;var e=this.gridOptionsWrapper.getServerSideDatasource();e&&this.setDatasource(e)},t.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.verifyProps()},t.prototype.verifyProps=function(){if(this.gridOptionsWrapper.getInitialGroupOrderComparator()!=null){var e="AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.";_.doOnce(function(){return console.warn(e)},"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsWrapper.isRowSelection()&&this.gridOptionsWrapper.getRowIdFunc()==null){var r="AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.";_.doOnce(function(){return console.warn(r)},"SSRM.SelectionNeedsRowNodeIdFunc")}},t.prototype.setDatasource=function(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())},t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();return e?e.isLastRowIndexKnown():!1},t.prototype.onColumnEverything=function(){if(!this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns()){if(!this.storeParams){this.resetRootStore();return}var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),o=!_.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),a=!_.jsonEquals(this.storeParams.rowGroupCols,e),s=!_.jsonEquals(this.storeParams.pivotCols,n),l=!_.jsonEquals(this.storeParams.valueCols,r),u=o||a||s||l;u&&this.resetRootStore()}},t.prototype.destroyRootStore=function(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},t.prototype.refreshAfterSort=function(e,r){this.storeParams&&(this.storeParams.sortModel=e);var n=this.getRootStore();n&&(n.refreshAfterSort(r),this.onStoreUpdated())},t.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new RowNode(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds());var e={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.dispatchModelUpdated(!0)},t.prototype.columnsToValueObjects=function(e){var r=this;return e.map(function(n){return{id:n.getId(),aggFunc:n.getAggFunc(),displayName:r.columnModel.getDisplayNameForColumn(n,"model"),field:n.getColDef().field}})},t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),o=this.gridOptionsWrapper.isDynamicRowHeight(),a={valueCols:r,rowGroupCols:e,pivotCols:n,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new NumberSequence,dynamicRowHeight:o};return a},t.prototype.getParams=function(){return this.storeParams},t.prototype.dispatchModelUpdated=function(e){e===void 0&&(e=!1);var r={type:Events.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1};this.eventService.dispatchEvent(r)},t.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();e&&e.setDisplayIndexes(new NumberSequence,{value:0})},t.prototype.retryLoads=function(){var e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())},t.prototype.getRow=function(e){var r=this.getRootStore();if(r)return r.getRowUsingDisplayIndex(e)},t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=!0,this.forEachNode(function(r){r.group&&!r.stub&&r.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},t.prototype.refreshAfterFilter=function(e,r){this.storeParams&&(this.storeParams.filterModel=e);var n=this.getRootStore();n&&(n.refreshAfterFilter(r),this.onStoreUpdated())},t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},t.prototype.getRowCount=function(){var e=this.getRootStore();return e?e.getDisplayIndexEnd():0},t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();return e?e.getRowCount():1},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.getRootStore();return r?r.getTopLevelRowDisplayedIndex(e):e},t.prototype.getRowBounds=function(e){var r=this.getRootStore();if(!r){var n=this.gridOptionsWrapper.getRowHeightAsNumber();return{rowTop:0,rowHeight:n}}return r.getRowBounds(e)},t.prototype.getRowIndexAtPixel=function(e){var r=this.getRootStore();return e<=0||!r?0:r.getRowIndexAtPixel(e)},t.prototype.isEmpty=function(){return!1},t.prototype.isRowsToRender=function(){return this.getRootStore()!=null&&this.getRowCount()>0},t.prototype.getType=function(){return Constants.ROW_MODEL_TYPE_SERVER_SIDE},t.prototype.forEachNode=function(e){var r=this.getRootStore();r&&r.forEachNodeDeep(e)},t.prototype.forEachNodeAfterFilterAndSort=function(e){var r=this.getRootStore();r&&r.forEachNodeDeepAfterFilterAndSort(e)},t.prototype.executeOnStore=function(e,r){var n=this.getRootStore();if(n){var o=n.getChildStore(e);o&&r(o)}},t.prototype.refreshStore=function(e){e===void 0&&(e={});var r=e.route?e.route:[];this.executeOnStore(r,function(n){return n.refreshStore(e.purge==!0)})},t.prototype.getStoreState=function(){var e=[],r=this.getRootStore();return r&&r.addStoreStates(e),e},t.prototype.getNodesInRangeForSelection=function(e,r){return _.exists(r)&&e.parent!==r.parent?[]:e.parent.childStore.getRowNodesInRange(r,e)},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n),n.detailNode&&n.detailNode.id===e&&(r=n.detailNode)}),r},t.prototype.isRowPresent=function(e){var r=this.getRowNode(e.id);return!!r},__decorate$r([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$r([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$r([Autowired("sortController")],t.prototype,"sortController",void 0),__decorate$r([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$r([Autowired("ssrmSortService")],t.prototype,"sortListener",void 0),__decorate$r([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),__decorate$r([Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),__decorate$r([Autowired("beans")],t.prototype,"beans",void 0),__decorate$r([PreDestroy],t.prototype,"destroyDatasource",null),__decorate$r([PostConstruct],t.prototype,"addEventListeners",null),__decorate$r([PreDestroy],t.prototype,"destroyRootStore",null),t=__decorate$r([Bean("rowModel")],t),t}(BeanStub),__extends$J=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$q=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},StoreUtils=function(i){__extends$J(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.loadFromDatasource=function(e){var r=e.storeParams,n=e.parentBlock,o=e.parentNode,a=o.getGroupKeys();if(r.datasource){var s={startRow:e.startRow,endRow:e.endRow,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:a,filterModel:r.filterModel,sortModel:r.sortModel},l={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:s,parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};window.setTimeout(function(){if(!r.datasource||!n.isAlive()){e.failCallback();return}r.datasource.getRows(l)},0)}},t.prototype.getChildStore=function(e,r,n){if(_.missingOrEmpty(e))return r;var o=e[0],a=n(o);if(a){var s=e.slice(1,e.length),l=a.childStore;return l?l.getChildStore(s):null}return null},t.prototype.isServerRefreshNeeded=function(e,r,n){if(n.valueColChanged||n.secondaryColChanged)return!0;var o=e.level+1,a=o<r.length,s=!a;if(s)return!0;var l=r[o].id,u=n.changedColumns.indexOf(l)>-1;if(u)return!0;var c=this.columnModel.getAllGridColumns(),f=c.filter(function(d){return d.getColDef().showRowGroup&&n.changedColumns.includes(d.getId())}).map(function(d){return d.getColDef().showRowGroup}).some(function(d){return d===!0||d===l});return f},__decorate$q([Autowired("columnApi")],t.prototype,"columnApi",void 0),__decorate$q([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$q([Autowired("gridApi")],t.prototype,"gridApi",void 0),t=__decorate$q([Bean("ssrmStoreUtils")],t),t}(BeanStub),__extends$I=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$p=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},BlockUtils=function(i){__extends$I(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},t.prototype.createRowNode=function(e){var r=new RowNode(this.beans),n=e.rowHeight!=null?e.rowHeight:this.rowHeight;return r.setRowHeight(n),r.group=e.group,r.leafGroup=e.leafGroup,r.level=e.level,r.uiLevel=e.level,r.parent=e.parent,r.stub=!0,r.group&&(r.expanded=!1,r.field=e.field,r.rowGroupColumn=e.rowGroupColumn),r},t.prototype.destroyRowNodes=function(e){var r=this;e&&e.forEach(function(n){return r.destroyRowNode(n)})},t.prototype.destroyRowNode=function(e,r){r===void 0&&(r=!1),e.childStore&&!r&&(this.destroyBean(e.childStore),e.childStore=null),e.clearRowTopAndRowIndex(),e.id!=null&&this.nodeManager.removeNode(e)},t.prototype.setTreeGroupInfo=function(e){var r=this.gridOptionsWrapper.getIsServerSideGroupFunc(),n=this.gridOptionsWrapper.getServerSideGroupKeyFunc();r!=null&&(e.setGroup(r(e.data)),e.group&&n!=null&&(e.key=n(e.data))),!e.group&&e.childStore!=null&&(this.destroyBean(e.childStore),e.childStore=null)},t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),(e.key===null||e.key===void 0)&&_.doOnce(function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn("column = "+e.rowGroupColumn.getId()),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey")},t.prototype.setMasterDetailInfo=function(e){var r=this.gridOptionsWrapper.getIsRowMasterFunc();r!=null?e.master=r(e.data):e.master=!0},t.prototype.updateDataIntoRowNode=function(e,r){e.updateData(r),this.usingTreeData?this.setTreeGroupInfo(e):e.group||this.usingMasterDetail},t.prototype.setDataIntoRowNode=function(e,r,n,o){e.stub=!1,_.exists(r)?(e.setDataAndId(r,n),this.usingTreeData?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(this.usingTreeData||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),_.exists(r)&&e.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(e,!1,o).height)},t.prototype.setChildCountIntoRowNode=function(e){var r=this.gridOptionsWrapper.getChildCountFunc();r&&(e.allChildrenCount=r(e.data))},t.prototype.setGroupDataIntoRowNode=function(e){var r=this,n=this.columnModel.getGroupDisplayColumns(),o=this.gridOptionsWrapper.isTreeData();n.forEach(function(a){if(e.groupData==null&&(e.groupData={}),o)e.groupData[a.getColId()]=e.key;else if(a.isRowGroupDisplayed(e.rowGroupColumn.getId())){var s=r.valueService.getValue(e.rowGroupColumn,e);e.groupData[a.getColId()]=s}})},t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex();var r=e.group&&_.exists(e.childStore);if(r){var n=e.childStore;n.clearDisplayIndexes()}var o=e.master&&e.detailNode;o&&e.detailNode.clearRowTopAndRowIndex()},t.prototype.setDisplayIndex=function(e,r,n){e.setRowIndex(r.next()),e.setRowTop(n.value),n.value+=e.rowHeight;var o=e.master;o&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(r.next()),e.detailNode.setRowTop(n.value),n.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex());var a=e.group&&_.exists(e.childStore);if(a){var s=e.childStore;e.expanded?s.setDisplayIndexes(r,n):s.clearDisplayIndexes()}},t.prototype.binarySearchForDisplayIndex=function(e,r){var n=0,o=r.length-1;if(_.missing(o)||_.missing(n)){console.warn("AG Grid: error: topPointer = "+o+", bottomPointer = "+n);return}for(;;){var a=Math.floor((n+o)/2),s=r[a];if(s.rowIndex===e)return s;var l=s.master&&s.expanded,u=s.detailNode;if(l&&u&&u.rowIndex===e)return s.detailNode;var c=s.childStore;if(s.expanded&&c&&c.isDisplayIndexInStore(e))return c.getRowUsingDisplayIndex(e);if(s.rowIndex<e)n=a+1;else if(s.rowIndex>e)o=a-1;else{console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");return}}},t.prototype.extractRowBounds=function(e,r){var n=function(a){return{rowHeight:a.rowHeight,rowTop:a.rowTop}};if(e.rowIndex===r)return n(e);if(e.group&&e.expanded&&_.exists(e.childStore)){var o=e.childStore;if(o.isDisplayIndexInStore(r))return o.getRowBounds(r)}else if(e.master&&e.expanded&&_.exists(e.detailNode)&&e.detailNode.rowIndex===r)return n(e.detailNode)},t.prototype.getIndexAtPixel=function(e,r){if(e.isPixelInRange(r))return e.rowIndex;var n=e.master&&e.expanded,o=e.detailNode;if(n&&o&&o.isPixelInRange(r))return e.detailNode.rowIndex;if(e.group&&e.expanded&&_.exists(e.childStore)){var a=e.childStore;if(a.isPixelInRange(r))return a.getRowIndexAtPixel(r)}return null},t.prototype.createNodeIdPrefix=function(e){for(var r=[],n=e;n&&n.level>=0;)r.push(n.key),n=n.parent;if(r.length>0)return r.reverse().join("-")},t.prototype.checkOpenByDefault=function(e){if(e.isExpandable()){var r=this.gridOptionsWrapper.getIsServerSideGroupOpenByDefaultFunc();if(r){var n={data:e.data,rowNode:e},o=r(n);o&&window.setTimeout(function(){return e.setExpanded(!0)},0)}}},__decorate$p([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$p([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$p([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),__decorate$p([Autowired("beans")],t.prototype,"beans",void 0),__decorate$p([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$p([Bean("ssrmBlockUtils")],t),t}(BeanStub),__decorate$o=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NodeManager=function(){function i(){this.rowNodes={}}return i.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},i.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},i.prototype.clear=function(){this.rowNodes={}},__decorate$o([PreDestroy],i.prototype,"clear",null),i=__decorate$o([Bean("ssrmNodeManager")],i),i}(),__extends$H=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$n=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TransactionManager=function(i){__extends$H(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.asyncTransactions=[],e}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()},t.prototype.applyTransactionAsync=function(e,r){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:r})},t.prototype.scheduleExecuteAsync=function(){var e=this,r=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(function(){e.executeAsyncTransactions()},r)},t.prototype.executeAsyncTransactions=function(){var e=this;if(this.asyncTransactions){var r=[],n=[],o=[],a=!1;if(this.asyncTransactions.forEach(function(l){var u;e.serverSideRowModel.executeOnStore(l.transaction.route,function(f){u=f.applyTransaction(l.transaction)}),u==null&&(u={status:ServerSideTransactionResultStatus.StoreNotFound}),n.push(u);var c=u.status==ServerSideTransactionResultStatus.StoreLoading;if(c){o.push(l);return}l.callback&&r.push(function(){return l.callback(u)}),u.status===ServerSideTransactionResultStatus.Applied&&(a=!0)}),r.length>0&&window.setTimeout(function(){r.forEach(function(l){return l()})},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=o,a&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:Events.EVENT_STORE_UPDATED})),n.length>0){var s={type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(s)}}},t.prototype.flushAsyncTransactions=function(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},t.prototype.applyTransaction=function(e){var r=this,n;return this.serverSideRowModel.executeOnStore(e.route,function(o){n=o.applyTransaction(e)}),n?(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:Events.EVENT_STORE_UPDATED}),n.update&&n.update.length&&setTimeout(function(){r.rowRenderer.refreshFullWidthRows(n.update)},0),n):{status:ServerSideTransactionResultStatus.StoreNotFound}},__decorate$n([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),__decorate$n([Autowired("valueCache")],t.prototype,"valueCache",void 0),__decorate$n([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),__decorate$n([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$n([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$n([Bean("ssrmTransactionManager")],t),t}(BeanStub),__extends$G=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$m=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ExpandListener=function(i){__extends$G(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},t.prototype.onRowGroupOpened=function(e){var r=e.node;if(r.expanded){if(r.master)this.createDetailNode(r);else if(_.missing(r.childStore)){var n=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(n,r))}}else this.gridOptionsWrapper.isPurgeClosedRowNodes()&&_.exists(r.childStore)&&(r.childStore=this.destroyBean(r.childStore));var o={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(o)},t.prototype.createDetailNode=function(e){if(_.exists(e.detailNode))return e.detailNode;var r=new RowNode(this.beans);r.detail=!0,r.selectable=!1,r.parent=e,_.exists(e.id)&&(r.id="detail_"+e.id),r.data=e.data,r.level=e.level+1;var n=200,o=this.gridOptionsWrapper.getRowHeightForNode(r).height;return r.rowHeight=o||n,e.detailNode=r,r},__decorate$m([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),__decorate$m([Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),__decorate$m([Autowired("beans")],t.prototype,"beans",void 0),__decorate$m([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$m([Bean("ssrmExpandListener")],t),t}(BeanStub),__extends$F=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$l=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SortListener=function(i){__extends$F(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();return this.gridOptionsWrapper.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e},t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsWrapper.isGroupMultiAutoColumn())for(var r=Constants.GROUP_AUTO_COLUMN_ID+"-",n=0;n<e.length;++n)e[n].colId.indexOf(r)>-1&&(e[n].colId=e[n].colId.substr(r.length))},t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var r=e.find(function(l){return l.colId==Constants.GROUP_AUTO_COLUMN_ID});if(r){var n=e.indexOf(r);_.removeFromArray(e,r);var o=function(l){return e.filter(function(u){return u.colId===l.getColId()}).length==0},a=function(l){return{colId:l.getId(),sort:r.sort}},s=this.columnModel.getRowGroupColumns().filter(o).map(a);_.insertArrayIntoArray(e,s,n)}},t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.extractSortModel(),n=e.sortModel,o=this.findChangedColumnsInSort(r,n),a=this.listenerUtils.isSortingWithValueColumn(o),s=this.listenerUtils.isSortingWithSecondaryColumn(o),l={valueColChanged:a,secondaryColChanged:s,changedColumns:o};this.serverSideRowModel.refreshAfterSort(r,l)}},t.prototype.findChangedColumnsInSort=function(e,r){var n=[];[e,r].forEach(function(s){if(s){var l=s.map(function(u){return u.colId});n=n.concat(l)}});var o=function(s,l){var u=s?s.sort:null,c=l?l.sort:null;return u!==c},a=function(s,l){var u=s?r.indexOf(s):-1,c=l?e.indexOf(l):-1;return u!==c};return n.filter(function(s){var l=r.find(function(c){return c.colId===s}),u=e.find(function(c){return c.colId===s});return o(l,u)||a(l,u)})},__decorate$l([Autowired("sortController")],t.prototype,"sortController",void 0),__decorate$l([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$l([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),__decorate$l([Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),__decorate$l([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$l([Bean("ssrmSortService")],t),t}(BeanStub),__extends$E=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$k=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FilterListener=function(i){__extends$E(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.filterManager.getFilterModel(),n=e?e.filterModel:{},o=this.findChangedColumns(r,n),a=this.listenerUtils.isSortingWithValueColumn(o),s=this.listenerUtils.isSortingWithSecondaryColumn(o),l={valueColChanged:a,secondaryColChanged:s,changedColumns:o};this.serverSideRowModel.refreshAfterFilter(r,l)}},t.prototype.findChangedColumns=function(e,r){var n={};Object.keys(e).forEach(function(a){return n[a]=!0}),Object.keys(r).forEach(function(a){return n[a]=!0});var o=[];return Object.keys(n).forEach(function(a){var s=JSON.stringify(e[a]),l=JSON.stringify(r[a]),u=s!=l;u&&o.push(a)}),o},__decorate$k([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),__decorate$k([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$k([Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),__decorate$k([PostConstruct],t.prototype,"postConstruct",null),t=__decorate$k([Bean("ssrmFilterListener")],t),t}(BeanStub),__extends$D=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$j=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__param$1=function(i,t){return function(e,r){t(e,r,i)}},__values$1=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},InfiniteStoreBlock=function(i){__extends$D(t,i);function t(e,r,n,o,a){var s=i.call(this,e)||this;return s.ssrmParams=n,s.storeParams=o,s.parentRowNode=r,s.startRow=e*o.cacheBlockSize,s.parentStore=a,s.level=r.level+1,s.groupLevel=n.rowGroupCols?s.level<n.rowGroupCols.length:void 0,s.leafGroup=n.rowGroupCols?s.level===n.rowGroupCols.length-1:!1,s}return t.prototype.postConstruct=function(){if(this.usingTreeData=this.gridOptionsWrapper.isTreeData(),!this.usingTreeData&&this.groupLevel){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),this.setData([])},t.prototype.isDisplayIndexInBlock=function(e){return e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.isBlockBefore=function(e){return e>=this.displayIndexEnd},t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.getBlockHeightPx=function(){return this.blockHeightPx},t.prototype.getBlockTopPx=function(){return this.blockTopPx},t.prototype.isGroupLevel=function(){return this.groupLevel},t.prototype.getGroupField=function(){return this.groupField},t.prototype.prefixId=function(e){return this.nodeIdPrefix!=null?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.getBlockStateJson=function(){return{id:this.prefixId(this.getId()),state:{blockNumber:this.getId(),startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,pageStatus:this.getState()}}},t.prototype.isAnyNodeOpen=function(){var e=this.rowNodes.filter(function(r){return r.expanded}).length;return e>0},t.prototype.forEachNode=function(e,r,n,o){r===void 0&&(r=new NumberSequence),this.rowNodes.forEach(function(a){if(e(a,r.next()),n&&a.childStore){var s=a.childStore;o?s.forEachNodeDeepAfterFilterAndSort(e,r):s.forEachNodeDeep(e,r)}})},t.prototype.forEachNodeDeep=function(e,r){this.forEachNode(e,r,!0,!1)},t.prototype.forEachNodeAfterFilterAndSort=function(e,r){this.forEachNode(e,r,!0,!0)},t.prototype.forEachNodeShallow=function(e,r){this.forEachNode(e,r,!1,!1)},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRowUsingLocalIndex=function(e){return this.rowNodes[e-this.startRow]},t.prototype.touchLastAccessed=function(){this.lastAccessed=this.ssrmParams.lastAccessedSequence.next()},t.prototype.processServerFail=function(){this.parentStore.onBlockLoadFailed(this)},t.prototype.retryLoads=function(){this.getState()===RowNodeBlock.STATE_FAILED&&(this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad(),this.setData()),this.forEachNodeShallow(function(e){e.childStore&&e.childStore.retryLoads()})},t.prototype.processServerResult=function(e){this.parentStore.onBlockLoaded(this,e)},t.prototype.setData=function(e,r){var n=this;e===void 0&&(e=[]),r===void 0&&(r=!1),this.destroyRowNodes();for(var o=this.parentStore.getRowCount(),a=this.getId()*this.storeParams.cacheBlockSize,s=Math.min(a+this.storeParams.cacheBlockSize,o),l=s-a,u=this.columnModel.getAllDisplayedAutoHeightCols().length>0,c=u?this.parentStore.getCachedBlockHeight(this.getId()):void 0,f=c?Math.round(c/l):void 0,d=function(g){var v=g<e.length,m=function(S){var O=S??n.blockUtils.createRowNode({field:n.groupField,group:n.groupLevel,leafGroup:n.leafGroup,level:n.level,parent:n.parentRowNode,rowGroupColumn:n.rowGroupColumn,rowHeight:f});if(v){var E=e[g];if(S)n.blockUtils.updateDataIntoRowNode(O,E);else{var D=n.prefixId(n.startRow+g);n.blockUtils.setDataIntoRowNode(O,E,D,f),n.blockUtils.checkOpenByDefault(O)}n.parentStore.removeDuplicateNode(O.id),n.nodeManager.addRowNode(O),n.allNodesMap[O.id]=O}return r&&(O.failedLoad=!0),O},y=h.gridOptionsWrapper.getRowIdFunc(),b=void 0;if(y&&v){var C=e[g],x=h.parentRowNode.getGroupKeys(),w=y({data:C,level:h.level,parentKeys:x.length>0?x:void 0}),P=h.parentStore.retrieveNodeFromCache(w);b=m(P)}b||(b=m()),h.rowNodes.push(b)},h=this,p=0;p<l;p++)d(p)},t.prototype.removeDuplicateNode=function(e){if(this.getState()!=RowNodeBlock.STATE_LOADED){var r=this.allNodesMap[e];if(r){this.blockUtils.destroyRowNode(r);var n=this.rowNodes.indexOf(r),o=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});this.rowNodes[n]=o}}},t.prototype.refresh=function(){this.getState()!==RowNodeBlock.STATE_WAITING_TO_LOAD&&this.setStateWaitingToLoad()},t.prototype.destroyRowNodes=function(){var e=this,r;(r=this.rowNodes)===null||r===void 0||r.forEach(function(n){var o=e.parentStore.isNodeCached(n.id);e.blockUtils.destroyRowNode(n,o)}),this.rowNodes=[],this.allNodesMap={}},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideBlock")},t.prototype.getRowUsingDisplayIndex=function(e){this.touchLastAccessed();var r=this.blockUtils.binarySearchForDisplayIndex(e,this.rowNodes);return r},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.isPixelInRange=function(e){return e>=this.blockTopPx&&e<this.blockTopPx+this.blockHeightPx},t.prototype.getRowBounds=function(e){var r,n;this.touchLastAccessed();var o;try{for(var a=__values$1(this.rowNodes),s=a.next();!s.done;s=a.next()){var l=s.value;if(o=this.blockUtils.extractRowBounds(l,e),o!=null)break}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.prototype.getRowIndexAtPixel=function(e){var r,n;this.touchLastAccessed();var o=null;try{for(var a=__values$1(this.rowNodes),s=a.next();!s.done;s=a.next()){var l=s.value;if(o=this.blockUtils.getIndexAtPixel(l,e),o!=null)break}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexEnd=void 0,this.displayIndexStart=void 0,this.rowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.blockTopPx=r.value,this.rowNodes.forEach(function(o){return n.blockUtils.setDisplayIndex(o,e,r)}),this.displayIndexEnd=e.peek(),this.blockHeightPx=r.value-this.blockTopPx},__decorate$j([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$j([Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),__decorate$j([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),__decorate$j([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),__decorate$j([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),__decorate$j([PostConstruct],t.prototype,"postConstruct",null),__decorate$j([PreDestroy],t.prototype,"destroyRowNodes",null),__decorate$j([__param$1(0,Qualifier("loggerFactory"))],t.prototype,"setBeans",null),t}(RowNodeBlock),__extends$C=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$i=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},__param=function(i,t){return function(e,r){t(e,r,i)}},FindResult;(function(i){i[i.FOUND=0]="FOUND",i[i.CONTINUE_FIND=1]="CONTINUE_FIND",i[i.BREAK_FIND=2]="BREAK_FIND"})(FindResult||(FindResult={}));var InfiniteStore=function(i){__extends$C(t,i);function t(e,r,n){var o=i.call(this)||this;return o.blocks={},o.blockHeights={},o.lastRowIndexKnown=!1,o.displayIndexStart=0,o.displayIndexEnd=0,o.cacheTopPixel=0,o.info={},o.refreshedNodeCache={},o.ssrmParams=e,o.storeParams=r,o.parentRowNode=n,o}return t.prototype.postConstruct=function(){this.defaultRowHeight=this.gridOptionsWrapper.getRowHeightAsNumber();var e=this.parentRowNode.level===-1,r=e?this.gridOptionsWrapper.getServerSideInitialRowCount():t.INITIAL_ROW_COUNT;this.rowCount=r},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(r){return e.destroyBlock(r)}),this.blockUtils.destroyRowNodes(Object.values(this.refreshedNodeCache))},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideCache")},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.retryLoads=function(){this.getBlocksInOrder().forEach(function(e){return e.retryLoads()})},t.prototype.onBlockLoadFailed=function(e){e.setData([],!0),this.fireCacheUpdatedEvent()},t.prototype.onBlockLoaded=function(e,r){this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+r.rowCount);var n=r.storeInfo||r.groupLevelInfo;if(n&&Object.assign(this.info,n),!r.rowData){var o='AG Grid: "params.rowData" is missing from Server-Side Row Model success() callback. Please use the "rowData" attribute. If no data is returned, set an empty list.';_.doOnce(function(){return console.warn(o,r)},"InfiniteStore.noData")}var a=r.rowCount!=null&&r.rowCount>=0?r.rowCount:void 0;this.isAlive()&&(this.checkRowCount(e,a),e.setData(r.rowData),this.destroyAllBlocksPastVirtualRowCount(),this.fireCacheUpdatedEvent())},t.prototype.purgeBlocksIfNeeded=function(e){var r=this,n=this.getBlocksInOrder().filter(function(u){return u!=e}),o=function(u,c){return c.getLastAccessed()-u.getLastAccessed()};n.sort(o);var a=this.storeParams.maxBlocksInCache>0,s=a?this.storeParams.maxBlocksInCache-1:null,l=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(u,c){var f=u.getState()===InfiniteStoreBlock.STATE_WAITING_TO_LOAD&&c>=l,d=a?c>=s:!1;if(f||d){if(u.isAnyNodeOpen()||r.isBlockCurrentlyDisplayed(u)||r.isBlockFocused(u))return;r.destroyBlock(u)}})},t.prototype.isBlockFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||r.rowPinned!=null)return!1;var n=e.getDisplayIndexStart(),o=e.getDisplayIndexEnd();if(o==null||n==null)return!1;var a=r.rowIndex>=n&&r.rowIndex<o;return a},t.prototype.isBlockCurrentlyDisplayed=function(e){var r=e.getDisplayIndexStart(),n=e.getDisplayIndexEnd()-1;return this.rowRenderer.isRangeInRenderedViewport(r,n)},t.prototype.removeDuplicateNode=function(e){this.getBlocksInOrder().forEach(function(r){return r.removeDuplicateNode(e)})},t.prototype.checkRowCount=function(e,r){if(typeof r=="number"&&r>=0)this.rowCount=r,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var n=(e.getId()+1)*this.storeParams.cacheBlockSize,o=n+t.OVERFLOW_SIZE;this.rowCount<o&&(this.rowCount=o)}},t.prototype.forEachNodeDeep=function(e,r){r===void 0&&(r=new NumberSequence),this.getBlocksInOrder().forEach(function(n){return n.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){r===void 0&&(r=new NumberSequence),this.getBlocksInOrder().forEach(function(n){return n.forEachNodeAfterFilterAndSort(e,r)})},t.prototype.getBlocksInOrder=function(){var e=function(n,o){return n.getId()-o.getId()},r=_.getAllValuesInObject(this.blocks).sort(e);return r},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.rowNodeBlockLoader.removeBlock(e)},t.prototype.fireCacheUpdatedEvent=function(){var e={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,r=[];this.getBlocksInOrder().forEach(function(n){var o=n.getId()*e.storeParams.cacheBlockSize;o>=e.rowCount&&r.push(n)}),r.length>0&&r.forEach(function(n){return e.destroyBlock(n)})},t.prototype.refreshStore=function(e){var r=this.getRowCount()==0;r||e?this.resetStore():this.refreshBlocks(),this.fireCacheUpdatedEvent()},t.prototype.isNodeCached=function(e){return!!this.refreshedNodeCache[e]},t.prototype.retrieveNodeFromCache=function(e){var r=this.refreshedNodeCache[e];return r&&delete this.refreshedNodeCache[e],r},t.prototype.buildRowNodeCache=function(){var e={};this.getBlocksInOrder().forEach(function(r){r.rowNodes.forEach(function(n){n.group&&(e[n.id]=n)})}),this.refreshedNodeCache=e},t.prototype.refreshBlocks=function(){this.buildRowNodeCache(),this.getBlocksInOrder().forEach(function(e){e.refresh()}),this.lastRowIndexKnown=!1,this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.resetStore=function(){this.destroyAllBlocks(),this.lastRowIndexKnown=!1,(this.columnModel.isAutoRowHeightActive()||this.rowCount===0)&&(this.rowCount=t.INITIAL_ROW_COUNT)},t.prototype.getRowNodesInRange=function(e,r){var n=[],o=-1,a=!1;_.missing(e)&&(a=!0);var s=!1;this.getBlocksInOrder().forEach(function(u){if(!s){if(a&&o+1!==u.getId()){s=!0;return}o=u.getId(),u.forEachNodeShallow(function(c){var f=c===e||c===r;(a||f)&&n.push(c),f&&(a=!a)})}});var l=s||a;return l?[]:n},t.prototype.findBlockAndExecute=function(e,r,n){var o=!1,a=!1,s=null,l;return this.getBlocksInOrder().forEach(function(u){if(!(o||a)){var c=e(u);c==FindResult.FOUND?(l=r(u),o=!0):c==FindResult.CONTINUE_FIND?s=u:c==FindResult.BREAK_FIND&&(a=!0)}}),o||(l=n(s)),l},t.prototype.getRowBounds=function(e){var r=this,n=function(s){return s.isDisplayIndexInBlock(e)?FindResult.FOUND:s.isBlockBefore(e)?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND},o=function(s){return s.getRowBounds(e)},a=function(s){var l,u;s!==null?(l=s.getBlockTopPx()+s.getBlockHeightPx(),u=s.getDisplayIndexEnd()):(l=r.cacheTopPixel,u=r.displayIndexStart);var c=e-u;return{rowHeight:r.defaultRowHeight,rowTop:l+c*r.defaultRowHeight}};return this.findBlockAndExecute(n,o,a)},t.prototype.getRowIndexAtPixel=function(e){var r=this,n=function(u){return u.isPixelInRange(e)?FindResult.FOUND:u.getBlockTopPx()<e?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND},o=function(u){return u.getRowIndexAtPixel(e)},a=function(u){var c,f;u?(c=u.getBlockTopPx()+u.getBlockHeightPx(),f=u.getDisplayIndexEnd()):(c=r.cacheTopPixel,f=r.displayIndexStart);for(var d=r.storeParams.cacheBlockSize,h=r.defaultRowHeight*d,p=u?u.getId()+1:0,g=function(C){var x=r.getCachedBlockHeight(C),w=x??h,P=e<=w+c;return{height:w,pixelInBlock:P}},v=g(p);!v.pixelInBlock;)c+=v.height,f+=d,p++,v=g(p);var m=e-c,y=v.height/d,b=Math.floor(m/y)|0;return f+b},s=this.findBlockAndExecute(n,o,a),l=this.getDisplayIndexEnd()-1;return s=Math.min(s,l),s},t.prototype.clearDisplayIndexes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.getBlocksInOrder().forEach(function(e){return e.clearDisplayIndexes()})},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.cacheTopPixel=r.value;var o=-1,a=this.storeParams.cacheBlockSize;this.getBlocksInOrder().forEach(function(c){var f=c.getId(),d=f-o-1,h=d*a;h>0&&e.skip(h);for(var p=1;p<=d;p++){var g=f-p;_.exists(n.blockHeights[g])?r.value+=n.blockHeights[g]:r.value+=a*n.defaultRowHeight}o=f,c.setDisplayIndexes(e,r),n.blockHeights[f]=c.getBlockHeightPx()});var s=(o+1)*a-1,l=this.getRowCount(),u=l-s-1;u>0&&(e.skip(u),r.value+=u*this.defaultRowHeight),this.displayIndexEnd=e.peek(),this.cacheHeightPixels=r.value-this.cacheTopPixel},t.prototype.getRowUsingDisplayIndex=function(e,r){var n=this;if(r===void 0&&(r=!1),!!this.isDisplayIndexInStore(e)){var o=function(l){return l.isDisplayIndexInBlock(e)?FindResult.FOUND:l.isBlockBefore(e)?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND},a=function(l){return l.getRowUsingDisplayIndex(e)},s=function(l){if(!r){var u,c,f,d=n.storeParams.cacheBlockSize;if(l){u=l.getId()+1,c=l.getDisplayIndexEnd(),f=l.getBlockHeightPx()+l.getBlockTopPx();for(var h=function(){return e>=c&&e<c+d};!h();){c+=d;var p=n.blockHeights[u];_.exists(p)?f+=p:f+=n.defaultRowHeight*d,u++}}else{var g=e-n.displayIndexStart;u=Math.floor(g/d),c=n.displayIndexStart+u*d,f=n.cacheTopPixel+u*d*n.defaultRowHeight}n.logger.log("block missing, rowIndex = "+e+", creating #"+u+", displayIndexStart = "+c);var v=n.createBlock(u,c,{value:f});return v.getRowUsingDisplayIndex(e)}};return this.findBlockAndExecute(o,a,s)}},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.storeParams.cacheBlockSize,n=Math.floor(e/r),o=function(l){return l.getId()===n?FindResult.FOUND:l.getId()<n?FindResult.CONTINUE_FIND:FindResult.BREAK_FIND},a=function(l){var u=l.getRowUsingLocalIndex(e);return u.rowIndex},s=function(l){if(!l)return e;var u=r*(l.getId()+1)-1,c=l.getRowUsingLocalIndex(u),f;if(c.expanded&&c.childStore){var d=c.childStore;f=d.getDisplayIndexEnd()-1}else c.expanded&&c.detailNode?f=c.detailNode.rowIndex:f=c.rowIndex;var h=e-u;return f+h};return this.findBlockAndExecute(o,a,s)},t.prototype.addStoreStates=function(e){e.push({infiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.rowCount,lastRowIndexKnown:this.lastRowIndexKnown,info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.getCachedBlockHeight=function(e){return this.blockHeights[e]},t.prototype.createBlock=function(e,r,n){var o=this.createBean(new InfiniteStoreBlock(e,this.parentRowNode,this.ssrmParams,this.storeParams,this));return o.setDisplayIndexes(new NumberSequence(r),n),this.blocks[o.getId()]=o,this.purgeBlocksIfNeeded(o),this.rowNodeBlockLoader.addBlock(o),o},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return this.getRowCount()===0?!1:e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.applyTransaction=function(e){return{status:ServerSideTransactionResultStatus.StoreWrongType}},t.prototype.getChildStore=function(e){var r=this,n=function(o){var a=null;return r.getBlocksInOrder().forEach(function(s){s.forEachNodeShallow(function(l){l.key==o&&(a=l)},new NumberSequence)}),a};return this.storeUtils.getChildStore(e,this,n)},t.prototype.isPixelInRange=function(e){return this.getRowCount()===0?!1:e>=this.cacheTopPixel&&e<this.cacheTopPixel+this.cacheHeightPixels},t.prototype.refreshAfterFilter=function(e){var r=this.gridOptionsWrapper.isServerSideFilterAllLevels();if(r||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.resetStore();return}this.forEachChildStoreShallow(function(n){return n.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){var r=this.gridOptionsWrapper.isServerSideSortAllLevels();if(r||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.resetStore();return}this.forEachChildStoreShallow(function(n){return n.refreshAfterSort(e)})},t.prototype.forEachChildStoreShallow=function(e){this.getBlocksInOrder().forEach(function(r){if(r.isGroupLevel()){var n=function(o){var a=o.childStore;a&&e(a)};r.forEachNodeShallow(n,new NumberSequence)}})},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,t.INITIAL_ROW_COUNT=1,t.OVERFLOW_SIZE=1,__decorate$i([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$i([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),__decorate$i([Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),__decorate$i([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$i([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$i([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),__decorate$i([PostConstruct],t.prototype,"postConstruct",null),__decorate$i([PreDestroy],t.prototype,"destroyAllBlocks",null),__decorate$i([__param(0,Qualifier("loggerFactory"))],t.prototype,"setBeans",null),t}(BeanStub),__extends$B=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$h=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FullStore=function(i){__extends$B(t,i);function t(e,r,n){var o=i.call(this,0)||this;return o.nodeIdSequence=new NumberSequence,o.info={},o.ssrmParams=e,o.parentRowNode=n,o.level=n.level+1,o.groupLevel=e.rowGroupCols?o.level<e.rowGroupCols.length:void 0,o.leafGroup=e.rowGroupCols?o.level===e.rowGroupCols.length-1:!1,o}return t.prototype.postConstruct=function(){var e=this;if(this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var r=this.ssrmParams.rowGroupCols[this.level];this.groupField=r.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var n=1,o=this.parentRowNode.level===-1,a=this.gridOptionsWrapper.getServerSideInitialRowCount();o&&a!==void 0&&(n=a),this.initialiseRowNodes(n),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(function(){return e.rowNodeBlockLoader.removeBlock(e)})},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},t.prototype.initialiseRowNodes=function(e,r){r===void 0&&(r=!1),this.destroyRowNodes();for(var n=0;n<e;n++){var o=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r&&(o.failedLoad=!0),this.allRowNodes.push(o),this.nodesAfterFilter.push(o),this.nodesAfterSort.push(o)}},t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.getStartRow=function(){return 0},t.prototype.getEndRow=function(){return this.nodesAfterSort.length},t.prototype.createDataNode=function(e,r){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r!=null?_.insertIntoArray(this.allRowNodes,n,r):this.allRowNodes.push(n);var o=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(n,e,o,void 0),this.nodeManager.addRowNode(n),this.blockUtils.checkOpenByDefault(n),this.allNodesMap[n.id]=n,n},t.prototype.prefixId=function(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},t.prototype.processServerResult=function(e){if(this.isAlive()){var r=e.storeInfo||e.groupLevelInfo;r&&Object.assign(this.info,r);var n=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!e.rowData){var o='AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.';_.doOnce(function(){return console.warn(o,e)},"FullStore.noData")}this.createOrRecycleNodes(n,e.rowData),n&&this.blockUtils.destroyRowNodes(_.getAllValuesInObject(n)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},t.prototype.createOrRecycleNodes=function(e,r){var n=this;if(r){var o=function(s){if(e){var l=n.gridOptionsWrapper.getRowIdFunc();if(l){var u=n.parentRowNode.getGroupKeys(),c=n.level,f=l({data:s,parentKeys:u.length>0?u:void 0,level:c}),d=e[f];if(d)return delete e[f],d}}},a=function(s,l){n.allNodesMap[s.id]=s,n.blockUtils.updateDataIntoRowNode(s,l),n.allRowNodes.push(s)};r.forEach(function(s){var l=o(s);l?a(l,s):n.createDataNode(s)})}},t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout(function(){return e.transactionManager.flushAsyncTransactions()},0)},t.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},t.prototype.sortRowNodes=function(){var e=this.gridOptionsWrapper.isServerSideSortAllLevels()||this.gridOptionsWrapper.isServerSideSortOnServer(),r=this.sortController.getSortOptions(),n=!r||r.length==0;if(e||n){this.nodesAfterSort=this.nodesAfterFilter;return}this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,r)},t.prototype.filterRowNodes=function(){var e=this,r=this.gridOptionsWrapper.isServerSideFilterAllLevels()||this.gridOptionsWrapper.isServerSideFilterOnServer(),n=this.groupLevel;if(r||n){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(function(o){return e.filterManager.doesRowPassFilter({rowNode:o})})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return this.getRowCount()===0?!1:e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.topPx=r.value;var o={};this.nodesAfterSort.forEach(function(a){n.blockUtils.setDisplayIndex(a,e,r),o[a.id]=!0}),this.allRowNodes.forEach(function(a){o[a.id]||n.blockUtils.clearDisplayIndex(a)}),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachNodeDeep=function(e,r){r===void 0&&(r=new NumberSequence),this.allRowNodes.forEach(function(n){e(n,r.next());var o=n.childStore;o&&o.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){r===void 0&&(r=new NumberSequence),this.nodesAfterSort.forEach(function(n){e(n,r.next());var o=n.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(e,r)})},t.prototype.getRowUsingDisplayIndex=function(e){if(this.isDisplayIndexInStore(e)){var r=this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort);return r}},t.prototype.getRowBounds=function(e){for(var r=0;r<this.nodesAfterSort.length;r++){var n=this.nodesAfterSort[r],o=this.blockUtils.extractRowBounds(n,e);if(o)return o}return null},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){var r=this,n=e<=this.topPx;if(n){var o=this.nodesAfterSort[0];return o.rowIndex}var a=e>=this.topPx+this.heightPx;if(a){var s=this.nodesAfterSort[this.nodesAfterSort.length-1],l=s.rowTop+s.rowHeight;if(e>=l&&s.expanded){if(s.childStore&&s.childStore.getRowCount()>0)return s.childStore.getRowIndexAtPixel(e);if(s.detailNode)return s.detailNode.rowIndex}return s.rowIndex}var u=null;this.nodesAfterSort.forEach(function(f){var d=r.blockUtils.getIndexAtPixel(f,e);d!=null&&(u=d)});var c=u==null;return c?this.displayIndexEnd-1:u},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){var o=r.allRowNodes.find(function(a){return a.key==n});return o})},t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach(function(r){var n=r.childStore;n&&e(n)})},t.prototype.refreshAfterFilter=function(e){var r=this.gridOptionsWrapper.isServerSideFilterOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e),o=this.gridOptionsWrapper.isServerSideFilterAllLevels();if(o||r&&n){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){var r=this.gridOptionsWrapper.isServerSideSortOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e),o=this.gridOptionsWrapper.isServerSideSortAllLevels();if(o||r&&n){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterSort(e)})},t.prototype.applyTransaction=function(e){switch(this.getState()){case RowNodeBlock.STATE_FAILED:return{status:ServerSideTransactionResultStatus.StoreLoadingFailed};case RowNodeBlock.STATE_LOADING:return{status:ServerSideTransactionResultStatus.StoreLoading};case RowNodeBlock.STATE_WAITING_TO_LOAD:return{status:ServerSideTransactionResultStatus.StoreWaitingToLoad}}var r=this.gridOptionsWrapper.getIsApplyServerSideTransactionFunc();if(r){var n={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info},o=r(n);if(!o)return{status:ServerSideTransactionResultStatus.Cancelled}}var a={status:ServerSideTransactionResultStatus.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,a),this.executeRemove(e,a,s),this.executeUpdate(e,a,s),this.filterAndSortNodes(),this.updateSelection(s),a},t.prototype.updateSelection=function(e){var r=e.length>0;if(r){e.forEach(function(o){o.setSelected(!1,!1,!0)});var n={type:Events.EVENT_SELECTION_CHANGED};this.eventService.dispatchEvent(n)}},t.prototype.executeAdd=function(e,r){var n=this,o=e.add,a=e.addIndex;if(!_.missingOrEmpty(o)){var s=typeof a=="number"&&a>=0;s?o.reverse().forEach(function(l){var u=n.createDataNode(l,a);r.add.push(u)}):o.forEach(function(l){var u=n.createDataNode(l);r.add.push(u)})}},t.prototype.executeRemove=function(e,r,n){var o=this,a=e.remove;if(a!=null){var s={};a.forEach(function(l){var u=o.lookupRowNode(l);u&&(u.isSelected()&&n.push(u),u.clearRowTopAndRowIndex(),s[u.id]=!0,delete o.allNodesMap[u.id],r.remove.push(u),o.nodeManager.removeNode(u))}),this.allRowNodes=this.allRowNodes.filter(function(l){return!s[l.id]})}},t.prototype.executeUpdate=function(e,r,n){var o=this,a=e.update;a!=null&&a.forEach(function(s){var l=o.lookupRowNode(s);l&&(l.updateData(s),!l.selectable&&l.isSelected()&&n.push(l),r.update.push(l))})},t.prototype.lookupRowNode=function(e){var r=this.gridOptionsWrapper.getRowIdFunc(),n;if(r!=null){var o=this.level,a=this.parentRowNode.getGroupKeys(),s=r({data:e,parentKeys:a.length>0?a:void 0,level:o});if(n=this.allNodesMap[s],!n)return console.error("AG Grid: could not find row id="+s+", data item was not found for this id"),null}else if(n=this.allRowNodes.find(function(l){return l.data===e}),!n)return console.error("AG Grid: could not find data item as object was not found",e),null;return n},t.prototype.addStoreStates=function(e){e.push({infiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.refreshStore=function(e){if(e){var r=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(r)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},t.prototype.retryLoads=function(){this.getState()===RowNodeBlock.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(function(e){return e.retryLoads()})},t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.fireStoreUpdatedEvent=function(){var e={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)},t.prototype.getRowCount=function(){return this.nodesAfterSort.length},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.nodesAfterSort[e];return r.rowIndex},t.prototype.isLastRowIndexKnown=function(){return this.getState()==RowNodeBlock.STATE_LOADED},t.prototype.getRowNodesInRange=function(e,r){var n=[],o=!1;_.missing(e)&&(o=!0),this.nodesAfterSort.forEach(function(s){var l=s===e||s===r;(o||l)&&n.push(s),l&&(o=!o)});var a=o;return a?[]:n},__decorate$h([Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),__decorate$h([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),__decorate$h([Autowired("columnModel")],t.prototype,"columnModel",void 0),__decorate$h([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),__decorate$h([Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),__decorate$h([Autowired("sortController")],t.prototype,"sortController",void 0),__decorate$h([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),__decorate$h([Autowired("filterManager")],t.prototype,"filterManager",void 0),__decorate$h([Autowired("ssrmTransactionManager")],t.prototype,"transactionManager",void 0),__decorate$h([PostConstruct],t.prototype,"postConstruct",null),__decorate$h([PreDestroy],t.prototype,"destroyRowNodes",null),t}(RowNodeBlock),__decorate$g=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},StoreFactory=function(){function i(){}return i.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e),n=r.infiniteScroll?InfiniteStore:FullStore;return new n(t,r,e)},i.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(r),o=this.getBlockSize(n,r),a=this.getMaxBlocksInCache(n,t,r),s={infiniteScroll:n,cacheBlockSize:o,maxBlocksInCache:a};return s},i.prototype.getMaxBlocksInCache=function(t,e,r){if(t){var n=r&&r.maxBlocksInCache!=null?r.maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),o=n!=null&&n>=0;if(o){if(e.dynamicRowHeight){var a="AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";_.doOnce(function(){return console.warn(a)},"storeFactory.maxBlocksInCache.dynamicRowHeight");return}if(this.columnModel.isAutoRowHeightActive()){var s="AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";_.doOnce(function(){return console.warn(s)},"storeFactory.maxBlocksInCache.autoRowHeightActive");return}return n}}},i.prototype.getBlockSize=function(t,e){if(t){var r=e&&e.cacheBlockSize!=null?e.cacheBlockSize:this.gridOptionsWrapper.getCacheBlockSize();return r!=null&&r>0?r:100}},i.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsWrapper.getServerSideGroupLevelParamsFunc();if(e){var r={level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()},n=e(r);return n.storeType!=null&&(n.infiniteScroll=n.storeType==="partial"),n}},i.prototype.isInfiniteScroll=function(t){var e=t&&t.infiniteScroll!=null?t.infiniteScroll:this.gridOptionsWrapper.isServerSideInfiniteScroll();return e},__decorate$g([Autowired("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),__decorate$g([Autowired("columnModel")],i.prototype,"columnModel",void 0),i=__decorate$g([Bean("ssrmStoreFactory")],i),i}(),__decorate$f=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ListenerUtils=function(){function i(){}return i.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},i.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},__decorate$f([Autowired("columnModel")],i.prototype,"columnModel",void 0),i=__decorate$f([Bean("ssrmListenerUtils")],i),i}(),ServerSideRowModelModule={moduleName:ModuleNames.ServerSideRowModelModule,rowModels:{serverSide:ServerSideRowModel},beans:[ExpandListener,SortListener,StoreUtils,BlockUtils,NodeManager,TransactionManager,FilterListener,StoreFactory,ListenerUtils],dependantModules:[EnterpriseCoreModule]},NULL_SUBSTITUTE$1="__<ag-grid-pseudo-null>__",ClientSideValuesExtractor=function(){function i(t,e,r){this.rowModel=t,this.filterParams=e,this.caseFormat=r}return i.prototype.extractUniqueValues=function(t){var e=this,r={},n=this.filterParams.colDef.keyCreator,o=function(a){var s=a!=null?e.caseFormat(a):NULL_SUBSTITUTE$1;s&&r[s]==null&&(r[s]=a)};return this.rowModel.forEachLeafNode(function(a){if(!(!a.data||!t(a))){var s=e.filterParams,l=s.api,u=s.colDef,c=s.column,f=s.columnApi,d=s.context,h=e.filterParams.valueGetter({api:l,colDef:u,column:c,columnApi:f,context:d,data:a.data,getValue:function(g){return a.data[g]},node:a});if(n){var p={value:h,colDef:e.filterParams.colDef,column:e.filterParams.column,node:a,data:a.data,api:e.filterParams.api,columnApi:e.filterParams.columnApi,context:e.filterParams.context};h=n(p)}h=_.makeNull(h),h!=null&&Array.isArray(h)?h.forEach(function(g){var v=_.toStringOrNull(_.makeNull(g));o(v)}):o(_.toStringOrNull(h))}}),_.values(r)},i}(),SetFilterModelValuesType;(function(i){i[i.PROVIDED_LIST=0]="PROVIDED_LIST",i[i.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",i[i.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"})(SetFilterModelValuesType||(SetFilterModelValuesType={}));var NULL_SUBSTITUTE="__<ag-grid-pseudo-null>__",SetValueModel=function(){function i(t,e,r,n,o){var a=this;this.filterParams=t,this.setIsLoading=e,this.valueFormatterService=r,this.translate=n,this.caseFormat=o,this.localEventService=new EventService,this.miniFilterText=null,this.providedValues=null,this.allValues=[],this.availableValues=new Set,this.displayedValues=[],this.selectedValues=new Set,this.initialised=!1;var s=t.column,l=t.colDef,u=t.textFormatter,c=t.doesRowPassOtherFilter,f=t.suppressSorting,d=t.comparator,h=t.rowModel,p=t.values;t.caseSensitive,this.column=s,this.formatter=u||TextFilter.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=c,this.suppressSorting=f||!1,this.comparator=d||l.comparator||_.defaultComparator,h.getType()===Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideValuesExtractor=new ClientSideValuesExtractor(h,this.filterParams,this.caseFormat)),p==null?this.valuesType=SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(p)?SetFilterModelValuesType.PROVIDED_LIST:SetFilterModelValuesType.PROVIDED_CALLBACK,this.providedValues=p),this.updateAllValues().then(function(g){return a.resetSelectionState(g||[])})}return i.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},i.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},i.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},i.prototype.overrideValues=function(t){var e=this;return new AgPromise(function(r){e.allValuesPromise.then(function(){e.valuesType=SetFilterModelValuesType.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then(function(){return r()})})})},i.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then(function(e){return t.updateAvailableValues(e||[])}):AgPromise.resolve()},i.prototype.isInitialised=function(){return this.initialised},i.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new AgPromise(function(e){switch(t.valuesType){case SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:case SetFilterModelValuesType.PROVIDED_LIST:{var r=t.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES?t.getValuesFromRows(!1):t.uniqueUnsortedStringArray(t.providedValues),n=t.sortValues(r||[]);t.allValues=n,e(n);break}case SetFilterModelValuesType.PROVIDED_CALLBACK:{t.setIsLoading(!0);var o=t.providedValues,a=t.filterParams,s=a.columnApi,l=a.api,u=a.context,c=a.column,f=a.colDef,d={success:function(h){var p=t.uniqueUnsortedStringArray(h||[]);t.setIsLoading(!1);var g=t.sortValues(p||[]);t.allValues=g,e(g)},colDef:f,column:c,columnApi:s,api:l,context:u};window.setTimeout(function(){return o(d)},0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(function(e){return t.updateAvailableValues(e||[])}).then(function(){return t.initialised=!0}),this.allValuesPromise},i.prototype.setValuesType=function(t){this.valuesType=t},i.prototype.getValuesType=function(){return this.valuesType},i.prototype.isValueAvailable=function(t){return this.availableValues.has(t)},i.prototype.showAvailableOnly=function(){return this.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES},i.prototype.updateAvailableValues=function(t){var e=this.showAvailableOnly()?this.sortValues(this.getValuesFromRows(!0)):t;this.availableValues=_.convertToSet(e),this.localEventService.dispatchEvent({type:i.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues()},i.prototype.sortValues=function(t){return this.suppressSorting?t:!this.filterParams.excelMode||t.indexOf(null)<0?t.sort(this.comparator):t.filter(function(e){return e!=null}).sort(this.comparator).concat(null)},i.prototype.getValuesFromRows=function(t){var e=this;if(t===void 0&&(t=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),[];var r=function(n){return!t||e.doesRowPassOtherFilters(n)};return this.clientSideValuesExtractor.extractUniqueValues(r)},i.prototype.setMiniFilter=function(t){return t=_.makeNull(t),this.miniFilterText===t?!1:(this.miniFilterText=t,this.updateDisplayedValues(),!0)},i.prototype.getMiniFilter=function(){return this.miniFilterText},i.prototype.updateDisplayedValues=function(){var t=this;if(this.miniFilterText==null){this.displayedValues=_.values(this.availableValues);return}this.displayedValues=[];var e=this.caseFormat(this.formatter(this.miniFilterText)||""),r=function(n){return n!=null&&t.caseFormat(n).indexOf(e)>=0};this.availableValues.forEach(function(n){if(n==null)t.filterParams.excelMode&&r(t.translate("blanks"))&&t.displayedValues.push(n);else{var o=t.formatter(n),a=t.valueFormatterService.formatValue(t.column,null,o,t.filterParams.valueFormatter,!1);(r(o)||r(a))&&t.displayedValues.push(n)}})},i.prototype.getDisplayedValueCount=function(){return this.displayedValues.length},i.prototype.getDisplayedValue=function(t){return this.displayedValues[t]},i.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedValues.size>0:this.allValues.length!==this.selectedValues.size},i.prototype.getValues=function(){return this.allValues.slice()},i.prototype.selectAllMatchingMiniFilter=function(t){var e=this;t===void 0&&(t=!1),this.miniFilterText==null?this.selectedValues=_.convertToSet(this.allValues):(t&&this.selectedValues.clear(),this.displayedValues.forEach(function(r){return e.selectedValues.add(r)}))},i.prototype.deselectAllMatchingMiniFilter=function(){var t=this;this.miniFilterText==null?this.selectedValues.clear():this.displayedValues.forEach(function(e){return t.selectedValues.delete(e)})},i.prototype.selectValue=function(t){this.selectedValues.add(t)},i.prototype.deselectValue=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayedValues),this.selectedValues.delete(t)},i.prototype.isValueSelected=function(t){return this.selectedValues.has(t)},i.prototype.isEverythingVisibleSelected=function(){var t=this;return this.displayedValues.filter(function(e){return t.isValueSelected(e)}).length===this.displayedValues.length},i.prototype.isNothingVisibleSelected=function(){var t=this;return this.displayedValues.filter(function(e){return t.isValueSelected(e)}).length===0},i.prototype.getModel=function(){return this.hasSelections()?_.values(this.selectedValues):null},i.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then(function(r){if(t==null)e.resetSelectionState(r||[]);else{e.selectedValues.clear();var n=e.uniqueValues(r||[]);t.forEach(function(o){var a=n[e.uniqueKey(o)];a!==void 0&&e.selectedValues.add(a)})}})},i.prototype.uniqueUnsortedStringArray=function(t){var e=this,r=_.toStrings(t);if(!r)return[];var n=this.uniqueValues(r);return r.map(_.makeNull).filter(function(o){var a=e.uniqueKey(o);return a in n?(delete n[a],!0):!1})},i.prototype.uniqueValues=function(t){var e=this,r={};return(t||[]).forEach(function(n){var o=_.makeNull(n),a=e.uniqueKey(o);r[a]===void 0&&(r[a]=o)}),r},i.prototype.uniqueKey=function(t){return t==null?NULL_SUBSTITUTE:this.caseFormat(t)},i.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedValues.clear():this.selectedValues=_.convertToSet(t||[])},i.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",i}(),__extends$A=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$e=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SetFilterListItem=function(i){__extends$A(t,i);function t(e,r,n,o){var a=i.call(this,t.TEMPLATE)||this;return a.value=e,a.params=r,a.translate=n,a.isSelected=o,a}return t.prototype.init=function(){var e=this;this.render(),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),!this.params.readOnly&&this.eCheckbox.onValueChange(function(r){var n=r||!1;e.isSelected=n;var o={type:t.EVENT_SELECTION_CHANGED,isSelected:n};e.dispatchEvent(o)})},t.prototype.toggleSelected=function(){this.params.readOnly||(this.isSelected=!this.isSelected,this.eCheckbox.setValue(this.isSelected))},t.prototype.render=function(){var e=this.params.column,r=this.value,n=null;if(typeof r=="function"?r=r():n=this.getFormattedValue(this.params,e,r),this.params.showTooltips){var o=n??r;this.setTooltip(o)}var a={value:r,valueFormatted:n,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),colDef:this.params.colDef,column:this.params.column};this.renderCell(a)},t.prototype.getTooltipParams=function(){var e=i.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),e},t.prototype.getFormattedValue=function(e,r,n){var o=e&&e.valueFormatter;return this.valueFormatterService.formatValue(r,null,n,o,!1)},t.prototype.renderCell=function(e){var r=this,n=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,e),o=n?n.newAgStackInstance():void 0;if(o==null){var a=e.valueFormatted==null?e.value:e.valueFormatted;this.eCheckbox.setLabel(a??this.translate("blanks"));return}o.then(function(s){s&&(r.eCheckbox.setLabel(s.getGui()),r.addDestroyFunc(function(){return r.destroyBean(s)}))})},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.TEMPLATE=`
        <div class="ag-set-filter-item">
            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
        </div>`,__decorate$e([Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),__decorate$e([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),__decorate$e([RefSelector("eCheckbox")],t.prototype,"eCheckbox",void 0),__decorate$e([PostConstruct],t.prototype,"init",null),t}(Component),DEFAULT_LOCALE_TEXT={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},__extends$z=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$d=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SetFilter=function(i){__extends$z(t,i);function t(){var e=i.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.appliedModelValues=null,e}return t.prototype.postConstruct=function(){i.prototype.postConstruct.call(this),this.positionableFeature=new PositionableFeature(this.eSetFilterList,{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return`
            <div class="ag-set-filter">
                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">`+this.translateForSetFilter("loadingOoo")+`</div>
                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">`+this.translateForSetFilter("noMatches")+`</div>
                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
            </div>`},t.prototype.handleKeyDown=function(e){if(i.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case KeyCode.SPACE:this.handleKeySpace(e);break;case KeyCode.ENTER:this.handleKeyEnter(e);break}},t.prototype.handleKeySpace=function(e){var r=this.gridOptionsWrapper.getDocument();if(!(!this.eSetFilterList.contains(r.activeElement)||!this.virtualList)){var n=this.virtualList.getLastFocusedRow();if(n!=null){var o=this.virtualList.getComponentAt(n);if(o!=null){e.preventDefault();var a=(this.setFilterParams||{}).readOnly;a||o.toggleSelected()}}}},t.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var r=this.setFilterParams||{},n=r.excelMode,o=r.readOnly;!n||o||(e.preventDefault(),this.onBtApply(!1,!1,e),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModelAndRefresh=function(e){var r=this;return this.valueModel?this.valueModel.setModel(e).then(function(){return r.refresh()}):AgPromise.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){this.setMiniFilter(null);var r=e==null?null:e.values;return this.setModelAndRefresh(r)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,r){return e==null&&r==null?!0:e!=null&&r!=null&&_.areEqual(e.values,r.values)},t.prototype.setParams=function(e){var r=this;this.applyExcelModeOptions(e),i.prototype.setParams.call(this,e),this.setFilterParams=e,this.caseSensitive=e.caseSensitive||!1,this.valueModel=new SetValueModel(e,function(n){return r.showOrHideLoadingScreen(n)},this.valueFormatterService,function(n){return r.translateForSetFilter(n)},function(n){return r.caseFormat(n)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},t.prototype.applyExcelModeOptions=function(e){e.excelMode==="windows"?(e.buttons||(e.buttons=["apply","cancel"]),e.closeOnApply==null&&(e.closeOnApply=!0)):e.excelMode==="mac"&&(e.buttons||(e.buttons=["reset"]),e.applyMiniFilterWhileTyping==null&&(e.applyMiniFilterWhileTyping=!0),e.debounceMs==null&&(e.debounceMs=500))},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,function(r){e.setFilterParams&&r.column===e.setFilterParams.column&&e.syncAfterDataChange()})},t.prototype.syncAfterDataChange=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");var r=this.valueModel.refreshValues();return r.then(function(){e.refresh(),e.onBtApply(!1,!0)})},t.prototype.showOrHideLoadingScreen=function(e){_.setDisplayed(this.eFilterLoading,e)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var r=this.gridOptionsWrapper.getLocaleTextFunc(),n=r("ariaFilterList","Filter List"),o=this.virtualList=this.createBean(new VirtualList("filter","listbox",n)),a=this.getRefElement("eSetFilterList");a&&a.appendChild(o.getGui());var s=this.setFilterParams.cellHeight;s!=null&&o.setRowHeight(s),o.setComponentCreator(function(u){return e.createSetListItem(u)});var l;this.setFilterParams.suppressSelectAll?l=new ModelWrapper(this.valueModel):l=new ModelWrapperWithSelectAll(this.valueModel,function(){return e.isSelectAllSelected()}),o.setModel(l)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(e)},t.prototype.createSetListItem=function(e){var r=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n;return e===t.SELECT_ALL_VALUE?(n=this.createBean(new SetFilterListItem(function(){return r.getSelectAllLabel()},this.setFilterParams,function(o){return r.translateForSetFilter(o)},this.isSelectAllSelected())),n.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,function(o){return r.onSelectAll(o.isSelected)}),n):(n=this.createBean(new SetFilterListItem(e,this.setFilterParams,function(o){return r.translateForSetFilter(o)},this.valueModel.isValueSelected(e))),n.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,function(o){return r.onItemSelected(e,o.isSelected)}),n)},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var r=this,n=r.eMiniFilter,o=r.gridOptionsWrapper,a=o.getLocaleTextFunc();n.setDisplayed(!this.setFilterParams.suppressMiniFilter),n.setValue(this.valueModel.getMiniFilter()),n.onValueChange(function(){return e.onMiniFilterInput()}),n.setInputAriaLabel(a("ariaSearchFilterValues","Search filter values")),this.addManagedListener(n.getInputElement(),"keypress",function(s){return e.onMiniFilterKeyPress(s)})},t.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");i.prototype.afterGuiAttached.call(this,e),this.setFilterParams.excelMode&&(this.resetUiToActiveModel(),this.showOrHideResults()),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&r.getFocusableElement().focus();var n=!!(e&&e.container==="floatingFilter"),o;this.gridOptionsWrapper.isEnableRtl()?o={bottom:!0,bottomLeft:!0,left:!0}:o={bottom:!0,bottomRight:!0,right:!0},n?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(o)):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1))},t.prototype.applyModel=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var r=i.prototype.applyModel.call(this),n=this.getModel();return n?this.appliedModelValues=n.values.reduce(function(o,a){return o[e.caseFormat(String(a))]=!0,o},{}):this.appliedModelValues=null,r},t.prototype.isModelValid=function(e){return this.setFilterParams&&this.setFilterParams.excelMode?e==null||e.values.length>0:!0},t.prototype.doesFilterPass=function(e){var r=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelValues)return!0;var n=e.node,o=e.data,a=this.setFilterParams,s=a.valueGetter,l=a.colDef.keyCreator,u=a.api,c=a.colDef,f=a.column,d=a.columnApi,h=a.context,p=s({api:u,colDef:c,column:f,columnApi:d,context:h,data:o,getValue:function(v){return o[v]},node:n});if(l){var g={value:p,colDef:c,column:f,node:n,data:o,api:u,columnApi:d,context:h};p=l(g)}return p=_.makeNull(p),Array.isArray(p)?p.some(function(v){return r.appliedModelValues[r.caseFormat(String(_.makeNull(v)))]===!0}):this.appliedModelValues[this.caseFormat(String(p))]===!0},t.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},t.prototype.isValuesTakenFromGrid=function(){if(!this.valueModel)return!1;var e=this.valueModel.getValuesType();return e===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES},t.prototype.setFilterValues=function(e){var r=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(function(){r.refresh(),r.onUiChanged()})},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(function(){e.refresh(),e.onUiChanged()})},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout(function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then(function(){return e.refresh()})}},0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var e=this.setFilterParams||{},r=e.applyMiniFilterWhileTyping,n=e.readOnly;!n&&r?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;r==null||n?this.refresh():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel():(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;_.setDisplayed(this.eNoMatches,e),_.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetUiToActiveModel=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null),this.setModelIntoUi(this.getModel()).then(function(){return e.onUiChanged(!1,"prevent")})},t.prototype.onMiniFilterKeyPress=function(e){var r=this.setFilterParams||{},n=r.excelMode,o=r.readOnly;e.key===KeyCode.ENTER&&!n&&!o&&this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){e===void 0&&(e=!0);var r=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(r)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var r=this;e!=null&&window.setTimeout(function(){if(!r.virtualList)throw new Error("Virtual list has not been created.");r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter();var r=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(r)},t.prototype.onItemSelected=function(e,r){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");r?this.valueModel.selectValue(e):this.valueModel.deselectValue(e);var n=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(n)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh()},t.prototype.getValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){var r=this.gridOptionsWrapper.getLocaleTextFunc();return r(e,DEFAULT_LOCALE_TEXT[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.destroy=function(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),i.prototype.destroy.call(this)},t.prototype.caseFormat=function(e){return e==null||typeof e!="string"||this.caseSensitive?e:e.toUpperCase()},t.SELECT_ALL_VALUE="__AG_SELECT_ALL__",__decorate$d([RefSelector("eMiniFilter")],t.prototype,"eMiniFilter",void 0),__decorate$d([RefSelector("eFilterLoading")],t.prototype,"eFilterLoading",void 0),__decorate$d([RefSelector("eSetFilterList")],t.prototype,"eSetFilterList",void 0),__decorate$d([RefSelector("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),__decorate$d([Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(ProvidedFilter),ModelWrapper=function(){function i(t){this.model=t}return i.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},i.prototype.getRow=function(t){return this.model.getDisplayedValue(t)},i.prototype.isRowSelected=function(t){return this.model.isValueSelected(this.getRow(t))},i}(),ModelWrapperWithSelectAll=function(){function i(t,e){this.model=t,this.isSelectAllSelected=e}return i.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},i.prototype.getRow=function(t){return t===0?SetFilter.SELECT_ALL_VALUE:this.model.getDisplayedValue(t-1)},i.prototype.isRowSelected=function(t){return t===0?this.isSelectAllSelected():this.model.isValueSelected(this.getRow(t))},i}(),__extends$y=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$c=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SetFloatingFilterComp=function(i){__extends$y(t,i);function t(){var e=i.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this;return e.availableValuesListenerAdded=!1,e}return t.prototype.destroy=function(){i.prototype.destroy.call(this)},t.prototype.init=function(e){var r=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input")).addGuiEventListener("click",function(){return e.showParentFilter()}),this.params=e},t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)},t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof SetFilter))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as it's parent");e(r)})},t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance(function(r){var n=r.getValueModel();n&&e.addManagedListener(n,SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED,function(){return e.updateFloatingFilterText()})}),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(e){var r=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(function(n){var o=(e||n.getModel()||{}).values,a=n.getValueModel();if(o==null||a==null){r.eFloatingFilterText.setValue("");return}var s=r.gridOptionsWrapper.getLocaleTextFunc(),l=o.filter(function(d){return a.isValueAvailable(d)}),u=l.map(function(d){var h=r.params,p=h.column,g=h.filterParams,v=r.valueFormatterService.formatValue(p,null,d,g.valueFormatter,!1),m=v??d;return m??s("blanks",DEFAULT_LOCALE_TEXT.blanks)}),c=u.length>10?u.slice(0,10).concat("..."):u,f="("+u.length+") "+c.join(",");r.eFloatingFilterText.setValue(f)})},__decorate$c([RefSelector("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),__decorate$c([Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),__decorate$c([Autowired("columnModel")],t.prototype,"columnModel",void 0),t}(Component),SetFilterModule={moduleName:ModuleNames.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:SetFilter},{componentName:"agSetColumnFloatingFilter",componentClass:SetFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]},__extends$x=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$b=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},StatusBarService=function(i){__extends$x(t,i);function t(){var e=i.call(this)||this;return e.allComponents={},e}return t.prototype.registerStatusPanel=function(e,r){this.allComponents[e]=r},t.prototype.getStatusPanel=function(e){return this.allComponents[e]},t=__decorate$b([Bean("statusBarService")],t),t}(BeanStub),__extends$w=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$a=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},StatusBar=function(i){__extends$w(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.postConstruct=function(){if(this.gridOptions.statusBar&&this.gridOptions.statusBar.statusPanels){var e=this.gridOptions.statusBar.statusPanels.filter(function(o){return o.align==="left"});this.createAndRenderComponents(e,this.eStatusBarLeft);var r=this.gridOptions.statusBar.statusPanels.filter(function(o){return o.align==="center"});this.createAndRenderComponents(r,this.eStatusBarCenter);var n=this.gridOptions.statusBar.statusPanels.filter(function(o){return!o.align||o.align==="right"});this.createAndRenderComponents(n,this.eStatusBarRight)}else this.setDisplayed(!1)},t.prototype.createAndRenderComponents=function(e,r){var n=this,o=[];e.forEach(function(a){var s={},l=n.userComponentFactory.getStatusPanelCompDetails(a,s),u=l.newAgStackInstance();u&&o.push({key:a.key||a.statusPanel,promise:u})}),AgPromise.all(o.map(function(a){return a.promise})).then(function(){o.forEach(function(a){a.promise.then(function(s){var l=function(){n.getContext().destroyBean(s)};n.isAlive()?(n.statusBarService.registerStatusPanel(a.key,s),r.appendChild(s.getGui()),n.addDestroyFunc(l)):l()})})})},t.TEMPLATE=`<div class="ag-status-bar">
            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>
            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>
            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>
        </div>`,__decorate$a([Autowired("gridOptions")],t.prototype,"gridOptions",void 0),__decorate$a([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),__decorate$a([Autowired("statusBarService")],t.prototype,"statusBarService",void 0),__decorate$a([RefSelector("eStatusBarLeft")],t.prototype,"eStatusBarLeft",void 0),__decorate$a([RefSelector("eStatusBarCenter")],t.prototype,"eStatusBarCenter",void 0),__decorate$a([RefSelector("eStatusBarRight")],t.prototype,"eStatusBarRight",void 0),__decorate$a([PostConstruct],t.prototype,"postConstruct",null),t}(Component),__extends$v=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$9=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NameValueComp=function(i){__extends$v(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.setLabel=function(e,r){this.setDisplayed(!1);var n=this.gridOptionsWrapper.getLocaleTextFunc();this.eLabel.innerHTML=n(e,r)},t.prototype.setValue=function(e){this.eValue.innerHTML=e},t.TEMPLATE=`<div class="ag-status-name-value">
            <span ref="eLabel"></span>:&nbsp;
            <span ref="eValue" class="ag-status-name-value-value"></span>
        </div>`,__decorate$9([RefSelector("eLabel")],t.prototype,"eLabel",void 0),__decorate$9([RefSelector("eValue")],t.prototype,"eValue",void 0),t}(Component),__extends$u=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$8=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TotalAndFilteredRowsComp=function(i){__extends$u(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()},t.prototype.onDataChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator","."),o=_.formatNumberCommas(this.getFilteredRowCountValue(),r,n),a=_.formatNumberCommas(this.getTotalRowCount(),r,n);if(o===a)this.setValue(o);else{var s=this.gridOptionsWrapper.getLocaleTextFunc();this.setValue(o+" "+s("of","of")+" "+a)}},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||e++}),e},t.prototype.getTotalRowCount=function(){var e=0;return this.gridApi.forEachNode(function(r){r.group||e++}),e},t.prototype.init=function(){},t.prototype.destroy=function(){i.prototype.destroy.call(this)},__decorate$8([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$8([PostConstruct],t.prototype,"postConstruct",null),t}(NameValueComp),__extends$t=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$7=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FilteredRowsComp=function(i){__extends$t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,e),e()},t.prototype.onDataChanged=function(){var e=this.getTotalRowCountValue(),r=this.getFilteredRowCountValue(),n=this.gridOptionsWrapper.getLocaleTextFunc(),o=n("thousandSeparator",","),a=n("decimalSeparator",".");this.setValue(_.formatNumberCommas(r,o,a)),this.setDisplayed(e!==r)},t.prototype.getTotalRowCountValue=function(){var e=0;return this.gridApi.forEachNode(function(r){return e+=1}),e},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||(e+=1)}),e},t.prototype.init=function(){},t.prototype.destroy=function(){i.prototype.destroy.call(this)},__decorate$7([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$7([PostConstruct],t.prototype,"postConstruct",null),t}(NameValueComp),__extends$s=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$6=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TotalRowsComp=function(i){__extends$s(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(this.setLabel("totalRows","Total Rows"),this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()},t.prototype.onDataChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(_.formatNumberCommas(this.getRowCountValue(),r,n))},t.prototype.getRowCountValue=function(){var e=0;return this.gridApi.forEachLeafNode(function(r){return e+=1}),e},t.prototype.init=function(){},t.prototype.destroy=function(){i.prototype.destroy.call(this)},__decorate$6([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$6([PostConstruct],t.prototype,"postConstruct",null),t}(NameValueComp),__extends$r=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$5=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SelectedRowsComp=function(i){__extends$r(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count");var e=this.gridApi.getSelectedRows().length,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=r("thousandSeparator",","),o=r("decimalSeparator",".");this.setValue(_.formatNumberCommas(e,n,o)),this.setDisplayed(e>0);var a=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,a),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,a)},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"},t.prototype.onRowSelectionChanged=function(){var e=this.gridApi.getSelectedRows().length,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=r("thousandSeparator",","),o=r("decimalSeparator",".");this.setValue(_.formatNumberCommas(e,n,o)),this.setDisplayed(e>0)},t.prototype.init=function(){},t.prototype.destroy=function(){i.prototype.destroy.call(this)},__decorate$5([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$5([PostConstruct],t.prototype,"postConstruct",null),t}(NameValueComp),__extends$q=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$4=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},AggregationComp=function(i){__extends$q(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.destroy=function(){i.prototype.destroy.call(this)},t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"},t.prototype.init=function(){},t.prototype.setAggregationComponentValue=function(e,r,n){var o=this.getAggregationValueComponent(e);if(_.exists(o)&&o){var a=this.gridOptionsWrapper.getLocaleTextFunc(),s=a("thousandSeparator",","),l=a("decimalSeparator",".");o.setValue(_.formatNumberTwoDecimalPlacesAndCommas(r,s,l)),o.setDisplayed(n)}},t.prototype.getAggregationValueComponent=function(e){var r=e+"AggregationComp",n=null,o=_.exists(this.gridOptions.statusBar)&&this.gridOptions.statusBar?this.gridOptions.statusBar.statusPanels.find(function(a){return a.statusPanel==="agAggregationComponent"}):null;return _.exists(o)&&o?(!_.exists(o.statusPanelParams)||_.exists(o.statusPanelParams)&&_.exists(o.statusPanelParams.aggFuncs)&&_.exists(o.statusPanelParams.aggFuncs.find(function(a){return a===e})))&&(n=this[r]):n=this[r],n},t.prototype.onRangeSelectionChanged=function(){var e=this,r=this.rangeService?this.rangeService.getCellRanges():void 0,n=0,o=0,a=0,s=null,l=null,u={};r&&!_.missingOrEmpty(r)&&r.forEach(function(d){for(var h=e.rangeService.getRangeStartRow(d),p=e.rangeService.getRangeEndRow(d);;){var g=_.missing(h)||!h||e.rowPositionUtils.before(p,h);if(g||!h||!d.columns)break;d.columns.forEach(function(v){if(h!==null){var m=e.cellPositionUtils.createId({rowPinned:h.rowPinned,column:v,rowIndex:h.rowIndex});if(!u[m]){u[m]=!0;var y=e.rowRenderer.getRowNode(h);if(!_.missing(y)){var b=e.valueService.getValue(v,y);_.missing(b)||b===""||(typeof b=="object"&&"value"in b&&(b=b.value),typeof b=="string"&&(b=Number(b)),typeof b=="number"&&!isNaN(b)&&(n+=b,(l===null||b>l)&&(l=b),(s===null||b<s)&&(s=b),a++),o++)}}}}),h=e.cellNavigationService.getRowBelow(h)}});var c=o>1,f=a>1;this.setAggregationComponentValue("count",o,c),this.setAggregationComponentValue("sum",n,f),this.setAggregationComponentValue("min",s,f),this.setAggregationComponentValue("max",l,f),this.setAggregationComponentValue("avg",n/a,f)},t.TEMPLATE=`<div class="ag-status-panel ag-status-panel-aggregations">
            <ag-name-value ref="avgAggregationComp"></ag-name-value>
            <ag-name-value ref="countAggregationComp"></ag-name-value>
            <ag-name-value ref="minAggregationComp"></ag-name-value>
            <ag-name-value ref="maxAggregationComp"></ag-name-value>
            <ag-name-value ref="sumAggregationComp"></ag-name-value>
        </div>`,__decorate$4([Optional("rangeService")],t.prototype,"rangeService",void 0),__decorate$4([Autowired("valueService")],t.prototype,"valueService",void 0),__decorate$4([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),__decorate$4([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$4([Autowired("gridOptions")],t.prototype,"gridOptions",void 0),__decorate$4([Autowired("gridApi")],t.prototype,"gridApi",void 0),__decorate$4([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),__decorate$4([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),__decorate$4([RefSelector("sumAggregationComp")],t.prototype,"sumAggregationComp",void 0),__decorate$4([RefSelector("countAggregationComp")],t.prototype,"countAggregationComp",void 0),__decorate$4([RefSelector("minAggregationComp")],t.prototype,"minAggregationComp",void 0),__decorate$4([RefSelector("maxAggregationComp")],t.prototype,"maxAggregationComp",void 0),__decorate$4([RefSelector("avgAggregationComp")],t.prototype,"avgAggregationComp",void 0),__decorate$4([PostConstruct],t.prototype,"postConstruct",null),t}(Component),StatusBarModule={moduleName:ModuleNames.StatusBarModule,beans:[StatusBarService],agStackComponents:[{componentName:"AgStatusBar",componentClass:StatusBar},{componentName:"AgNameValue",componentClass:NameValueComp}],userComponents:[{componentName:"agAggregationComponent",componentClass:AggregationComp},{componentName:"agSelectedRowCountComponent",componentClass:SelectedRowsComp},{componentName:"agTotalRowCountComponent",componentClass:TotalRowsComp},{componentName:"agFilteredRowCountComponent",componentClass:FilteredRowsComp},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:TotalAndFilteredRowsComp}],dependantModules:[EnterpriseCoreModule]},__extends$p=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$3=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ViewportRowModel=function(i){__extends$p(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return t.prototype.ensureRowHeightsValid=function(e,r,n,o){return!1},t.prototype.init=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addManagedListener(this.eventService,Events.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},t.prototype.start=function(){this.gridOptionsWrapper.getViewportDatasource()&&this.setViewportDatasource(this.gridOptionsWrapper.getViewportDatasource())},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},t.prototype.calculateFirstRow=function(e){var r=this.gridOptionsWrapper.getViewportRowModelBufferSize(),n=this.gridOptionsWrapper.getViewportRowModelPageSize(),o=e-r;return o<0?0:Math.floor(o/n)*n},t.prototype.calculateLastRow=function(e){if(e===-1)return e;var r=this.gridOptionsWrapper.getViewportRowModelBufferSize(),n=this.gridOptionsWrapper.getViewportRowModelPageSize(),o=e+r,a=Math.ceil(o/n)*n,s=this.rowCount-1;return Math.min(a,s)},t.prototype.onViewportChanged=function(e){var r=this.calculateFirstRow(e.firstRow),n=this.calculateLastRow(e.lastRow);(this.firstRow!==r||this.lastRow!==n)&&(this.firstRow=r,this.lastRow=n,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},t.prototype.purgeRowsNotInViewport=function(){var e=this;Object.keys(this.rowNodesByIndex).forEach(function(r){var n=parseInt(r,10);if(n<e.firstRow||n>e.lastRow){if(e.isRowFocused(n))return;delete e.rowNodesByIndex[n]}})},t.prototype.isRowFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||r.rowPinned!=null)return!1;var n=r.rowIndex===e;return n},t.prototype.setViewportDatasource=function(e){this.destroyDatasource(),this.viewportDatasource=e,this.rowCount=0,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},t.prototype.getType=function(){return Constants.ROW_MODEL_TYPE_VIEWPORT},t.prototype.getRow=function(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n)}),r},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowIndexAtPixel=function(e){return this.rowHeight!==0?Math.floor(e/this.rowHeight):0},t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.isEmpty=function(){return this.rowCount>0},t.prototype.isRowsToRender=function(){return this.rowCount>0},t.prototype.getNodesInRangeForSelection=function(e,r){var n=_.missing(e)?0:e.rowIndex,o=r.rowIndex,a=n<this.firstRow||n>this.lastRow,s=o<this.firstRow||o>this.lastRow;if(a||s)return[];for(var l=[],u=n<=o?n:o,c=n<=o?o:n,f=u;f<=c;f++)l.push(this.rowNodesByIndex[f]);return l},t.prototype.forEachNode=function(e){var r=this,n=0;Object.keys(this.rowNodesByIndex).forEach(function(o){var a=parseInt(o,10),s=r.rowNodesByIndex[a];e(s,n),n++})},t.prototype.setRowData=function(e){var r=this;_.iterateObject(e,function(n,o){var a=parseInt(n,10);if(a>=r.firstRow&&a<=r.lastRow){var s=r.rowNodesByIndex[a];_.missing(s)&&(s=r.createBlankRowNode(a),r.rowNodesByIndex[a]=s),s.setDataAndId(o,a.toString())}})},t.prototype.createBlankRowNode=function(e){var r=new RowNode(this.beans);return r.setRowHeight(this.rowHeight),r.setRowTop(this.rowHeight*e),r.setRowIndex(e),r},t.prototype.setRowCount=function(e,r){if(r===void 0&&(r=!1),e!==this.rowCount){this.rowCount=e;var n={type:Events.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:r,animate:!1};this.eventService.dispatchEvent(n)}},t.prototype.isRowPresent=function(e){var r=this.getRowNode(e.id);return!!r},__decorate$3([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),__decorate$3([Autowired("focusService")],t.prototype,"focusService",void 0),__decorate$3([Autowired("beans")],t.prototype,"beans",void 0),__decorate$3([PostConstruct],t.prototype,"init",null),__decorate$3([PreDestroy],t.prototype,"destroyDatasource",null),t=__decorate$3([Bean("rowModel")],t),t}(BeanStub),ViewportRowModelModule={moduleName:ModuleNames.ViewportRowModelModule,rowModels:{viewport:ViewportRowModel},dependantModules:[EnterpriseCoreModule]},BBox=function(){function i(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return i.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},i.prototype.dilate=function(t){this.x-=t,this.y-=t,this.width+=t*2,this.height+=t*2},i.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},i.prototype.render=function(t,e){e===void 0&&(e=i.noParams),t.save(),e.resetTransform&&t.setTransform(1,0,0,1,0,0),t.strokeStyle=e.strokeStyle||"cyan",t.lineWidth=e.lineWidth||1,t.strokeRect(this.x,this.y,this.width,this.height),e.label&&(t.fillStyle=e.fillStyle||"black",t.textBaseline="bottom",t.fillText(e.label,this.x,this.y)),t.restore()},i.noParams={},i}(),__read$6=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Matrix=function(){function i(t){t===void 0&&(t=[1,0,0,1,0,0]),this.elements=t}return i.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},i.prototype.setIdentityElements=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},Object.defineProperty(i.prototype,"identity",{get:function(){var t=this.elements;return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"a",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"b",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"d",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"e",{get:function(){return this.elements[4]},set:function(t){this.elements[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"f",{get:function(){return this.elements[5]},set:function(t){this.elements[5]=t},enumerable:!0,configurable:!0}),i.prototype.AxB=function(t,e,r){var n=__read$6(t,6),o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=__read$6(e,6),d=f[0],h=f[1],p=f[2],g=f[3],v=f[4],m=f[5];r=r||t,r[0]=o*d+s*h,r[1]=a*d+l*h,r[2]=o*p+s*g,r[3]=a*p+l*g,r[4]=o*v+s*m+u,r[5]=a*v+l*m+c},i.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},i.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new i(e)},i.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},i.prototype.inverse=function(){var t=__read$6(this.elements,6),e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=1/(e*o-r*n);return e*=l,r*=l,n*=l,o*=l,new i([o,-r,-n,e,n*s-o*a,r*a-e*s])},i.prototype.inverseTo=function(t){var e=__read$6(this.elements,6),r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=1/(r*a-n*o);return r*=u,n*=u,o*=u,a*=u,t.setElements([a,-n,-o,r,o*l-a*s,n*s-r*l]),this},i.prototype.invertSelf=function(){var t=this.elements,e=__read$6(t,6),r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=1/(r*a-n*o);return r*=u,n*=u,o*=u,a*=u,t[0]=a,t[1]=-n,t[2]=-o,t[3]=r,t[4]=o*l-a*s,t[5]=n*s-r*l,this},i.prototype.clone=function(){return new i(this.elements.slice())},i.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},i.prototype.transformBBox=function(t,e,r){e===void 0&&(e=0);var n=this.elements,o=n[0],a=n[1],s=n[2],l=n[3],u=t.width*.5,c=t.height*.5,f=t.x+u,d=t.y+c,h,p;if(e){u-=e,c-=e;var g=Math.sqrt(o*o+s*s),v=Math.sqrt(a*a+l*l);h=Math.abs(u*o)+Math.abs(c*s)+Math.abs(g*e),p=Math.abs(u*a)+Math.abs(c*l)+Math.abs(v*e)}else h=Math.abs(u*o)+Math.abs(c*s),p=Math.abs(u*a)+Math.abs(c*l);return r||(r=new BBox(0,0,0,0)),r.x=f*o+d*s+n[4]-h,r.y=f*a+d*l+n[5]-p,r.width=h+h,r.height=p+p,r},i.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},i.flyweight=function(t){return t?t instanceof i?i.matrix.setElements(t.elements):i.matrix.setElements(t):i.matrix.setIdentityElements(),i.matrix},i.matrix=new i,i}();function createId(i){var t=i.constructor,e=t.className;if(!e)throw new Error("The "+t+" is missing the 'className' property.");return e+"-"+(t.id=(t.id||0)+1)}var __read$5=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},PointerEvents;(function(i){i[i.All=0]="All",i[i.None=1]="None"})(PointerEvents||(PointerEvents={}));var Node=function(){function i(){this.id=createId(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new Matrix,this.inverseMatrix=new Matrix,this._dirtyTransform=!1,this._scalingX=1,this._scalingY=1,this._scalingCenterX=null,this._scalingCenterY=null,this._rotationCenterX=null,this._rotationCenterY=null,this._rotation=0,this._translationX=0,this._translationY=0,this._dirty=!0,this._visible=!0,this.pointerEvents=PointerEvents.All}return i.isNode=function(t){return t?t.matrix!==void 0:!1},i.prototype._setScene=function(t){this._scene=t;for(var e=this.children,r=e.length,n=0;n<r;n++)e[n]._setScene(t)},Object.defineProperty(i.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),i.prototype._setParent=function(t){this._parent=t},Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),i.prototype.countChildren=function(t){if(t===void 0&&(t=i.MAX_SAFE_INTEGER),t<=0)return 0;for(var e=this.children,r=e.length,n=r,o=0;o<r;o++)n+=e[o].countChildren(t-1);return n},i.prototype.append=function(t){i.isNode(t)&&(t=[t]);for(var e=t.length,r=0;r<e;r++){var n=t[r];if(n.parent)throw new Error(n+" already belongs to another parent: "+n.parent+".");if(n.scene)throw new Error(n+" already belongs a scene: "+n.scene+".");if(this.childSet[n.id])throw new Error("Duplicate "+n.constructor.name+" node: "+n);this._children.push(n),this.childSet[n.id]=!0,n._setParent(this),n._setScene(this.scene)}this.dirty=!0},i.prototype.appendChild=function(t){if(t.parent)throw new Error(t+" already belongs to another parent: "+t.parent+".");if(t.scene)throw new Error(t+" already belongs to a scene: "+t.scene+".");if(this.childSet[t.id])throw new Error("Duplicate "+t.constructor.name+" node: "+t);return this._children.push(t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene),this.dirty=!0,t},i.prototype.removeChild=function(t){if(t.parent===this){var e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._setParent(),t._setScene(),this.dirty=!0,t}throw new Error("The node to be removed is not a child of this node.")},i.prototype.insertBefore=function(t,e){var r=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){var n=this.children.indexOf(e);if(n>=0)this._children.splice(n,0,t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene);else throw new Error(e+" has "+r+" as the parent, but is not in its list of children.");this.dirty=!0}else this.append(t);return t},Object.defineProperty(i.prototype,"nextSibling",{get:function(){var t=this.parent;if(t){var e=t.children,r=e.indexOf(this);if(r>=0&&r<=e.length-1)return e[r+1]}},enumerable:!0,configurable:!0}),i.prototype.transformPoint=function(t,e){for(var r=Matrix.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.invertSelf().transformPoint(t,e)},i.prototype.inverseTransformPoint=function(t,e){for(var r=Matrix.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.transformPoint(t,e)},Object.defineProperty(i.prototype,"dirtyTransform",{get:function(){return this._dirtyTransform},set:function(t){this._dirtyTransform=t,t&&(this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalingX",{get:function(){return this._scalingX},set:function(t){this._scalingX!==t&&(this._scalingX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalingY",{get:function(){return this._scalingY},set:function(t){this._scalingY!==t&&(this._scalingY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalingCenterX",{get:function(){return this._scalingCenterX},set:function(t){this._scalingCenterX!==t&&(this._scalingCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalingCenterY",{get:function(){return this._scalingCenterY},set:function(t){this._scalingCenterY!==t&&(this._scalingCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationCenterX",{get:function(){return this._rotationCenterX},set:function(t){this._rotationCenterX!==t&&(this._rotationCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationCenterY",{get:function(){return this._rotationCenterY},set:function(t){this._rotationCenterY!==t&&(this._rotationCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(t){this.rotation=t/180*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"translationX",{get:function(){return this._translationX},set:function(t){this._translationX!==t&&(this._translationX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"translationY",{get:function(){return this._translationY},set:function(t){this._translationY!==t&&(this._translationY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),i.prototype.containsPoint=function(t,e){return!1},i.prototype.pickNode=function(t,e){if(!(!this.visible||this.pointerEvents===PointerEvents.None||!this.containsPoint(t,e))){var r=this.children;if(r.length)for(var n=r.length-1;n>=0;n--){var o=r[n].pickNode(t,e);if(o)return o}else if(!this.isContainerNode)return this}},i.prototype.computeBBox=function(){},i.prototype.computeBBoxCenter=function(){var t=this.computeBBox&&this.computeBBox();return t?[t.x+t.width*.5,t.y+t.height*.5]:[0,0]},i.prototype.computeTransformMatrix=function(){var t=__read$5([0,0],2),e=t[0],r=t[1],n=this.scalingX,o=this.scalingY,a,s;n===1&&o===1?(a=0,s=0):(a=this.scalingCenterX===null?e:this.scalingCenterX,s=this.scalingCenterY===null?r:this.scalingCenterY);var l=this.rotation,u=Math.cos(l),c=Math.sin(l),f,d;l===0?(f=0,d=0):(f=this.rotationCenterX===null?e:this.rotationCenterX,d=this.rotationCenterY===null?r:this.rotationCenterY);var h=this.translationX,p=this.translationY,g=a*(1-n)-f,v=s*(1-o)-d;this.dirtyTransform=!1,this.matrix.setElements([u*n,c*n,-c*o,u*o,u*g-c*v+f+h,c*g+u*v+d+p]).inverseTo(this.inverseMatrix)},Object.defineProperty(i.prototype,"dirty",{get:function(){return this._dirty},set:function(t){this._dirty=t,t&&(this.parent?this.parent.dirty=!0:this.scene&&(this.scene.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this.dirty=!0)},enumerable:!0,configurable:!0}),i.MAX_SAFE_INTEGER=Math.pow(2,53)-1,i}(),__extends$o=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Group=function(i){__extends$o(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.isContainerNode=!0,e._opacity=1,e}return Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){var e=1/0,r=-1/0,n=1/0,o=-1/0;return this.dirtyTransform&&this.computeTransformMatrix(),this.children.forEach(function(a){if(a.visible){var s=a.computeBBox();if(s){if(!(a instanceof t)){a.dirtyTransform&&a.computeTransformMatrix();for(var l=Matrix.flyweight(a.matrix),u=a.parent;u;)l.preMultiplySelf(u.matrix),u=u.parent;l.transformBBox(s,0,s)}var c=s.x,f=s.y;c<e&&(e=c),f<n&&(n=f),c+s.width>r&&(r=c+s.width),f+s.height>o&&(o=f+s.height)}}}),new BBox(e,n,r-e,o-n)},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.children,n=r.length;e.globalAlpha*=this.opacity;for(var o=0;o<n;o++){var a=r[o];a.visible&&(e.save(),a.render(e),e.restore())}},t.className="Group",t}(Node);function chainObjects(i,t){var e=Object.create(i);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var __extends$n=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Shape=function(i){__extends$n(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.lastInstanceId=0,e._fillOpacity=1,e._strokeOpacity=1,e._fill=t.defaultStyles.fill,e._stroke=t.defaultStyles.stroke,e._strokeWidth=t.defaultStyles.strokeWidth,e._lineDash=t.defaultStyles.lineDash,e._lineDashOffset=t.defaultStyles.lineDashOffset,e._lineCap=t.defaultStyles.lineCap,e._lineJoin=t.defaultStyles.lineJoin,e._opacity=t.defaultStyles.opacity,e.onShadowChange=function(){e.dirty=!0},e._fillShadow=t.defaultStyles.fillShadow,e._strokeShadow=t.defaultStyles.strokeShadow,e}return t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,o=r.length;n<o;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)e.hasOwnProperty(n)&&r.hasOwnProperty(n)&&(this[n]=e[n])},Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity!==e&&(this._fillOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(e){this._strokeOpacity!==e&&(this._strokeOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill!==e&&(this._fill=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){this._stroke!==e&&(this._stroke=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return Math.floor(this.strokeWidth)%2/2},enumerable:!0,configurable:!0}),t.prototype.align=function(e,r,n){return n!=null?Math.floor(n)+Math.floor(r%1+n%1):Math.floor(r)+e},Object.defineProperty(t.prototype,"lineDash",{get:function(){return this._lineDash},set:function(e){var r=this._lineDash;if(r!==e){if(r&&e&&r.length===e.length){for(var n=!0,o=e.length,a=0;a<o;a++)if(r[a]!==e[a]){n=!1;break}if(n)return}this._lineDash=e,this.dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this._lineDashOffset},set:function(e){this._lineDashOffset!==e&&(this._lineDashOffset=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCap",{get:function(){return this._lineCap},set:function(e){this._lineCap!==e&&(this._lineCap=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillShadow",{get:function(){return this._fillShadow},set:function(e){var r=this._fillShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._fillShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeShadow",{get:function(){return this._strokeShadow},set:function(e){var r=this._strokeShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._strokeShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.fillStroke=function(e){if(this.scene){var r=this.scene.canvas.pixelRatio||1,n=e.globalAlpha;if(this.fill){e.fillStyle=this.fill,e.globalAlpha=n*this.opacity*this.fillOpacity;var o=this.fillShadow;o&&o.enabled&&(e.shadowColor=o.color,e.shadowOffsetX=o.xOffset*r,e.shadowOffsetY=o.yOffset*r,e.shadowBlur=o.blur*r),e.fill()}if(e.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth){e.strokeStyle=this.stroke,e.globalAlpha=n*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin);var a=this.strokeShadow;a&&a.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*r,e.shadowOffsetY=a.yOffset*r,e.shadowBlur=a.blur*r),e.stroke()}}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=chainObjects({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,strokeShadow:void 0}),t}(Node),sign=Math.sign?Math.sign:function(i){return i=+i,i===0||isNaN(i)?i:i>0?1:-1};function linearRoot(i,t){var e=-t/i;return i!==0&&e>=0&&e<=1?[e]:[]}function quadraticRoots(i,t,e){if(i===0)return linearRoot(t,e);var r=t*t-4*i*e,n=[];if(r===0){var o=-t/(2*i);o>=0&&o<=1&&n.push(o)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*i),l=(-t+a)/(2*i);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}function cubicRoots(i,t,e,r){if(i===0)return quadraticRoots(t,e,r);var n=t/i,o=e/i,a=r/i,s=(3*o-n*n)/9,l=(9*n*o-27*a-2*n*n*n)/54,u=s*s*s+l*l,c=1/3,f=[];if(u>=0){var d=Math.sqrt(u),h=sign(l+d)*Math.pow(Math.abs(l+d),c),p=sign(l-d)*Math.pow(Math.abs(l-d),c),g=Math.abs(Math.sqrt(3)*(h-p)/2),v=-c*n+(h+p);if(v>=0&&v<=1&&f.push(v),g===0){var m=-c*n-(h+p)/2;m>=0&&m<=1&&f.push(m)}}else{var y=Math.acos(l/Math.sqrt(-s*s*s)),b=c*n,C=2*Math.sqrt(-s),x=C*Math.cos(c*y)-b,w=C*Math.cos(c*(y+2*Math.PI))-b,P=C*Math.cos(c*(y+4*Math.PI))-b;x>=0&&x<=1&&f.push(x),w>=0&&w<=1&&f.push(w),P>=0&&P<=1&&f.push(P)}return f}function segmentIntersection(i,t,e,r,n,o,a,s){var l=(e-i)*(s-o)-(r-t)*(a-n);if(l===0)return null;var u=((a-n)*(t-o)-(i-n)*(s-o))/l,c=((e-i)*(t-o)-(r-t)*(i-n))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:i+u*(e-i),y:t+u*(r-t)}:null}function cubicSegmentIntersections(i,t,e,r,n,o,a,s,l,u,c,f){for(var d=[],h=u-f,p=c-l,g=l*(f-u)-u*(c-l),v=bezierCoefficients(i,e,n,a),m=bezierCoefficients(t,r,o,s),y=h*v[0]+p*m[0],b=h*v[1]+p*m[1],C=h*v[2]+p*m[2],x=h*v[3]+p*m[3]+g,w=cubicRoots(y,b,C,x),P=0;P<w.length;P++){var S=w[P],O=S*S,E=S*O,D=v[0]*E+v[1]*O+v[2]*S+v[3],R=m[0]*E+m[1]*O+m[2]*S+m[3],F=void 0;l!==c?F=(D-l)/(c-l):F=(R-u)/(f-u),F>=0&&F<=1&&d.push({x:D,y:R})}return d}function bezierCoefficients(i,t,e,r){return[-i+3*t-3*e+r,3*i-6*t+3*e,-3*i+3*t,i]}var Path2D=function(){function i(){this.commands=[],this.params=[],this._closedPath=!1}return i.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push("M"),this.params.push(t,e)},i.prototype.lineTo=function(t,e){this.xy?(this.commands.push("L"),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},i.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},i.prototype.arcTo=function(t,e,r,n,o,a,s){var l=this.xy;if(l){t<0&&(t=-t),e<0&&(e=-e);var u=l[0],c=l[1],f=(u-a)/2,d=(c-s)/2,h=Math.sin(r),p=Math.cos(r),g=p*f+h*d,v=-h*f+p*d,m=g/t,y=v/e,b=m*m+y*y,C=(u+a)/2,x=(c+s)/2,w=0,P=0;b>=1?(b=Math.sqrt(b),t*=b,e*=b):(b=Math.sqrt(1/b-1),n===o&&(b=-b),w=b*t*y,P=-b*e*m,C+=p*w-h*P,x+=h*w+p*P);var S=Math.atan2((v-P)/e,(g-w)/t),O=Math.atan2((-v-P)/e,(-g-w)/t)-S;this.cubicArc(C,x,t,e,r,S,S+O,1-o)}},i.cubicArc=function(t,e,r,n,o,a,s,l,u,c){if(c){var f=l;l=u,u=f}var d=e.length,h=.5522847498307935,p=Math.sin(l),g=Math.cos(l),v=Math.sin(s),m=Math.cos(s),y=Math.PI/2,b=m*g*o-v*p*a,C=v*g*o+m*p*a,x=-m*p*o-v*g*a,w=-v*p*o+m*g*a;for(u-=l,u<0&&(u+=Math.PI*2),t.push("M"),e.push(b+r,C+n);u>=y;){u-=y,t.push("C");var P=x+r;e.push(b+x*h+r,C+w*h+n,b*h+x+r,C*h+w+n,Math.abs(P)<1e-8?0:P,w+n);var f=b;b=x,x=-f,f=C,C=w,w=-f}if(u){var S=1.3333333333333333*Math.tan(u/4),O=Math.sin(u),E=Math.cos(u),D=E+S*O,R=O-S*E;t.push("C");var P=b*E+x*O+r;e.push(b+x*S+r,C+w*S+n,b*D+x*R+r,C*D+w*R+n,Math.abs(P)<1e-8?0:P,C*E+w*O+n)}if(c)for(var F=d,I=e.length-2;F<I;F+=2,I-=2){var f=e[F];e[F]=e[I],e[I]=f,f=e[F+1],e[F+1]=e[I+1],e[I+1]=f}},i.prototype.cubicArc=function(t,e,r,n,o,a,s,l){var u=this.commands,c=this.params,f=u.length;i.cubicArc(u,c,t,e,r,n,o,a,s,l);var d=c[c.length-2],h=c[c.length-1];this.xy?(u[f]="L",this.xy[0]=d,this.xy[1]=h):this.xy=[d,h]},i.prototype.deCasteljau=function(t,e){var r=t.length;if(r<2||r%2===1)throw new Error("Fewer than two points or not an even count.");if(r===2||e===0)return t.slice(0,2);if(e===1)return t.slice(-2);for(var n=[],o=r-2,a=0;a<o;a+=2)n.push((1-e)*t[a]+e*t[a+2],(1-e)*t[a+1]+e*t[a+3]);return this.deCasteljau(n,e)},i.prototype.approximateCurve=function(t,e){var r=this.deCasteljau(t,0);this.moveTo(r[0],r[1]);for(var n=1/e,o=n;o<=1;o+=n){var a=this.deCasteljau(t,o);this.lineTo(a[0],a[1])}},i.prototype.quadraticCurveTo=function(t,e,r,n){this.xy||this.moveTo(t,e),this.cubicCurveTo((this.xy[0]+2*t)/3,(this.xy[1]+2*e)/3,(2*t+r)/3,(2*e+n)/3,r,n)},i.prototype.cubicCurveTo=function(t,e,r,n,o,a){this.xy||this.moveTo(t,e),this.commands.push("C"),this.params.push(t,e,r,n,o,a),this.xy[0]=o,this.xy[1]=a},Object.defineProperty(i.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),i.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},i.prototype.clear=function(){this.commands.length=0,this.params.length=0,this.xy=void 0,this._closedPath=!1},i.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,o=r.length,a=-1e4,s=-1e4,l=NaN,u=NaN,c=0,f=0,d=0,h=0,p=0;h<o;h++)switch(r[h]){case"M":isNaN(l)||segmentIntersection(l,u,c,f,a,s,t,e)&&d++,l=c=n[p++],u=f=n[p++];break;case"L":segmentIntersection(c,f,c=n[p++],f=n[p++],a,s,t,e)&&d++;break;case"C":d+=cubicSegmentIntersections(c,f,n[p++],n[p++],n[p++],n[p++],c=n[p++],f=n[p++],a,s,t,e).length;break;case"Z":isNaN(l)||segmentIntersection(l,u,c,f,a,s,t,e)&&d++;break}return d%2===1},i.fromString=function(t){var e=new i;return e.setFromString(t),e},i.parseSvgPath=function(t){return t.trim().split(i.splitCommandsRe).map(function(e){var r=e.match(i.matchParamsRe);return{command:e.substr(0,1),params:r?r.map(parseFloat):[]}})},i.prettifySvgPath=function(t){return i.parseSvgPath(t).map(function(e){return e.command+e.params.join(",")}).join(`
`)},i.prototype.setFromString=function(t){var e=this;this.clear();var r=i.parseSvgPath(t),n,o,a,s,l;function u(){l.match(i.quadraticCommandRe)||(a=n,s=o)}function c(){l.match(i.cubicCommandRe)||(a=n,s=o)}r.forEach(function(f){var d=f.params,h=d.length,p=0;switch(f.command){case"M":for(e.moveTo(n=d[p++],o=d[p++]);p<h;)e.lineTo(n=d[p++],o=d[p++]);break;case"m":for(e.moveTo(n+=d[p++],o+=d[p++]);p<h;)e.lineTo(n+=d[p++],o+=d[p++]);break;case"L":for(;p<h;)e.lineTo(n=d[p++],o=d[p++]);break;case"l":for(;p<h;)e.lineTo(n+=d[p++],o+=d[p++]);break;case"C":for(;p<h;)e.cubicCurveTo(d[p++],d[p++],a=d[p++],s=d[p++],n=d[p++],o=d[p++]);break;case"c":for(;p<h;)e.cubicCurveTo(n+d[p++],o+d[p++],a=n+d[p++],s=o+d[p++],n+=d[p++],o+=d[p++]);break;case"S":for(c();p<h;)e.cubicCurveTo(n+n-a,o+o-s,a=d[p++],s=d[p++],n=d[p++],o=d[p++]);break;case"s":for(c();p<h;)e.cubicCurveTo(n+n-a,o+o-s,a=n+d[p++],s=o+d[p++],n+=d[p++],o+=d[p++]);break;case"Q":for(;p<h;)e.quadraticCurveTo(a=d[p++],s=d[p++],n=d[p++],o=d[p++]);break;case"q":for(;p<h;)e.quadraticCurveTo(a=n+d[p++],s=o+d[p++],n+=d[p++],o+=d[p++]);break;case"T":for(u();p<h;)e.quadraticCurveTo(a=n+n-a,s=o+o-s,n=d[p++],o=d[p++]);break;case"t":for(u();p<h;)e.quadraticCurveTo(a=n+n-a,s=o+o-s,n+=d[p++],o+=d[p++]);break;case"A":for(;p<h;)e.arcTo(d[p++],d[p++],d[p++]*Math.PI/180,d[p++],d[p++],n=d[p++],o=d[p++]);break;case"a":for(;p<h;)e.arcTo(d[p++],d[p++],d[p++]*Math.PI/180,d[p++],d[p++],n+=d[p++],o+=d[p++]);break;case"Z":case"z":e.closePath();break;case"H":for(;p<h;)e.lineTo(n=d[p++],o);break;case"h":for(;p<h;)e.lineTo(n+=d[p++],o);break;case"V":for(;p<h;)e.lineTo(n,o=d[p++]);break;case"v":for(;p<h;)e.lineTo(n,o+=d[p++]);break}l=f.command})},i.prototype.toString=function(){for(var t=this.commands,e=this.params,r=t.length,n=[],o=0,a=0;o<r;o++)switch(t[o]){case"M":n.push("M"+e[a++]+","+e[a++]);break;case"L":n.push("L"+e[a++]+","+e[a++]);break;case"C":n.push("C"+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]);break;case"Z":n.push("Z");break}return n.join("")},i.prototype.toPrettyString=function(){return i.prettifySvgPath(this.toString())},i.prototype.toSvg=function(){return i.xmlDeclaration+`
<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="`+i.xmlns+`">
    <path d="`+this.toString()+`" style="fill:none;stroke:#000;stroke-width:0.5;"/>
</svg>`},i.prototype.toDebugSvg=function(){var t=i.prettifySvgPath(this.toString());return i.xmlDeclaration+`
<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="`+i.xmlns+`">
    <path d="`+t+`" style="fill:none;stroke:#000;stroke-width:0.5;"/>
</svg>`},i.prototype.toCubicPaths=function(){var t=[],e=this.params,r,n,o,a,s,l=0;return this.commands.forEach(function(u){switch(u){case"M":r=[n=a=e[l++],o=s=e[l++]],t.push(r);break;case"L":var c=e[l++],f=e[l++];r.push((a+a+c)/3,(s+s+f)/3,(a+c+c)/3,(s+f+f)/3,a=c,s=f);break;case"C":r.push(e[l++],e[l++],e[l++],e[l++],a=e[l++],s=e[l++]);break;case"Z":r.push((a+a+n)/3,(s+s+o)/3,(a+n+n)/3,(s+o+o)/3,a=n,s=o);break}}),t},i.cubicPathToString=function(t){var e=t.length;if(!(e%2===0&&(e/2-1)/2>=1))throw new Error("Invalid path.");return"M"+t.slice(0,2).join(",")+"C"+t.slice(2).join(",")},i.splitCommandsRe=/(?=[AaCcHhLlMmQqSsTtVvZz])/g,i.matchParamsRe=/-?[0-9]*\.?\d+/g,i.quadraticCommandRe=/[QqTt]/,i.cubicCommandRe=/[CcSs]/,i.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',i.xmlns="http://www.w3.org/2000/svg",i}(),__extends$m=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Path=function(i){__extends$m(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.path=new Path2D,e._dirtyPath=!0,e._svgPath="",e}return Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"svgPath",{get:function(){return this._svgPath},set:function(e){this._svgPath!==e&&(this._svgPath=e,this.path.setFromString(e),this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.updatePath=function(){},t.prototype.render=function(e){var r=this.scene;this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e),this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),r.appendPath(this.path),this.fillStroke(e),this.dirty=!1},t.className="Path",t}(Shape),__extends$l=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Line=function(i){__extends$l(t,i);function t(){var e=i.call(this)||this;return e._x1=0,e._y1=0,e._x2=0,e._y2=0,e.restoreOwnStyles(),e}return Object.defineProperty(t.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1!==e&&(this._x1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1!==e&&(this._y1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2!==e&&(this._x2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2!==e&&(this._y2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return new BBox(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.x1,n=this.y1,o=this.x2,a=this.y2;if(r===o){var s=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=s,o=s}else if(n===a){var l=Math.round(n)+Math.floor(this.strokeWidth)%2/2;n=l,a=l}e.beginPath(),e.moveTo(r,n),e.lineTo(o,a),this.fillStroke(e),this.dirty=!1},t.className="Line",t.defaultStyles=chainObjects(Shape.defaultStyles,{fill:void 0,strokeWidth:1}),t}(Shape),__read$4=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},BandScale=function(){function i(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(i.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=this._domain;e.length=0,this.index=new Map;var r=this.index;t.forEach(function(n){r.get(n)===void 0&&r.set(n,e.push(n)-1)}),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return this._range},set:function(t){this._range[0]=t[0],this._range[1]=t[1],this.rescale()},enumerable:!0,configurable:!0}),i.prototype.ticks=function(){return this._domain},i.prototype.convert=function(t){var e=this.index.get(t);if(e===void 0)return NaN;var r=this.ordinalRange[e];return r===void 0?NaN:r},Object.defineProperty(i.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=Math.max(0,Math.min(1,t)),this._paddingInner=t,this._paddingOuter=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"round",{get:function(){return this._round},set:function(t){this._round=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),i.prototype.rescale=function(){var t,e=this._domain.length;if(e){var r=__read$4(this._range,2),n=r[0],o=r[1],a=o<n;a&&(t=__read$4([o,n],2),n=t[0],o=t[1]);var s=(o-n)/Math.max(1,e-this._paddingInner+this._paddingOuter*2);this._round&&(s=Math.floor(s)),n+=(o-n-s*(e-this._paddingInner))*this._align,this._bandwidth=s*(1-this._paddingInner),this._round&&(n=Math.round(n),this._bandwidth=Math.round(this._bandwidth));for(var l=[],u=0;u<e;u++)l.push(n+s*u);this.ordinalRange=a?l.reverse():l}},i}(),EnterNode=function(){function i(t,e){this.next=null,this.scene=t.scene,this.parent=t,this.datum=e}return i.prototype.appendChild=function(t){if(this.next===null)return this.parent.insertBefore(t,null);if(!Node.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(t,this.next)},i.prototype.insertBefore=function(t,e){return this.parent.insertBefore(t,e)},i}(),Selection=function(){function i(t,e){this.groups=t,this.parents=e}return i.select=function(t){return new i([[typeof t=="function"?t():t]],[void 0])},i.selectAll=function(t){return new i([t??[]],[void 0])},i.prototype.append=function(t){return this.select(function(e){return e.appendChild(new t)})},i.prototype.appendFn=function(t){return this.select(function(e,r,n,o){return e.appendChild(t(e,r,n,o))})},i.prototype.select=function(t){for(var e=this.groups,r=e.length,n=[],o=0;o<r;o++)for(var a=e[o],s=a.length,l=n[o]=new Array(s),u=0;u<s;u++){var c=a[u];if(c){var f=t(c,c.datum,u,a);f&&(f.datum=c.datum),l[u]=f}}return new i(n,this.parents)},i.prototype.selectByClass=function(t){return this.select(function(e){if(Node.isNode(e))for(var r=e.children,n=r.length,o=0;o<n;o++){var a=r[o];if(a instanceof t)return a}})},i.prototype.selectByTag=function(t){return this.select(function(e){if(Node.isNode(e))for(var r=e.children,n=r.length,o=0;o<n;o++){var a=r[o];if(a.tag===t)return a}})},i.prototype.selectAllByClass=function(t){return this.selectAll(function(e){var r=[];if(Node.isNode(e))for(var n=e.children,o=n.length,a=0;a<o;a++){var s=n[a];s instanceof t&&r.push(s)}return r})},i.prototype.selectAllByTag=function(t){return this.selectAll(function(e){var r=[];if(Node.isNode(e))for(var n=e.children,o=n.length,a=0;a<o;a++){var s=n[a];s.tag===t&&r.push(s)}return r})},i.prototype.selectNone=function(){return[]},i.prototype.selectAll=function(t){t||(t=this.selectNone);for(var e=[],r=[],n=this.groups,o=n.length,a=0;a<o;a++)for(var s=n[a],l=s.length,u=0;u<l;u++){var c=s[u];c&&(e.push(t(c,c.datum,u,s)),r.push(c))}return new i(e,r)},i.prototype.each=function(t){for(var e=this.groups,r=e.length,n=0;n<r;n++)for(var o=e[n],a=o.length,s=0;s<a;s++){var l=o[s];l&&t(l,l.datum,s,o)}return this},i.prototype.remove=function(){return this.each(function(t){if(Node.isNode(t)){var e=t.parent;e&&e.removeChild(t)}})},i.prototype.merge=function(t){for(var e=this.groups,r=t.groups,n=e.length,o=r.length,a=Math.min(n,o),s=new Array(n),l=0;l<a;l++)for(var u=e[l],c=r[l],f=u.length,d=s[l]=new Array(f),h=0;h<f;h++){var p=u[h]||c[h];d[h]=p||void 0}for(;l<n;l++)s[l]=e[l];return new i(s,this.parents)},i.prototype.node=function(){for(var t=this.groups,e=t.length,r=0;r<e;r++)for(var n=t[r],o=n.length,a=0;a<o;a++){var s=n[a];if(s)return s}return null},i.prototype.attr=function(t,e){return this.each(function(r){r[t]=e}),this},i.prototype.attrFn=function(t,e){return this.each(function(r,n,o,a){r[t]=e(r,n,o,a)}),this},i.prototype.call=function(t){return t(this),this},Object.defineProperty(i.prototype,"size",{get:function(){var t=0;return this.each(function(){return t++}),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){var t=[];return this.each(function(e,r){return t.push(r)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enter",{get:function(){return new i(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exit",{get:function(){return new i(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),i.prototype.setDatum=function(t){return this.each(function(e){e.datum=t})},Object.defineProperty(i.prototype,"datum",{get:function(){var t=this.node();return t?t.datum:null},enumerable:!0,configurable:!0}),i.prototype.setData=function(t,e){if(typeof t!="function"){var r=t;t=function(){return r}}for(var n=this.groups,o=this.parents,a=n.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;c++){var f=n[c],d=o[c];if(!d)throw new Error("Group #"+c+" has no parent: "+f);var h=f.length,p=t(d,d.datum,c,o),g=p.length,v=l[c]=new Array(g),m=s[c]=new Array(g),y=u[c]=new Array(h);e?this.bindKey(d,f,v,m,y,p,e):this.bindIndex(d,f,v,m,y,p);for(var b=0,C=0;b<g;b++){var x=v[b];if(x){b>=C&&(C=b+1);for(var w=void 0;!(w=m[C])&&C<g;)C++;x.next=w||null}}}var P=new i(s,o);return P.enterGroups=l,P.exitGroups=u,P},i.prototype.bindIndex=function(t,e,r,n,o,a){for(var s=e.length,l=a.length,u=0;u<l;u++){var c=e[u];c?(c.datum=a[u],n[u]=c):r[u]=new EnterNode(t,a[u])}for(;u<s;u++){var c=e[u];c&&(o[u]=c)}},i.prototype.bindKey=function(t,e,r,n,o,a,s){for(var l=e.length,u=a.length,c=new Array(l),f={},d=0;d<l;d++){var h=e[d];if(h){var p=c[d]=i.keyPrefix+s(h,h.datum,d,e);p in f?o[d]=h:f[p]=h}}for(var d=0;d<u;d++){var p=i.keyPrefix+s(t,a[d],d,a),h=f[p];h?(n[d]=h,h.datum=a[d],f[p]=void 0):r[d]=new EnterNode(t,a[d])}for(var d=0;d<l;d++){var h=e[d];h&&f[c[d]]===h&&(o[d]=h)}},i.keyPrefix="$",i}(),HdpiCanvas=function(){function i(t,e,r){t===void 0&&(t=window.document),e===void 0&&(e=600),r===void 0&&(r=300),this._container=void 0,this._pixelRatio=NaN,this._width=100,this._height=100,this.document=t,this.element=t.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.style.userSelect="none",this.element.style.display="block",this.setPixelRatio(),this.resize(e,r)}return Object.defineProperty(i.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!0,configurable:!0}),i.prototype.remove=function(){var t=this.element.parentNode;t!=null&&t.removeChild(this.element)},i.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},i.prototype.clear=function(){this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.element.width,this.element.height),this.context.restore()},i.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},i.prototype.getDataURL=function(t){return this.element.toDataURL(t)},i.prototype.download=function(t){t=((t||"").trim()||"image")+".png";var e="image/png",r=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=r,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)},Object.defineProperty(i.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),i.prototype.setPixelRatio=function(t){var e=t||window.devicePixelRatio;e!==this.pixelRatio&&(i.overrideScale(this.context,e),this._pixelRatio=e,this.resize(this.width,this.height))},Object.defineProperty(i.prototype,"pixelated",{get:function(){return this.element.style.imageRendering==="pixelated"},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),i.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,o=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",o.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(i,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!0,configurable:!0}),Object.defineProperty(i,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!0,configurable:!0}),Object.defineProperty(i,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!e&&!r,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has},enumerable:!0,configurable:!0}),i.measureText=function(t,e,r,n){var o=this.textMeasuringContext;return o.font=e,o.textBaseline=r,o.textAlign=n,o.measureText(t)},i.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else return this.measureSvgText(t,e)},i.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var o=n[t];if(o)return o}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},i.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){r>0&&(this.$restore(),r--)},setTransform:function(a,s,l,u,c,f){this.$setTransform(a*e,s*e,l*e,u*e,c*e,f*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0),this.save(),r=0}};for(var o in n)n.hasOwnProperty(o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o])},i.textSizeCache={},i}(),__read$3=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},__spread=function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(__read$3(arguments[t]));return i},Scene=function(){function i(t,e,r){var n=this;t===void 0&&(t=window.document),this.id=createId(this),this._dirty=!1,this.animationFrameId=0,this._root=null,this.debug={renderFrameIndex:!1,renderBoundingBoxes:!1},this._frameIndex=0,this.render=function(){var o,a=n,s=a.canvas,l=a.ctx,u=a.root,c=a.pendingSize;if(n.animationFrameId=0,c&&((o=n.canvas).resize.apply(o,__spread(c)),n.pendingSize=void 0),u&&!u.visible){n.dirty=!1;return}s.clear(),u&&(l.save(),u.visible&&u.render(l),l.restore()),n._frameIndex++,n.debug.renderFrameIndex&&(l.fillStyle="white",l.fillRect(0,0,40,15),l.fillStyle="black",l.fillText(n.frameIndex.toString(),2,10)),n.dirty=!1},this.canvas=new HdpiCanvas(t,e,r),this.ctx=this.canvas.context}return Object.defineProperty(i.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!0,configurable:!0}),i.prototype.download=function(t){this.canvas.download(t)},i.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(i.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),i.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)&&(this.pendingSize=[t,e],this.dirty=!0)},Object.defineProperty(i.prototype,"dirty",{get:function(){return this._dirty},set:function(t){t&&!this._dirty&&(this.animationFrameId=requestAnimationFrame(this.render)),this._dirty=t},enumerable:!0,configurable:!0}),i.prototype.cancelRender=function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0,this._dirty=!1)},Object.defineProperty(i.prototype,"root",{get:function(){return this._root},set:function(t){t!==this._root&&(this._root&&this._root._setScene(),this._root=t,t&&(t.parent===null&&t.scene&&t.scene!==this&&(t.scene.root=null),t._setScene(this)),this.dirty=!0)},enumerable:!0,configurable:!0}),i.prototype.appendPath=function(t){var e=this.ctx,r=t.commands,n=t.params,o=r.length,a=0;e.beginPath();for(var s=0;s<o;s++)switch(r[s]){case"M":e.moveTo(n[a++],n[a++]);break;case"L":e.lineTo(n[a++],n[a++]);break;case"C":e.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);break;case"Z":e.closePath();break}},Object.defineProperty(i.prototype,"frameIndex",{get:function(){return this._frameIndex},enumerable:!0,configurable:!0}),i.className="Scene",i}(),__assign$1=function(){return __assign$1=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign$1.apply(this,arguments)},Observable=function(){function i(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return i.prototype.addPropertyListener=function(t,e,r){r===void 0&&(r=this);var n=this.allPropertyListeners,o=n.get(t);if(o||(o=new Map,n.set(t,o)),!o.has(e)){var a=new Set;o.set(e,a)}var s=o.get(e);s&&s.add(r)},i.prototype.removePropertyListener=function(t,e,r){r===void 0&&(r=this);var n=this.allPropertyListeners,o=n.get(t);if(o)if(e){var a=o.get(e);a&&(a.delete(r),a.size||o.delete(e))}else o.clear()},i.prototype.notifyPropertyListeners=function(t,e,r){var n=this,o=this.allPropertyListeners,a=o.get(t);a&&a.forEach(function(s,l){s.forEach(function(u){return l.call(u,{type:t,source:n,value:r,oldValue:e})})})},i.prototype.addEventListener=function(t,e,r){r===void 0&&(r=this);var n=this.allEventListeners,o=n.get(t);if(o||(o=new Map,n.set(t,o)),!o.has(e)){var a=new Set;o.set(e,a)}var s=o.get(e);s&&s.add(r)},i.prototype.removeEventListener=function(t,e,r){r===void 0&&(r=this);var n=this.allEventListeners,o=n.get(t);if(o)if(e){var a=o.get(e);a&&(a.delete(r),a.size||o.delete(e))}else o.clear()},i.prototype.notifyEventListeners=function(t){var e=this,r=this.allEventListeners;t.forEach(function(n){var o=r.get(n);o&&o.forEach(function(a,s){a.forEach(function(l){return s.call(l,{type:n,source:e})})})})},i.prototype.fireEvent=function(t){var e=this,r=this.allEventListeners.get(t.type);r&&r.forEach(function(n,o){n.forEach(function(a){return o.call(a,__assign$1(__assign$1({},t),{source:e}))})})},i.privateKeyPrefix="_",i}();function reactive(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.indexOf("debugger")>=0;return function(r,n){var o=Observable.privateKeyPrefix+n,a=o+"Events";r[n]||(i&&(r[a]=i),Object.defineProperty(r,n,{set:function(s){var l=this[o];if(e)debugger;if(s!==l||typeof s=="object"&&s!==null){this[o]=s,this.notifyPropertyListeners(n,l,s);var u=this[a];u&&this.notifyEventListeners(u)}},get:function(){return this[o]},enumerable:!0,configurable:!0}))}}var Padding=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=t),r===void 0&&(r=t),n===void 0&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return i.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},i}(),defaultTooltipCss=`
.ag-sparkline-tooltip-wrapper {
    position: absolute;
    user-select: none;
    pointer-events: none;
}

.ag-sparkline-tooltip {
    position: relative;
    font: 12px arial,sans-serif;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);
    line-height: 1.7em;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    background-color: rgb(255, 255, 255);
    color: rgba(0,0,0, 0.67);
}

.ag-sparkline-tooltip-content {
    padding: 0 7px;
}

.ag-sparkline-tooltip-title {
    padding-left: 7px;
}

.ag-sparkline-tooltip-wrapper-hidden {
    top: -10000px !important;
}

.ag-sparkline-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function isNumber(i){return typeof i!="number"?!1:Number.isFinite(i)}function isNumberObject(i){return!!i&&i.hasOwnProperty("valueOf")&&isNumber(i.valueOf())}function isNumeric(i){return isNumber(i)||isNumberObject(i)}function isDate(i){return i instanceof Date&&!isNaN(+i)}function isString(i){return typeof i=="string"}function isStringObject(i){return!!i&&i.hasOwnProperty("toString")&&isString(i.toString())}function isContinuous(i){return isNumeric(i)||isDate(i)}var constant$1=function(i){return function(){return i}};function interpolateNumber(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function date(i,t){var e=new Date,r=+i,n=+t;return function(o){return e.setTime(r*(1-o)+n*o),e}}function array(i,t){var e=t?t.length:0,r=i?Math.min(e,i.length):0,n=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)n[a]=interpolateValue(i[a],t[a]);for(;a<e;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=n[a](s);return o}}function object(i,t){var e={},r={},n;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in i?e[n]=interpolateValue(i[n],t[n]):r[n]=t[n];return function(o){for(n in e)r[n]=e[n](o);return r}}var __read$2=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},Color=function(){function i(t,e,r,n){n===void 0&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return i.fromString=function(t){if(t.indexOf("#")>=0)return i.fromHexString(t);var e=i.nameToHex[t];if(e)return i.fromHexString(e);if(t.indexOf("rgb")>=0)return i.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},i.parseHex=function(t){t=t.replace(/ /g,"").slice(1);var e;switch(t.length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+n*16});break}if(e.length>=3&&e.every(function(n){return n>=0}))return e.length===3&&e.push(255),e},i.fromHexString=function(t){var e=i.parseHex(t);if(e){var r=__read$2(e,4),n=r[0],o=r[1],a=r[2],s=r[3];return new i(n/255,o/255,a/255,s/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},i.stringToRgba=function(t){for(var e=__read$2([NaN,NaN],2),r=e[0],n=e[1],o=0;o<t.length;o++){var a=t[o];if(!r&&a==="(")r=o;else if(a===")"){n=o;break}}var s=r&&n&&t.substring(r+1,n);if(s){for(var l=s.split(","),u=[],o=0;o<l.length;o++){var c=l[o],f=parseFloat(c);if(isNaN(f))return;c.indexOf("%")>=0?(f=Math.max(0,Math.min(100,f)),f/=100):o===3?f=Math.max(0,Math.min(1,f)):(f=Math.max(0,Math.min(255,f)),f/=255),u.push(f)}return u}},i.fromRgbaString=function(t){var e=i.stringToRgba(t);if(e){if(e.length===3)return new i(e[0],e[1],e[2]);if(e.length===4)return new i(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},i.fromArray=function(t){if(t.length===4)return new i(t[0],t[1],t[2],t[3]);if(t.length===3)return new i(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},i.fromHSB=function(t,e,r,n){n===void 0&&(n=1);var o=i.HSBtoRGB(t,e,r);return new i(o[0],o[1],o[2],n)},i.padHex=function(t){return t.length===1?"0"+t:t},i.prototype.toHexString=function(){var t="#"+i.padHex(Math.round(this.r*255).toString(16))+i.padHex(Math.round(this.g*255).toString(16))+i.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=i.padHex(Math.round(this.a*255).toString(16))),t},i.prototype.toRgbaString=function(t){t===void 0&&(t=3);var e=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],r=Math.pow(10,t);return this.a!==1?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},i.prototype.toString=function(){return this.a===1?this.toHexString():this.toRgbaString()},i.prototype.toHSB=function(){return i.RGBtoHSB(this.r,this.g,this.b)},i.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),o=Math.max(t,e,r),a=o!==0?(o-n)/o:0,s=NaN;if(n!==o){var l=o-n,u=(o-t)/l,c=(o-e)/l,f=(o-r)/l;t===o?s=f-c:e===o?s=2+u-f:s=4+c-u,s/=6,s<0&&(s=s+1)}return[s*360,a,o]},i.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,o=0,a=0;if(e===0)n=o=a=r;else{var s=(t-Math.floor(t))*6,l=s-Math.floor(s),u=r*(1-e),c=r*(1-e*l),f=r*(1-e*(1-l));switch(s>>0){case 0:n=r,o=f,a=u;break;case 1:n=c,o=r,a=u;break;case 2:n=u,o=r,a=f;break;case 3:n=u,o=c,a=r;break;case 4:n=f,o=u,a=r;break;case 5:n=r,o=u,a=c;break}}return[n,o,a]},i.prototype.derive=function(t,e,r,n){var o=i.RGBtoHSB(this.r,this.g,this.b),a=o[2];a==0&&r>1&&(a=.05);var s=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var u=Math.max(Math.min(this.a*n,1),0),c=i.HSBtoRGB(s,l,a);return c.push(u),i.fromArray(c)},i.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},i.prototype.darker=function(){return this.derive(0,1,.7,1)},i.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),i}();function color(i,t){if(typeof i=="string")try{i=Color.fromString(i)}catch{i=Color.fromArray([0,0,0])}if(typeof t=="string")try{t=Color.fromString(t)}catch{t=Color.fromArray([0,0,0])}var e=interpolateNumber(i.r,t.r),r=interpolateNumber(i.g,t.g),n=interpolateNumber(i.b,t.b),o=interpolateNumber(i.a,t.a);return function(a){return Color.fromArray([e(a),r(a),n(a),o(a)]).toRgbaString()}}function interpolateValue(i,t){var e=typeof t,r;if(t==null||e==="boolean")return constant$1(t);if(e==="number")return interpolateNumber(i,t);if(e==="string")try{return r=Color.fromString(t),t=r,color(i,t)}catch{}return t instanceof Color?color(i,t):t instanceof Date?date(i,t):Array.isArray(t)?array(i,t):typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object(i,t):interpolateNumber(i,t)}var __read$1=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},constant=function(i){return function(){return i}},identity$2=function(i){return i};function clamper(i){var t,e=i[0],r=i[i.length-1];return e>r&&(t=__read$1([r,e],2),e=t[0],r=t[1]),function(n){return Math.max(e,Math.min(r,n))}}var ContinuousScale=function(){function i(){this.unknown=void 0,this._clamp=identity$2,this._domain=[0,1],this._range=[0,1],this.transform=identity$2,this.untransform=identity$2,this._interpolate=interpolateValue,this.rescale()}return Object.defineProperty(i.prototype,"clamp",{get:function(){return this._clamp!==identity$2},set:function(t){this._clamp=t?clamper(this.domain):identity$2},enumerable:!0,configurable:!0}),i.prototype.setDomain=function(t){this._domain=Array.prototype.map.call(t,function(e){return+e}),this._clamp!==identity$2&&(this._clamp=clamper(this.domain)),this.rescale()},i.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(i.prototype,"domain",{get:function(){return this.getDomain()},set:function(t){this.setDomain(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"range",{get:function(){return this._range.slice()},set:function(t){this._range=Array.prototype.slice.call(t),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interpolate",{get:function(){return this._interpolate},set:function(t){this._interpolate=t,this.rescale()},enumerable:!0,configurable:!0}),i.prototype.rescale=function(){this.piecewise=this.bimap,this.output=void 0,this.input=void 0},i.prototype.normalize=function(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:constant(isNaN(e)?NaN:.5)},i.prototype.bimap=function(t,e,r){var n=t[0],o=t[1],a=e[0],s=e[1],l,u;return o<n?(l=this.normalize(o,n),u=r(s,a)):(l=this.normalize(n,o),u=r(a,s)),function(c){return u(l(c))}},i.prototype.convert=function(t){return t=+t,isNaN(t)?this.unknown:(this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate)),this.output(this.transform(this._clamp(t))))},i.prototype.invert=function(t){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),interpolateNumber)),this._clamp(this.untransform(this.input(t)))},i}(),__extends$k=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function ticks(i,t,e){var r=tickStep(i,t,e);return i=Math.ceil(i/r)*r,t=Math.floor(t/r)*r+r/2,range(i,t,r)}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickStep(i,t,e){var r=Math.abs(t-i)/Math.max(0,e),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/n;return o>=e10?n*=10:o>=e5?n*=5:o>=e2&&(n*=2),t<i?-n:n}function tickIncrement(i,t,e){var r=(t-i)/Math.max(0,e),n=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,n);return n>=0?(o>=e10?10:o>=e5?5:o>=e2?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(o>=e10?10:o>=e5?5:o>=e2?2:1)}var NumericTicks=function(i){__extends$k(t,i);function t(e,r){var n=i.call(this)||this;if(r)for(var o=0,a=r.length;o<a;o++)n[o]=r[o];return n.fractionDigits=e,n}return t}(Array);function range(i,t,e){e===void 0&&(e=1);for(var r=Math.abs(e),n=r>0&&r<1?Math.abs(Math.floor(Math.log(r)/Math.LN10)):0,o=Math.pow(10,n),a=Math.max(0,Math.ceil((t-i)/e))||0,s=new NumericTicks(n),l=0;l<a;l++){var u=i+e*l;s[l]=Math.round(u*o)/o}return s}function formatDefault(i,t){var e=i.toPrecision(t);e:for(var r=e.length,n=1,o=-1,a=0;n<r;++n)switch(e[n]){case".":o=a=n;break;case"0":o===0&&(o=n),a=n;break;case"e":break e;default:o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(a+1):e}var formatTypes={"":formatDefault,"%":function(i,t){return(i*100).toFixed(t)},b:function(i){return Math.round(i).toString(2)},c:function(i){return String(i)},d:formatDecimal,e:function(i,t){return i.toExponential(t)},f:function(i,t){return i.toFixed(t)},g:function(i,t){return i.toPrecision(t)},o:function(i){return Math.round(i).toString(8)},p:function(i,t){return formatRounded(i*100,t)},r:formatRounded,s:formatPrefixAuto,X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}},prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],FormatSpecifier=function(){function i(t){t instanceof i?(this.fill=t.fill,this.align=t.align,this.sign=t.sign,this.symbol=t.symbol,this.zero=t.zero,this.width=t.width,this.comma=t.comma,this.precision=t.precision,this.trim=t.trim,this.type=t.type,this.string=t.string):(this.fill=t.fill===void 0?" ":String(t.fill),this.align=t.align===void 0?">":String(t.align),this.sign=t.sign===void 0?"-":String(t.sign),this.symbol=t.symbol===void 0?"":String(t.symbol),this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":String(t.type),this.string=t.string)}return i}(),formatRegEx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,interpolateRegEx=/(#\{(.*?)\})/g;function makeFormatSpecifier(i){if(i instanceof FormatSpecifier)return new FormatSpecifier(i);var t=!1,e=i.replace(interpolateRegEx,function(){return t||(i=arguments[2],t=!0),"#{}"}),r=formatRegEx.exec(i);if(!r)throw new Error("Invalid format: "+i);return new FormatSpecifier({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10],string:t?e:void 0})}function tickFormat(i,t,e,r){var n=tickStep(i,t,e),o=makeFormatSpecifier(r??",f"),a;switch(o.type){case"s":{var s=Math.max(Math.abs(i),Math.abs(t));return o.precision==null&&!isNaN(a=precisionPrefix(n,s))&&(o.precision=a),formatPrefix(o,s)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(a=precisionRound(n,Math.max(Math.abs(i),Math.abs(t))))&&(o.precision=a-+(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(a=precisionFixed(n))&&(o.precision=a-+(o.type==="%")*2);break}}return format(o)}var prefixExponent;function formatPrefixAuto(i,t){t===void 0&&(t=0);var e=formatDecimalParts(i,t);if(!e)return String(i);var r=e[0],n=e[1];prefixExponent=Math.max(-8,Math.min(8,Math.floor(n/3)))*3;var o=n-prefixExponent+1,a=r.length;if(o===a)return r;if(o>a)return r+new Array(o-a+1).join("0");if(o>0)return r.slice(0,o)+"."+r.slice(o);var s=formatDecimalParts(i,Math.max(0,t+o-1));return"0."+new Array(1-o).join("0")+s[0]}function formatDecimal(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function formatGroup(i,t){return function(e,r){for(var n=[],o=e.length,a=0,s=i[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),n.push(e.substring(o-=s,o+s)),!((l+=s+1)>r));)s=i[a=(a+1)%i.length];return n.reverse().join(t)}}function formatNumerals(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}function formatTrim(i){e:for(var t=i.length,e=1,r=-1,n=0;e<t;++e)switch(i[e]){case".":r=n=e;break;case"0":r===0&&(r=e),n=e;break;default:if(!+i[e])break e;r>0&&(r=0);break}return r>0?i.slice(0,r)+i.slice(n+1):i}function formatRounded(i,t){var e=formatDecimalParts(i,t);if(!e)return String(i);var r=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}function formatDecimalParts(i,t){var e=t?i.toExponential(t-1):i.toExponential(),r=e.indexOf("e");if(!(r<0)){var n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}}function identity$1(i){return i}var formatDefaultLocale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(i){formatDefaultLocale=formatLocale$1(i),format=formatDefaultLocale.format,formatPrefix=formatDefaultLocale.formatPrefix}function exponent(i){var t=formatDecimalParts(Math.abs(i));return t?t[1]:NaN}function precisionFixed(i){return Math.max(0,-exponent(Math.abs(i)))}function precisionPrefix(i,t){var e=Math.floor(exponent(t)/3);return e=Math.min(8,e),e=Math.max(-8,e),Math.max(0,e*3-exponent(Math.abs(i)))}function precisionRound(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,exponent(t)-exponent(i))+1}function formatLocale$1(i){var t=i.grouping===void 0||i.thousands===void 0?identity$1:formatGroup(Array.prototype.map.call(i.grouping,Number),String(i.thousands)),e=i.currency===void 0?"":String(i.currency[0]),r=i.currency===void 0?"":String(i.currency[1]),n=i.decimal===void 0?".":String(i.decimal),o=i.numerals===void 0?identity$1:formatNumerals(Array.prototype.map.call(i.numerals,String)),a=i.percent===void 0?"%":String(i.percent),s=i.minus===void 0?"":String(i.minus),l=i.nan===void 0?"NaN":String(i.nan);function u(f){var d=makeFormatSpecifier(f),h=d.fill,p=d.align,g=d.sign,v=d.symbol,m=d.zero,y=d.width,b=d.comma,C=d.precision,x=d.trim,w=d.type;w==="n"?(b=!0,w="g"):formatTypes[w]||(C===void 0&&(C=12),x=!0,w="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var P=v==="$"?e:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=v==="$"?r:/[%p]/.test(w)?a:"",O=formatTypes[w],E=/[defgprs%]/.test(w);C===void 0?C=6:/[gprs]/.test(w)?C=Math.max(1,Math.min(21,C)):C=Math.max(0,Math.min(20,C));function D(R){var F=P,I=S,$;if(w==="c")I=O(+R)+I,$="";else{var B=+R,V=R<0||1/B<0;$=isNaN(B)?l:O(Math.abs(B),C),x&&($=formatTrim($)),V&&+$==0&&g!=="+"&&(V=!1);var G=V?g==="("?g:s:g==="-"||g==="("?"":g,U=V&&g==="("?")":"";if(F=G+F,I=(w==="s"?prefixes[8+prefixExponent/3]:"")+I+U,E)for(var H=0,N=$.length;H<N;H++){var j=$.charCodeAt(H);if(48>j||j>57){I=(j===46?n+$.slice(H+1):$.slice(H))+I,$=$.slice(0,H);break}}}b&&!m&&($=t($,1/0));var W=F.length+$.length+I.length,z=W<y?new Array(y-W+1).join(h):"";switch(b&&m&&($=t(z+$,z.length?y-I.length:1/0),z=""),p){case"<":$=F+$+I+z;break;case"=":$=F+z+$+I;break;case"^":$=z.slice(0,W=z.length>>1)+F+$+I+z.slice(W);break;default:$=z+F+$+I;break}var K=d.string;return K?K.replace(interpolateRegEx,function(){return o($)}):o($)}return D}function c(f,d){var h=makeFormatSpecifier(f);h.type="f";var p=u(h),g=Math.max(-8,Math.min(8,Math.floor(exponent(d)/3)))*3,v=Math.pow(10,-g),m=prefixes[8+g/3];return function(y){return p(v*+y)+m}}return{format:u,formatPrefix:c}}var __extends$j=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),LinearScale=function(i){__extends$j(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="linear",e}return t.prototype.ticks=function(e){e===void 0&&(e=10);var r=this._domain;return ticks(r[0],r[r.length-1],e)},t.prototype.nice=function(e){e===void 0&&(e=10);var r=this.domain,n=0,o=r.length-1,a=r[n],s=r[o],l;s<a&&(l=a,a=s,s=l,l=n,n=o,o=l),l=tickIncrement(a,s,e),l>0?(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,l=tickIncrement(a,s,e)):l<0&&(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,l=tickIncrement(a,s,e)),l>0?(r[n]=Math.floor(a/l)*l,r[o]=Math.ceil(s/l)*l,this.domain=r):l<0&&(r[n]=Math.ceil(a*l)/l,r[o]=Math.floor(s*l)/l,this.domain=r)},t.prototype.tickFormat=function(e,r){var n=this.domain;return tickFormat(n[0],n[n.length-1],e??10,r)},t}(ContinuousScale),__extends$i=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),t0=new Date,t1=new Date,TimeInterval=function(){function i(t,e){this._floor=t,this._offset=e}return i.prototype.floor=function(t){return t=new Date(+t),this._floor(t),t},i.prototype.ceil=function(t){return t=new Date(+t-1),this._floor(t),this._offset(t,1),this._floor(t),t},i.prototype.round=function(t){var e=this.floor(t),r=this.ceil(t),n=+t;return n-e.getTime()<r.getTime()-n?e:r},i.prototype.offset=function(t,e){return e===void 0&&(e=1),t=new Date(+t),this._offset(t,Math.floor(e)),t},i.prototype.range=function(t,e,r){r===void 0&&(r=1);var n=[];if(t=this.ceil(t),r=Math.floor(r),t>e||r<=0)return n;var o;do o=new Date(+t),n.push(o),this._offset(t,r),this._floor(t);while(o<t&&t<e);return n},i.prototype.filter=function(t){var e=this,r=function(o){if(o instanceof Date)for(e._floor(o);!t(o);)o.setTime(o.getTime()-1),e._floor(o);return o},n=function(o,a){if(o instanceof Date)if(a<0)for(;++a<=0;)do e._offset(o,-1);while(!t(o));else for(;--a>=0;)do e._offset(o,1);while(!t(o));return o};return new i(r,n)},i}(),CountableTimeInterval=function(i){__extends$i(t,i);function t(e,r,n,o){var a=i.call(this,e,r)||this;return a._count=n,a._field=o,a}return t.prototype.count=function(e,r){return t0.setTime(+e),t1.setTime(+r),this._floor(t0),this._floor(t1),Math.floor(this._count(t0,t1))},t.prototype.every=function(e){var r=this,n;if(e=Math.floor(e),isFinite(e)&&e>0)if(e>1){var o=this._field;o?n=this.filter(function(a){return o(a)%e===0}):n=this.filter(function(a){return r.count(0,a)%e===0})}else n=this;return n},t}(TimeInterval);function floor$8(i){return i}function offset$8(i,t){i.setTime(i.getTime()+t)}function count$8(i,t){return t.getTime()-i.getTime()}var millisecond=new CountableTimeInterval(floor$8,offset$8,count$8),durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365;function floor$7(i){i.setTime(i.getTime()-i.getMilliseconds())}function offset$7(i,t){i.setTime(i.getTime()+t*durationSecond)}function count$7(i,t){return(t.getTime()-i.getTime())/durationSecond}var second=new CountableTimeInterval(floor$7,offset$7,count$7);function floor$6(i){i.setTime(i.getTime()-i.getMilliseconds()-i.getSeconds()*durationSecond)}function offset$6(i,t){i.setTime(i.getTime()+t*durationMinute)}function count$6(i,t){return(t.getTime()-i.getTime())/durationMinute}function field$6(i){return i.getMinutes()}var minute=new CountableTimeInterval(floor$6,offset$6,count$6,field$6);function floor$5(i){i.setTime(i.getTime()-i.getMilliseconds()-i.getSeconds()*durationSecond-i.getMinutes()*durationMinute)}function offset$5(i,t){i.setTime(i.getTime()+t*durationHour)}function count$5(i,t){return(t.getTime()-i.getTime())/durationHour}function field$5(i){return i.getHours()}var hour=new CountableTimeInterval(floor$5,offset$5,count$5,field$5);function floor$4(i){i.setHours(0,0,0,0)}function offset$4(i,t){i.setDate(i.getDate()+t)}function count$4(i,t){var e=t.getTimezoneOffset()-i.getTimezoneOffset();return(t.getTime()-i.getTime()-e*durationMinute)/durationDay}function field$4(i){return i.getDate()-1}var day=new CountableTimeInterval(floor$4,offset$4,count$4,field$4);function weekday$1(i){function t(n){n.setDate(n.getDate()-(n.getDay()+7-i)%7),n.setHours(0,0,0,0)}function e(n,o){n.setDate(n.getDate()+o*7)}function r(n,o){var a=o.getTime()-n.getTime(),s=o.getTimezoneOffset()-n.getTimezoneOffset();return(a-s*durationMinute)/durationWeek}return new CountableTimeInterval(t,e,r)}var sunday=weekday$1(0),monday=weekday$1(1);weekday$1(2);weekday$1(3);var thursday=weekday$1(4);weekday$1(5);weekday$1(6);function floor$3(i){i.setDate(1),i.setHours(0,0,0,0)}function offset$3(i,t){i.setMonth(i.getMonth()+t)}function count$3(i,t){return t.getMonth()-i.getMonth()+(t.getFullYear()-i.getFullYear())*12}function field$3(i){return i.getMonth()}var month=new CountableTimeInterval(floor$3,offset$3,count$3,field$3);function floor$2(i){i.setMonth(0,1),i.setHours(0,0,0,0)}function offset$2(i,t){i.setFullYear(i.getFullYear()+t)}function count$2(i,t){return t.getFullYear()-i.getFullYear()}function field$2(i){return i.getFullYear()}var year=new CountableTimeInterval(floor$2,offset$2,count$2,field$2);function ascending(i,t){return i<t?-1:i>t?1:i>=t?0:NaN}function complexBisectRight(i,t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=i.length);for(var o=ascendingComparator(e);r<n;){var a=r+n>>>1;o(i[a],t)<0?r=a+1:n=a}return r}function ascendingComparator(i){return function(t,e){return ascending(i(t),e)}}function floor$1(i){i.setUTCHours(0,0,0,0)}function offset$1(i,t){i.setUTCDate(i.getUTCDate()+t)}function count$1(i,t){return(t.getTime()-i.getTime())/durationDay}function field$1(i){return i.getUTCDate()-1}var utcDay=new CountableTimeInterval(floor$1,offset$1,count$1,field$1);function floor(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}function offset(i,t){i.setUTCFullYear(i.getUTCFullYear()+t)}function count(i,t){return t.getUTCFullYear()-i.getUTCFullYear()}function field(i){return i.getUTCFullYear()}var utcYear=new CountableTimeInterval(floor,offset,count,field);function weekday(i){function t(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-i)%7),n.setHours(0,0,0,0)}function e(n,o){n.setUTCDate(n.getUTCDate()+o*7)}function r(n,o){return(o.getTime()-n.getTime())/durationWeek}return new CountableTimeInterval(t,e,r)}var utcSunday=weekday(0),utcMonday=weekday(1);weekday(2);weekday(3);var utcThursday=weekday(4);weekday(5);weekday(6);function localDate(i){if(i.y>=0&&i.y<100){var t=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return t.setFullYear(i.y),t}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function utcDate(i){if(i.y>=0&&i.y<100){var t=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return t.setUTCFullYear(i.y),t}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function formatLookup(i){for(var t={},e=0,r=i.length;e<r;e++)t[i[e].toLowerCase()]=e;return t}function newYear(i){return{y:i,m:0,d:1,H:0,M:0,S:0,L:0}}var percentCharCode=37,numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g,requote=function(i){return i.replace(requoteRe,"\\$&")},formatRe=function(i){return new RegExp("^(?:"+i.map(requote).join("|")+")","i")},pads={"-":"",_:" ",0:"0"};function pad(i,t,e){var r=i<0?"-":"",n=String(r?-i:i),o=n.length;return r+(o<e?new Array(e-o+1).join(t)+n:n)}function formatLocale(i){var t=i.dateTime,e=i.date,r=i.time,n=i.periods,o=i.days,a=i.shortDays,s=i.months,l=i.shortMonths,u=formatRe(n),c=formatLookup(n),f=formatRe(o),d=formatLookup(o),h=formatRe(a),p=formatLookup(a),g=formatRe(s),v=formatLookup(s),m=formatRe(l),y=formatLookup(l),b={a:B,A:V,b:K,B:X,c:void 0,d:W,e:W,f:O,H:I,I:F,j:z,L:E,m:q,M:R,p:$,Q:we,s:_e,S:D,u:G,U,V:H,w:N,W:j,x:void 0,X:void 0,y:Z,Y:ee,Z:ue,"%":Oe},C={a:ve,A:me,b:he,B:de,c:void 0,d:le,e:le,f:ne,H:oe,I:ae,j:Y,L:Q,m:re,M:se,p:fe,Q:we,s:_e,S:ie,u:ye,U:xe,V:J,w:ce,W:Ce,x:void 0,X:void 0,y:pe,Y:Te,Z:Ae,"%":Oe},x={a:Ne,A:Be,b:Ue,B:ze,c:Xe,d:Le,e:Le,f:Pe,H:Ie,I:Ie,j:ke,L:De,m:Ke,M:$e,p:Fe,Q:Ze,s:Je,S:Me,u:Ge,U:Ve,V:je,w:He,W:We,x:Ye,X:qe,y:Qe,Y:et,Z:tt,"%":rt};b.x=P(e,b),b.X=P(r,b),b.c=P(t,b),C.x=P(e,C),C.X=P(r,C),C.c=P(t,C);function w(T,M){return function(k){var A=newYear(1900),Se=S(A,T,k+="",0);if(Se==k.length){if("Q"in A)return new Date(A.Q);if("p"in A&&(A.H=A.H%12+A.p*12),"V"in A){if(A.V<1||A.V>53)return;if("w"in A||(A.w=1),"Z"in A){var te=utcDate(newYear(A.y)),ge=te.getUTCDay();te=ge>4||ge===0?utcMonday.ceil(te):utcMonday.floor(te),te=utcDay.offset(te,(A.V-1)*7),A.y=te.getUTCFullYear(),A.m=te.getUTCMonth(),A.d=te.getUTCDate()+(A.w+6)%7}else{var te=M(newYear(A.y)),ge=te.getDay();te=ge>4||ge===0?monday.ceil(te):monday.floor(te),te=day.offset(te,(A.V-1)*7),A.y=te.getFullYear(),A.m=te.getMonth(),A.d=te.getDate()+(A.w+6)%7}}else if("W"in A||"U"in A){"w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0);var ge="Z"in A?utcDate(newYear(A.y)).getUTCDay():M(newYear(A.y)).getDay();A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(ge+5)%7:A.w+A.U*7-(ge+6)%7}return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,utcDate(A)):M(A)}}}function P(T,M){return function(k){var A=[],Se=T.length,te=-1,ge=0;for(k instanceof Date||(k=new Date(+k));++te<Se;)if(T.charCodeAt(te)===percentCharCode){A.push(T.slice(ge,te));var be=T.charAt(++te),Ee=pads[be];Ee!=null?be=T.charAt(++te):Ee=be==="e"?" ":"0";var Re=M[be];Re&&(be=Re(k,Ee)),A.push(be),ge=te+1}return A.push(T.slice(ge,te)),A.join("")}}function S(T,M,k,A){for(var Se=0,te=M.length,ge=k.length;Se<te;){if(A>=ge)return-1;var be=M.charCodeAt(Se++);if(be===percentCharCode){var Ee=M.charAt(Se++),Re=x[Ee in pads?M.charAt(Se++):Ee];if(!Re||(A=Re(T,k,A))<0)return-1}else if(be!=k.charCodeAt(A++))return-1}return A}function O(T,M){return E(T,M)+"000"}function E(T,M){return pad(T.getMilliseconds(),M,3)}function D(T,M){return pad(T.getSeconds(),M,2)}function R(T,M){return pad(T.getMinutes(),M,2)}function F(T,M){return pad(T.getHours()%12||12,M,2)}function I(T,M){return pad(T.getHours(),M,2)}function $(T){return n[T.getHours()>=12?1:0]}function B(T){return a[T.getDay()]}function V(T){return o[T.getDay()]}function G(T){var M=T.getDay();return M===0?7:M}function U(T,M){return pad(sunday.count(year.floor(T),T),M,2)}function H(T,M){var k=T.getDay();T=k>=4||k===0?thursday.floor(T):thursday.ceil(T);var A=year.floor(T);return pad(thursday.count(A,T)+(A.getDay()===4?1:0),M,2)}function N(T){return T.getDay()}function j(T,M){return pad(monday.count(year.floor(T),T),M,2)}function W(T,M){return pad(T.getDate(),M,2)}function z(T,M){return pad(1+day.count(year.floor(T),T),M,3)}function K(T){return l[T.getMonth()]}function X(T){return s[T.getMonth()]}function q(T,M){return pad(T.getMonth()+1,M,2)}function Z(T,M){return pad(T.getFullYear()%100,M,2)}function ee(T,M){return pad(T.getFullYear()%1e4,M,4)}function ue(T){var M=T.getTimezoneOffset();return(M>0?"-":(M*=-1,"+"))+pad(Math.floor(M/60),"0",2)+pad(M%60,"0",2)}function ne(T,M){return Q(T,M)+"000"}function Q(T,M){return pad(T.getUTCMilliseconds(),M,3)}function ie(T,M){return pad(T.getUTCSeconds(),M,2)}function se(T,M){return pad(T.getUTCMinutes(),M,2)}function ae(T,M){return pad(T.getUTCHours()%12||12,M,2)}function oe(T,M){return pad(T.getUTCHours(),M,2)}function fe(T){return n[T.getUTCHours()>=12?1:0]}function le(T,M){return pad(T.getUTCDate(),M,2)}function Y(T,M){return pad(1+utcDay.count(utcYear.floor(T),T),M,3)}function re(T,M){return pad(T.getUTCMonth()+1,M,2)}function he(T){return l[T.getUTCMonth()]}function de(T){return s[T.getUTCMonth()]}function ve(T){return a[T.getUTCDay()]}function me(T){return o[T.getUTCDay()]}function ye(T){var M=T.getUTCDay();return M===0?7:M}function xe(T,M){return pad(utcSunday.count(utcYear.floor(T),T),M,2)}function J(T,M){var k=T.getUTCDay();T=k>=4||k===0?utcThursday.floor(T):utcThursday.ceil(T);var A=utcYear.floor(T);return pad(utcThursday.count(A,T)+(A.getUTCDay()===4?1:0),M,4)}function ce(T){return T.getUTCDay()}function Ce(T,M){return pad(utcMonday.count(utcYear.floor(T),T),M,2)}function pe(T,M){return pad(T.getUTCFullYear()%100,M,2)}function Te(T,M){return pad(T.getUTCFullYear()%1e4,M,4)}function Ae(){return"+0000"}function Oe(T){return"%"}function we(T){return T.getTime()}function _e(T){return Math.floor(T.getTime()/1e3)}function Pe(T,M,k){var A=numberRe.exec(M.slice(k,k+6));return A?(T.L=Math.floor(parseFloat(A[0])/1e3),k+A[0].length):-1}function De(T,M,k){var A=numberRe.exec(M.slice(k,k+3));return A?(T.L=+A[0],k+A[0].length):-1}function Me(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.S=+A[0],k+A[0].length):-1}function $e(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.M=+A[0],k+A[0].length):-1}function Ie(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.H=+A[0],k+A[0].length):-1}function Fe(T,M,k){var A=u.exec(M.slice(k));return A?(T.p=c[A[0].toLowerCase()],k+A[0].length):-1}function Le(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.d=+A[0],k+A[0].length):-1}function ke(T,M,k){var A=numberRe.exec(M.slice(k,k+3));return A?(T.m=0,T.d=+A[0],k+A[0].length):-1}function Ne(T,M,k){var A=h.exec(M.slice(k));return A?(T.w=p[A[0].toLowerCase()],k+A[0].length):-1}function Be(T,M,k){var A=f.exec(M.slice(k));return A?(T.w=d[A[0].toLowerCase()],k+A[0].length):-1}function Ge(T,M,k){var A=numberRe.exec(M.slice(k,k+1));return A?(T.u=+A[0],k+A[0].length):-1}function Ve(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.U=+A[0],k+A[0].length):-1}function je(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.V=+A[0],k+A[0].length):-1}function We(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.W=+A[0],k+A[0].length):-1}function He(T,M,k){var A=numberRe.exec(M.slice(k,k+1));return A?(T.w=+A[0],k+A[0].length):-1}function Ue(T,M,k){var A=m.exec(M.slice(k));return A?(T.m=y[A[0].toLowerCase()],k+A[0].length):-1}function ze(T,M,k){var A=g.exec(M.slice(k));return A?(T.m=v[A[0].toLowerCase()],k+A[0].length):-1}function Ke(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.m=parseFloat(A[0])-1,k+A[0].length):-1}function Xe(T,M,k){return S(T,t,M,k)}function Ye(T,M,k){return S(T,e,M,k)}function qe(T,M,k){return S(T,r,M,k)}function Ze(T,M,k){var A=numberRe.exec(M.slice(k));return A?(T.Q=+A[0],k+A[0].length):-1}function Je(T,M,k){var A=numberRe.exec(M.slice(k));return A?(T.Q=+A[0]*1e3,k+A[0].length):-1}function Qe(T,M,k){var A=numberRe.exec(M.slice(k,k+2));return A?(T.y=+A[0]+(+A[0]>68?1900:2e3),k+A[0].length):-1}function et(T,M,k){var A=numberRe.exec(M.slice(k,k+4));return A?(T.y=+A[0],k+A[0].length):-1}function tt(T,M,k){var A=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(M.slice(k,k+6));return A?(T.Z=A[1]?0:-(A[2]+(A[3]||"00")),k+A[0].length):-1}function rt(T,M,k){var A=percentRe.exec(M.slice(k,k+1));return A?k+A[0].length:-1}return{format:function(T){var M=P(T,b);return M.toString=function(){return T},M},parse:function(T){var M=w(T,localDate);return M.toString=function(){return T},M},utcFormat:function(T){var M=P(T,C);return M.toString=function(){return T},M},utcParse:function(T){var M=w(T,utcDate);return M.toString=function(){return T},M}}}var locale;setDefaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function setDefaultLocale(i){return locale=formatLocale(i)}var __extends$h=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__read=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},TimeScale=function(i){__extends$h(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="time",e.year=year,e.month=month,e.week=sunday,e.day=day,e.hour=hour,e.minute=minute,e.second=second,e.millisecond=millisecond,e.format=locale.format,e.tickIntervals=[[e.second,1,durationSecond],[e.second,5,5*durationSecond],[e.second,15,15*durationSecond],[e.second,30,30*durationSecond],[e.minute,1,durationMinute],[e.minute,5,5*durationMinute],[e.minute,15,15*durationMinute],[e.minute,30,30*durationMinute],[e.hour,1,durationHour],[e.hour,3,3*durationHour],[e.hour,6,6*durationHour],[e.hour,12,12*durationHour],[e.day,1,durationDay],[e.day,2,2*durationDay],[e.week,1,durationWeek],[e.month,1,durationMonth],[e.month,3,3*durationMonth],[e.year,1,durationYear]],e.formatMillisecond=e.format(".%L"),e.formatSecond=e.format(":%S"),e.formatMinute=e.format("%I:%M"),e.formatHour=e.format("%I %p"),e.formatDay=e.format("%a %d"),e.formatWeek=e.format("%b %d"),e.formatMonth=e.format("%B"),e.formatYear=e.format("%Y"),e._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],e}return t.prototype.defaultTickFormat=function(e){return(this.second.floor(e)<e?this.formatMillisecond:this.minute.floor(e)<e?this.formatSecond:this.hour.floor(e)<e?this.formatMinute:this.day.floor(e)<e?this.formatHour:this.month.floor(e)<e?this.week.floor(e)<e?this.formatDay:this.formatWeek:this.year.floor(e)<e?this.formatMonth:this.formatYear)(e)},t.prototype.tickInterval=function(e,r,n,o){var a;if(typeof e=="number"){var s=e,l=this.tickIntervals,u=Math.abs(n-r)/s,c=complexBisectRight(l,u,function(f){return f[2]});c===l.length?(o=tickStep(r/durationYear,n/durationYear,s),e=this.year):c?(a=__read(l[u/l[c-1][2]<l[c][2]/u?c-1:c],2),e=a[0],o=a[1]):(o=Math.max(tickStep(r,n,e),1),e=this.millisecond)}return o==null?e:e.every(o)},Object.defineProperty(t.prototype,"domain",{get:function(){return i.prototype.getDomain.call(this).map(function(e){return new Date(e)})},set:function(e){i.prototype.setDomain.call(this,Array.prototype.map.call(e,function(r){return r instanceof Date?+r:+new Date(+r)}))},enumerable:!0,configurable:!0}),t.prototype.invert=function(e){return new Date(i.prototype.invert.call(this,e))},t.prototype.ticks=function(e){e===void 0&&(e=10);var r=i.prototype.getDomain.call(this),n=r[0],o=r[r.length-1],a=o<n;if(a){var s=n;n=o,o=s}var l=this.tickInterval(e,n,o),u=l?l.range(n,o+1):[];return a?u.reverse():u},t.prototype.tickFormat=function(e,r){return r==null?this.defaultTickFormat.bind(this):this.format(r)},t.prototype.nice=function(e){e===void 0&&(e=10);var r=i.prototype.getDomain.call(this),n=this.tickInterval(e,r[0],r[r.length-1]);n&&(this.domain=this._nice(r,n))},t.prototype._nice=function(e,r){var n,o;e=e.slice();var a=0,s=e.length-1,l=e[a],u=e[s];return u<l&&(n=__read([s,a],2),a=n[0],s=n[1],o=__read([u,l],2),l=o[0],u=o[1]),e[a]=r.floor(l),e[s]=r.ceil(u),e},t}(ContinuousScale);function identity(i){return i}function extent(i,t,e){for(var r=e||identity,n=i.length,o=-1,a,s,l;++o<n;)if(a=i[o],t(a))for(s=l=a;++o<n;)a=i[o],t(a)&&(s>a&&(s=a),l<a&&(l=a));return s===void 0||l===void 0?void 0:[r(s),r(l)]}var __extends$g=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__values=function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SparklineAxis=function(i){__extends$g(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="category",e.stroke="rgb(204, 214, 235)",e.strokeWidth=1,e}return t}(Observable),Sparkline=function(i){__extends$g(t,i);function t(){var e=i.call(this)||this;e.id=createId(e),e.seriesRect={x:0,y:0,width:0,height:0},e._context=void 0,e._container=void 0,e._data=void 0,e.padding=new Padding(3),e.xKey="x",e.yKey="y",e.dataType=void 0,e.xData=[],e.yData=[],e.min=void 0,e.max=void 0,e.yScale=new LinearScale,e.axis=new SparklineAxis,e.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},e._width=100,e._height=100,e.smallestInterval=void 0,e.layoutId=0,e.defaultDateFormatter=locale.format("%m/%d/%y, %H:%M:%S"),e._onMouseMove=e.onMouseMove.bind(e),e._onMouseOut=e.onMouseOut.bind(e);var r=new Group;e.rootGroup=r;var n=document.createElement("div");n.setAttribute("class","ag-sparkline-wrapper");var o=new Scene(document);if(e.scene=o,e.canvasElement=o.canvas.element,o.root=r,o.container=n,o.resize(e.width,e.height),e.seriesRect.width=e.width,e.seriesRect.height=e.height,t.tooltipDocuments.indexOf(document)===-1){var a=document.createElement("style");a.innerHTML=defaultTooltipCss,document.head.insertBefore(a,document.head.querySelector("style")),t.tooltipDocuments.push(document)}return e.setupDomEventListeners(e.scene.canvas.element),e}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(e){this._context!==e&&(this._context=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var r=this.canvasElement.parentNode;r!=null&&r.removeChild(this.canvasElement),e&&e.appendChild(this.canvasElement),this._container=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!==e&&(this._data=e,this.processData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.scene.resize(e,this.height),this.scheduleLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.scene.resize(this.width,e),this.scheduleLayout())},enumerable:!0,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var e=this,r=e.yScale,n=e.seriesRect;r.range=[n.height,0]},t.prototype.updateXScale=function(){var e=this.axis.type;this.xScale=this.getXScale(e),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var e=this,r=e.xData,n=e.xScale,o;n instanceof LinearScale?o=extent(r,isNumber):n instanceof TimeScale&&(o=extent(r,isContinuous)),this.xScale.domain=o?o.slice():r},t.prototype.getXScale=function(e){switch(e===void 0&&(e="category"),e){case"number":return new LinearScale;case"time":return new TimeScale;case"category":default:return new BandScale}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(e){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(e){var r=this.pickClosestSeriesNodeDatum(e.offsetX,e.offsetY);if(r){var n=this.highlightedDatum;this.highlightedDatum=r,(this.highlightedDatum&&!n||this.highlightedDatum&&n&&this.highlightedDatum!==n)&&(this.highlightDatum(r),this.updateCrosshairs()),this.tooltip.enabled&&this.handleTooltip(e,r)}},t.prototype.onMouseOut=function(e){this.dehighlightDatum(),this.tooltip.toggle(!1)},t.prototype.processData=function(){var e=this,r=this,n=r.data,o=r.yData,a=r.xData;if(!(!n||this.invalidData(this.data))){o.length=0,a.length=0;var s=n.length,l=this.getDataType(n);this.dataType=l;var u=this.axis.type,c=u!=="number"&&u!=="time"?"category":u,f=c==="number"||c==="time",d=function(P,S){e.smallestInterval==null&&(e.smallestInterval={x:1/0,y:1/0});var O=e.smallestInterval.x,E=Math.abs(P-S);E>0&&E<O&&(e.smallestInterval.x=E)},h;if(l==="number")for(var p=0;p<s;p++){var g=p,v=n[p],m=this.getDatum(g,c),y=this.getDatum(v,"number");f&&d(m,h),a.push(m),o.push(y),h=m}else if(l==="array")for(var p=0;p<s;p++){var b=n[p];if(Array.isArray(b)){var g=b[0],v=b[1],m=this.getDatum(g,c),y=this.getDatum(v,"number");if(m==null)continue;f&&d(m,h),a.push(m),o.push(y),h=m}}else if(l==="object")for(var C=this,x=C.yKey,w=C.xKey,p=0;p<s;p++){var b=n[p];if(typeof b=="object"&&!Array.isArray(b)){var g=b[w],v=b[x],m=this.getDatum(g,c),y=this.getDatum(v,"number");if(m==null)continue;f&&d(m,h),a.push(m),o.push(y),h=m}}this.updateAxes(),this.update()}},t.prototype.getDataType=function(e){var r,n;try{for(var o=__values(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s!=null){if(isNumber(s))return"number";if(Array.isArray(s))return"array";if(typeof s=="object")return"object"}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.getDatum=function(e,r){if(r==="number"&&isNumber(e)||r==="time"&&(isNumber(e)||isDate(e)))return e;if(r==="category"){if(isString(e)||isDate(e)||isNumber(e))return{toString:function(){return String(e)}};if(isStringObject(e))return e}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!0,configurable:!0}),t.prototype.scheduleLayout=function(){var e=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(function(){e.setSparklineDimensions(),!e.invalidData(e.data)&&(e.updateXScaleRange(),e.updateYScaleRange(),e.updateAxisLine(),e.update(),e.layoutId=0)})},t.prototype.setSparklineDimensions=function(){var e=this,r=e.width,n=e.height,o=e.padding,a=e.seriesRect,s=e.rootGroup,l=r-o.left-o.right,u=n-o.top-o.bottom;a.width=l,a.height=u,a.x=o.left,a.y=o.top,s.translationX=a.x,s.translationY=a.y},t.prototype.pickClosestSeriesNodeDatum=function(e,r){for(var n=1/0,o,a=this.rootGroup.transformPoint(e,r),s=this.getNodeData(),l=0;l<s.length;l++){var u=s[l];if(!u.point)return;var c=this.getDistance(a,u.point);c<=n&&(n=c,o=u)}return o},t.prototype.getDistance=function(e,r){return Math.abs(e.x-r.x)},t.prototype.handleTooltip=function(e,r){var n=r.seriesDatum,o=this.canvasElement,a=e.clientX,s=e.clientY;this.tooltip.container==null&&(this.tooltip.container=o);var l={pageX:a,pageY:s},u=n.y,c=n.x,f=this.tooltip.enabled;if(this.tooltip.renderer){var d=this.tooltip.renderer({context:this.context,datum:n,yValue:u,xValue:c});f=typeof d!="string"&&d.enabled!==void 0?d.enabled:f}var h=f&&n.y!==void 0&&this.getTooltipHtml(r);h&&this.tooltip.show(l,h)},t.prototype.formatNumericDatum=function(e){return String(Math.round(e*10)/10)},t.prototype.formatDatum=function(e){var r=this.axis.type||"category";return r==="number"&&typeof e=="number"?this.formatNumericDatum(e):r==="time"&&(e instanceof Date||isNumber(e))?this.defaultDateFormatter(e):String(e)},t.prototype.setupDomEventListeners=function(e){e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(e){e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(e){return!e||!Array.isArray(e)||e.length===0},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}(Observable),__extends$f=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function toTooltipHtml(i,t){if(typeof i=="string")return i;t=t||{};var e=i.content,r=e===void 0?t.content||"":e,n=i.title,o=n===void 0?t.title||void 0:n,a=i.color,s=a===void 0?t.color:a,l=i.backgroundColor,u=l===void 0?t.backgroundColor:l,c=i.opacity,f=c===void 0?t.opacity||1:c,d,h;if(s?(d=o?'<span class="'+SparklineTooltip.class+'-title"; style="color: '+s+'">'+o+"</span>":"",h='<span class="'+SparklineTooltip.class+'-content" style="color: '+s+'">'+r+"</span>"):(d=o?'<span class="'+SparklineTooltip.class+'-title">'+o+"</span>":"",h='<span class="'+SparklineTooltip.class+'-content">'+r+"</span>"),u){var p=Color.fromString(u.toLowerCase()),g=p.r,v=p.g,m=p.b;p.a;var y=f,b=Color.fromArray([g,v,m,y]),C=b.toRgbaString();return'<div class="'+SparklineTooltip.class+'" style="background-color: '+C+`">
                    `+d+`
                    `+h+`
                </div>`}else return'<div class="'+SparklineTooltip.class+`">
                    `+d+`
                    `+h+`
                </div>`}var SparklineTooltip=function(i){__extends$f(t,i);function t(){var e=i.call(this)||this;e.element=document.createElement("div"),e.enabled=!0,e.container=void 0,e.xOffset=10,e.yOffset=0,e.renderer=void 0;var r=document.body;return r.appendChild(e.element),e}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(t.class+"-wrapper-hidden");var r=e.getAttribute("class");return r?r.split(" ").indexOf(t.class+"-wrapper-hidden")<0:!1},t.prototype.updateClass=function(e){var r=[t.class+"-wrapper"];e!==!0&&r.push(t.class+"-wrapper-hidden"),this.element.setAttribute("class",r.join(" "))},t.prototype.show=function(e,r){this.toggle(!1);var n=this.element;if(r!==void 0)n.innerHTML=r;else if(!n.innerHTML)return;var o=e.pageX+this.xOffset,a=e.pageY+this.yOffset,s=n.getBoundingClientRect(),l=window.innerWidth-s.width;if(this.container){var u=this.container.getBoundingClientRect();l=u.left+(u.width-s.width)}o>l&&(o=e.pageX-n.clientWidth-this.xOffset),n.style.left=Math.round(o)+"px",n.style.top=Math.round(a)+"px",this.toggle(!0)},t.prototype.toggle=function(e){this.updateClass(e)},t.prototype.destroy=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}(Observable),__extends$e=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Marker=function(i){__extends$e(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._x=0,e._y=0,e._size=3,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){this._size!==e&&(this._size=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t}(Shape),__extends$d=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Circle=function(i){__extends$d(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.isPointInPath=function(e,r){return!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,o=r.y,a=r.size,s=a/2;e.beginPath(),e.arc(n,o,s,0,2*Math.PI,!1),this.fillStroke(e),this.dirty=!1},t.className="Circle",t}(Marker),__extends$c=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Diamond=function(i){__extends$c(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,o=r.y,a=r.size,s=a/2;e.beginPath(),e.moveTo(n,o-=s),e.lineTo(n+=s,o+=s),e.lineTo(n-=s,o+=s),e.lineTo(n-=s,o-=s),e.lineTo(n+s,o-s),e.closePath(),this.fillStroke(e),this.dirty=!1},t.className="Diamond",t}(Marker),__extends$b=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Square=function(i){__extends$b(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,o=r.y,a=r.size,s=a/2;e.beginPath(),e.moveTo(n-=s,o-=s),e.lineTo(n+=a,o),e.lineTo(n,o+=a),e.lineTo(n-=a,o),e.lineTo(n,o-=a),e.closePath(),this.fillStroke(e),this.dirty=!1},t.className="Square",t}(Marker);function getMarker(i){switch(i){case"circle":return Circle;case"square":return Square;case"diamond":return Diamond;default:return Circle}}function getLineDash(i,t){t===void 0&&(t="solid");var e={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},r={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return i==="round"||i==="square"?r[t]==null?(console.warn("'"+t+"' is not a valid 'lineDash' option."),r.solid):r[t]:e[t]==null?(console.warn("'"+t+"' is not a valid 'lineDash' option."),e.solid):e[t]}var __extends$a=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SparklineMarker$1=function(){function i(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return i}(),SparklineLine$1=function(){function i(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return i}(),SparklineCrosshairs$1=function(){function i(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return i}(),AreaSparkline=function(i){__extends$a(t,i);function t(){var e=i.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new Path,e.fillPath=new Path,e.xCrosshairLine=new Line,e.yCrosshairLine=new Line,e.areaSparklineGroup=new Group,e.fillPathData=[],e.strokePathData=[],e.xAxisLine=new Line,e.markers=new Group,e.markerSelection=Selection.select(e.markers).selectAll(),e.markerSelectionData=[],e.marker=new SparklineMarker$1,e.line=new SparklineLine$1,e.crosshairs=new SparklineCrosshairs$1,e.rootGroup.append(e.areaSparklineGroup),e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();if(e){var r=e.nodeData,n=e.fillData,o=e.strokeData;this.markerSelectionData=r,this.fillPathData=n,this.strokePathData=o,this.updateSelection(r),this.updateNodes(),this.updateStroke(o),this.updateFill(n)}},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yData,n=e.yScale,o=extent(r,isNumber),a=0,s=1;o!==void 0&&(a=this.min=o[0],s=this.max=o[1]),a=a<0?a:0,s=s<0?0:s,n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,o=e.xData,a=e.xScale,s=e.yScale;if(r){for(var l=a instanceof BandScale?a.bandwidth/2:0,u=n.length,c=[],f=[],d=[],h,p,g,v,m=s.convert(0),y=0;y<u;y++){var b=n[y],C=o[y],x=a.convert(C)+l,w=s.convert(b);y+1<u&&(v=a.convert(o[y+1])+l),d.push({seriesDatum:{x:C,y:b},point:{x,y:w}}),b===void 0&&g!==void 0?(f.push({seriesDatum:void 0,point:{x:g,y:m}}),v!==void 0&&f.push({seriesDatum:void 0,point:{x:v,y:m}})):b!==void 0&&(f.push({seriesDatum:{x:C,y:b},point:{x,y:w}}),c.push({seriesDatum:{x:C,y:b},point:{x,y:w}}),h=h!==void 0?h:x,p=x),g=x}return f.push({seriesDatum:void 0,point:{x:p,y:m}},{seriesDatum:void 0,point:{x:h,y:m}}),{nodeData:c,fillData:f,strokeData:d}}},t.prototype.updateAxisLine=function(){var e=this,r=e.xScale,n=e.yScale,o=e.axis,a=e.xAxisLine;a.x1=r.range[0],a.x2=r.range[1],a.y1=a.y2=0,a.stroke=o.stroke,a.strokeWidth=o.strokeWidth;var s=n.convert(0);a.translationY=s},t.prototype.updateSelection=function(e){var r=this.marker,n=getMarker(r.shape),o=this.markerSelection.setData(e),a=o.enter.append(n);o.exit.remove(),this.markerSelection=o.merge(a)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,o=r.highlightStyle,a=r.marker,s=o.size,l=o.fill,u=o.stroke,c=o.strokeWidth,f=a.formatter;this.markerSelection.each(function(d,h,p){var g=h.point,v=h.seriesDatum;if(g){var m=h===n,y=m&&l!==void 0?l:a.fill,b=m&&u!==void 0?u:a.stroke,C=m&&c!==void 0?c:a.strokeWidth,x=m&&s!==void 0?s:a.size,w;if(f){var P=p===0,S=p===e.markerSelectionData.length-1,O=v.y===e.min,E=v.y===e.max;w=f({datum:h,xValue:v.x,yValue:v.y,min:O,max:E,first:P,last:S,fill:y,stroke:b,strokeWidth:C,size:x,highlighted:m})}d.size=w&&w.size!=null?w.size:x,d.fill=w&&w.fill!=null?w.fill:y,d.stroke=w&&w.stroke!=null?w.stroke:b,d.strokeWidth=w&&w.strokeWidth!=null?w.strokeWidth:C,d.translationX=g.x,d.translationY=g.y,d.visible=w&&w.enabled!=null?w.enabled:a.enabled&&d.size>0}})},t.prototype.updateStroke=function(e){var r=this,n=r.strokePath,o=r.yData,a=r.line;if(!(o.length<2)){var s=n.path,l=e.length,u=!0;s.clear();for(var c=0;c<l;c++){var f=e[c],d=f.point,h=f.seriesDatum,p=d.x,g=d.y;h.y==null?u=!0:u?(s.moveTo(p,g),u=!1):s.lineTo(p,g)}n.lineJoin=n.lineCap="round",n.fill=void 0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth}},t.prototype.updateFill=function(e){var r=this,n=r.fillPath,o=r.yData,a=r.fill,s=n.path,l=e.length;if(s.clear(),!(o.length<2)){for(var u=0;u<l;u++){var c=e[u].point,f=c.x,d=c.y;u>0?s.lineTo(f,d):s.moveTo(f,d)}s.closePath(),n.lineJoin="round",n.stroke=void 0,n.fill=a}},t.prototype.updateXCrosshairLine=function(){var e=this,r=e.yScale,n=e.xCrosshairLine,o=e.highlightedDatum,a=e.crosshairs.xLine;if(!a.enabled||o==null){n.strokeWidth=0;return}n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap=a.lineCap==="round"||a.lineCap==="square"?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:getLineDash(n.lineCap,a.lineDash),n.translationX=o.point.x},t.prototype.updateYCrosshairLine=function(){var e=this,r=e.xScale,n=e.yCrosshairLine,o=e.highlightedDatum,a=e.crosshairs.yLine;if(!a.enabled||o==null){n.strokeWidth=0;return}n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap=a.lineCap==="round"||a.lineCap==="square"?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:getLineDash(n.lineCap,a.lineDash),n.translationY=o.point.y},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,o=n.y,a=n.x,s=this.formatNumericDatum(o),l=r==="array"||r==="object"?this.formatDatum(a):void 0,u={content:s,title:l};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:n,yValue:o,xValue:a}),u):toTooltipHtml(u)},t.className="AreaSparkline",t}(Sparkline),__extends$9=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SparklineMarker=function(){function i(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return i}(),SparklineLine=function(){function i(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return i}(),SparklineCrosshairs=function(){function i(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return i}(),LineSparkline=function(i){__extends$9(t,i);function t(){var e=i.call(this)||this;return e.linePath=new Path,e.xCrosshairLine=new Line,e.yCrosshairLine=new Line,e.lineSparklineGroup=new Group,e.markers=new Group,e.markerSelection=Selection.select(e.markers).selectAll(),e.markerSelectionData=[],e.marker=new SparklineMarker,e.line=new SparklineLine,e.crosshairs=new SparklineCrosshairs,e.rootGroup.append(e.lineSparklineGroup),e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();e&&(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yData,n=e.yScale,o=extent(r,isNumber),a=0,s=1;if(o!==void 0&&(a=this.min=o[0],s=this.max=o[1]),a===s){var l=Math.abs(a*.01);a-=l,s+=l}n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,o=e.xData,a=e.xScale,s=e.yScale;if(r){for(var l=a instanceof BandScale?a.bandwidth/2:0,u=[],c=0;c<n.length;c++){var f=n[c],d=o[c];if(f!=null){var h=a.convert(d)+l,p=s.convert(f);u.push({seriesDatum:{x:d,y:f},point:{x:h,y:p}})}}return u}},t.prototype.updateSelection=function(e){var r=this.marker,n=getMarker(r.shape),o=this.markerSelection.setData(e),a=o.enter.append(n);o.exit.remove(),this.markerSelection=o.merge(a)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,o=r.highlightStyle,a=r.marker,s=o.size,l=o.fill,u=o.stroke,c=o.strokeWidth,f=a.formatter;this.markerSelection.each(function(d,h,p){var g=h===n,v=g&&l!==void 0?l:a.fill,m=g&&u!==void 0?u:a.stroke,y=g&&c!==void 0?c:a.strokeWidth,b=g&&s!==void 0?s:a.size,C,x=h.seriesDatum,w=h.point;if(f){var P=p===0,S=p===e.markerSelectionData.length-1,O=x.y===e.min,E=x.y===e.max;C=f({datum:h,xValue:x.x,yValue:x.y,min:O,max:E,first:P,last:S,fill:v,stroke:m,strokeWidth:y,size:b,highlighted:g})}d.size=C&&C.size!=null?C.size:b,d.fill=C&&C.fill!=null?C.fill:v,d.stroke=C&&C.stroke!=null?C.stroke:m,d.strokeWidth=C&&C.strokeWidth!=null?C.strokeWidth:y,d.translationX=w.x,d.translationY=w.y,d.visible=C&&C.enabled!=null?C.enabled:a.enabled&&d.size>0})},t.prototype.updateLine=function(){var e=this,r=e.linePath,n=e.yData,o=e.xData,a=e.xScale,s=e.yScale,l=e.line;if(!(n.length<2)){var u=r.path,c=n.length,f=a instanceof BandScale?a.bandwidth/2:0,d=!0;u.clear();for(var h=0;h<c;h++){var p=o[h],g=n[h],v=a.convert(p)+f,m=s.convert(g);g==null?d=!0:d?(u.moveTo(v,m),d=!1):u.lineTo(v,m)}r.fill=void 0,r.stroke=l.stroke,r.strokeWidth=l.strokeWidth}},t.prototype.updateXCrosshairLine=function(){var e=this,r=e.yScale,n=e.xCrosshairLine,o=e.highlightedDatum,a=e.crosshairs.xLine;if(!a.enabled||o==null){n.strokeWidth=0;return}n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap=a.lineCap==="round"||a.lineCap==="square"?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:getLineDash(n.lineCap,a.lineDash),n.translationX=o.point.x},t.prototype.updateYCrosshairLine=function(){var e=this,r=e.xScale,n=e.yCrosshairLine,o=e.highlightedDatum,a=e.crosshairs.yLine;if(!a.enabled||o==null){n.strokeWidth=0;return}n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap=a.lineCap==="round"||a.lineCap==="square"?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:getLineDash(n.lineCap,a.lineDash),n.translationY=o.point.y},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,o=n.y,a=n.x,s=this.formatNumericDatum(o),l=r==="array"||r==="object"?this.formatDatum(a):void 0,u={content:s,title:l};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:n,yValue:o,xValue:a}),u):toTooltipHtml(u)},t.className="LineSparkline",t}(Sparkline),__extends$8=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rectangle=function(i){__extends$8(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._x=0,e._y=0,e._width=0,e._height=0,e._crisp=!1,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crisp",{get:function(){return this._crisp},set:function(e){this._crisp!==e&&(this._crisp=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,o=r.y,a=r.width,s=r.height,l=r.crisp;if(e.beginPath(),l){var u=this,c=u.alignment,f=u.align;e.rect(f(c,n),f(c,o),f(c,n,a),f(c,o,s))}else e.rect(n,o,a,s);this.fillStroke(e),this.dirty=!1},t.className="Column",t}(Shape),__extends$7=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(i){__extends$7(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._x=0,e._y=0,e.lineBreakRegex=/\r?\n/g,e.lines=[],e._text="",e._dirtyFont=!0,e._fontSize=10,e._fontFamily="sans-serif",e._textAlign=t.defaultStyles.textAlign,e._textBaseline=t.defaultStyles.textBaseline,e._lineHeight=14,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var r=String(e);this._text!==r&&(this._text=r,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=getFont$1(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(e){this._dirtyFont!==e&&(this._dirtyFont=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){isFinite(e)||(e=10),this._fontSize!==e&&(this._fontSize=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign!==e&&(this._textAlign=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return HdpiCanvas.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=HdpiCanvas.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=HdpiCanvas.getTextSize(this.text,this.font),r=this,n=r.x,o=r.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":o-=e.height*.7;break;case"middle":o-=e.height*.45;break;case"ideographic":o-=e.height;break;case"hanging":o-=e.height*.2;break;case"bottom":o-=e.height;break}return new BBox(n,o,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return o?o.containsPoint(n.x,n.y):!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){if(!(!this.lines.length||!this.scene)){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.fill,o=r.stroke,a=r.strokeWidth;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;var s=this.scene.canvas.pixelRatio||1,l=e.globalAlpha;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;var u=this,c=u.fillShadow,f=u.text,d=u.x,h=u.y;c&&c.enabled&&(e.shadowColor=c.color,e.shadowOffsetX=c.xOffset*s,e.shadowOffsetY=c.yOffset*s,e.shadowBlur=c.blur*s),e.fillText(f,d,h)}if(o&&a){e.strokeStyle=o,e.lineWidth=a,e.globalAlpha=l*this.opacity*this.strokeOpacity;var p=this,g=p.lineDash,v=p.lineDashOffset,m=p.lineCap,y=p.lineJoin,b=p.strokeShadow,f=p.text,d=p.x,h=p.y;g&&e.setLineDash(g),v&&(e.lineDashOffset=v),m&&(e.lineCap=m),y&&(e.lineJoin=y),b&&b.enabled&&(e.shadowColor=b.color,e.shadowOffsetX=b.xOffset*s,e.shadowOffsetY=b.yOffset*s,e.shadowBlur=b.blur*s),e.strokeText(f,d,h)}this.dirty=!1}},t.className="Text",t.defaultStyles=chainObjects(Shape.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t})(Shape);function getFont$1(i,t,e,r){return[e||"",r||"",i+"px",t].join(" ").trim()}var __extends$6=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate$2=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Label$2=function(i){__extends$6(t,i);function t(){var e=i.call(this)||this;return e.enabled=!0,e.fontSize=8,e.fontFamily="Verdana, sans-serif",e.color="rgba(70, 70, 70, 1)",e}return t.prototype.getFont=function(){return getFont$1(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},__decorate$2([reactive("change","dataChange")],t.prototype,"enabled",void 0),__decorate$2([reactive("change")],t.prototype,"fontSize",void 0),__decorate$2([reactive("change")],t.prototype,"fontFamily",void 0),__decorate$2([reactive("change")],t.prototype,"fontStyle",void 0),__decorate$2([reactive("change")],t.prototype,"fontWeight",void 0),__decorate$2([reactive("change")],t.prototype,"color",void 0),t}(Observable),__extends$5=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Text=function(i){__extends$5(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e._x=0,e._y=0,e.lineBreakRegex=/\r?\n/g,e.lines=[],e._text="",e._dirtyFont=!0,e._fontSize=10,e._fontFamily="sans-serif",e._textAlign=t.defaultStyles.textAlign,e._textBaseline=t.defaultStyles.textBaseline,e._lineHeight=14,e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var r=String(e);this._text!==r&&(this._text=r,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=getFont(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(e){this._dirtyFont!==e&&(this._dirtyFont=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){isFinite(e)||(e=10),this._fontSize!==e&&(this._fontSize=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign!==e&&(this._textAlign=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return HdpiCanvas.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=HdpiCanvas.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new BBox(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=HdpiCanvas.getTextSize(this.text,this.font),r=this,n=r.x,o=r.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":o-=e.height*.7;break;case"middle":o-=e.height*.45;break;case"ideographic":o-=e.height;break;case"hanging":o-=e.height*.2;break;case"bottom":o-=e.height;break}return new BBox(n,o,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),o=this.computeBBox();return o?o.containsPoint(n.x,n.y):!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){if(!(!this.lines.length||!this.scene)){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.fill,o=r.stroke,a=r.strokeWidth;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;var s=this.scene.canvas.pixelRatio||1,l=e.globalAlpha;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;var u=this,c=u.fillShadow,f=u.text,d=u.x,h=u.y;c&&c.enabled&&(e.shadowColor=c.color,e.shadowOffsetX=c.xOffset*s,e.shadowOffsetY=c.yOffset*s,e.shadowBlur=c.blur*s),e.fillText(f,d,h)}if(o&&a){e.strokeStyle=o,e.lineWidth=a,e.globalAlpha=l*this.opacity*this.strokeOpacity;var p=this,g=p.lineDash,v=p.lineDashOffset,m=p.lineCap,y=p.lineJoin,b=p.strokeShadow,f=p.text,d=p.x,h=p.y;g&&e.setLineDash(g),v&&(e.lineDashOffset=v),m&&(e.lineCap=m),y&&(e.lineJoin=y),b&&b.enabled&&(e.shadowColor=b.color,e.shadowOffsetX=b.xOffset*s,e.shadowOffsetY=b.yOffset*s,e.shadowBlur=b.blur*s),e.strokeText(f,d,h)}this.dirty=!1}},t.className="Text",t.defaultStyles=chainObjects(Shape.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t}(Shape);function getFont(i,t,e,r){return[e||"",r||"",i+"px",t].join(" ").trim()}var __extends$4=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BarColumnNodeTag;(function(i){i[i.Rect=0]="Rect",i[i.Label=1]="Label"})(BarColumnNodeTag||(BarColumnNodeTag={}));var BarColumnLabelPlacement;(function(i){i.InsideBase="insideBase",i.InsideEnd="insideEnd",i.Center="center",i.OutsideEnd="outsideEnd"})(BarColumnLabelPlacement||(BarColumnLabelPlacement={}));var BarColumnLabel=function(i){__extends$4(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.formatter=void 0,e.placement=BarColumnLabelPlacement.InsideEnd,e}return t}(Label$2),BarColumnSparkline=function(i){__extends$4(t,i);function t(){var e=i.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new Line,e.bandWidth=0,e.sparklineGroup=new Group,e.rectGroup=new Group,e.labelGroup=new Group,e.rectSelection=Selection.select(e.rectGroup).selectAll(),e.labelSelection=Selection.select(e.labelGroup).selectAll(),e.nodeSelectionData=[],e.label=new BarColumnLabel,e.rootGroup.append(e.sparklineGroup),e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return t.prototype.getNodeData=function(){return this.nodeSelectionData},t.prototype.update=function(){this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){var e=this.generateNodeData();e&&(this.nodeSelectionData=e,this.updateRectSelection(e),this.updateLabelSelection(e))},t.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},t.prototype.calculateStep=function(e){var r,n,o=this,a=o.xScale,s=o.paddingInner,l=o.paddingOuter,u=o.smallestInterval,c=a.domain[1]-a.domain[0],f=c/(n=(r=u)===null||r===void 0?void 0:r.x,n??1)+1,d=50,h=Math.min(f,d),p=h-1,g=e/Math.max(1,2*l+p*s+h);return g},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yScale,n=e.yData,o=e.valueAxisDomain,a=extent(n,isNumber),s=0,l=1;a!==void 0&&(s=this.min=a[0],l=this.max=a[1]),s=s<0?s:0,l=l<0?0:l,o&&(o[1]<l&&(o[1]=l),o[0]>s&&(o[0]=s)),r.domain=o||[s,l]},t.prototype.updateRectSelection=function(e){var r=this.rectSelection.setData(e),n=r.enter.append(Rectangle);r.exit.remove(),this.rectSelection=r.merge(n)},t.prototype.updateRectNodes=function(){var e=this,r=this,n=r.highlightedDatum,o=r.formatter,a=r.fill,s=r.stroke,l=r.strokeWidth,u=this.highlightStyle,c=u.fill,f=u.stroke,d=u.strokeWidth;this.rectSelection.each(function(h,p,g){var v=p===n,m=v&&c!==void 0?c:a,y=v&&f!==void 0?f:s,b=v&&d!==void 0?d:l,C,x=p.x,w=p.y,P=p.width,S=p.height,O=p.seriesDatum;if(o){var E=g===0,D=g===e.nodeSelectionData.length-1,R=O.y===e.min,F=O.y===e.max;C=o({datum:p,xValue:O.x,yValue:O.y,width:P,height:S,min:R,max:F,first:E,last:D,fill:m,stroke:y,strokeWidth:b,highlighted:v})}h.fill=C&&C.fill||m,h.stroke=C&&C.stroke||y,h.strokeWidth=C&&C.strokeWidth||b,h.x=h.y=0,h.width=P,h.height=S,h.visible=h.height>0,h.translationX=x,h.translationY=w})},t.prototype.updateLabelSelection=function(e){var r=this.labelSelection.setData(e),n=r.enter.append(Text).each(function(o){o.tag=BarColumnNodeTag.Label,o.pointerEvents=PointerEvents.None});r.exit.remove(),this.labelSelection=r.merge(n)},t.prototype.updateLabelNodes=function(){var e=this.label,r=e.enabled,n=e.fontStyle,o=e.fontWeight,a=e.fontSize,s=e.fontFamily,l=e.color;this.labelSelection.each(function(u,c){var f=c.label;f&&r?(u.fontStyle=n,u.fontWeight=o,u.fontSize=a,u.fontFamily=s,u.textAlign=f.textAlign,u.textBaseline=f.textBaseline,u.text=f.text,u.x=f.x,u.y=f.y,u.fill=l,u.visible=!0):u.visible=!1})},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,o=n.y,a=n.x,s=this.formatNumericDatum(o),l=r==="array"||r==="object"?this.formatDatum(a):void 0,u={content:s,title:l};return this.tooltip.renderer?toTooltipHtml(this.tooltip.renderer({context:this.context,datum:n,yValue:o,xValue:a}),u):toTooltipHtml(u)},t.prototype.formatLabelValue=function(e){return e%1!==0?e.toFixed(1):e.toFixed(0)},t}(Sparkline),__extends$3=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BarSparkline=function(i){__extends$3(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updateYScaleRange=function(){var e=this,r=e.seriesRect,n=e.yScale;n.range=[0,r.width]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,o=e.paddingOuter,a=e.paddingInner;if(r instanceof BandScale)r.range=[0,n.height],r.paddingInner=a,r.paddingOuter=o;else{var s=this.calculateStep(n.height),l=s*o;this.bandWidth=s*(1-a),r.range=[l,n.height-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,o=e.axisLine,a=e.seriesRect,s=n.strokeWidth;o.x1=0,o.x2=0,o.y1=0,o.y2=a.height,o.stroke=n.stroke,o.strokeWidth=s+(s%2===1?1:0);var l=r.convert(0);o.translationX=l},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,o=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,f=e.label;if(r){for(var d=f.fontStyle,h=f.fontWeight,p=f.fontSize,g=f.fontFamily,v=f.color,m=f.formatter,y=f.placement,b=[],C=s.convert(0),x=0,w=n.length;x<w;x++){var P=n[x],S=o[x],O=P===void 0;O&&(P=0);var E=a.convert(S),D=Math.min(s.convert(P),C),R=Math.max(s.convert(P),C),F=a instanceof BandScale?a.bandwidth:this.bandWidth,I=R-D,$={x:C,y:E},B=void 0;m?B=m({value:P}):B=P!==void 0&&isNumber(P)?this.formatLabelValue(P):"";var V=E+F/2,G=void 0,U="middle",H=void 0,N=P!==void 0&&P>=0,j=4;if(y===BarColumnLabelPlacement.Center)G=D+I/2,H="center";else if(y===BarColumnLabelPlacement.OutsideEnd)G=D+(N?I+j:-j),H=N?"start":"end";else if(y===BarColumnLabelPlacement.InsideEnd){G=D+(N?I-j:j),H=N?"end":"start";var W=HdpiCanvas.getTextSize(B,g),z=W.width||20,K=C+z,X=C-z,q=N&&G<K||!N&&G>X;q&&(G=C+j*(N?1:-1),H=N?"start":"end")}else G=C+j*(N?1:-1),H=N?"start":"end";b.push({x:D,y:E,width:I,height:F,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:S,y:O?void 0:P},point:$,label:{x:G,y:V,text:B,fontStyle:d,fontWeight:h,fontSize:p,fontFamily:g,textAlign:H,textBaseline:U,fill:v}})}return b}},t.prototype.getDistance=function(e,r){return Math.abs(e.y-r.y)},t.className="BarSparkline",t}(BarColumnSparkline),__extends$2=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ColumnSparkline=function(i){__extends$2(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.updateYScaleRange=function(){var e=this,r=e.seriesRect,n=e.yScale;n.range=[r.height,0]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,o=e.paddingOuter,a=e.paddingInner;if(r instanceof BandScale)r.range=[0,n.width],r.paddingInner=a,r.paddingOuter=o;else{var s=this.calculateStep(n.width),l=s*o;this.bandWidth=s*(1-a),r.range=[l,n.width-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,o=e.axisLine,a=e.seriesRect,s=n.strokeWidth;o.x1=0,o.x2=a.width,o.y1=0,o.y2=0,o.stroke=n.stroke,o.strokeWidth=s+(s%2===1?1:0);var l=r.convert(0);o.translationY=l},t.prototype.generateNodeData=function(){var e=this,r=e.data,n=e.yData,o=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,f=e.label;if(r){for(var d=f.fontStyle,h=f.fontWeight,p=f.fontSize,g=f.fontFamily,v=f.color,m=f.formatter,y=f.placement,b=[],C=s.convert(0),x=0,w=n.length;x<w;x++){var P=n[x],S=o[x],O=P===void 0;O&&(P=0);var E=Math.min(s.convert(P),C),D=a.convert(S),R=Math.max(s.convert(P),C),F=a instanceof BandScale?a.bandwidth:this.bandWidth,I=R-E,$={x:D+F/2,y:C},B=void 0;m?B=m({value:P}):B=P!==void 0&&isNumber(P)?this.formatLabelValue(P):"";var V=D+F/2,G=void 0,U="center",H=void 0,N=P!==void 0&&P>=0,j=2;if(y===BarColumnLabelPlacement.Center)G=E+I/2,H="middle";else if(y===BarColumnLabelPlacement.OutsideEnd)G=E+(N?-j:I+j),H=N?"bottom":"top";else if(y===BarColumnLabelPlacement.InsideEnd){G=E+(N?j:I-j),H=N?"top":"bottom";var W=HdpiCanvas.getTextSize(B,g),z=W.height||10,K=C-z,X=C+z,q=N&&G>K||!N&&G<X;q&&(G=C+j*(N?-1:1),H=N?"bottom":"top")}else G=C+j*(N?-1:1),H=N?"bottom":"top";b.push({x:D,y:E,width:F,height:I,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:S,y:O?void 0:P},point:$,label:{x:V,y:G,text:B,fontStyle:d,fontWeight:h,fontSize:p,fontFamily:g,textAlign:U,textBaseline:H,fill:v}})}return b}},t.className="ColumnSparkline",t}(BarColumnSparkline),AgSparkline=function(){function i(){}return i.create=function(t,e){t=Object.create(t);var r=getSparklineInstance(t.type);return e&&(r.tooltip=e),initSparkline(r,t),initSparklineByType(r,t),t.data&&(r.data=t.data),r},i}();function getSparklineInstance(i){switch(i===void 0&&(i="line"),i){case"column":return new ColumnSparkline;case"bar":return new BarSparkline;case"area":return new AreaSparkline;case"line":default:return new LineSparkline}}function initSparklineByType(i,t){switch(t.type){case"bar":initBarColumnSparkline(i,t);break;case"column":initBarColumnSparkline(i,t);break;case"area":initAreaSparkline(i,t);break;case"line":default:initLineSparkline(i,t);break}}function initSparkline(i,t){setValueIfPropertyExists(i,"context",t.context,t),setValueIfPropertyExists(i,"width",t.width,t),setValueIfPropertyExists(i,"height",t.height,t),setValueIfPropertyExists(i,"container",t.container,t),setValueIfPropertyExists(i,"xKey",t.xKey,t),setValueIfPropertyExists(i,"yKey",t.yKey,t),t.padding&&initPaddingOptions(i.padding,t.padding),t.axis&&initAxisOptions(i.axis,t.axis),t.highlightStyle&&initHighlightStyleOptions(i.highlightStyle,t.highlightStyle),t.tooltip&&i.tooltip&&initTooltipOptions(i.tooltip,t.tooltip)}function initLineSparkline(i,t){t.marker&&initMarkerOptions(i.marker,t.marker),t.line&&initLineOptions(i.line,t.line),t.crosshairs&&initCrosshairsOptions(i.crosshairs,t.crosshairs)}function initAreaSparkline(i,t){setValueIfPropertyExists(i,"fill",t.fill,t),t.marker&&initMarkerOptions(i.marker,t.marker),t.line&&initLineOptions(i.line,t.line),t.crosshairs&&initCrosshairsOptions(i.crosshairs,t.crosshairs)}function initBarColumnSparkline(i,t){setValueIfPropertyExists(i,"valueAxisDomain",t.valueAxisDomain,t),setValueIfPropertyExists(i,"fill",t.fill,t),setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t),setValueIfPropertyExists(i,"paddingInner",t.paddingInner,t),setValueIfPropertyExists(i,"paddingOuter",t.paddingOuter,t),setValueIfPropertyExists(i,"formatter",t.formatter,t),t.label&&initLabelOptions(i.label,t.label)}function initPaddingOptions(i,t){setValueIfPropertyExists(i,"top",t.top,t),setValueIfPropertyExists(i,"right",t.right,t),setValueIfPropertyExists(i,"bottom",t.bottom,t),setValueIfPropertyExists(i,"left",t.left,t)}function initMarkerOptions(i,t){setValueIfPropertyExists(i,"enabled",t.enabled,t),setValueIfPropertyExists(i,"size",t.size,t),setValueIfPropertyExists(i,"shape",t.shape,t),setValueIfPropertyExists(i,"fill",t.fill,t),setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t),setValueIfPropertyExists(i,"formatter",t.formatter,t)}function initLabelOptions(i,t){setValueIfPropertyExists(i,"enabled",t.enabled,t),setValueIfPropertyExists(i,"fontStyle",t.fontStyle,t),setValueIfPropertyExists(i,"fontWeight",t.fontWeight,t),setValueIfPropertyExists(i,"fontSize",t.fontSize,t),setValueIfPropertyExists(i,"fontFamily",t.fontFamily,t),setValueIfPropertyExists(i,"textAlign",t.textAlign,t),setValueIfPropertyExists(i,"textBaseline",t.textBaseline,t),setValueIfPropertyExists(i,"color",t.color,t),setValueIfPropertyExists(i,"formatter",t.formatter,t),setValueIfPropertyExists(i,"placement",t.placement,t)}function initLineOptions(i,t){setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t)}function initAxisOptions(i,t){setValueIfPropertyExists(i,"type",t.type,t),setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t)}function initHighlightStyleOptions(i,t){setValueIfPropertyExists(i,"fill",t.fill,t),setValueIfPropertyExists(i,"size",t.size,t),setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t)}function initTooltipOptions(i,t){setValueIfPropertyExists(i,"enabled",t.enabled,t),setValueIfPropertyExists(i,"container",t.container,t),setValueIfPropertyExists(i,"xOffset",t.xOffset,t),setValueIfPropertyExists(i,"yOffset",t.yOffset,t),setValueIfPropertyExists(i,"renderer",t.renderer,t)}function initCrosshairsOptions(i,t){i.xLine&&t.xLine&&initCrosshairLineOptions(i.xLine,t.xLine),i.yLine&&t.yLine&&initCrosshairLineOptions(i.yLine,t.yLine)}function initCrosshairLineOptions(i,t){setValueIfPropertyExists(i,"enabled",t.enabled,t),setValueIfPropertyExists(i,"stroke",t.stroke,t),setValueIfPropertyExists(i,"strokeWidth",t.strokeWidth,t),setValueIfPropertyExists(i,"lineDash",t.lineDash,t),setValueIfPropertyExists(i,"lineCap",t.lineCap,t)}var doOnceFlags={};function doOnce(i,t){doOnceFlags[t]||(i(),doOnceFlags[t]=!0)}var offsetValidator=function(i,t,e){if(isNumber(t))return!0;var r="AG Charts: "+i+" must be a number, the value you provided is not a valid number. Using the default of "+e+"px.";return doOnce(function(){return console.warn(r)},i+" not a number"),!1},validators={xOffset:offsetValidator,yOffset:offsetValidator};function setValueIfPropertyExists(i,t,e,r){if(t in r)if(t in i){var n=validators[t],o=n?n(t,e,i[t]):!0;o&&i[t]!==e&&(i[t]=e)}else console.warn("Property "+t+" does not exist on the target object.")}var __extends$1=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__assign=function(){return __assign=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},__assign.apply(this,arguments)},__decorate$1=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SparklineCellRenderer=function(i){__extends$1(t,i);function t(){return i.call(this,t.TEMPLATE)||this}return t.prototype.init=function(e){var r=this,n=!0,o=function(){var s=r.getGui(),l=s.clientWidth,u=s.clientHeight;if(!(l===0||u===0))if(n){var c=__assign({data:e.value,width:l,height:u,context:{data:e.data}},e.sparklineOptions);r.sparkline=AgSparkline.create(c,r.sparklineTooltipSingleton.getSparklineTooltip()),r.eSparkline.appendChild(r.sparkline.canvasElement),n=!1}else r.sparkline.width=l,r.sparkline.height=u},a=this.resizeObserverService.observeResize(this.getGui(),o);this.addDestroyFunc(function(){return a()})},t.prototype.refresh=function(e){return this.sparkline?(this.sparkline.data=e.value,!0):!1},t.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),i.prototype.destroy.call(this)},t.TEMPLATE=`<div class="ag-sparkline-wrapper">
            <span ref="eSparkline"></span>
        </div>`,__decorate$1([RefSelector("eSparkline")],t.prototype,"eSparkline",void 0),__decorate$1([Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0),__decorate$1([Autowired("sparklineTooltipSingleton")],t.prototype,"sparklineTooltipSingleton",void 0),t}(Component),__extends=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),__decorate=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SparklineTooltipSingleton=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.postConstruct=function(){this.tooltip=new SparklineTooltip},t.prototype.getSparklineTooltip=function(){return this.tooltip},t.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},__decorate([PostConstruct],t.prototype,"postConstruct",null),__decorate([PreDestroy],t.prototype,"destroyTooltip",null),t=__decorate([Bean("sparklineTooltipSingleton")],t),t}(BeanStub),SparklinesModule={moduleName:ModuleNames.SparklinesModule,beans:[SparklineTooltipSingleton],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:SparklineCellRenderer}],dependantModules:[EnterpriseCoreModule]},AllEnterpriseModules=[ClipboardModule,ColumnsToolPanelModule,ExcelExportModule,FiltersToolPanelModule,GridChartsModule,MasterDetailModule,MenuModule,MultiFilterModule,RangeSelectionModule,RichSelectModule,RowGroupingModule,ServerSideRowModelModule,SetFilterModule,SideBarModule,StatusBarModule,ViewportRowModelModule,SparklinesModule];AllCommunityModules.concat(AllEnterpriseModules);ModuleRegistry.registerModules(AllEnterpriseModules);const agGrid="",agThemeMaterial="",jsonFlattenArrayObjectsAsString=i=>{if(!i.hasOwnProperty("platform")||!i.platform.hasOwnProperty("record"))return JSON.stringify([]);let t=i.platform.record;return JSON.stringify(Array.isArray(t)?t.map(e=>Object.fromEntries(Object.entries(e).map(([r,n])=>[r,n.hasOwnProperty("displayValue")?n.displayValue:n]))):[Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r.hasOwnProperty("displayValue")?r.displayValue:r]))])};function unescapeSymbols(i){if(!i)return"";const t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"=","&#x22;":'"',"&#x3C;":"<","&#x3E;":">","&#x26;":"&","&#x27;":"'","&#x2D;":"-","&#x5F;":"_","&#x2B;":"+","&#x2E;":".","&#x2A;":"*","&#xfffd;":" "};return i.replace(/&(#x?)?\w+;/g,e=>{const r=t[e];return r||e})}function numberParser(i){const t=Number(i.newValue);return isNaN(t)?NaN:t}function numberValueFormatter(i){const t=parseFloat(i.value);return isNaN(t)?i.value:t.toFixed(2).toString()}function percentageValueFormatter(i){const t=parseFloat(i.value);return isNaN(t)?i.value:(t*100).toFixed(2)+"%"}const QuoteItemsGrid_svelte_svelte_type_style_lang="";function create_default_slot_10(i){let t;return{c(){t=text("menu")},l(e){t=claim_text(e,"menu")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_9(i){let t,e,r;return e=new Icon({props:{class:"material-icons",$$slots:{default:[create_default_slot_10]},$$scope:{ctx:i}}}),{c(){t=text(`rates\r
			`),create_component(e.$$.fragment)},l(n){t=claim_text(n,`rates\r
			`),claim_component(e.$$.fragment,n)},m(n,o){insert_hydration(n,t,o),mount_component(e,n,o),r=!0},p(n,o){const a={};o&268435456&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){n&&detach(t),destroy_component(e,n)}}}function create_default_slot_8(i){let t;return{c(){t=text("Save State")},l(e){t=claim_text(e,"Save State")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_7$2(i){let t;return{c(){t=text("Restore State")},l(e){t=claim_text(e,"Restore State")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_6$2(i){let t;return{c(){t=text("Reset State")},l(e){t=claim_text(e,"Reset State")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_5$2(i){let t;return{c(){t=text("percent")},l(e){t=claim_text(e,"percent")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_trailingIcon_slot_3(i){let t,e;return t=new Icon({props:{class:"material-icons",slot:"trailingIcon",$$slots:{default:[create_default_slot_5$2]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&268435456&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_4$2(i){let t;return{c(){t=text("percent")},l(e){t=claim_text(e,"percent")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_trailingIcon_slot_2(i){let t,e;return t=new Icon({props:{class:"material-icons",slot:"trailingIcon",$$slots:{default:[create_default_slot_4$2]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&268435456&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_3$2(i){let t;return{c(){t=text("percent")},l(e){t=claim_text(e,"percent")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_trailingIcon_slot_1(i){let t,e;return t=new Icon({props:{class:"material-icons",slot:"trailingIcon",$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&268435456&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_2$2(i){let t;return{c(){t=text("percent")},l(e){t=claim_text(e,"percent")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_trailingIcon_slot(i){let t,e;return t=new Icon({props:{class:"material-icons",slot:"trailingIcon",$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&268435456&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_1$3(i){let t;return{c(){t=text("search")},l(e){t=claim_text(e,"search")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot$3(i){let t,e;return t=new Icon({props:{class:"material-icons",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&268435456&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_fragment$i(i){let t,e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x,w,P,S,O,E,D,R,F,I,$,B,V,G,U,H,N,j,W,z,K,X,q,Z,ee,ue,ne,Q,ie,se;r=new Button$2({props:{color:"secondary",$$slots:{default:[create_default_slot_9]},$$scope:{ctx:i}}}),r.$on("click",i[11]),o=new Button$2({props:{$$slots:{default:[create_default_slot_8]},$$scope:{ctx:i}}}),o.$on("click",i[4]),s=new Button$2({props:{$$slots:{default:[create_default_slot_7$2]},$$scope:{ctx:i}}}),s.$on("click",i[5]),u=new Button$2({props:{$$slots:{default:[create_default_slot_6$2]},$$scope:{ctx:i}}}),u.$on("click",i[6]);function ae(J){i[12](J)}let oe={style:"width: 120px; height:40px; margin-right: 10px;",variant:"outlined",type:"number",input$step:".1",$$slots:{trailingIcon:[create_trailingIcon_slot_3]},$$scope:{ctx:i}};i[3].material!==void 0&&(oe.value=i[3].material),g=new Textfield({props:oe}),binding_callbacks.push(()=>bind(g,"value",ae)),g.$on("blur",i[0]);function fe(J){i[13](J)}let le={style:"width: 120px; height:40px; margin-right: 10px;",variant:"outlined",type:"number",input$step:".1",$$slots:{trailingIcon:[create_trailingIcon_slot_2]},$$scope:{ctx:i}};i[3].freight!==void 0&&(le.value=i[3].freight),x=new Textfield({props:le}),binding_callbacks.push(()=>bind(x,"value",fe)),x.$on("blur",i[0]);function Y(J){i[14](J)}let re={style:"width: 120px; height:40px; margin-right: 10px;",variant:"outlined",type:"number",input$step:".1",$$slots:{trailingIcon:[create_trailingIcon_slot_1]},$$scope:{ctx:i}};i[3].tax!==void 0&&(re.value=i[3].tax),D=new Textfield({props:re}),binding_callbacks.push(()=>bind(D,"value",Y)),D.$on("blur",i[0]);function he(J){i[15](J)}let de={style:"width: 120px; height:40px; margin-right: 10px;",variant:"outlined",type:"number",input$step:".1",$$slots:{trailingIcon:[create_trailingIcon_slot]},$$scope:{ctx:i}};i[3].service!==void 0&&(de.value=i[3].service),V=new Textfield({props:de}),binding_callbacks.push(()=>bind(V,"value",he)),V.$on("blur",i[0]);function ve(J){i[16](J)}let me={class:"shaped-outlined",variant:"standard",style:"width: 600px;",label:"Search Pricebook"};i[2]!==void 0&&(me.value=i[2]),X=new Textfield({props:me}),binding_callbacks.push(()=>bind(X,"value",ve)),ee=new Button$2({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:i}}}),ee.$on("click",sayHi);function ye(J){i[17](J)}let xe={class:"shaped-outlined",variant:"standard",label:"Find"};return i[1]!==void 0&&(xe.value=i[1]),Q=new Textfield({props:xe}),binding_callbacks.push(()=>bind(Q,"value",ye)),{c(){t=element$1("div"),e=element$1("div"),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),c=space(),f=element$1("div"),d=element$1("labl"),h=text("Materials"),p=space(),create_component(g.$$.fragment),m=space(),y=element$1("labl"),b=text("Freight"),C=space(),create_component(x.$$.fragment),P=space(),S=element$1("labl"),O=text("Tax"),E=space(),create_component(D.$$.fragment),F=space(),I=element$1("labl"),$=text("Service"),B=space(),create_component(V.$$.fragment),U=space(),H=element$1("br"),N=space(),j=element$1("hr"),W=space(),z=element$1("div"),K=element$1("div"),create_component(X.$$.fragment),Z=space(),create_component(ee.$$.fragment),ue=space(),ne=element$1("div"),create_component(Q.$$.fragment),this.h()},l(J){t=claim_element(J,"DIV",{id:!0,class:!0});var ce=children(t);e=claim_element(ce,"DIV",{class:!0});var Ce=children(e);claim_component(r.$$.fragment,Ce),n=claim_space(Ce),claim_component(o.$$.fragment,Ce),a=claim_space(Ce),claim_component(s.$$.fragment,Ce),l=claim_space(Ce),claim_component(u.$$.fragment,Ce),Ce.forEach(detach),c=claim_space(ce),f=claim_element(ce,"DIV",{class:!0,id:!0,style:!0});var pe=children(f);d=claim_element(pe,"LABL",{class:!0});var Te=children(d);h=claim_text(Te,"Materials"),Te.forEach(detach),p=claim_space(pe),claim_component(g.$$.fragment,pe),m=claim_space(pe),y=claim_element(pe,"LABL",{class:!0});var Ae=children(y);b=claim_text(Ae,"Freight"),Ae.forEach(detach),C=claim_space(pe),claim_component(x.$$.fragment,pe),P=claim_space(pe),S=claim_element(pe,"LABL",{class:!0});var Oe=children(S);O=claim_text(Oe,"Tax"),Oe.forEach(detach),E=claim_space(pe),claim_component(D.$$.fragment,pe),F=claim_space(pe),I=claim_element(pe,"LABL",{class:!0});var we=children(I);$=claim_text(we,"Service"),we.forEach(detach),B=claim_space(pe),claim_component(V.$$.fragment,pe),U=claim_space(pe),H=claim_element(pe,"BR",{class:!0}),N=claim_space(pe),j=claim_element(pe,"HR",{class:!0}),pe.forEach(detach),W=claim_space(ce),z=claim_element(ce,"DIV",{style:!0,class:!0});var _e=children(z);K=claim_element(_e,"DIV",{style:!0,class:!0});var Pe=children(K);claim_component(X.$$.fragment,Pe),Z=claim_space(Pe),claim_component(ee.$$.fragment,Pe),Pe.forEach(detach),ue=claim_space(_e),ne=claim_element(_e,"DIV",{style:!0,class:!0});var De=children(ne);claim_component(Q.$$.fragment,De),De.forEach(detach),_e.forEach(detach),ce.forEach(detach),this.h()},h(){attr(e,"class","flex-container svelte-54pbtc"),attr(d,"class","label-container svelte-54pbtc"),attr(y,"class","label-container svelte-54pbtc"),attr(S,"class","label-container svelte-54pbtc"),attr(I,"class","label-container svelte-54pbtc"),attr(H,"class","svelte-54pbtc"),attr(j,"class","svelte-54pbtc"),attr(f,"class","flex-container svelte-54pbtc"),attr(f,"id","rates"),set_style(f,"display","none"),set_style(K,"text-align","start"),set_style(K,"margin-bottom","15px"),attr(K,"class","svelte-54pbtc"),set_style(ne,"text-align","end"),set_style(ne,"margin-bottom","15px"),attr(ne,"class","svelte-54pbtc"),set_style(z,"display","flex"),set_style(z,"justify-content","space-between"),attr(z,"class","svelte-54pbtc"),attr(t,"id","ag-grid"),attr(t,"class","ag-theme-material svelte-54pbtc"),set_style(t,"display","none"),set_style(t,"flex-direction","column"),set_style(t,"height","800px")},m(J,ce){insert_hydration(J,t,ce),append_hydration(t,e),mount_component(r,e,null),append_hydration(e,n),mount_component(o,e,null),append_hydration(e,a),mount_component(s,e,null),append_hydration(e,l),mount_component(u,e,null),append_hydration(t,c),append_hydration(t,f),append_hydration(f,d),append_hydration(d,h),append_hydration(f,p),mount_component(g,f,null),append_hydration(f,m),append_hydration(f,y),append_hydration(y,b),append_hydration(f,C),mount_component(x,f,null),append_hydration(f,P),append_hydration(f,S),append_hydration(S,O),append_hydration(f,E),mount_component(D,f,null),append_hydration(f,F),append_hydration(f,I),append_hydration(I,$),append_hydration(f,B),mount_component(V,f,null),append_hydration(f,U),append_hydration(f,H),append_hydration(f,N),append_hydration(f,j),append_hydration(t,W),append_hydration(t,z),append_hydration(z,K),mount_component(X,K,null),append_hydration(K,Z),mount_component(ee,K,null),append_hydration(z,ue),append_hydration(z,ne),mount_component(Q,ne,null),se=!0},p(J,[ce]){const Ce={};ce&268435456&&(Ce.$$scope={dirty:ce,ctx:J}),r.$set(Ce);const pe={};ce&268435456&&(pe.$$scope={dirty:ce,ctx:J}),o.$set(pe);const Te={};ce&268435456&&(Te.$$scope={dirty:ce,ctx:J}),s.$set(Te);const Ae={};ce&268435456&&(Ae.$$scope={dirty:ce,ctx:J}),u.$set(Ae);const Oe={};ce&268435456&&(Oe.$$scope={dirty:ce,ctx:J}),!v&&ce&8&&(v=!0,Oe.value=J[3].material,add_flush_callback(()=>v=!1)),g.$set(Oe);const we={};ce&268435456&&(we.$$scope={dirty:ce,ctx:J}),!w&&ce&8&&(w=!0,we.value=J[3].freight,add_flush_callback(()=>w=!1)),x.$set(we);const _e={};ce&268435456&&(_e.$$scope={dirty:ce,ctx:J}),!R&&ce&8&&(R=!0,_e.value=J[3].tax,add_flush_callback(()=>R=!1)),D.$set(_e);const Pe={};ce&268435456&&(Pe.$$scope={dirty:ce,ctx:J}),!G&&ce&8&&(G=!0,Pe.value=J[3].service,add_flush_callback(()=>G=!1)),V.$set(Pe);const De={};!q&&ce&4&&(q=!0,De.value=J[2],add_flush_callback(()=>q=!1)),X.$set(De);const Me={};ce&268435456&&(Me.$$scope={dirty:ce,ctx:J}),ee.$set(Me);const $e={};!ie&&ce&2&&(ie=!0,$e.value=J[1],add_flush_callback(()=>ie=!1)),Q.$set($e)},i(J){se||(transition_in(r.$$.fragment,J),transition_in(o.$$.fragment,J),transition_in(s.$$.fragment,J),transition_in(u.$$.fragment,J),transition_in(g.$$.fragment,J),transition_in(x.$$.fragment,J),transition_in(D.$$.fragment,J),transition_in(V.$$.fragment,J),transition_in(X.$$.fragment,J),transition_in(ee.$$.fragment,J),transition_in(Q.$$.fragment,J),se=!0)},o(J){transition_out(r.$$.fragment,J),transition_out(o.$$.fragment,J),transition_out(s.$$.fragment,J),transition_out(u.$$.fragment,J),transition_out(g.$$.fragment,J),transition_out(x.$$.fragment,J),transition_out(D.$$.fragment,J),transition_out(V.$$.fragment,J),transition_out(X.$$.fragment,J),transition_out(ee.$$.fragment,J),transition_out(Q.$$.fragment,J),se=!1},d(J){J&&detach(t),destroy_component(r),destroy_component(o),destroy_component(s),destroy_component(u),destroy_component(g),destroy_component(x),destroy_component(D),destroy_component(V),destroy_component(X),destroy_component(ee),destroy_component(Q)}}}const minWidth=150;function sayHi(i){console.log("hi",i.isTrusted),alert("modal popup- maybe use swal or us smui dialog?")}function instance$i(i,t,e){const r=Swal,o={autoGroupColumnDef:{cellRendererParams:{footerValueGetter:E=>E.node.level===-1?"Grand Total":`Sub Total (${E.value})`}},columnDefs:[{field:"id",editable:!1,checkboxSelection:!0},{field:"job_cost_class",headerName:"Cost Class"},{field:"category_id",headerName:"Category"},{field:"quantity_total",headerName:"Qty.",type:"numericColumn",editable:!0,cellEditor:"agTextCellEditor",valueFormatter:numberValueFormatter,valueParser:numberParser,aggFunc:"sum"},{field:"uom",width:minWidth,headerName:"UoM"},{field:"pricebook_part_number",headerName:"Part No.",cellStyle:{color:"RebeccaPurple"}},{field:"model_name",valueFormatter:E=>unescapeSymbols(E.value),headerName:"Model"},{field:"mfg_link"},{field:"manufacturer",headerName:"Mfg.",valueFormatter:E=>unescapeSymbols(E.value)},{field:"description",headerName:"Description",width:280,valueFormatter:E=>unescapeSymbols(E.value)},{field:"preferred_vendor_display",headerName:"Preferred Vendor"},{field:"unit_cost",headerName:"Unit Cost",type:"numericColumn",valueFormatter:numberValueFormatter,valueParser:numberParser,editable:!0,cellEditor:"agTextCellEditor",aggFunc:"sum"},{field:"price_modifier",headerName:"Price Modifier",editable:!0,cellEditor:"agTextCellEditor",onCellValueChanged:E=>{const D=/^(P|M|D)\d{2}$|^X$|^L$/i;E.newValue.match(D)||(alert(`Invalid price modifier format. Format should be one of: 
P##, M##, D##, 
X (without digits)
L (without digits)`),E.node.setDataValue("price_modifier",E.oldValue))},cellEditorParams:{validate:E=>{const D=/^(P|M|D)\d{2}$|^X$|^L$/i;return E.match(D)?{valid:!0}:{valid:!1,message:`Invalid price modifier format. Format should be one 
of: P##, M##, L, D##, 
X (without digits)
L (without digits)`}}}},{field:"unit_price",headerName:"Unit Price",type:"numericColumn",valueFormatter:numberValueFormatter,valueParser:numberParser,editable:!0,cellEditor:"agTextCellEditor",aggFunc:"sum"},{field:"list_price",headerName:"List Price",type:"numericColumn",valueFormatter:numberValueFormatter,valueParser:numberParser,editable:!0,cellEditor:"agTextCellEditor",aggFunc:"sum"},{field:"extended_cost",headerName:"Extended Cost",type:"numericColumn",valueFormatter:numberValueFormatter,valueParser:numberParser,aggFunc:"sum",enableRowGroup:!0,enableValue:!0},{field:"extended_price",headerName:"Extended Cost",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"extended_list_price",headerName:"Extended List",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"materials_sell",headerName:"Materials",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"freight_sell",headerName:"Freight",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"tax_amount",headerName:"Tax",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"service_sell",headerName:"Service",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"sundries_sell",headerName:"Sundries",type:"numericColumn",valueFormatter:numberValueFormatter},{field:"apply_cost_discount",hide:!0},{field:"created_id",hide:!0},{field:"extended_net_cost",type:"numericColumn",valueFormatter:numberValueFormatter,hide:!0},{field:"extended_net_price",type:"numericColumn",valueFormatter:numberValueFormatter,hide:!0},{field:"date_created",hide:!0},{field:"date_modified",hide:!0},{field:"div_1",headerName:"Location",hide:!0},{field:"div_2",headerName:"System",hide:!0},{field:"ishighlighted",hide:!0},{field:"isoptional",hide:!0},{field:"istaxable",hide:!0},{field:"labor_task_code",hide:!0},{field:"line_attributes",hide:!0},{field:"object_id",hide:!0},{field:"owner_id",hide:!0},{field:"owner_team_id",hide:!0},{field:"modified_id",hide:!0},{field:"part_number",hide:!0},{field:"preferred_vendor",hide:!0},{field:"price_discount_percentage",valueFormatter:percentageValueFormatter,hide:!0},{field:"name",hide:!0},{field:"net_unit_cost",type:"numericColumn",valueFormatter:numberValueFormatter,hide:!0},{field:"net_unit_price",type:"numericColumn",valueFormatter:numberValueFormatter,hide:!0},{field:"notes",hide:!0},{field:"qty_labor_install",hide:!0},{field:"qty_labor_programming",hide:!0},{field:"related_labor_pricebook",hide:!0},{field:"record_locator",hide:!0},{field:"search_string",hide:!0},{field:"related_quote",hide:!0},{field:"related_to",hide:!0},{field:"search_string",hide:!0}],getContextMenuItems:a,defaultColDef:{sortable:!0,filter:!0,flex:1,resizable:!0,enableValue:!0,enableRowGroup:!0,enablePivot:!0},groupIncludeFooter:!0,groupIncludeTotalFooter:!0,pagination:!1,paginationPageSize:20,rowData:[],rowSelection:"multiple",sideBar:{toolPanels:[{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}},{id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel",toolPanelParams:{suppressSyncLayoutWithGrid:!0}},{id:"customStats",labelDefault:"Recap",labelKey:"customStats",iconKey:"custom-stats",toolPanel:"agFiltersToolPanel"}],defaultToolPanel:""},getRowId:E=>E.data.id,onGridReady:()=>{let E=[];E.length===0&&setTimeout(()=>{fetch("quote.json").then(D=>D.json()).then(D=>{E=JSON.parse(jsonFlattenArrayObjectsAsString(D))}).then(()=>{var D;(D=o.api)==null||D.setRowData(E)})},1500)},onRowSelected:()=>{},onCellValueChanged(E){s(E),l()}};onMount(async()=>{const E=document.getElementById("ag-grid");if(!E)throw new Error("Grid element not found");new Grid(E,o)});function a(E){var D=Swal.mixin({toast:!0,icon:"success",title:"General Title",position:"center",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:N=>{N.addEventListener("mouseenter",Swal.stopTimer),N.addEventListener("mouseleave",Swal.resumeTimer)}});function R(){console.log("onAddRow"),Swal.fire({title:"Add Row",text:"Add a new row to the grid",icon:"info",showCancelButton:!0,confirmButtonText:"Add",cancelButtonText:"Cancel"}).then(N=>{N.isConfirmed&&F()})}function F(){return console.log("insertRows"),!0}function I(){return console.log("onRemoveSelected"),!0}function $(N){return console.log("modifyPricing",N),!0}function B(){var N;return console.log("getSelectedRows"),(N=o.api)==null?void 0:N.getSelectedRows()}function V(){return console.log("getSelectedNodeData"),!0}function G(){return console.log("updateRowCalcPaste"),!0}function U(N,j){return console.log("updatePricebook"),!0}return[{name:"Add Row",action(){R()},icon:'<i class="fas fa-plus"></i><img src="" />',disabled:!1,tooltip:"Add Line at end."},{name:"Insert Rows",action(){F()},disabled:!1,icon:'<i class="fas fa-long-arrow-alt-right"></i><img src="" />',tooltip:"Insert above cursor line at end."},{name:"Delete Rows",action(){I()},disabled:!1,tooltip:"Delete the rows selected",cssClasses:["contextmenu-delete-row"],icon:'<i class="fas fa-trash"></i><img src="" />'},"separator",{name:"Modify Price",icon:'<i class="fas fa-pen-alt"></i></i> <img src="" />',subMenu:[{name:"P3",action(){$("P03")}},{name:"P5",action(){$("P05")}},{name:"P10",action(){$("P10")}},{name:"P15",action(){$("P15")}},{name:"P20",action(){$("P20")}},{name:"P25",action(){$("P25")}},{name:"P30",action(){$("P30")}},{name:"P35",action(){$("P35")}},{name:"P40",action(){$("P40")}},{name:"P45",action(){$("P45")}},{name:"P50",action(){$("P50")}}]},{name:"Update Pricebook",icon:'<i class="fas fa-funnel-dollar"></i></i> <img src="" />',subMenu:[{name:"Update TO Pricebook",action(){B()&&V().forEach(j=>U())},icon:'<i class="fas fa-arrow-right"></i><img src="" />',cssClasses:["contextmenu-update-to-pricebook"],disabled:!1,tooltip:"Update info TO PriceBook with the selected row data"},{name:"Update FROM Pricebook",action(){B()&&V().forEach(j=>U()),Swal.fire({title:"Update FROM Pricebook",text:"Selected rows pricing has been updated from the pricebook",icon:"success",allowEnterKey:!1})},icon:'<i class="fas fa-arrow-left"></i><img src="" />',cssClasses:["contextmenu-update-from-pricebook"],disabled:!1,tooltip:"Update selected rows FROM PriceBook "}]},"separator",{name:"Toggle Optional",action(){var j;let N=(j=o.api)==null?void 0:j.getSelectedNodes();N==null||N.forEach((W,z)=>{W.data.isoptional==="N"?W.setDataValue("isoptional","Y"):W.setDataValue("isoptional","N"),G()})},icon:'<i class="fas fa-toggle-on"></i> <img src ="" />',disabled:!1,tooltip:"Modify"},{name:"Highlight Row",action(){var j;let N=(j=o.api)==null?void 0:j.getSelectedNodes();N==null||N.forEach((W,z)=>{W.data.ishighlighted==="N"?W.setDataValue("ishighlighted","Y"):W.setDataValue("ishighlighted","N"),G()})},icon:'<i class="fas fa-highlighter"></i><img src="" />',disabled:!1,tooltip:"Sets the line color to yellow"},"separator",{name:"Locations",icon:'<i class="fas fa-building"></i><img src="" />',disabled:!1,tooltip:"Add a Quote Location",subMenu:[{name:"Add Location",async action(){let N="new...";const j=await Swal.fire({title:"Add a Location",input:"text",inputLabel:"Location Name ",inputValue:N,showCancelButton:!0,inputValidator:W=>new Promise(z=>{W?z():z("Loaction cannot be empty")})});j.value&&(locationValues.push(j.value),sortArray(locationValues),D.fire({animation:!0,title:"Location Added Successfully"}))}},{name:"Rename Location",action(){D.fire({animation:!0,icon:"info",title:"Location Rename action"})}},{name:"Delete Location",action(){D.fire({animation:!0,icon:"warning",title:"Location Delete action"})}}]},{name:"Systems",icon:'<i class="fas fa-building"></i><img src="" />',disabled:!1,tooltip:"Add a Quote Systems",subMenu:[{name:"Add System",async action(){let N="new...";const j=await Swal.fire({title:"Add a System",input:"text",inputLabel:"System Name ",inputValue:N,showCancelButton:!0,inputValidator:W=>new Promise(z=>{W?z():z("System cannot be empty")})});j.value&&(systemValues.push(j.value),sortArray(systemValues),D.fire({animation:!0,title:"Location Added Successfully"}))}},{name:"Rename System",action(){D.fire({animation:!0,icon:"info",title:"System Rename action"})}},{name:"Delete System",action(){D.fire({animation:!0,icon:"warning",title:"System Delete action"})}}]},"separator","copy","copyWithHeaders","separator","export","separator","chartRange"]}function s(E){var I;function D($){const B=$.price_modifier.toUpperCase(),V={P:W=>$.unit_cost/((100-W)/100),M:W=>$.unit_cost*(1+W/100),L:()=>$.list_price,D:W=>$.list_price*(1-W/100),X:()=>$.unit_price},G=/^(P|M|L|D|X)(\d{2})$/,U=B.match(G);if(!U)return;const H=U[1],N=parseInt(U[2]),j=V[H];if(j)return j(N);console.log(`Invalid price modifiers: ${B}`)}let R=E.data;const F=D(R)||R.unit_price;R.price_modifier==="L"?R.unit_price=R.list_price:R.unit_price=F,R.extended_cost=parseFloat(R.quantity_total)*parseFloat(R.unit_cost),R.extended_price=parseFloat(R.quantity_total)*parseFloat(F),R.extended_list_price=parseFloat(R.quantity_total)*parseFloat(R.list_price),R.extended_net_cost=R.extended_cost,R.extended_net_price=R.extended_price,R.price_modifier=R.price_modifier.toUpperCase(),R.materials_sell=R.job_cost_class=="Equipment"?parseFloat(R.extended_price)*y.material/100:R.materials_sell,R.freight_sell=R.job_cost_class=="Equipment"?parseFloat(R.extended_price)*y.freight/100:R.freight_sell,R.tax_amount=R.istaxable?parseFloat(R.extended_price)*y.tax/100:R.tax_amount,R.service_sell=R.job_cost_class=="Equipment"?parseFloat(R.extended_price)*y.service/100:R.service_sell,(I=o.api)==null||I.applyTransaction(R)}function l(){var E;(E=o.api)==null||E.forEachNode(D=>{var F;const R=D.data;R.materials_sell=parseFloat(R.extended_price)*y.material/100,R.freight_sell=parseFloat(R.extended_price)*y.freight/100,R.tax_amount=parseFloat(R.extended_price)*y.tax/100,R.service_sell=parseFloat(R.extended_price)*y.service/100,(F=o.api)==null||F.applyTransaction(R)})}function u(){var F,I,$;const E=(F=o.columnApi)==null?void 0:F.getColumnState(),D=(I=o.columnApi)==null?void 0:I.getColumnGroupState(),R=($=o.api)==null?void 0:$.getFilterModel();localStorage.setItem("columnState",JSON.stringify(E)),localStorage.setItem("groupState",JSON.stringify(D)),localStorage.setItem("filterState",JSON.stringify(R))}function c(){var F,I,$;const E=JSON.parse(localStorage.getItem("columnState")),D=JSON.parse(localStorage.getItem("groupState")),R=JSON.parse(localStorage.getItem("filterState"));(F=o.columnApi)==null||F.applyColumnState({state:E,applyOrder:!0}),(I=o.columnApi)==null||I.setColumnGroupState(D),($=o.api)==null||$.setFilterModel(R)}function f(){var E;(E=o.columnApi)==null||E.resetColumnState(),console.log("column state reset")}let d="";const h=()=>{var E;(E=o.api)==null||E.setQuickFilter(d)};let p="";const g=()=>{console.log({pricebookSearchString:p})};let v=!1;function m(E){const D=document.getElementById(E);v=!v,v?D.style.display="flex":D.style.display="none"}let y={material:6,freight:6,tax:6,service:10};const b=()=>m("rates");function C(E){i.$$.not_equal(y.material,E)&&(y.material=E,e(3,y))}function x(E){i.$$.not_equal(y.freight,E)&&(y.freight=E,e(3,y))}function w(E){i.$$.not_equal(y.tax,E)&&(y.tax=E,e(3,y))}function P(E){i.$$.not_equal(y.service,E)&&(y.service=E,e(3,y))}function S(E){p=E,e(2,p)}function O(E){d=E,e(1,d)}return i.$$.update=()=>{i.$$.dirty&2&&h(),i.$$.dirty&4&&g()},[l,d,p,y,u,c,f,m,r,a,s,b,C,x,w,P,S,O]}class QuoteItemsGrid extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$i,create_fragment$i,safe_not_equal,{swal:8,getContextMenuItems:9,recalculateTotals:10,recalculateRates:0})}get swal(){return this.$$.ctx[8]}get getContextMenuItems(){return this.$$.ctx[9]}get recalculateTotals(){return this.$$.ctx[10]}get recalculateRates(){return this.$$.ctx[0]}}function create_fragment$h(i){let t,e,r,n,o,a;const s=i[9].default,l=create_slot(s,i,i[8],null);let u=[{class:e=classMap({[i[1]]:!0,"mdc-card":!0,"mdc-card--outlined":i[2]==="outlined","smui-card--padded":i[3]})},i[6]],c={};for(let f=0;f<u.length;f+=1)c=assign(c,u[f]);return{c(){t=element$1("div"),l&&l.c(),this.h()},l(f){t=claim_element(f,"DIV",{class:!0});var d=children(t);l&&l.l(d),d.forEach(detach),this.h()},h(){set_attributes(t,c)},m(f,d){insert_hydration(f,t,d),l&&l.m(t,null),i[10](t),n=!0,o||(a=[action_destroyer(r=useActions.call(null,t,i[0])),action_destroyer(i[5].call(null,t))],o=!0)},p(f,[d]){l&&l.p&&(!n||d&256)&&update_slot_base(l,s,f,f[8],n?get_slot_changes(s,f[8],d,null):get_all_dirty_from_scope(f[8]),null),set_attributes(t,c=get_spread_update(u,[(!n||d&14&&e!==(e=classMap({[f[1]]:!0,"mdc-card":!0,"mdc-card--outlined":f[2]==="outlined","smui-card--padded":f[3]})))&&{class:e},d&64&&f[6]])),r&&is_function(r.update)&&d&1&&r.update.call(null,f[0])},i(f){n||(transition_in(l,f),n=!0)},o(f){transition_out(l,f),n=!1},d(f){f&&detach(t),l&&l.d(f),i[10](null),o=!1,run_all(a)}}}function instance$h(i,t,e){const r=["use","class","variant","padded","getElement"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t;const s=forwardEventsBuilder$1(get_current_component());let{use:l=[]}=t,{class:u=""}=t,{variant:c="raised"}=t,{padded:f=!1}=t,d;function h(){return d}function p(g){binding_callbacks[g?"unshift":"push"](()=>{d=g,e(4,d)})}return i.$$set=g=>{t=assign(assign({},t),exclude_internal_props(g)),e(6,n=compute_rest_props(t,r)),"use"in g&&e(0,l=g.use),"class"in g&&e(1,u=g.class),"variant"in g&&e(2,c=g.variant),"padded"in g&&e(3,f=g.padded),"$$scope"in g&&e(8,a=g.$$scope)},[l,u,c,f,d,s,n,h,a,o,p]}class Card extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$h,create_fragment$h,safe_not_equal,{use:0,class:1,variant:2,padded:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const Content=classAdderBuilder({class:"smui-card__content",tag:"div"});classAdderBuilder({class:"mdc-card__media-content",tag:"div"});function create_fragment$g(i){let t,e,r,n,o,a;const s=i[8].default,l=create_slot(s,i,i[7],null);let u=[{class:e=classMap({[i[1]]:!0,"mdc-card__actions":!0,"mdc-card__actions--full-bleed":i[2]})},i[5]],c={};for(let f=0;f<u.length;f+=1)c=assign(c,u[f]);return{c(){t=element$1("div"),l&&l.c(),this.h()},l(f){t=claim_element(f,"DIV",{class:!0});var d=children(t);l&&l.l(d),d.forEach(detach),this.h()},h(){set_attributes(t,c)},m(f,d){insert_hydration(f,t,d),l&&l.m(t,null),i[9](t),n=!0,o||(a=[action_destroyer(r=useActions.call(null,t,i[0])),action_destroyer(i[4].call(null,t))],o=!0)},p(f,[d]){l&&l.p&&(!n||d&128)&&update_slot_base(l,s,f,f[7],n?get_slot_changes(s,f[7],d,null):get_all_dirty_from_scope(f[7]),null),set_attributes(t,c=get_spread_update(u,[(!n||d&6&&e!==(e=classMap({[f[1]]:!0,"mdc-card__actions":!0,"mdc-card__actions--full-bleed":f[2]})))&&{class:e},d&32&&f[5]])),r&&is_function(r.update)&&d&1&&r.update.call(null,f[0])},i(f){n||(transition_in(l,f),n=!0)},o(f){transition_out(l,f),n=!1},d(f){f&&detach(t),l&&l.d(f),i[9](null),o=!1,run_all(a)}}}function instance$g(i,t,e){const r=["use","class","fullBleed","getElement"];let n=compute_rest_props(t,r),{$$slots:o={},$$scope:a}=t;const s=forwardEventsBuilder$1(get_current_component());let{use:l=[]}=t,{class:u=""}=t,{fullBleed:c=!1}=t,f;setContext("SMUI:button:context","card:action"),setContext("SMUI:icon-button:context","card:action");function d(){return f}function h(p){binding_callbacks[p?"unshift":"push"](()=>{f=p,e(3,f)})}return i.$$set=p=>{t=assign(assign({},t),exclude_internal_props(p)),e(5,n=compute_rest_props(t,r)),"use"in p&&e(0,l=p.use),"class"in p&&e(1,u=p.class),"fullBleed"in p&&e(2,c=p.fullBleed),"$$scope"in p&&e(7,a=p.$$scope)},[l,u,c,f,s,n,d,a,o,h]}class Actions extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$g,create_fragment$g,safe_not_equal,{use:0,class:1,fullBleed:2,getElement:6})}get getElement(){return this.$$.ctx[6]}}classAdderBuilder({class:"mdc-card__action-buttons",tag:"div"});classAdderBuilder({class:"mdc-card__action-icons",tag:"div"});const Search_svelte_svelte_type_style_lang="";function create_else_block$1(i){let t,e;return t=new Card({props:{style:"width: 500px; margin: 2em auto; background-color: #eee; color: #000;",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&67&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_if_block$7(i){let t,e,r,n,o,a,s,l;function u(f){i[2](f)}let c={label:"PartNo"};return i[1].part_number!==void 0&&(c.value=i[1].part_number),n=new Textfield({props:c}),binding_callbacks.push(()=>bind(n,"value",u)),n.$on("keypress",i[3]),s=new Button$2({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:i}}}),s.$on("click",i[4]),{c(){t=element$1("p"),e=text("Search for products"),r=space(),create_component(n.$$.fragment),a=space(),create_component(s.$$.fragment),this.h()},l(f){t=claim_element(f,"P",{class:!0});var d=children(t);e=claim_text(d,"Search for products"),d.forEach(detach),r=claim_space(f),claim_component(n.$$.fragment,f),a=claim_space(f),claim_component(s.$$.fragment,f),this.h()},h(){attr(t,"class","mdc-typography--body1")},m(f,d){insert_hydration(f,t,d),append_hydration(t,e),insert_hydration(f,r,d),mount_component(n,f,d),insert_hydration(f,a,d),mount_component(s,f,d),l=!0},p(f,d){const h={};!o&&d&2&&(o=!0,h.value=f[1].part_number,add_flush_callback(()=>o=!1)),n.$set(h);const p={};d&64&&(p.$$scope={dirty:d,ctx:f}),s.$set(p)},i(f){l||(transition_in(n.$$.fragment,f),transition_in(s.$$.fragment,f),l=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(s.$$.fragment,f),l=!1},d(f){f&&detach(t),f&&detach(r),destroy_component(n,f),f&&detach(a),destroy_component(s,f)}}}function create_default_slot_7$1(i){let t,e=i[1].part_number+"",r,n,o,a,s,l,u,c,f,d=i[1].mfg+"",h,p,g,v,m,y,b,C,x=i[1].part_number+"",w,P,S,O,E,D,R,F,I=i[1].desc+"",$,B,V,G,U,H,N,j,W,z=i[1].unit_cost.toFixed(2)+"",K,X,q,Z,ee,ue,ne,Q,ie,se=i[1].unit_price.toFixed(2)+"",ae;return{c(){t=element$1("h2"),r=text(e),n=space(),o=element$1("table"),a=element$1("tr"),s=element$1("td"),l=element$1("b"),u=text("Mfg:"),c=space(),f=element$1("td"),h=text(d),p=space(),g=element$1("tr"),v=element$1("td"),m=element$1("b"),y=text("Part Number:"),b=space(),C=element$1("td"),w=text(x),P=space(),S=element$1("tr"),O=element$1("td"),E=element$1("b"),D=text("Description:"),R=space(),F=element$1("td"),$=text(I),B=space(),V=element$1("tr"),G=element$1("td"),U=element$1("b"),H=text("Unit Cost:"),N=space(),j=element$1("td"),W=text("$"),K=text(z),X=space(),q=element$1("tr"),Z=element$1("td"),ee=element$1("b"),ue=text("Unit Price:"),ne=space(),Q=element$1("td"),ie=text("$"),ae=text(se),this.h()},l(oe){t=claim_element(oe,"H2",{class:!0,style:!0});var fe=children(t);r=claim_text(fe,e),fe.forEach(detach),n=claim_space(oe),o=claim_element(oe,"TABLE",{});var le=children(o);a=claim_element(le,"TR",{});var Y=children(a);s=claim_element(Y,"TD",{});var re=children(s);l=claim_element(re,"B",{});var he=children(l);u=claim_text(he,"Mfg:"),he.forEach(detach),re.forEach(detach),c=claim_space(Y),f=claim_element(Y,"TD",{});var de=children(f);h=claim_text(de,d),de.forEach(detach),Y.forEach(detach),p=claim_space(le),g=claim_element(le,"TR",{});var ve=children(g);v=claim_element(ve,"TD",{});var me=children(v);m=claim_element(me,"B",{});var ye=children(m);y=claim_text(ye,"Part Number:"),ye.forEach(detach),me.forEach(detach),b=claim_space(ve),C=claim_element(ve,"TD",{});var xe=children(C);w=claim_text(xe,x),xe.forEach(detach),ve.forEach(detach),P=claim_space(le),S=claim_element(le,"TR",{});var J=children(S);O=claim_element(J,"TD",{});var ce=children(O);E=claim_element(ce,"B",{});var Ce=children(E);D=claim_text(Ce,"Description:"),Ce.forEach(detach),ce.forEach(detach),R=claim_space(J),F=claim_element(J,"TD",{});var pe=children(F);$=claim_text(pe,I),pe.forEach(detach),J.forEach(detach),B=claim_space(le),V=claim_element(le,"TR",{});var Te=children(V);G=claim_element(Te,"TD",{});var Ae=children(G);U=claim_element(Ae,"B",{});var Oe=children(U);H=claim_text(Oe,"Unit Cost:"),Oe.forEach(detach),Ae.forEach(detach),N=claim_space(Te),j=claim_element(Te,"TD",{});var we=children(j);W=claim_text(we,"$"),K=claim_text(we,z),we.forEach(detach),Te.forEach(detach),X=claim_space(le),q=claim_element(le,"TR",{});var _e=children(q);Z=claim_element(_e,"TD",{});var Pe=children(Z);ee=claim_element(Pe,"B",{});var De=children(ee);ue=claim_text(De,"Unit Price:"),De.forEach(detach),Pe.forEach(detach),ne=claim_space(_e),Q=claim_element(_e,"TD",{});var Me=children(Q);ie=claim_text(Me,"$"),ae=claim_text(Me,se),Me.forEach(detach),_e.forEach(detach),le.forEach(detach),this.h()},h(){attr(t,"class","mdc-typography--headline6"),set_style(t,"margin","0")},m(oe,fe){insert_hydration(oe,t,fe),append_hydration(t,r),insert_hydration(oe,n,fe),insert_hydration(oe,o,fe),append_hydration(o,a),append_hydration(a,s),append_hydration(s,l),append_hydration(l,u),append_hydration(a,c),append_hydration(a,f),append_hydration(f,h),append_hydration(o,p),append_hydration(o,g),append_hydration(g,v),append_hydration(v,m),append_hydration(m,y),append_hydration(g,b),append_hydration(g,C),append_hydration(C,w),append_hydration(o,P),append_hydration(o,S),append_hydration(S,O),append_hydration(O,E),append_hydration(E,D),append_hydration(S,R),append_hydration(S,F),append_hydration(F,$),append_hydration(o,B),append_hydration(o,V),append_hydration(V,G),append_hydration(G,U),append_hydration(U,H),append_hydration(V,N),append_hydration(V,j),append_hydration(j,W),append_hydration(j,K),append_hydration(o,X),append_hydration(o,q),append_hydration(q,Z),append_hydration(Z,ee),append_hydration(ee,ue),append_hydration(q,ne),append_hydration(q,Q),append_hydration(Q,ie),append_hydration(Q,ae)},p(oe,fe){fe&2&&e!==(e=oe[1].part_number+"")&&set_data(r,e),fe&2&&d!==(d=oe[1].mfg+"")&&set_data(h,d),fe&2&&x!==(x=oe[1].part_number+"")&&set_data(w,x),fe&2&&I!==(I=oe[1].desc+"")&&set_data($,I),fe&2&&z!==(z=oe[1].unit_cost.toFixed(2)+"")&&set_data(K,z),fe&2&&se!==(se=oe[1].unit_price.toFixed(2)+"")&&set_data(ae,se)},d(oe){oe&&detach(t),oe&&detach(n),oe&&detach(o)}}}function create_default_slot_6$1(i){let t;return{c(){t=text("Add Item")},l(e){t=claim_text(e,"Add Item")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_5$1(i){let t,e;return t=new CommonLabel({props:{$$slots:{default:[create_default_slot_6$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_4$1(i){let t;return{c(){t=text("Cancel")},l(e){t=claim_text(e,"Cancel")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_3$1(i){let t,e;return t=new CommonLabel({props:{$$slots:{default:[create_default_slot_4$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_2$1(i){let t,e,r,n;return t=new Button$2({props:{$$slots:{default:[create_default_slot_5$1]},$$scope:{ctx:i}}}),r=new Button$2({props:{style:"text-decoration: none;",$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:i}}}),r.$on("click",i[5]),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),e=claim_space(o),claim_component(r.$$.fragment,o)},m(o,a){mount_component(t,o,a),insert_hydration(o,e,a),mount_component(r,o,a),n=!0},p(o,a){const s={};a&64&&(s.$$scope={dirty:a,ctx:o}),t.$set(s);const l={};a&64&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){n||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),n=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),n=!1},d(o){destroy_component(t,o),o&&detach(e),destroy_component(r,o)}}}function create_default_slot_1$2(i){let t,e,r,n;return t=new Content({props:{class:"mdc-typography--body2",$$slots:{default:[create_default_slot_7$1]},$$scope:{ctx:i}}}),r=new Actions({props:{style:"display: flex; justify-content: space-even; width: 100%;",$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),e=claim_space(o),claim_component(r.$$.fragment,o)},m(o,a){mount_component(t,o,a),insert_hydration(o,e,a),mount_component(r,o,a),n=!0},p(o,a){const s={};a&66&&(s.$$scope={dirty:a,ctx:o}),t.$set(s);const l={};a&65&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){n||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),n=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),n=!1},d(o){destroy_component(t,o),o&&detach(e),destroy_component(r,o)}}}function create_default_slot$2(i){let t;return{c(){t=text("Submit")},l(e){t=claim_text(e,"Submit")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_fragment$f(i){let t,e,r,n,o,a,s,l,u,c;const f=[create_if_block$7,create_else_block$1],d=[];function h(p,g){return p[0]?1:0}return l=h(i),u=d[l]=f[l](i),{c(){t=element$1("link"),e=element$1("link"),r=element$1("link"),n=element$1("link"),o=space(),a=element$1("div"),s=element$1("main"),u.c(),this.h()},l(p){const g=head_selector("svelte-8khjkg",document.head);t=claim_element(g,"LINK",{rel:!0,href:!0}),e=claim_element(g,"LINK",{rel:!0,href:!0}),r=claim_element(g,"LINK",{rel:!0,href:!0}),n=claim_element(g,"LINK",{rel:!0,href:!0}),g.forEach(detach),o=claim_space(p),a=claim_element(p,"DIV",{id:!0});var v=children(a);s=claim_element(v,"MAIN",{style:!0});var m=children(s);u.l(m),m.forEach(detach),v.forEach(detach),this.h()},h(){attr(t,"rel","stylesheet"),attr(t,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),attr(e,"rel","stylesheet"),attr(e,"href","https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700"),attr(r,"rel","stylesheet"),attr(r,"href","https://unpkg.com/@material/typography@14.0.0/dist/mdc.typography.css"),attr(n,"rel","stylesheet"),attr(n,"href","https://unpkg.com/svelte-material-ui/bare.css"),set_style(s,"padding","1em"),attr(a,"id","search")},m(p,g){append_hydration(document.head,t),append_hydration(document.head,e),append_hydration(document.head,r),append_hydration(document.head,n),insert_hydration(p,o,g),insert_hydration(p,a,g),append_hydration(a,s),d[l].m(s,null),c=!0},p(p,[g]){let v=l;l=h(p),l===v?d[l].p(p,g):(group_outros(),transition_out(d[v],1,1,()=>{d[v]=null}),check_outros(),u=d[l],u?u.p(p,g):(u=d[l]=f[l](p),u.c()),transition_in(u,1),u.m(s,null))},i(p){c||(transition_in(u),c=!0)},o(p){transition_out(u),c=!1},d(p){detach(t),detach(e),detach(r),detach(n),p&&detach(o),p&&detach(a),d[l].d()}}}function instance$f(i,t,e){let r=!1,n={mfg:"Crestron",part_number:"DMPS4-350-AEC-W",desc:"A wonder product that solves all needs from all people all the time",unit_cost:Math.floor(Math.random()*100)+1,unit_price:200};function o(u){i.$$.not_equal(n.part_number,u)&&(n.part_number=u,e(1,n))}return[r,n,o,u=>e(0,r=u.key==="Enter"),()=>e(0,r=!0),()=>e(0,r=!1)]}class Search extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$f,create_fragment$f,safe_not_equal,{})}}function createForms(){const{subscribe:i,set:t,update:e}=writable([]);return{subscribe:i,save:r=>e(n=>(n.find(a=>a.form_name===r.form_name)?n=n.map(a=>a.form_name===r.form_name?r:a):n=[...n,r],n)),reset:()=>t([]),resetValues:r=>e(n=>(n.map(o=>(o.form_name===r&&o.fields.map(a=>{a.value=null,o.values[a.name]=null}),o)),n)),updateFieldValue:(r,n,o)=>e(a=>a.map(l=>(l.form_name===r&&l.fields.map(u=>(u.name===n&&(u.value=o,l.values[n]=o,l.values.touched=n),u)),l)))}}const storeForms=createForms();function min(i,t){const e=parseFloat(t[0]);return i=i||"",(isNaN(i)?i.length:parseFloat(i))>=e}function max(i,t){const e=parseFloat(t[0]);i=i||"";const r=isNaN(i)?i.length:parseFloat(i);return isNaN(r)?!0:r<=e}function between(i,t){return min(i,[t[0]])&&max(i,[t[1]])}function email(i,t){return i&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)}function required(i,t){return i==null||i==="undefined"||i==="null"||i===null||Number.isNaN(i)?!1:typeof i=="string"?i.replace(/\s/g,"").length>0:typeof i=="object"?i.length>0:!0}function url(i,t){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(i)}function equal(i,t){return i===t[0]}function bytesToSize(i){const t=["Bytes","KB","MB","GB","TB"];if(i===0)return"n/a";const e=Math.floor(Math.log(i)/Math.log(1024)),r=parseInt(e.toString(),10);return r===0?`${i} ${t[r]})`:`${(i/1024**r).toFixed(1)} ${t[r]}`}function getFileExtension(i){const t=i.name.split(".");return t[t.length-1].toLowerCase()}function extensions(i,t){return!!t.includes(getFileExtension(i))}function maxSize(i,t){const e=parseFloat(t)*1024*1024;return!(i.size>e)}const CoreRules=Object.freeze(Object.defineProperty({__proto__:null,between,bytesToSize,email,equal,extensions,getFileExtension,max,maxSize,min,required,url},Symbol.toStringTag,{value:"Module"})),_coreRules=CoreRules;async function validate(i){let{value:t,rules:e}=i,r=!0,n,o=[],a;return e?(await Promise.all(e.map(async s=>{if(s==="file")t&&Object.keys(t).map(l=>{i.file&&Object.entries(i.file).map(([u,c])=>{r=_coreRules[u].call(null,t[l],c),r||(o=[...o,u])})});else{if(typeof s=="function")r=await s.call,n=s.name;else if(typeof s=="object")r=await s.fnc(),n=s.name;else{const l=s.split(/:/g);n=l.shift(),r=_coreRules[n].call(null,t,l)}r||(o=[...o,n])}})),a={errors:o,dirty:o.length>0}):a={errors:o,dirty:!1},i.validation=a,i}async function preprocessField(i,t,e){const r=i.preprocess;return i=await(r==null?void 0:r.call(null,i,t,e)),i}async function getValues(i){const e=(await get_store_value(storeForms)).find(r=>r.form_name===i);return e?e==null?void 0:e.values:{}}async function preprocess_and_validate_field(i,t,e){return t.preprocess&&(t=await preprocessField(t,i.fields,e),e[`${t.name}`]=t.value??null),t.rules&&(t=await validate(t)),t}function isRequired(i){return!!(i.rules&&i.rules.length>0)}function isFieldDuplicated(i){let t={};return i.some(function(e){return t.hasOwnProperty(e.name)||t.hasOwnProperty(e.attributes.id)?!0:(t[e.name]=!1,t[e.attributes.id]=!1)})}function clickOutside(i){const t=e=>{i&&!i.contains(e.target)&&!e.defaultPrevented&&i.dispatchEvent(new CustomEvent("click_outside",i))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function create_fragment$e(i){let t;const e=i[1].default,r=create_slot(e,i,i[0],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),t=!0},p(n,[o]){r&&r.p&&(!t||o&1)&&update_slot_base(r,e,n,n[0],t?get_slot_changes(e,n[0],o,null):get_all_dirty_from_scope(n[0]),null)},i(n){t||(transition_in(r,n),t=!0)},o(n){transition_out(r,n),t=!1},d(n){r&&r.d(n)}}}function instance$e(i,t,e){let{$$slots:r={},$$scope:n}=t;return i.$$set=o=>{"$$scope"in o&&e(0,n=o.$$scope)},[n,r]}let Error$1=class extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$e,create_fragment$e,safe_not_equal,{})}};function create_dynamic_element(i){var l;let t,e,r;const n=i[2].default,o=create_slot(n,i,i[1],null);let a=[{class:e=(l=i[0].classes)==null?void 0:l.join(" ")}],s={};for(let u=0;u<a.length;u+=1)s=assign(s,a[u]);return{c(){t=element$1(i[0].tag??"div"),o&&o.c(),this.h()},l(u){t=claim_element(u,((i[0].tag??"div")||"null").toUpperCase(),{class:!0});var c=children(t);o&&o.l(c),c.forEach(detach),this.h()},h(){set_dynamic_element_data(i[0].tag??"div")(t,s)},m(u,c){insert_hydration(u,t,c),o&&o.m(t,null),r=!0},p(u,c){var f;o&&o.p&&(!r||c&2)&&update_slot_base(o,n,u,u[1],r?get_slot_changes(n,u[1],c,null):get_all_dirty_from_scope(u[1]),null),set_dynamic_element_data(u[0].tag??"div")(t,s=get_spread_update(a,[(!r||c&1&&e!==(e=(f=u[0].classes)==null?void 0:f.join(" ")))&&{class:e}]))},i(u){r||(transition_in(o,u),r=!0)},o(u){transition_out(o,u),r=!1},d(u){u&&detach(t),o&&o.d(u)}}}function create_fragment$d(i){let t=i[0].tag??"div",e,r,n=(i[0].tag??"div")&&create_dynamic_element(i);return{c(){n&&n.c(),e=empty()},l(o){n&&n.l(o),e=empty()},m(o,a){n&&n.m(o,a),insert_hydration(o,e,a),r=!0},p(o,[a]){o[0].tag??"div"?t?safe_not_equal(t,o[0].tag??"div")?(n.d(1),n=create_dynamic_element(o),t=o[0].tag??"div",n.c(),n.m(e.parentNode,e)):n.p(o,a):(n=create_dynamic_element(o),t=o[0].tag??"div",n.c(),n.m(e.parentNode,e)):t&&(n.d(1),n=null,t=o[0].tag??"div")},i(o){r||(transition_in(n),r=!0)},o(o){transition_out(n),r=!1},d(o){o&&detach(e),n&&n.d(o)}}}function instance$d(i,t,e){let{$$slots:r={},$$scope:n}=t,{prefix:o}=t;return i.$$set=a=>{"prefix"in a&&e(0,o=a.prefix),"$$scope"in a&&e(1,n=a.$$scope)},[o,n,r]}class Tag extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$d,create_fragment$d,safe_not_equal,{prefix:0})}}function create_if_block$6(i){let t,e=i[1](i[0])+"",r;return{c(){t=element$1("div"),r=text(e),this.h()},l(n){t=claim_element(n,"DIV",{class:!0});var o=children(t);r=claim_text(o,e),o.forEach(detach),this.h()},h(){attr(t,"class","invalid-feedback error")},m(n,o){insert_hydration(n,t,o),append_hydration(t,r)},p(n,o){o&1&&e!==(e=n[1](n[0])+"")&&set_data(r,e)},d(n){n&&detach(t)}}}function create_fragment$c(i){let t,e=i[0]&&create_if_block$6(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,[n]){r[0]?e?e.p(r,n):(e=create_if_block$6(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:noop,o:noop,d(r){e&&e.d(r),r&&detach(t)}}}function instance$c(i,t,e){let{error:r}=t,{messages:n={}}=t;const o=[{rule:"required",message:"This field is required"},{rule:"min",message:"This field must be more characters long"},{rule:"max",message:"This field must be less characters long"},{rule:"between",message:"This field must be between values defined"},{rule:"equal",message:"This field must be equal to value defined"},{rule:"email",message:"This email format is not valid"},{rule:"extensions",message:"Must to allowed file types"},{rule:"maxSize",message:"This file has size more than max size"},{rule:"custom_rule",message:"Error"}],a=l=>{let u="";return n[l]?u+=n[l]??s(l):u+=s(l),u},s=l=>{const u=o.find(c=>c.rule===l);return u?u.message:o.find(c=>c.rule==="custom_rule").message};return i.$$set=l=>{"error"in l&&e(0,r=l.error),"messages"in l&&e(2,n=l.messages)},[r,a,n]}class Message extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$c,create_fragment$c,safe_not_equal,{error:0,messages:2})}}function get_each_context$7(i,t,e){const r=i.slice();return r[1]=t[e],r}function create_if_block$5(i){let t,e,r=i[0].validation.errors,n=[];for(let a=0;a<r.length;a+=1)n[a]=create_each_block$7(get_each_context$7(i,r,a));const o=a=>transition_out(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=empty()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);t=empty()},m(a,s){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);insert_hydration(a,t,s),e=!0},p(a,s){if(s&1){r=a[0].validation.errors;let l;for(l=0;l<r.length;l+=1){const u=get_each_context$7(a,r,l);n[l]?(n[l].p(u,s),transition_in(n[l],1)):(n[l]=create_each_block$7(u),n[l].c(),transition_in(n[l],1),n[l].m(t.parentNode,t))}for(group_outros(),l=r.length;l<n.length;l+=1)o(l);check_outros()}},i(a){if(!e){for(let s=0;s<r.length;s+=1)transition_in(n[s]);e=!0}},o(a){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)transition_out(n[s]);e=!1},d(a){destroy_each(n,a),a&&detach(t)}}}function create_each_block$7(i){let t,e;return t=new Message({props:{error:i[1],messages:i[0].messages?i[0].messages:[]}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&1&&(o.error=r[1]),n&1&&(o.messages=r[0].messages?r[0].messages:[]),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_fragment$b(i){let t,e,r=i[0].validation&&i[0].validation.errors.length&&create_if_block$5(i);return{c(){r&&r.c(),t=empty()},l(n){r&&r.l(n),t=empty()},m(n,o){r&&r.m(n,o),insert_hydration(n,t,o),e=!0},p(n,[o]){n[0].validation&&n[0].validation.errors.length?r?(r.p(n,o),o&1&&transition_in(r,1)):(r=create_if_block$5(n),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(n){e||(transition_in(r),e=!0)},o(n){transition_out(r),e=!1},d(n){r&&r.d(n),n&&detach(t)}}}function instance$b(i,t,e){let{field:r}=t;return i.$$set=n=>{"field"in n&&e(0,r=n.field)},[r]}class Dirty extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$b,create_fragment$b,safe_not_equal,{field:0})}}function create_fragment$a(i){let t,e,r,n,o,a,s,l,u,c,f,d,h,p,g;return{c(){t=element$1("input"),this.h()},l(v){t=claim_element(v,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0,min:!0,max:!0,step:!0,autocomplete:!0}),this.h()},h(){var v;t.value=e=i[0].value??null,attr(t,"type",r=i[0].attributes.type),attr(t,"id",n=i[0].attributes.id),attr(t,"class",o=(v=i[0].attributes.classes)==null?void 0:v.join(" ")),attr(t,"placeholder",a=i[0].attributes.placeholder),t.required=s=isRequired(i[0]),t.disabled=l=i[0].attributes.disabled,t.readOnly=u=i[0].attributes.readonly,attr(t,"min",c=i[0].attributes.min),attr(t,"max",f=i[0].attributes.max),attr(t,"step",d=i[0].attributes.step),attr(t,"autocomplete",h=i[0].attributes.autocomplete)},m(v,m){insert_hydration(v,t,m),p||(g=listen(t,"input",i[1]),p=!0)},p(v,[m]){var y;m&1&&e!==(e=v[0].value??null)&&t.value!==e&&(t.value=e),m&1&&r!==(r=v[0].attributes.type)&&attr(t,"type",r),m&1&&n!==(n=v[0].attributes.id)&&attr(t,"id",n),m&1&&o!==(o=(y=v[0].attributes.classes)==null?void 0:y.join(" "))&&attr(t,"class",o),m&1&&a!==(a=v[0].attributes.placeholder)&&attr(t,"placeholder",a),m&1&&s!==(s=isRequired(v[0]))&&(t.required=s),m&1&&l!==(l=v[0].attributes.disabled)&&(t.disabled=l),m&1&&u!==(u=v[0].attributes.readonly)&&(t.readOnly=u),m&1&&c!==(c=v[0].attributes.min)&&attr(t,"min",c),m&1&&f!==(f=v[0].attributes.max)&&attr(t,"max",f),m&1&&d!==(d=v[0].attributes.step)&&attr(t,"step",d),m&1&&h!==(h=v[0].attributes.autocomplete)&&attr(t,"autocomplete",h)},i:noop,o:noop,d(v){v&&detach(t),p=!1,g()}}}function instance$a(i,t,e){let{field:r}=t;const n=createEventDispatcher(),o=async a=>{const s=r.attributes.type==="number"||r.attributes.type==="range"?parseInt(a.currentTarget.value):a.currentTarget.value;n("changeValue",{name:r.name,value:s})};return i.$$set=a=>{"field"in a&&e(0,r=a.field)},[r,o]}class Input extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$a,create_fragment$a,safe_not_equal,{field:0})}}function get_each_context$6(i,t,e){const r=i.slice();return r[5]=t[e],r}function create_if_block$4(i){let t,e=i[0].extra.options&&create_if_block_1$3(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,n){r[0].extra.options?e?e.p(r,n):(e=create_if_block_1$3(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(r){e&&e.d(r),r&&detach(t)}}}function create_if_block_1$3(i){let t,e=i[0].extra.options,r=[];for(let n=0;n<e.length;n+=1)r[n]=create_each_block$6(get_each_context$6(i,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=empty()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);t=empty()},m(n,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,o);insert_hydration(n,t,o)},p(n,o){if(o&5){e=n[0].extra.options;let a;for(a=0;a<e.length;a+=1){const s=get_each_context$6(n,e,a);r[a]?r[a].p(s,o):(r[a]=create_each_block$6(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=e.length}},d(n){destroy_each(r,n),n&&detach(t)}}}function create_each_block$6(i){let t,e=i[5].title+"",r,n,o,a;return{c(){t=element$1("option"),r=text(e),n=space(),this.h()},l(s){t=claim_element(s,"OPTION",{});var l=children(t);r=claim_text(l,e),n=claim_space(l),l.forEach(detach),this.h()},h(){t.__value=o=i[5].value,t.value=t.__value,t.selected=a=i[2](i[5].value,i[0].value)},m(s,l){insert_hydration(s,t,l),append_hydration(t,r),append_hydration(t,n)},p(s,l){l&1&&e!==(e=s[5].title+"")&&set_data(r,e),l&1&&o!==(o=s[5].value)&&(t.__value=o,t.value=t.__value),l&1&&a!==(a=s[2](s[5].value,s[0].value))&&(t.selected=a)},d(s){s&&detach(t)}}}function create_fragment$9(i){let t,e,r,n,o,a,s,l,u,c=i[0].extra&&create_if_block$4(i);return{c(){t=element$1("select"),c&&c.c(),this.h()},l(f){t=claim_element(f,"SELECT",{name:!0,id:!0,class:!0});var d=children(t);c&&c.l(d),d.forEach(detach),this.h()},h(){var f;attr(t,"name",e=i[0].name),attr(t,"id",r=i[0].attributes.id),attr(t,"class",n=(f=i[0].attributes.classes)==null?void 0:f.join(" ")),t.required=o=isRequired(i[0]),t.disabled=a=i[0].attributes.disabled,t.multiple=s=i[0].extra&&i[0].extra.multiple?i[0].extra.multiple:!1},m(f,d){insert_hydration(f,t,d),c&&c.m(t,null),l||(u=listen(t,"change",i[1]),l=!0)},p(f,[d]){var h;f[0].extra?c?c.p(f,d):(c=create_if_block$4(f),c.c(),c.m(t,null)):c&&(c.d(1),c=null),d&1&&e!==(e=f[0].name)&&attr(t,"name",e),d&1&&r!==(r=f[0].attributes.id)&&attr(t,"id",r),d&1&&n!==(n=(h=f[0].attributes.classes)==null?void 0:h.join(" "))&&attr(t,"class",n),d&1&&o!==(o=isRequired(f[0]))&&(t.required=o),d&1&&a!==(a=f[0].attributes.disabled)&&(t.disabled=a),d&1&&s!==(s=f[0].extra&&f[0].extra.multiple?f[0].extra.multiple:!1)&&(t.multiple=s)},i:noop,o:noop,d(f){f&&detach(t),c&&c.d(),l=!1,u()}}}function instance$9(i,t,e){let{field:r}=t;const n=createEventDispatcher(),o=r.extra.multiple??!1,a=async l=>{let u;if(o){let c=[];const f=l.currentTarget.selectedOptions;for(let d=0;d<f.length;d++){const h=f[d].value;c=[...c,h]}u=c}else u=l.currentTarget.value;n("changeValue",{name:r.name,value:u})},s=(l,u)=>o?u&&u.length?u.indexOf(l)!=-1:r.value&&r.value.length?r.value.indexOf(l)!=-1:!1:l===u;return i.$$set=l=>{"field"in l&&e(0,r=l.field)},[r,a,s]}class Select extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$9,create_fragment$9,safe_not_equal,{field:0})}}function get_each_context$5(i,t,e){const r=i.slice();return r[10]=t[e],r[12]=e,r}function get_each_context_1$1(i,t,e){const r=i.slice();return r[13]=t[e][0],r[14]=t[e][1],r}function create_if_block_2$1(i){let t,e,r=Object.entries(i[0].file),n=[];for(let o=0;o<r.length;o+=1)n[o]=create_each_block_1$1(get_each_context_1$1(i,r,o));return{c(){t=element$1("div"),e=element$1("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){t=claim_element(o,"DIV",{class:!0});var a=children(t);e=claim_element(a,"UL",{});var s=children(e);for(let l=0;l<n.length;l+=1)n[l].l(s);s.forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"class","file-rules")},m(o,a){insert_hydration(o,t,a),append_hydration(t,e);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(o,a){if(a&1){r=Object.entries(o[0].file);let s;for(s=0;s<r.length;s+=1){const l=get_each_context_1$1(o,r,s);n[s]?n[s].p(l,a):(n[s]=create_each_block_1$1(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(o){o&&detach(t),destroy_each(n,o)}}}function create_each_block_1$1(i){let t,e,r=i[13]+"",n,o,a=i[14]+"",s;return{c(){t=element$1("li"),e=element$1("strong"),n=text(r),o=text(": "),s=text(a)},l(l){t=claim_element(l,"LI",{});var u=children(t);e=claim_element(u,"STRONG",{});var c=children(e);n=claim_text(c,r),c.forEach(detach),o=claim_text(u,": "),s=claim_text(u,a),u.forEach(detach)},m(l,u){insert_hydration(l,t,u),append_hydration(t,e),append_hydration(e,n),append_hydration(t,o),append_hydration(t,s)},p(l,u){u&1&&r!==(r=l[13]+"")&&set_data(n,r),u&1&&a!==(a=l[14]+"")&&set_data(s,a)},d(l){l&&detach(t)}}}function create_if_block$3(i){let t,e=i[1]&&create_if_block_1$2(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,n){r[1]?e?e.p(r,n):(e=create_if_block_1$2(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(r){e&&e.d(r),r&&detach(t)}}}function create_if_block_1$2(i){let t,e=i[1],r=[];for(let n=0;n<e.length;n+=1)r[n]=create_each_block$5(get_each_context$5(i,e,n));return{c(){t=element$1("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=claim_element(n,"DIV",{class:!0});var o=children(t);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(detach),this.h()},h(){attr(t,"class","list-files")},m(n,o){insert_hydration(n,t,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null)},p(n,o){if(o&34){e=n[1];let a;for(a=0;a<e.length;a+=1){const s=get_each_context$5(n,e,a);r[a]?r[a].p(s,o):(r[a]=create_each_block$5(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=e.length}},d(n){n&&detach(t),destroy_each(r,n)}}}function create_each_block$5(i){let t,e,r,n,o,a,s,l,u,c,f=i[10].name+"",d,h,p,g,v=i[10].size+"",m,y,b,C,x=i[10].type+"",w,P,S,O,E,D,R,F;function I(){return i[8](i[10])}return{c(){t=element$1("div"),e=element$1("div"),r=element$1("img"),a=space(),s=element$1("div"),l=element$1("ul"),u=element$1("li"),c=text("Name: "),d=text(f),h=space(),p=element$1("li"),g=text("Size: "),m=text(v),y=space(),b=element$1("li"),C=text("Type: "),w=text(x),P=space(),S=element$1("li"),O=element$1("button"),E=text("Remove"),D=space(),this.h()},l($){t=claim_element($,"DIV",{class:!0});var B=children(t);e=claim_element(B,"DIV",{class:!0});var V=children(e);r=claim_element(V,"IMG",{src:!0,alt:!0}),V.forEach(detach),a=claim_space(B),s=claim_element(B,"DIV",{class:!0});var G=children(s);l=claim_element(G,"UL",{});var U=children(l);u=claim_element(U,"LI",{});var H=children(u);c=claim_text(H,"Name: "),d=claim_text(H,f),H.forEach(detach),h=claim_space(U),p=claim_element(U,"LI",{});var N=children(p);g=claim_text(N,"Size: "),m=claim_text(N,v),N.forEach(detach),y=claim_space(U),b=claim_element(U,"LI",{});var j=children(b);C=claim_text(j,"Type: "),w=claim_text(j,x),j.forEach(detach),P=claim_space(U),S=claim_element(U,"LI",{});var W=children(S);O=claim_element(W,"BUTTON",{type:!0,class:!0});var z=children(O);E=claim_text(z,"Remove"),z.forEach(detach),W.forEach(detach),U.forEach(detach),G.forEach(detach),D=claim_space(B),B.forEach(detach),this.h()},h(){src_url_equal(r.src,n=window.URL.createObjectURL(i[10]))||attr(r,"src",n),attr(r,"alt",o=i[10].name),attr(e,"class","img"),attr(O,"type","button"),attr(O,"class","btn"),attr(s,"class","infos"),attr(t,"class","file")},m($,B){insert_hydration($,t,B),append_hydration(t,e),append_hydration(e,r),append_hydration(t,a),append_hydration(t,s),append_hydration(s,l),append_hydration(l,u),append_hydration(u,c),append_hydration(u,d),append_hydration(l,h),append_hydration(l,p),append_hydration(p,g),append_hydration(p,m),append_hydration(l,y),append_hydration(l,b),append_hydration(b,C),append_hydration(b,w),append_hydration(l,P),append_hydration(l,S),append_hydration(S,O),append_hydration(O,E),append_hydration(t,D),R||(F=listen(O,"click",prevent_default(I)),R=!0)},p($,B){i=$,B&2&&!src_url_equal(r.src,n=window.URL.createObjectURL(i[10]))&&attr(r,"src",n),B&2&&o!==(o=i[10].name)&&attr(r,"alt",o),B&2&&f!==(f=i[10].name+"")&&set_data(d,f),B&2&&v!==(v=i[10].size+"")&&set_data(m,v),B&2&&x!==(x=i[10].type+"")&&set_data(w,x)},d($){$&&detach(t),R=!1,F()}}}function create_fragment$8(i){let t,e,r,n,o,a,s,l,u,c,f=i[0].file&&create_if_block_2$1(i),d=i[3]&&create_if_block$3(i);return{c(){t=element$1("input"),a=space(),f&&f.c(),s=space(),d&&d.c(),l=empty(),this.h()},l(h){t=claim_element(h,"INPUT",{type:!0,name:!0,id:!0,class:!0}),a=claim_space(h),f&&f.l(h),s=claim_space(h),d&&d.l(h),l=empty(),this.h()},h(){var h;attr(t,"type",e=i[0].type),attr(t,"name",r=i[0].name),attr(t,"id",n=i[0].attributes.id),attr(t,"class",o=(h=i[0].attributes.classes)==null?void 0:h.join(" ")),t.multiple=i[2]},m(h,p){insert_hydration(h,t,p),i[7](t),insert_hydration(h,a,p),f&&f.m(h,p),insert_hydration(h,s,p),d&&d.m(h,p),insert_hydration(h,l,p),u||(c=listen(t,"input",i[6]),u=!0)},p(h,[p]){var g;p&1&&e!==(e=h[0].type)&&attr(t,"type",e),p&1&&r!==(r=h[0].name)&&attr(t,"name",r),p&1&&n!==(n=h[0].attributes.id)&&attr(t,"id",n),p&1&&o!==(o=(g=h[0].attributes.classes)==null?void 0:g.join(" "))&&attr(t,"class",o),p&4&&(t.multiple=h[2]),h[0].file?f?f.p(h,p):(f=create_if_block_2$1(h),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),h[3]?d?d.p(h,p):(d=create_if_block$3(h),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},i:noop,o:noop,d(h){h&&detach(t),i[7](null),h&&detach(a),f&&f.d(h),h&&detach(s),d&&d.d(h),h&&detach(l),u=!1,c()}}}function instance$8(i,t,e){let{field:r}=t,n=[],o=!1,a=!1,s;const l=createEventDispatcher();onMount(()=>{r.extra&&(e(2,o=r.extra.multiple?r.extra.multiple:null),e(3,a=r.extra.showPreview?r.extra.showPreview:null))});function u(h){let p;e(1,n=n.filter(g=>g.name!=h.name)),n.length===0?(e(4,s.value=null,s),p=null):p=n,l("changeValue",{name:r.name,value:p})}const c=async h=>{e(1,n=Array.from(h.currentTarget.files)),l("changeValue",{name:r.name,value:n})};function f(h){binding_callbacks[h?"unshift":"push"](()=>{s=h,e(4,s)})}const d=h=>{u(h)};return i.$$set=h=>{"field"in h&&e(0,r=h.field)},[r,n,o,a,s,u,c,f,d]}class File extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$8,create_fragment$8,safe_not_equal,{field:0})}}function create_fragment$7(i){let t,e,r,n,o,a,s,l,u,c,f,d;return{c(){t=element$1("textarea"),this.h()},l(h){t=claim_element(h,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0,cols:!0}),children(t).forEach(detach),this.h()},h(){var h;t.value=e=i[0].value??null,attr(t,"id",r=i[0].attributes.id),attr(t,"class",n=(h=i[0].attributes.classes)==null?void 0:h.join(" ")),attr(t,"placeholder",o=i[0].attributes.placeholder),t.required=a=isRequired(i[0]),t.disabled=s=i[0].attributes.disabled,t.readOnly=l=i[0].attributes.readonly,attr(t,"rows",u=i[0].attributes.rows),attr(t,"cols",c=i[0].attributes.cols)},m(h,p){insert_hydration(h,t,p),f||(d=listen(t,"input",i[1]),f=!0)},p(h,[p]){var g;p&1&&e!==(e=h[0].value??null)&&(t.value=e),p&1&&r!==(r=h[0].attributes.id)&&attr(t,"id",r),p&1&&n!==(n=(g=h[0].attributes.classes)==null?void 0:g.join(" "))&&attr(t,"class",n),p&1&&o!==(o=h[0].attributes.placeholder)&&attr(t,"placeholder",o),p&1&&a!==(a=isRequired(h[0]))&&(t.required=a),p&1&&s!==(s=h[0].attributes.disabled)&&(t.disabled=s),p&1&&l!==(l=h[0].attributes.readonly)&&(t.readOnly=l),p&1&&u!==(u=h[0].attributes.rows)&&attr(t,"rows",u),p&1&&c!==(c=h[0].attributes.cols)&&attr(t,"cols",c)},i:noop,o:noop,d(h){h&&detach(t),f=!1,d()}}}function instance$7(i,t,e){let{field:r}=t;const n=createEventDispatcher(),o=async a=>{const s=a.currentTarget.value;n("changeValue",{name:r.name,value:s})};return i.$$set=a=>{"field"in a&&e(0,r=a.field)},[r,o]}class Textarea extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$7,create_fragment$7,safe_not_equal,{field:0})}}function get_each_context$4(i,t,e){const r=i.slice();return r[4]=t[e],r}function create_each_block$4(i){let t,e,r,n,o,a,s,l,u,c,f=i[4].title+"",d,h,p;return{c(){t=element$1("input"),u=space(),c=element$1("span"),d=text(f),this.h()},l(g){t=claim_element(g,"INPUT",{type:!0,class:!0,name:!0}),u=claim_space(g),c=claim_element(g,"SPAN",{});var v=children(c);d=claim_text(v,f),v.forEach(detach),this.h()},h(){var g;attr(t,"type",e=i[0].type),attr(t,"class",r=(g=i[0].attributes.classes)==null?void 0:g.join(" ")),t.value=n=i[4].value,attr(t,"name",o=i[4].name),t.checked=a=i[4].checked??!1,t.required=s=isRequired(i[0]),t.disabled=l=i[0].attributes.disabled},m(g,v){insert_hydration(g,t,v),insert_hydration(g,u,v),insert_hydration(g,c,v),append_hydration(c,d),h||(p=listen(t,"input",i[1]),h=!0)},p(g,v){var m;v&1&&e!==(e=g[0].type)&&attr(t,"type",e),v&1&&r!==(r=(m=g[0].attributes.classes)==null?void 0:m.join(" "))&&attr(t,"class",r),v&1&&n!==(n=g[4].value)&&t.value!==n&&(t.value=n),v&1&&o!==(o=g[4].name)&&attr(t,"name",o),v&1&&a!==(a=g[4].checked??!1)&&(t.checked=a),v&1&&s!==(s=isRequired(g[0]))&&(t.required=s),v&1&&l!==(l=g[0].attributes.disabled)&&(t.disabled=l),v&1&&f!==(f=g[4].title+"")&&set_data(d,f)},d(g){g&&detach(t),g&&detach(u),g&&detach(c),h=!1,p()}}}function create_fragment$6(i){let t,e=i[0].extra.items,r=[];for(let n=0;n<e.length;n+=1)r[n]=create_each_block$4(get_each_context$4(i,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=empty()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);t=empty()},m(n,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,o);insert_hydration(n,t,o)},p(n,[o]){if(o&3){e=n[0].extra.items;let a;for(a=0;a<e.length;a+=1){const s=get_each_context$4(n,e,a);r[a]?r[a].p(s,o):(r[a]=create_each_block$4(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=e.length}},i:noop,o:noop,d(n){destroy_each(r,n),n&&detach(t)}}}function instance$6(i,t,e){let{field:r}=t;const n=createEventDispatcher();let o=[];r.extra.items.length>0&&(r.extra.items.map(s=>{s.checked&&(o=[...o,s.value],e(0,r.value=r.value?[...r.value,s.value]:o,r))}),n("changeValue",{name:r.name,value:o}));const a=async s=>{s.currentTarget.value,r.extra.items.length>0&&(r.extra.items.map(l=>{l.name===s.currentTarget.name&&(s.currentTarget.checked?o=[...o,l.value]:o=o.filter(u=>u!==l.value))}),n("changeValue",{name:r.name,value:o}))};return i.$$set=s=>{"field"in s&&e(0,r=s.field)},[r,a]}class Checkbox extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$6,create_fragment$6,safe_not_equal,{field:0})}}function get_each_context$3(i,t,e){const r=i.slice();return r[3]=t[e],r[5]=e,r}function create_each_block$3(i){let t,e,r,n,o,a,s,l,u,c=i[3].title+"",f,d,h;return{c(){t=element$1("input"),l=space(),u=element$1("span"),f=text(c),this.h()},l(p){t=claim_element(p,"INPUT",{type:!0,class:!0,id:!0,name:!0}),l=claim_space(p),u=claim_element(p,"SPAN",{});var g=children(u);f=claim_text(g,c),g.forEach(detach),this.h()},h(){var p;attr(t,"type",e=i[0].type),attr(t,"class",r=(p=i[0].attributes.classes)==null?void 0:p.join(" ")),attr(t,"id",n=i[3].id),attr(t,"name",o=i[0].name),t.value=a=i[3].value,t.checked=s=i[3].value===i[0].value},m(p,g){insert_hydration(p,t,g),insert_hydration(p,l,g),insert_hydration(p,u,g),append_hydration(u,f),d||(h=listen(t,"input",i[1]),d=!0)},p(p,g){var v;g&1&&e!==(e=p[0].type)&&attr(t,"type",e),g&1&&r!==(r=(v=p[0].attributes.classes)==null?void 0:v.join(" "))&&attr(t,"class",r),g&1&&n!==(n=p[3].id)&&attr(t,"id",n),g&1&&o!==(o=p[0].name)&&attr(t,"name",o),g&1&&a!==(a=p[3].value)&&t.value!==a&&(t.value=a),g&1&&s!==(s=p[3].value===p[0].value)&&(t.checked=s),g&1&&c!==(c=p[3].title+"")&&set_data(f,c)},d(p){p&&detach(t),p&&detach(l),p&&detach(u),d=!1,h()}}}function create_fragment$5(i){let t,e=i[0].extra.items,r=[];for(let n=0;n<e.length;n+=1)r[n]=create_each_block$3(get_each_context$3(i,e,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=empty()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);t=empty()},m(n,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,o);insert_hydration(n,t,o)},p(n,[o]){if(o&3){e=n[0].extra.items;let a;for(a=0;a<e.length;a+=1){const s=get_each_context$3(n,e,a);r[a]?r[a].p(s,o):(r[a]=create_each_block$3(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=e.length}},i:noop,o:noop,d(n){destroy_each(r,n),n&&detach(t)}}}function instance$5(i,t,e){let{field:r}=t;const n=createEventDispatcher(),o=async a=>{const s=a.currentTarget.value;n("changeValue",{name:r.name,value:s})};return i.$$set=a=>{"field"in a&&e(0,r=a.field)},[r,o]}class Radio extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$5,create_fragment$5,safe_not_equal,{field:0})}}const AutoComplete_svelte_svelte_type_style_lang="";function get_each_context$2(i,t,e){const r=i.slice();return r[14]=t[e],r}function get_each_context_1(i,t,e){const r=i.slice();return r[14]=t[e],r}function create_each_block_1(i){let t,e,r=i[14].title+"",n,o,a,s,l,u,c;return{c(){t=element$1("div"),e=element$1("span"),n=text(r),o=space(),a=element$1("span"),s=text("x"),l=space(),this.h()},l(f){t=claim_element(f,"DIV",{class:!0});var d=children(t);e=claim_element(d,"SPAN",{});var h=children(e);n=claim_text(h,r),h.forEach(detach),o=claim_space(d),a=claim_element(d,"SPAN",{class:!0});var p=children(a);s=claim_text(p,"x"),p.forEach(detach),l=claim_space(d),d.forEach(detach),this.h()},h(){attr(a,"class","deselect svelte-1m9l8b1"),attr(t,"class","item svelte-1m9l8b1")},m(f,d){insert_hydration(f,t,d),append_hydration(t,e),append_hydration(e,n),append_hydration(t,o),append_hydration(t,a),append_hydration(a,s),append_hydration(t,l),u||(c=listen(a,"click",function(){is_function(i[7](i[14]))&&i[7](i[14]).apply(this,arguments)}),u=!0)},p(f,d){i=f,d&8&&r!==(r=i[14].title+"")&&set_data(n,r)},d(f){f&&detach(t),u=!1,c()}}}function create_if_block$2(i){let t,e,r,n,o,a,s,l=i[2],u=[];for(let c=0;c<l.length;c+=1)u[c]=create_each_block$2(get_each_context$2(i,l,c));return{c(){t=element$1("div"),e=element$1("ul");for(let c=0;c<u.length;c+=1)u[c].c();r=space(),n=element$1("li"),o=text("Close"),this.h()},l(c){t=claim_element(c,"DIV",{class:!0});var f=children(t);e=claim_element(f,"UL",{class:!0});var d=children(e);for(let p=0;p<u.length;p+=1)u[p].l(d);r=claim_space(d),n=claim_element(d,"LI",{class:!0});var h=children(n);o=claim_text(h,"Close"),h.forEach(detach),d.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"class","done svelte-1m9l8b1"),attr(e,"class","svelte-1m9l8b1"),attr(t,"class","list-items svelte-1m9l8b1")},m(c,f){insert_hydration(c,t,f),append_hydration(t,e);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(e,null);append_hydration(e,r),append_hydration(e,n),append_hydration(n,o),a||(s=[listen(n,"click",i[10]),action_destroyer(clickOutside.call(null,t)),listen(t,"click_outside",i[8])],a=!0)},p(c,f){if(f&68){l=c[2];let d;for(d=0;d<l.length;d+=1){const h=get_each_context$2(c,l,d);u[d]?u[d].p(h,f):(u[d]=create_each_block$2(h),u[d].c(),u[d].m(e,r))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}},d(c){c&&detach(t),destroy_each(u,c),a=!1,run_all(s)}}}function create_each_block$2(i){let t,e=i[14].title+"",r,n,o;return{c(){t=element$1("li"),r=text(e),this.h()},l(a){t=claim_element(a,"LI",{class:!0});var s=children(t);r=claim_text(s,e),s.forEach(detach),this.h()},h(){attr(t,"class","svelte-1m9l8b1")},m(a,s){insert_hydration(a,t,s),append_hydration(t,r),n||(o=listen(t,"click",function(){is_function(i[6](i[14]))&&i[6](i[14]).apply(this,arguments)}),n=!0)},p(a,s){i=a,s&4&&e!==(e=i[14].title+"")&&set_data(r,e)},d(a){a&&detach(t),n=!1,o()}}}function create_fragment$4(i){let t,e,r,n,o,a,s,l,u,c,f,d,h=i[3],p=[];for(let v=0;v<h.length;v+=1)p[v]=create_each_block_1(get_each_context_1(i,h,v));let g=i[2].length&&i[4]&&create_if_block$2(i);return{c(){t=element$1("div"),e=element$1("div");for(let v=0;v<p.length;v+=1)p[v].c();r=space(),n=element$1("input"),c=space(),g&&g.c(),this.h()},l(v){t=claim_element(v,"DIV",{class:!0});var m=children(t);e=claim_element(m,"DIV",{class:!0});var y=children(e);for(let b=0;b<p.length;b+=1)p[b].l(y);y.forEach(detach),r=claim_space(m),n=claim_element(m,"INPUT",{type:!0,id:!0,class:!0,autocorrect:!0,autocomplete:!0,placeholder:!0}),c=claim_space(m),g&&g.l(m),m.forEach(detach),this.h()},h(){var v;attr(e,"class","selected-items svelte-1m9l8b1"),attr(n,"type","text"),attr(n,"id",o=i[0].attributes.id),attr(n,"class",a=null_to_empty((v=i[0].attributes.classes)==null?void 0:v.join(" "))+" svelte-1m9l8b1"),attr(n,"autocorrect",s=i[0].attributes.autocorrect),attr(n,"autocomplete",l=i[0].attributes.autocomplete),attr(n,"placeholder",u=i[0].attributes.placeholder),attr(t,"class","autocomplete-wrapper svelte-1m9l8b1")},m(v,m){insert_hydration(v,t,m),append_hydration(t,e);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(e,null);append_hydration(t,r),append_hydration(t,n),set_input_value(n,i[1]),append_hydration(t,c),g&&g.m(t,null),f||(d=[listen(n,"keyup",i[5]),listen(n,"input",i[9])],f=!0)},p(v,[m]){var y;if(m&136){h=v[3];let b;for(b=0;b<h.length;b+=1){const C=get_each_context_1(v,h,b);p[b]?p[b].p(C,m):(p[b]=create_each_block_1(C),p[b].c(),p[b].m(e,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=h.length}m&1&&o!==(o=v[0].attributes.id)&&attr(n,"id",o),m&1&&a!==(a=null_to_empty((y=v[0].attributes.classes)==null?void 0:y.join(" "))+" svelte-1m9l8b1")&&attr(n,"class",a),m&1&&s!==(s=v[0].attributes.autocorrect)&&attr(n,"autocorrect",s),m&1&&l!==(l=v[0].attributes.autocomplete)&&attr(n,"autocomplete",l),m&1&&u!==(u=v[0].attributes.placeholder)&&attr(n,"placeholder",u),m&2&&n.value!==v[1]&&set_input_value(n,v[1]),v[2].length&&v[4]?g?g.p(v,m):(g=create_if_block$2(v),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i:noop,o:noop,d(v){v&&detach(t),destroy_each(p,v),g&&g.d(),f=!1,run_all(d)}}}function instance$4(i,t,e){let{field:r}=t;const n=createEventDispatcher();let o=null,a=[],s=[],l=[],u=!1,c=0;r.extra&&(r.extra.loadItemes&&(a=r.extra.loadItemes),r.extra.filter_length&&(c=r.extra.filter_length));const f=m=>{const y=m.currentTarget.value;if(y.length>c){const b=a.filter(C=>C.title.toLowerCase().includes(y.toLowerCase()));b.length?e(2,s=b):e(2,s=[]),s.length?e(4,u=!0):e(4,u=!1)}else e(4,u=!1)},d=m=>y=>{e(1,o=null),a=a.filter(b=>b.value!==m.value),e(2,s=s.filter(b=>b.value!==m.value)),e(3,l=[...l,m]),a.length||e(4,u=!1),n("changeValue",{name:r.name,value:l})},h=m=>async y=>{e(3,l=await l.filter(b=>b.value!==m.value)),a=[...a,m],e(2,s=[...s,m]),n("changeValue",{name:r.name,value:l})},p=m=>{e(4,u=!1)};function g(){o=this.value,e(1,o)}const v=()=>{e(4,u=!1),e(1,o=null)};return i.$$set=m=>{"field"in m&&e(0,r=m.field)},[r,o,s,l,u,f,d,h,p,g,v]}class AutoComplete extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$4,create_fragment$4,safe_not_equal,{field:0})}}function create_if_block$1(i){let t,e=i[0].attributes.label&&create_if_block_1$1(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,n){r[0].attributes.label?e?e.p(r,n):(e=create_if_block_1$1(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(r){e&&e.d(r),r&&detach(t)}}}function create_if_block_1$1(i){let t,e=i[0].attributes.label+"",r,n;return{c(){t=element$1("label"),r=text(e),this.h()},l(o){t=claim_element(o,"LABEL",{for:!0,class:!0});var a=children(t);r=claim_text(a,e),a.forEach(detach),this.h()},h(){attr(t,"for",n=i[0].attributes.id),attr(t,"class","label")},m(o,a){insert_hydration(o,t,a),append_hydration(t,r)},p(o,a){a&1&&e!==(e=o[0].attributes.label+"")&&set_data(r,e),a&1&&n!==(n=o[0].attributes.id)&&attr(t,"for",n)},d(o){o&&detach(t)}}}function create_fragment$3(i){let t,e=i[0].attributes&&create_if_block$1(i);return{c(){e&&e.c(),t=empty()},l(r){e&&e.l(r),t=empty()},m(r,n){e&&e.m(r,n),insert_hydration(r,t,n)},p(r,[n]){r[0].attributes?e?e.p(r,n):(e=create_if_block$1(r),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:noop,o:noop,d(r){e&&e.d(r),r&&detach(t)}}}function instance$3(i,t,e){let{field:r}=t;return i.$$set=n=>{"field"in n&&e(0,r=n.field)},[r]}class Label extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$3,create_fragment$3,safe_not_equal,{field:0})}}function get_each_context$1(i,t,e){const r=i.slice();return r[16]=t[e],r}function create_if_block(i){let t,e,r,n;const o=[create_if_block_1,create_else_block],a=[];function s(l,u){return l[5]?0:1}return t=s(i),e=a[t]=o[t](i),{c(){e.c(),r=empty()},l(l){e.l(l),r=empty()},m(l,u){a[t].m(l,u),insert_hydration(l,r,u),n=!0},p(l,u){e.p(l,u)},i(l){n||(transition_in(e),n=!0)},o(l){transition_out(e),n=!1},d(l){a[t].d(l),l&&detach(r)}}}function create_else_block(i){let t,e,r,n=i[0].text+"",o,a,s,l,u=i[1].text+"",c,f,d,h,p,g=i[3].fields,v=[];for(let y=0;y<g.length;y+=1)v[y]=create_each_block$1(get_each_context$1(i,g,y));const m=y=>transition_out(v[y],1,1,()=>{v[y]=null});return{c(){t=element$1("form");for(let y=0;y<v.length;y+=1)v[y].c();e=space(),r=element$1("button"),o=text(n),s=space(),l=element$1("button"),c=text(u),this.h()},l(y){t=claim_element(y,"FORM",{});var b=children(t);for(let w=0;w<v.length;w+=1)v[w].l(b);e=claim_space(b),r=claim_element(b,"BUTTON",{type:!0,class:!0});var C=children(r);o=claim_text(C,n),C.forEach(detach),s=claim_space(b),l=claim_element(b,"BUTTON",{type:!0,class:!0});var x=children(l);c=claim_text(x,u),x.forEach(detach),b.forEach(detach),this.h()},h(){var y,b,C,x;attr(r,"type","submit"),attr(r,"class",a=i[0].classes&&((y=i[0].classes)!=null&&y.length)?(b=i[0].classes)==null?void 0:b.join(" "):null),attr(l,"type","reset"),attr(l,"class",f=i[1].classes&&((C=i[1].classes)!=null&&C.length)?(x=i[1].classes)==null?void 0:x.join(" "):null)},m(y,b){insert_hydration(y,t,b);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(t,null);append_hydration(t,e),append_hydration(t,r),append_hydration(r,o),append_hydration(t,s),append_hydration(t,l),append_hydration(l,c),i[12](t),d=!0,h||(p=[listen(t,"submit",prevent_default(i[7])),listen(t,"reset",prevent_default(i[8]))],h=!0)},p(y,b){var C,x,w,P;if(b&88){g=y[3].fields;let S;for(S=0;S<g.length;S+=1){const O=get_each_context$1(y,g,S);v[S]?(v[S].p(O,b),transition_in(v[S],1)):(v[S]=create_each_block$1(O),v[S].c(),transition_in(v[S],1),v[S].m(t,e))}for(group_outros(),S=g.length;S<v.length;S+=1)m(S);check_outros()}(!d||b&1)&&n!==(n=y[0].text+"")&&set_data(o,n),(!d||b&1&&a!==(a=y[0].classes&&((C=y[0].classes)!=null&&C.length)?(x=y[0].classes)==null?void 0:x.join(" "):null))&&attr(r,"class",a),(!d||b&2)&&u!==(u=y[1].text+"")&&set_data(c,u),(!d||b&2&&f!==(f=y[1].classes&&((w=y[1].classes)!=null&&w.length)?(P=y[1].classes)==null?void 0:P.join(" "):null))&&attr(l,"class",f)},i(y){if(!d){for(let b=0;b<g.length;b+=1)transition_in(v[b]);d=!0}},o(y){v=v.filter(Boolean);for(let b=0;b<v.length;b+=1)transition_out(v[b]);d=!1},d(y){y&&detach(t),destroy_each(v,y),i[12](null),h=!1,run_all(p)}}}function create_if_block_1(i){let t,e;return t=new Error$1({props:{$$slots:{default:[create_default_slot$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&524288&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_else_block_1(i){let t,e,r,n,o,a;t=new Label({props:{field:i[16]}});var s=i[4](i[16]);function l(u){return{props:{field:u[16]}}}return s&&(r=construct_svelte_component(s,l(i)),r.$on("changeValue",i[6])),o=new Dirty({props:{field:i[16]}}),{c(){create_component(t.$$.fragment),e=space(),r&&create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment)},l(u){claim_component(t.$$.fragment,u),e=claim_space(u),r&&claim_component(r.$$.fragment,u),n=claim_space(u),claim_component(o.$$.fragment,u)},m(u,c){mount_component(t,u,c),insert_hydration(u,e,c),r&&mount_component(r,u,c),insert_hydration(u,n,c),mount_component(o,u,c),a=!0},p(u,c){const f={};c&8&&(f.field=u[16]),t.$set(f);const d={};if(c&8&&(d.field=u[16]),c&8&&s!==(s=u[4](u[16]))){if(r){group_outros();const p=r;transition_out(p.$$.fragment,1,0,()=>{destroy_component(p,1)}),check_outros()}s?(r=construct_svelte_component(s,l(u)),r.$on("changeValue",u[6]),create_component(r.$$.fragment),transition_in(r.$$.fragment,1),mount_component(r,n.parentNode,n)):r=null}else s&&r.$set(d);const h={};c&8&&(h.field=u[16]),o.$set(h)},i(u){a||(transition_in(t.$$.fragment,u),r&&transition_in(r.$$.fragment,u),transition_in(o.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),r&&transition_out(r.$$.fragment,u),transition_out(o.$$.fragment,u),a=!1},d(u){destroy_component(t,u),u&&detach(e),r&&destroy_component(r,u),u&&detach(n),destroy_component(o,u)}}}function create_if_block_2(i){let t,e;return t=new Tag({props:{prefix:i[16].prefix,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment)},l(r){claim_component(t.$$.fragment,r)},m(r,n){mount_component(t,r,n),e=!0},p(r,n){const o={};n&8&&(o.prefix=r[16].prefix),n&524296&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){e||(transition_in(t.$$.fragment,r),e=!0)},o(r){transition_out(t.$$.fragment,r),e=!1},d(r){destroy_component(t,r)}}}function create_default_slot_1$1(i){let t,e,r,n,o,a;t=new Label({props:{field:i[16]}});var s=i[4](i[16]);function l(u){return{props:{field:u[16]}}}return s&&(r=construct_svelte_component(s,l(i)),r.$on("changeValue",i[6])),o=new Dirty({props:{field:i[16]}}),{c(){create_component(t.$$.fragment),e=space(),r&&create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment)},l(u){claim_component(t.$$.fragment,u),e=claim_space(u),r&&claim_component(r.$$.fragment,u),n=claim_space(u),claim_component(o.$$.fragment,u)},m(u,c){mount_component(t,u,c),insert_hydration(u,e,c),r&&mount_component(r,u,c),insert_hydration(u,n,c),mount_component(o,u,c),a=!0},p(u,c){const f={};c&8&&(f.field=u[16]),t.$set(f);const d={};if(c&8&&(d.field=u[16]),c&8&&s!==(s=u[4](u[16]))){if(r){group_outros();const p=r;transition_out(p.$$.fragment,1,0,()=>{destroy_component(p,1)}),check_outros()}s?(r=construct_svelte_component(s,l(u)),r.$on("changeValue",u[6]),create_component(r.$$.fragment),transition_in(r.$$.fragment,1),mount_component(r,n.parentNode,n)):r=null}else s&&r.$set(d);const h={};c&8&&(h.field=u[16]),o.$set(h)},i(u){a||(transition_in(t.$$.fragment,u),r&&transition_in(r.$$.fragment,u),transition_in(o.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),r&&transition_out(r.$$.fragment,u),transition_out(o.$$.fragment,u),a=!1},d(u){destroy_component(t,u),u&&detach(e),r&&destroy_component(r,u),u&&detach(n),destroy_component(o,u)}}}function create_each_block$1(i){let t,e,r,n;const o=[create_if_block_2,create_else_block_1],a=[];function s(l,u){var c;return(c=l[16].prefix)!=null&&c.tag?0:1}return t=s(i),e=a[t]=o[t](i),{c(){e.c(),r=empty()},l(l){e.l(l),r=empty()},m(l,u){a[t].m(l,u),insert_hydration(l,r,u),n=!0},p(l,u){let c=t;t=s(l),t===c?a[t].p(l,u):(group_outros(),transition_out(a[c],1,1,()=>{a[c]=null}),check_outros(),e=a[t],e?e.p(l,u):(e=a[t]=o[t](l),e.c()),transition_in(e,1),e.m(r.parentNode,r))},i(l){n||(transition_in(e),n=!0)},o(l){transition_out(e),n=!1},d(l){a[t].d(l),l&&detach(r)}}}function create_default_slot$1(i){let t,e,r,n;return{c(){t=element$1("p"),e=element$1("code"),r=element$1("b"),n=text(`Error! Detect duplicate fields(name or id attributes), make sure you put unique name
						and id for each field.`)},l(o){t=claim_element(o,"P",{});var a=children(t);e=claim_element(a,"CODE",{});var s=children(e);r=claim_element(s,"B",{});var l=children(r);n=claim_text(l,`Error! Detect duplicate fields(name or id attributes), make sure you put unique name
						and id for each field.`),l.forEach(detach),s.forEach(detach),a.forEach(detach)},m(o,a){insert_hydration(o,t,a),append_hydration(t,e),append_hydration(e,r),append_hydration(r,n)},p:noop,d(o){o&&detach(t)}}}function create_fragment$2(i){let t,e,r=i[3]&&create_if_block(i);return{c(){r&&r.c(),t=empty()},l(n){r&&r.l(n),t=empty()},m(n,o){r&&r.m(n,o),insert_hydration(n,t,o),e=!0},p(n,[o]){n[3]?r?(r.p(n,o),o&8&&transition_in(r,1)):(r=create_if_block(n),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(n){e||(transition_in(r),e=!0)},o(n){transition_out(r),e=!1},d(n){r&&r.d(n),n&&detach(t)}}}function instance$2(i,t,e){const r=[{type:"input",component:Input},{type:"select",component:Select},{type:"file",component:File},{type:"textarea",component:Textarea},{type:"checkbox",component:Checkbox},{type:"radio",component:Radio},{type:"autocomplete",component:AutoComplete}],n=({type:b})=>{var C;return(C=r.find(x=>x.type===b))==null?void 0:C.component};let{fields:o=[]}=t,{btnSubmit:a={text:"Submit"}}=t,{btnReset:s={text:"Reset"}}=t,{form_name:l=""}=t,{realtime:u=!1}=t,c;const f=createEventDispatcher();let d={},h={form_name:l,fields:o,values:d,valid:!0};const p=isFieldDuplicated(o);onMount(async()=>{await Promise.all(o.map(async C=>(d[`${C.name}`]=C.value??null,C=await preprocess_and_validate_field(h,C,d),C)));const b=o.find(C=>{if(C.validation)return C.validation.dirty===!0});e(3,h={...h,fields:o,values:d,valid:!b})}),storeForms.save(h);const g=async b=>{const C=h.values,x=await Promise.all(h.fields.map(async P=>(P.name===b.detail.name&&(C.touched=P.name,P.value=b.detail.value,C[`${P.name}`]=b.detail.value),P=await preprocess_and_validate_field(h,P,C),P))),w=x.find(P=>{if(P.validation)return P.validation.dirty===!0});e(3,h={...h,fields:x,values:C,valid:!w}),storeForms.save(h),u&&f("update",{...h.values,valid:h.valid})},v=async()=>{const b=await getValues(l);f("submit",{...b,valid:h.valid})},m=async()=>{Object.keys(d).forEach(b=>{d[b]=null}),await storeForms.resetValues(l),e(3,h.values=d,h)};function y(b){binding_callbacks[b?"unshift":"push"](()=>{c=b,e(2,c)})}return i.$$set=b=>{"fields"in b&&e(9,o=b.fields),"btnSubmit"in b&&e(0,a=b.btnSubmit),"btnReset"in b&&e(1,s=b.btnReset),"form_name"in b&&e(10,l=b.form_name),"realtime"in b&&e(11,u=b.realtime)},[a,s,c,h,n,p,g,v,m,o,l,u,y]}class Formly extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$2,create_fragment$2,safe_not_equal,{fields:9,btnSubmit:0,btnReset:1,form_name:10,realtime:11})}}function create_fragment$1(i){let t,e,r,n,o,a;return o=new Formly({props:{form_name,fields:i[0],btnSubmit:{text:"Submit alter",classes:["btn","btn-primary"]},btnReset:{text:"Reset alter",classes:["btn","btn-secondary"]}}}),o.$on("submit",i[1]),{c(){t=element$1("div"),e=element$1("h1"),r=text("Formly"),n=space(),create_component(o.$$.fragment),this.h()},l(s){t=claim_element(s,"DIV",{id:!0,style:!0});var l=children(t);e=claim_element(l,"H1",{});var u=children(e);r=claim_text(u,"Formly"),u.forEach(detach),n=claim_space(l),claim_component(o.$$.fragment,l),l.forEach(detach),this.h()},h(){attr(t,"id","forms"),set_style(t,"display","none"),set_style(t,"flex-direction","column"),set_style(t,"align-items","center")},m(s,l){insert_hydration(s,t,l),append_hydration(t,e),append_hydration(e,r),append_hydration(t,n),mount_component(o,t,null),a=!0},p:noop,i(s){a||(transition_in(o.$$.fragment,s),a=!0)},o(s){transition_out(o.$$.fragment,s),a=!1},d(s){s&&detach(t),destroy_component(o)}}}const form_name="formly_usage";async function customRule2(){return!0}function instance$1(i){const t=[{type:"input",name:"firstname",attributes:{type:"text",id:"firstname",classes:["form-control"],placeholder:"First name"},rules:["required","min:3","max:10"],messages:{required:"The firstname is required",min:"Your first name is too short min=3",max:"Your first name is too long max=10"}},{type:"input",name:"lastname",attributes:{id:"lastname",placeholder:"First name"},rules:["required",{name:"notEqual",fnc:r},{name:"customRule2",fnc:customRule2}],messages:{notEqual:"Last name not equal to First name",customRule2:"foo bar"}},{type:"input",name:"companyname",attributes:{type:"text",id:"companyname",classes:["form-control"],placeholder:"Company Name"}},{type:"input",name:"accountid",attributes:{type:"text",id:"accountid",classes:["form-control"],placeholder:"Account ID"}},{type:"input",name:"address1",attributes:{type:"text",id:"address1",classes:["form-control"],placeholder:"Address 1"}},{type:"input",name:"address2",attributes:{type:"text",id:"address2",classes:["form-control"],placeholder:"Address 2"}},{type:"input",name:"city",attributes:{type:"text",id:"city",classes:["form-control"],placeholder:"City"}},{type:"input",name:"state",attributes:{type:"text",id:"state",classes:["form-control"],placeholder:"State"}},{type:"input",name:"zip_code",attributes:{type:"text",id:"zip_code",classes:["form-control"],placeholder:"Zip Code"}},{type:"input",name:"name-field-tel",value:"",attributes:{type:"tel",id:"id-field-tel",classes:["form-control"],label:"Phone Number",placeholder:"(555)555-1212",disabled:!1,readonly:!1}},{type:"input",name:"email",attributes:{type:"text",id:"email",classes:["form-control-email"],placeholder:"Email"},rules:["required","email"],messages:{required:"The email is required",email:"Please enter a valid email"}}],e=({detail:n})=>{console.log("values:",n)};async function r(){const n=await getValues(form_name);return console.log("values:",n),n.firstname!==n.lastname2}return[t,e]}class Formly_1 extends SvelteComponent{constructor(t){super(),init$1(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}const _page_svelte_svelte_type_style_lang="";function get_each_context(i,t,e){const r=i.slice();return r[3]=t[e],r}function create_default_slot_7(i){let t=i[3].label+"",e;return{c(){e=text(t)},l(r){e=claim_text(r,t)},m(r,n){insert_hydration(r,e,n)},p:noop,d(r){r&&detach(e)}}}function create_each_block(i){let t,e;function r(){return i[2](i[3])}return t=new Button$2({props:{$$slots:{default:[create_default_slot_7]},$$scope:{ctx:i}}}),t.$on("click",r),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,o){mount_component(t,n,o),e=!0},p(n,o){i=n;const a={};o&64&&(a.$$scope={dirty:o,ctx:i}),t.$set(a)},i(n){e||(transition_in(t.$$.fragment,n),e=!0)},o(n){transition_out(t.$$.fragment,n),e=!1},d(n){destroy_component(t,n)}}}function create_default_slot_6(i){let t;return{c(){t=text("Views")},l(e){t=claim_text(e,"Views")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_5(i){let t;return{c(){t=text("My Views")},l(e){t=claim_text(e,"My Views")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_4(i){let t;return{c(){t=text("Public Views")},l(e){t=claim_text(e,"Public Views")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_3(i){let t;return{c(){t=text("New View")},l(e){t=claim_text(e,"New View")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_2(i){let t;return{c(){t=text("Edit View")},l(e){t=claim_text(e,"Edit View")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot_1(i){let t;return{c(){t=text("Delete View")},l(e){t=claim_text(e,"Delete View")},m(e,r){insert_hydration(e,t,r)},d(e){e&&detach(t)}}}function create_default_slot(i){let t,e,r,n,o,a,s,l,u,c,f,d;return t=new Option({props:{value:"",$$slots:{default:[create_default_slot_6]},$$scope:{ctx:i}}}),r=new Option({props:{value:"my_views",$$slots:{default:[create_default_slot_5]},$$scope:{ctx:i}}}),o=new Option({props:{value:"public_views",$$slots:{default:[create_default_slot_4]},$$scope:{ctx:i}}}),s=new Option({props:{value:"new_view",$$slots:{default:[create_default_slot_3]},$$scope:{ctx:i}}}),u=new Option({props:{value:"edit_view",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:i}}}),f=new Option({props:{value:"delete_view",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:i}}}),{c(){create_component(t.$$.fragment),e=space(),create_component(r.$$.fragment),n=space(),create_component(o.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),c=space(),create_component(f.$$.fragment)},l(h){claim_component(t.$$.fragment,h),e=claim_space(h),claim_component(r.$$.fragment,h),n=claim_space(h),claim_component(o.$$.fragment,h),a=claim_space(h),claim_component(s.$$.fragment,h),l=claim_space(h),claim_component(u.$$.fragment,h),c=claim_space(h),claim_component(f.$$.fragment,h)},m(h,p){mount_component(t,h,p),insert_hydration(h,e,p),mount_component(r,h,p),insert_hydration(h,n,p),mount_component(o,h,p),insert_hydration(h,a,p),mount_component(s,h,p),insert_hydration(h,l,p),mount_component(u,h,p),insert_hydration(h,c,p),mount_component(f,h,p),d=!0},p(h,p){const g={};p&64&&(g.$$scope={dirty:p,ctx:h}),t.$set(g);const v={};p&64&&(v.$$scope={dirty:p,ctx:h}),r.$set(v);const m={};p&64&&(m.$$scope={dirty:p,ctx:h}),o.$set(m);const y={};p&64&&(y.$$scope={dirty:p,ctx:h}),s.$set(y);const b={};p&64&&(b.$$scope={dirty:p,ctx:h}),u.$set(b);const C={};p&64&&(C.$$scope={dirty:p,ctx:h}),f.$set(C)},i(h){d||(transition_in(t.$$.fragment,h),transition_in(r.$$.fragment,h),transition_in(o.$$.fragment,h),transition_in(s.$$.fragment,h),transition_in(u.$$.fragment,h),transition_in(f.$$.fragment,h),d=!0)},o(h){transition_out(t.$$.fragment,h),transition_out(r.$$.fragment,h),transition_out(o.$$.fragment,h),transition_out(s.$$.fragment,h),transition_out(u.$$.fragment,h),transition_out(f.$$.fragment,h),d=!1},d(h){destroy_component(t,h),h&&detach(e),destroy_component(r,h),h&&detach(n),destroy_component(o,h),h&&detach(a),destroy_component(s,h),h&&detach(l),destroy_component(u,h),h&&detach(c),destroy_component(f,h)}}}function create_fragment(i){let t,e,r,n,o,a,s,l,u,c,f,d,h,p,g,v,m,y,b,C,x=i[0],w=[];for(let S=0;S<x.length;S+=1)w[S]=create_each_block(get_each_context(i,x,S));const P=S=>transition_out(w[S],1,1,()=>{w[S]=null});return o=new Select$1({props:{class:"shaped-filled",variant:"outlined",$$slots:{default:[create_default_slot]},$$scope:{ctx:i}}}),u=new QuoteInfo({}),f=new Client({}),h=new Tests({}),g=new QuoteItemsGrid({}),m=new Search({}),b=new Formly_1({}),{c(){t=element$1("div"),e=element$1("div");for(let S=0;S<w.length;S+=1)w[S].c();r=space(),n=element$1("div"),create_component(o.$$.fragment),a=space(),s=element$1("hr"),l=space(),create_component(u.$$.fragment),c=space(),create_component(f.$$.fragment),d=space(),create_component(h.$$.fragment),p=space(),create_component(g.$$.fragment),v=space(),create_component(m.$$.fragment),y=space(),create_component(b.$$.fragment),this.h()},l(S){t=claim_element(S,"DIV",{style:!0,class:!0});var O=children(t);e=claim_element(O,"DIV",{class:!0});var E=children(e);for(let R=0;R<w.length;R+=1)w[R].l(E);E.forEach(detach),r=claim_space(O),n=claim_element(O,"DIV",{style:!0,class:!0});var D=children(n);claim_component(o.$$.fragment,D),D.forEach(detach),O.forEach(detach),a=claim_space(S),s=claim_element(S,"HR",{class:!0}),l=claim_space(S),claim_component(u.$$.fragment,S),c=claim_space(S),claim_component(f.$$.fragment,S),d=claim_space(S),claim_component(h.$$.fragment,S),p=claim_space(S),claim_component(g.$$.fragment,S),v=claim_space(S),claim_component(m.$$.fragment,S),y=claim_space(S),claim_component(b.$$.fragment,S),this.h()},h(){attr(e,"class","svelte-96wmxi"),set_style(n,"margin-left","10px"),attr(n,"class","svelte-96wmxi"),set_style(t,"display","flex"),set_style(t,"justify-content","space-between"),set_style(t,"align-items","center"),attr(t,"class","svelte-96wmxi"),attr(s,"class","svelte-96wmxi")},m(S,O){insert_hydration(S,t,O),append_hydration(t,e);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(e,null);append_hydration(t,r),append_hydration(t,n),mount_component(o,n,null),insert_hydration(S,a,O),insert_hydration(S,s,O),insert_hydration(S,l,O),mount_component(u,S,O),insert_hydration(S,c,O),mount_component(f,S,O),insert_hydration(S,d,O),mount_component(h,S,O),insert_hydration(S,p,O),mount_component(g,S,O),insert_hydration(S,v,O),mount_component(m,S,O),insert_hydration(S,y,O),mount_component(b,S,O),C=!0},p(S,[O]){if(O&3){x=S[0];let D;for(D=0;D<x.length;D+=1){const R=get_each_context(S,x,D);w[D]?(w[D].p(R,O),transition_in(w[D],1)):(w[D]=create_each_block(R),w[D].c(),transition_in(w[D],1),w[D].m(e,null))}for(group_outros(),D=x.length;D<w.length;D+=1)P(D);check_outros()}const E={};O&64&&(E.$$scope={dirty:O,ctx:S}),o.$set(E)},i(S){if(!C){for(let O=0;O<x.length;O+=1)transition_in(w[O]);transition_in(o.$$.fragment,S),transition_in(u.$$.fragment,S),transition_in(f.$$.fragment,S),transition_in(h.$$.fragment,S),transition_in(g.$$.fragment,S),transition_in(m.$$.fragment,S),transition_in(b.$$.fragment,S),C=!0}},o(S){w=w.filter(Boolean);for(let O=0;O<w.length;O+=1)transition_out(w[O]);transition_out(o.$$.fragment,S),transition_out(u.$$.fragment,S),transition_out(f.$$.fragment,S),transition_out(h.$$.fragment,S),transition_out(g.$$.fragment,S),transition_out(m.$$.fragment,S),transition_out(b.$$.fragment,S),C=!1},d(S){S&&detach(t),destroy_each(w,S),destroy_component(o),S&&detach(a),S&&detach(s),S&&detach(l),destroy_component(u,S),S&&detach(c),destroy_component(f,S),S&&detach(d),destroy_component(h,S),S&&detach(p),destroy_component(g,S),S&&detach(v),destroy_component(m,S),S&&detach(y),destroy_component(b,S)}}}function instance(i){const t=[{id:"quote-info",label:"Quote Info"},{id:"client",label:"Client"},{id:"ag-grid",label:"Items"},{id:"search",label:"Search"},{id:"tests",label:"Tests"},{id:"forms",label:"Formly"}];function e(n){t.forEach(o=>{const a=document.getElementById(o.id);o.id===n?a.style.display="flex":a.style.display="none"})}return[t,e,n=>e(n.id)]}class Page extends SvelteComponent{constructor(t){super(),init$1(this,t,instance,create_fragment,safe_not_equal,{})}}export{Page as default};
